<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="3">
  <HTTPTask id="13" hostname="qa.wmxbolt.wescodist.com" path="/wmx/login.faces" url="https://qa.wmxbolt.wescodist.com/wmx/login.faces" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="Primary" encodingType="ANSI" startDateTime="2024-11-07T09:35:45.728+00:00" startTime="2038" endTime="2163" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="34" waitTime="87" receiveTime="3" sslNegotiateTime="-1" responseBodySize="448">
    <HTTPRequest method="POST">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVk</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214Lw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tdXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9LWWFTUlBraktVSzZBaG44M24tTmtiOjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2Vi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Mzgw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UE9TVCAvd214L2xvZ2luLmZhY2VzIEhUVFAvMS4xDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZA0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUNClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC8NClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvS1lhU1JQa2pLVUs2QWhuODNuLU5rYjoxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KQ29udGVudC1MZW5ndGg6IDM4MA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="currentLoginPage" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2Vi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MDAwMG9LWWFTUlBraktVSzZBaG44M24tTmtiOjFoYTdvNTdjbw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="security.client.type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2Vi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Ym9keV90aWxlJTNBbG9naW4lM0F1c2VybmFtZT1QRVJGMTA4JmJvZHlfdGlsZSUzQWxvZ2luJTNBcGFzc3dvcmQ9Z24yUiUyM3J0TTImYm9keV90aWxlJTNBbG9naW4lM0FkY0NvZGVMaXN0PTkzNiZib2R5X3RpbGUlM0Fsb2dpbiUzQXN1Ym1pdEJ0bj1Mb2dpbiZmbG93SWQ9NWM3ZTdlZGEtZDkwZC00Y2JiLWE5MTMtZTQ0ZDAyMDVmNzljJl90cmFuc2FjdGlvbklkPTVjN2U3ZWRhLWQ5MGQtNGNiYi1hOTEzLWU0NGQwMjA1Zjc5YyZib2R5X3RpbGUlM0Fsb2dpbl9TVUJNSVQ9MSZqYXZheC5mYWNlcy5WaWV3U3RhdGU9ck8wQUJYVnlBQk5iVEdwaGRtRXViR0Z1Wnk1UFltcGxZM1E3a001WW54QnpLV3dDQUFCNGNBQUFBQU4wQUFFeWNIUUFDaTlzYjJkcGJpNXFjM0ElM0Q=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2VydmxldC8zLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-UA-Compatible" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SUU9OA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Location" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBQYXRoPS87IEh0dHBPbmx5</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2Vi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBEZWMgMTk5NCAxNjowMDowMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU9InNldC1jb29raWUsIHNldC1jb29raWUyIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Language" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMzAyIEZvdW5kDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1MZW5ndGg6IDANCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTG9jYXRpb246IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpTZXQtQ29va2llOiBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IFBhdGg9LzsgSHR0cE9ubHkNClNldC1Db29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KRXhwaXJlczogVGh1LCAwMSBEZWMgMTk5NCAxNjowMDowMCBHTVQNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlPSJzZXQtY29va2llLCBzZXQtY29va2llMiINCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPResponse>
    <HTTPTask id="14" hostname="qa.wmxbolt.wescodist.com" path="/wmx/welcome.faces" url="https://qa.wmxbolt.wescodist.com/wmx/welcome.faces" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="Redirection" encodingType="ANSI" startDateTime="2024-11-07T09:35:45.854+00:00" startTime="2164" endTime="2190" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="2" waitTime="19" receiveTime="4" sslNegotiateTime="-1" responseBodySize="26999">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214Lw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tdXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC93bXgvd2VsY29tZS5mYWNlcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214Lw0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUNClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYjsgY3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="security.client.type" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>V2Vi</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="currentLoginPage" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>V2Vi</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="JSESSIONID" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="security.client.type" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>V2Vi</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>26785</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjY3ODU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2VydmxldC8zLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-UA-Compatible" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SUU9OA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1MZW5ndGg6IDI2Nzg1DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpYLVBvd2VyZWQtQnk6IFNlcnZsZXQvMy4wDQpYLVVBLUNvbXBhdGlibGU6IElFPTgNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>DQoJPCFET0NUWVBFIEhUTUwgPg0KCTxodG1sPg0KCQkNCgkJDQoJCTxoZWFkPg0KCQkJPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnIHNyYz0nL3dteC9hNGoucmVzL29yZy5hamF4NGpzZi5mcmFtZXdvcmsuYWpheC5BamF4U2NyaXB0LmZhY2VzJz48L3NjcmlwdD48TUVUQSBIVFRQLUVRVUlWPSJFeHBpcmVzIiBDT05URU5UPSJUdWUsIDAxIEphbiAxOTgwIj4NCgkJCTxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iL3dteC9mYXZpY29uLTMyeDMyLnBuZyIgdHlwZT0iaW1hZ2UvcG5nIj4NCgkJCTxsaW5rIHJlbD0iaWNvbiIgaHJlZj0iL3dteC9mYXZpY29uLTMyeDMyLnBuZyIgdHlwZT0iaW1hZ2UvcG5nIj4NCgkJCTx0aXRsZT4NCgkJCQlXTVggQ2xvdWQNCgkJCQl8IFdlbGNvbWUNCgkJCTwvdGl0bGU+DQoJCQk8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvd214L2Nzcy93bXhfY29uc29saWRhdGVkLmNzcyI+PC9saW5rPg0KCQkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL3dteC9jc3MvZHJhZ19kcm9wLmNzcyI+PC9saW5rPg0KCQkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvd214L2Nzcy90cmVlZ3JpZC9qcXVlcnkudHJlZWdyaWQuY3NzIiAvPg0KCQkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvd214L2Nzcy9qcXVlcnktdWkuY3NzIiAvPg0KCQkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL3dteC9jc3MvYW5peHRlci13bXgtcmVkZXNpZ24uY3NzIj48L2xpbms+DQoJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvd214L2phdmFzY3JpcHQvYXBwc2NyaXB0LmpzIj48L3NjcmlwdD4NCgkJCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii93bXgvamF2YXNjcmlwdC9qc2Nvb2ttZW51L0pTQ29va01lbnUuanMiPjwvc2NyaXB0Pg0KCQkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL3dteC9qYXZhc2NyaXB0L2pzY29va21lbnUvQ2xpY2svdGhlbWUuanMiPjwvc2NyaXB0Pg0KCQkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL3dteC9qYXZhc2NyaXB0L2RodG1sd2luZG93LmpzIj48L3NjcmlwdD4NCgkJCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii93bXgvamF2YXNjcmlwdC93bXgtZ2xvYmFsLmpzIj48L3NjcmlwdD4NCgkJCQ0KCQkJCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii93bXgvamF2YXNjcmlwdC9kcmFnZHJvcC9wcm90b3R5cGUuanMiPjwvc2NyaXB0Pg0KCQkJDQoJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvd214L2phdmFzY3JpcHQvanF1ZXJ5LTEuMTAuMi5taW4uanMiPjwvc2NyaXB0Pg0KCQkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL3dteC9qYXZhc2NyaXB0L2pxdWVyeS11aS5qcyI+PC9zY3JpcHQ+DQoJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvd214L2phdmFzY3JpcHQvbW9kYWxEaXYuanMiPjwvc2NyaXB0Pg0KCQkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL3dteC9qYXZhc2NyaXB0L2pxdWVyeS50cmVlZ3JpZC5qcyI+PC9zY3JpcHQ+DQoJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvd214L2phdmFzY3JpcHQvYXJlLXlvdS1zdXJlLmpzIj48L3NjcmlwdD4NCgkJCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4gDQoJCQkJLy8gZGVmaW5lIGpxdWVyeSBhcyAkag0KCQkJCXZhciAkaiA9IGpRdWVyeS5ub0NvbmZsaWN0KCk7DQoJCQkJZnVuY3Rpb24gb3BlbkFib3V0KCkgew0KCQkgICAgCQl3aW5kb3cucG9wdXAgPSB3aW5kb3cub3Blbignd2ViX2Fib3V0LmZhY2VzJywnQWJvdXQnLCd3aWR0aD00MDAsIGhlaWdodD0zMDAsIHRvcD0yMDAsIGxlZnQ9MzUwLHRvb2xiYXI9bm8scmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcycpOw0KCQkgICAgCX0NCgkJICAgIAkNCgkJCQkvLyB3bXhXZWJVaUFqYXhDb21wbGV0ZWQgaXMgYW4gZW1wdHkgZ2VuZXJpYyBkZWZhdWx0IGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBhbiBBNEogQWpheCBjYWxsIGlzIGNvbXBsZXRlZCBzbyB0aGF0IHdlIGRvbid0IHRha2UNCgkJCQkvLyBhbiBlcnJvciB3aGVuIHRoZSBmdW5jdGlvbiBpcyBub3QgZm91bmQuICBJdCB3YXMgYWRkZWQgdG8gcHJvdmlkZSBhIGRlZmF1bHQgZnVuY3Rpb24gdG8gZ2l2ZSB1cyBlYXN5IGFjY2VzcyB0byB0aGUgb25Db21wbGV0ZSBldmVudA0KCQkJCS8vIGZvciB2YXJpb3VzIHdlYlVJIGNvbXBvbmVudHMuICBZb3UgY2FuIG92ZXJyaWRlIGl0IGluIHlvdXIgSmF2YXNjcmlwdCBjb2RlIHRvIHBlcmZvcm0gcHJvY2Vzc2luZyB1cG9uIGNvbXBsZXRpb24gb2YgdGhlIEE0SiBjYWxsLg0KCQkJCWZ1bmN0aW9uIHdteFdlYlVpQWpheENvbXBsZXRlZChhamF4SUQpIHsNCgkJCQl9DQoJCQk8L3NjcmlwdD4NCgkJPC9oZWFkPg0KCQkNCgkJPGJvZHkgb25sb2FkPSJPbkxvYWQoKSI+DQoJCQk8ZGl2IGlkPSJvdmVybGF5RGl2IiBjbGFzcz0ib3ZlcmxheSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9kaXY+DQoJCQk8dGFibGUgYm9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHdpZHRoPSIxMDAlIj4NCgkJCQk8dHIgaWQ9InJvd1RvcEhlYWRlciIgdmFsaWduPSJ0b3AiPg0KCQkJCQk8dGQgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNGN0Y3Rjc7Ij4NCgkJCQkJCTx0YWJsZSB3aWR0aD0iMTAwJSIgY2VsbHBhZGRpbmc9IjEiIGNlbGxzcGFjaW5nPSIwIj4NCgkJCQkJCQk8dHIgdmFsaWduPSJtaWRkbGUiPg0KCQkJCQkJCQk8dGQgYWxpZ249ImxlZnQiPjxpbWcgc3JjPSIvd214L2ltYWdlL1dNWF9sb2dvX2lhX2JvbHQucG5nIiBhbHQ9IldNWCBDbG91ZCIJYWxpZ249ImxlZnQiIC8+PC90ZD4NCgkJCQkJCQkJPHRkIGFsaWduPSJsZWZ0IiBjbGFzcz0idGl0bGUiPg0KCQkJCQkJCQkJUXVhbGl0eQ0KCQkJCQkJCQk8L3RkPg0KCQkJCQkJCQk8dGQgaWQ9Im1lbnUiIGFsaWduPSJsZWZ0Ij4gDQoJCQkJCQkJCQk8Zm9ybSBpZD0iY2hhbmdlRGMiIG5hbWU9ImNoYW5nZURjIiBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL3dteC93ZWxjb21lLmZhY2VzIiBlbmN0eXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiPjxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJoYW5kbGVyTmFtZSIgbmFtZT0iaGFuZGxlck5hbWUiIHZhbHVlPSIiIC8+PGRpdiBpZD0idXNlckRjTGlzdCIgY2xhc3M9ImxvY2F0aW9uU2VsZWN0b3IiPkN1cnJlbnQgREM6Jm5ic3A7PHNlbGVjdCBpZD0iY2hhbmdlRGM6ZGNDb2RlTGlzdCIgbmFtZT0iY2hhbmdlRGM6ZGNDb2RlTGlzdCIgc2l6ZT0iMSIgY2xhc3M9Im5vRm9jdXMiIG9uY2hhbmdlPSJBNEouQUpBWC5TdWJtaXQoJ2pfaWRfanNwXzIwNzc4NjU4NTdfMCcsJ2NoYW5nZURjJyxldmVudCx7J2FjdGlvblVybCc6Jy93bXgvd2VsY29tZS5mYWNlcycsJ3BhcmFtZXRlcnMnOnsnY2hhbmdlRGM6ZGNDaGFuZ2VBamF4Q2FsbCc6J2NoYW5nZURjOmRjQ2hhbmdlQWpheENhbGwnfSB9ICkiPgk8b3B0aW9uIHZhbHVlPSIwMDAiPigwMDApIERlZmF1bHQgREMgZm9yIFNhdnlpbnQgVXNlcnM8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iMDgyIj4oMDgyKSBBQ0NVVEVDSCBOZXcgWW9yayAoUGxhaW52aWV3KSwgTlk8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iMTI2MTkiPigxMjYxOSkgVUJTIE1pbGZvcmQsIE1BIEREUDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSIxMzcwNSI+KDEzNzA1KSBQaWxvdDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSIxNjAyMyI+KDE2MDIzKSBBQ0NVVEVDSCBIb3VzdG9uLFRYPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjE5OCI+KDE5OCkgUmFsZWlnaCBVUyBMREM8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iMjE1Ij4oMjE1KSBBQ0NVVEVDSCBQaGlsYWRlbHBoaWEgLFBBIChGb2xjcm9mdCk8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iMjZMIj4oMjZMKSBBQ0NVVEVDSCBEZW52ZXIsIENPIChDZW50ZW5uaWFsKQ0KPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjM0MCI+KDM0MCkgQUNDVVRFQ0ggQ2hhcmxvdHRlLCBOQzwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSIzNTMiPigzNTMpIEFDQ1VURUNIIEF0bGFudGEgKFJvc3dlbGwpLEdBPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjM1NCI+KDM1NCkgQUNDVVRFQ0ggVGFtcGEsIEZMPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjM2MyI+KDM2MykgQWNjdVRlY2ggTGVuZXhhLCBLUzwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSIzODgiPigzODgpIEFDQ1VURUNIIEJvc3RvbiAoQW5kb3ZlciksIE1BPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjM5NyI+KDM5NykgQUNDVVRFQ0ggUmljaG1vbmQsVkE8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNDE3Ij4oNDE3KSBBQ0NVVEVDSCBOYXNodmlsbGUgLFROPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjQyOCI+KDQyOCkgQUNDVVRFQ0ggQ2hhcmxlc3RvbiAoTm9ydGggQ2hhcmxlc3RvbiksU0M8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNTA5Ij4oNTA5KSBXaXJlICZhbXA7IENhYmxlLVVTIChDaW5jeSk8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNTIwIj4oNTIwKSBBQ0NVVEVDSCBCYWx0aW1vcmUgKEhhbm92ZXIpIE1EPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjU0MCI+KDU0MCkgQUNDVVRFQ0ggRnQgTGF1ZGVyZGFsZSAoUG9tcGFubyBCZWFjaCksIEZMPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjU0MiI+KDU0MikgQUNDVVRFQ0ggUmFsZWlnaCAoTW9ycmlzdmlsbGUpIE5DPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjU0MyI+KDU0MykgQWNjdVRlY2ggTGl2b25pYSwgTUk8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNTRDIj4oNTRDKSBBQ0NVVEVDSCBQaXR0c2J1cmdoIChDYXJuZWdpZSksUEE8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNTU2Ij4oNTU2KSBBQ0NVVEVDSCBTYW4gQW50b25pbyxUWDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI1NkMiPig1NkMpIEFDQ1VURUNIIFNhbiBGcmFuY2lzY28gKEhheXdhcmQpIENBPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjU5MSI+KDU5MSkgQUNDVVRFQ0ggR3JlZW52aWxsZSwgU0M8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNTlDIj4oNTlDKSBBQ0NVVEVDSCBKYWNrc29udmlsbGUsRkw8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNjM4Ij4oNjM4KSBBQ0NVVEVDSCBQaG9lbml4IChNZXNhKSwgQVo8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNjUyIj4oNjUyKSBBQ0NVVEVDSCBDaGljYWdvIChNb3VudCBQcm9zcGVjdCkgSUw8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNjU2Ij4oNjU2KSBBQ0NVVEVDSCBDb2x1bWJ1cyxPSDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI2NkgiPig2NkgpIEFDQ1VURUNIIE1pbm5lYXBvbGlzIChNYXBsZSBHcm92ZSksTU48L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNjkyIj4oNjkyKSBBQ0NVVEVDSCBMb3MgQW5nbGVzIChMYSBNaXJhZGEpLCBDQTwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI2OTMiPig2OTMpIEFDQ1VURUNIIFNhY3JhbWVudG8sQ0E8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iNjk0Ij4oNjk0KSBBQ0NVVEVDSCBEYWxsYXMgKENhcnJvbHRvbilUWDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI2OTYiPig2OTYpIEFDQ1VURUNIIE5vcmZvbGsgKENoZXNhcGVhayksIFZBPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjczMDIiPig3MzAyKSBXYXJyZW5kYWxlPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IjgyMyI+KDgyMykgQUNDVVRFQ0ggU2VhdHRsZSAoVHVrd2lsbGEpLCBXQTwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI4OUUiPig4OUUpIEFDQ1VURUNIIE9tYWhhLCBORTwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI5MzYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+KDkzNikgQUNDVVRFQ0ggSG91c3RvbixUWDwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI5NjIiPig5NjIpIEFjY3VUZWNoIEF1c3RpbiwgVFg8L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iOTY0Ij4oNTQzKSBBY2N1VGVjaCBMaXZvbmlhLCBNSTwvb3B0aW9uPgk8b3B0aW9uIHZhbHVlPSI5N0EiPig5N0EpIElUIEhvbWUgTG9jYXRpb248L29wdGlvbj4JPG9wdGlvbiB2YWx1ZT0iUEVSRjEyNjE5Ij4oUEVSRjEyNjE5KSBQZXJmb3JtYW5jZSBUZXN0aW5nIERDPC9vcHRpb24+CTxvcHRpb24gdmFsdWU9IlpCQVNFMSI+WkJBU0UgQ09ORklHIFNFVDE8L29wdGlvbj48L3NlbGVjdD48L2Rpdj48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjaGFuZ2VEY19TVUJNSVQiIHZhbHVlPSIxIiAvPjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImphdmF4LmZhY2VzLlZpZXdTdGF0ZSIgaWQ9ImphdmF4LmZhY2VzLlZpZXdTdGF0ZSIgdmFsdWU9InJPMEFCWFZ5QUJOYlRHcGhkbUV1YkdGdVp5NVBZbXBsWTNRN2tNNVlueEJ6S1d3Q0FBQjRjQUFBQUFOMEFBRXhjSFFBREM5M1pXeGpiMjFsTG1wemNBPT0iIC8+PC9mb3JtPjxkaXYgaWQ9ImhpZGRlbkxvY2F0aW9uc0xpc3QiIGNsYXNzPSJsb2NhdGlvblNlbGVjdG9yIj48L2Rpdj4NCgkJCQkJCQkJPC90ZD4NCgkJCQkJCQkJPHRkIGFsaWduPSJyaWdodCI+DQoJCQkJCQkJCQk8dGFibGUgY2xhc3M9IlRlbXBsYXRlTWVudUJhbm5lciIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIj4NCgkJCQkJCQkJCQk8dHI+DQoJCQkJCQkJCQkJCQ0KCQkJCQkJCQkJCQk8Zm9ybSBpZD0idG9wTmF2Rm9ybSIgbmFtZT0idG9wTmF2Rm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii93bXgvd2VsY29tZS5mYWNlcyIgZW5jdHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIj48aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idG9wTmF2Rm9ybTpoYW5kbGVyTmFtZSIgbmFtZT0idG9wTmF2Rm9ybTpoYW5kbGVyTmFtZSIgdmFsdWU9IiIgLz4NCgkJCQkJCQkJCSAgCQkJPHRkIGNsYXNzPSJ0YWJzSW5uZXIiPg0KCQkJCQkJCQkJICAJCQkJUEVSRjEwOA0KCQkJCQkJCQkJCQkJPC90ZD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJ0YWJzSW5uZXIiID4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSJqYXZhc2NyaXB0L2h0bWxMaW5rUmVuZGVyZXIuanMiPjwhLS0KCi8vLS0+PC9zY3JpcHQ+PGEgaHJlZj0iIyIgb25jbGljaz0icmV0dXJuIG9hbVN1Ym1pdEZvcm0oJ3RvcE5hdkZvcm0nLCd0b3BOYXZGb3JtOndlYkRlZmF1bHRVc2VyRENMaW5rX2lkJyk7IiBpZD0idG9wTmF2Rm9ybTp3ZWJEZWZhdWx0VXNlckRDTGlua19pZCI+PGltZyBzcmM9Ii93bXgvaW1hZ2UvZW1wdHlTdGFyLnBuZyIgYWx0PSJEZWZhdWx0IERDIiBzdHlsZT0id2lkdGg6IDI0cHg7IiAvPjwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0idGFic0lubmVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJ2YXIgY2YgPSBmdW5jdGlvbigpeyByZXR1cm4gdmFsaWRhdGVMb2dvdXQoKTt9O3ZhciBvYW1TRiA9IGZ1bmN0aW9uKCl7cmV0dXJuIG9hbVN1Ym1pdEZvcm0oJ3RvcE5hdkZvcm0nLCd0b3BOYXZGb3JtOndlYkxvZ291dExpbmtfaWQnLG51bGwsW1snbG9nb3V0UmVxdWVzdGVkJywndHJ1ZSddXSk7fTtyZXR1cm4gKGNmKCk9PWZhbHNlKT8gZmFsc2UgOiBvYW1TRigpOyIgaWQ9InRvcE5hdkZvcm06d2ViTG9nb3V0TGlua19pZCI+TG9nb3V0PC9hPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCgkJCQkJCQkJCQkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idG9wTmF2Rm9ybV9TVUJNSVQiIHZhbHVlPSIxIiAvPjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImphdmF4LmZhY2VzLlZpZXdTdGF0ZSIgaWQ9ImphdmF4LmZhY2VzLlZpZXdTdGF0ZSIgdmFsdWU9InJPMEFCWFZ5QUJOYlRHcGhkbUV1YkdGdVp5NVBZbXBsWTNRN2tNNVlueEJ6S1d3Q0FBQjRjQUFBQUFOMEFBRXhjSFFBREM5M1pXeGpiMjFsTG1wemNBPT0iIC8+PC9mb3JtPg0KCQkJCQkJCQkJCTwvdHI+DQoJCQkJCQkJCQk8L3RhYmxlPg0KCQkJCQkJCQk8L3RkPg0KCQkJCQkJCTwvdHI+DQoJCQkJCQk8L3RhYmxlPg0KCQkJCQk8L3RkPg0KCQkJCTwvdHI+DQoJCQkJPHRyIGlkPSJyb3dIZWFkZXIiPg0KCQkJCQk8dGQgY2xhc3M9IlRlbXBsYXRlTmF2QXJlYSI+DQoJCQkJCQk8dGFibGUgd2lkdGg9IjEwMCUiIGNlbGxwYWRkaW5nPSIxIiBjZWxsc3BhY2luZz0iMCI+DQoJCQkJCQkJPHRyPg0KCQkJCQkJCQk8dGQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwhLS0KdmFyIG15bWVudSA9IFtbbnVsbCwiSW5ib3VuZCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJJbmJvdW5kIFNoaXBtZW50IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9SW5ib3VuZFNoaXBtZW50IiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiSW5ib3VuZCBTaGlwbWVudCBVbmxvYWQiLCJidWxrX2luYm91bmRfc2hpcG1lbnRfdW5sb2FkLmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQ2hlY2staW4gT3ZlcnZpZXciLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Tk9OQVNOQ0hFQ0tJTiIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkFjdHVhbCBSZWNlaXB0IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9QUNUVUFMX1JFQ0VJUFQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJFeHBlY3RlZCBSZWNlaXB0IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9RVJfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkVSIEluYm91bmQgU2hpcG1lbnQgTWFuYWdlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1FUklOQk9VTkRTSElQTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlB1dGF3YXkgTWFuYWdlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1QQVBFUl9QVVRBV0FZIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQVNOIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9QVNOX01BTkFHRU1FTlQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJUYXNrIE1hbmFnZW1lbnQiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiSW5ib3VuZC1CYXNpYyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD10c2tNYW5hZ2VtZW50SW5ib3VuZCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkluYm91bmQtQWN0aXZpdHkiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VFNLTU5HX0lOQk5EX0FDVFZJVFkiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJJbmJvdW5kLU1vdmVtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVRTS01OR19JTkJORF9NT1ZNRU5UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiSW5ib3VuZC1EZXRhaWxzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPXRza01uZ21udF9pbmJFcmQiLCJfc2VsZiIsIG51bGxdXV0sW251bGwsIk91dGJvdW5kIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIldhdmUgTWFuYWdlbWVudCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJUYXNrcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1UQVNLUzEiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJPcmRlcnMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9T1JERVJfQ1JJVEVSSUEiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJPcmRlciBMaW5lcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1XQVZFX01HVF9PUkRFUl9MSU5FIiwiX3NlbGYiLCBudWxsXV0sW251bGwsIlRhc2sgTWFuYWdlbWVudCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJPdXRib3VuZC1CYXNpYyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD10c2tfbW5nbW50QnNjQ3J0IiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiT3V0Ym91bmQtQWN0aXZpdHkiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VFNLTU5HX09UQk5EX0FDVFZJVFkiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJPdXRib3VuZC1Nb3ZlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1UU0tNTkdfT1RCTkRfTU9WTUVOVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIk91dGJvdW5kLURldGFpbHMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9dHNrbW5nbW50X291dGJuZG9yZCIsIl9zZWxmIiwgbnVsbF1dLFtudWxsLCJWYWx1ZSBBZGQiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiVmFsdWUgQWRkIE92ZXJ2aWV3IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVZBTFVFX0FERF9PVkVSVklFVyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkJpbGwgT2YgTWF0ZXJpYWwgSW5xdWlyeSIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1CSUxMX09GX01BVEVSSUFMX0lOUSIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlZBIFRhc2tzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVRBU0tTVkEiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJWQSBXYXZlIE1hbmFnZW1lbnQgT3JkZXJzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVZBX1dBVkVfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlZBIFdhdmUgTWFuYWdlbWVudCBPcmRlciBMaW5lcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1WQV9XQVZFX01HTVRfTElORVMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJWQSBJbnZlbnRvcnkgTWFuYWdlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1WQU1BTkFHRU1FTlQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJWQSBJbnZlbnRvcnkgQ29udGVudGlvbiBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPWludmVudG9yeUNvbnRNZ3QiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJWQSBQaWNrcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1WQUxVRV9BRERfUElDS1MiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiU3BsaXR0aW5nIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlNwbGl0IE1nbXQgT3ZlcnZpZXciLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9c3BsaXRNbmdtZW50IiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiU3BsaXQgTFAgT3ZlcnZpZXciLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9c3BsaXRfbHBPdmVydmlldyIsIl9zZWxmIiwgbnVsbF1dLFtudWxsLCJQYWNraW5nIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlBhY2tpbmcgT3ZlcnZpZXciLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9UEFDS19PVkVSVklFVyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlBhY2sgQnkgT3JkZXIiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9SU5URl9PUkRFUl9RVUlDSyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlBhY2sgQ29udGFpbmVycyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1QQUNLX0NPTlRBSU5FUlMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiU2hpcHBpbmciLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiRG9jayBEb29yIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9ZG9ja0Rvb3JNZ210IiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiU2hpcHBpbmcgVGFzayBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVNISVBUQVNLTUFOQUdFTUVOVDAyIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiU2hpcCBHcm91cCBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVNISVBHUk9VUE1HTVQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJEb2NrIERvb3IgRXJyb3IgTWFuYWdlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1ET0NLX0RPT1JfRVJST1JTIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQ29tcGxldGVkIFNoaXAgVGFzayBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNPTVBMRVRFRFNISVBUQVNLIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUGFja2luZyBHcmlkIiwid2ViX3BhY2tfZ3JpZF92aWV3LmZhY2VzIiwiX3NlbGYiLCBudWxsXV0sW251bGwsIlByaW9yaXR5IFRyYW5zZmVycyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1QSUNLX1RBU0tfREVQRU5ERU5DWSIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlBhcGVyIEJhc2VkIFBpY2siLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9UElDS19QQVBFUl9CQVNFRCIsIl9zZWxmIiwgbnVsbF1dLFtudWxsLCJNYW5hZ2VtZW50IixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlByb2R1Y3QgTWFuYWdlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1Qcm9kTWFuYWdlbWVudEMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJUYXNrIFN1bW1hcnkiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9dGFza1N1bW1hcnlDcml0ZXJpYSIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlRhc2sgRXhjZXB0aW9ucyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1UYXNrX0V4Y2VwdGlvbnMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJMaWNlbnNlIFBsYXRlIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TFBfTWFuYWdlbWVudCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkF1ZGl0IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9QVVESVRfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkludmVudG9yeSBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUlOVkVOVE9SWV9NQU5BR0VNRU5UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiVGFzayBNYW5hZ2VtZW50IixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlN1cHBvcnQtQmFzaWMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9dHNrbW5nbW50X3N1cHBvcnRic2MiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJTdXBwb3J0LUFjdGl2aXR5IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPXRza21uZ21lbnRfYWN0aXZpdHkiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJTdXBwb3J0LU1vdmVtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPXRza21uZ21udF9tb3ZlbWVudCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlRhc2sgUmVzZWFyY2giLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VEFTS1JFU0VBUkNIIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiU3VwcG9ydC1EZXRhaWxzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPXRhc2ttbmdtbnRfc3Vwb3J0ZGV0IiwiX3NlbGYiLCBudWxsXV0sW251bGwsIkN5Y2xlIENvdW50IixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIkN5Y2xlIENvdW50IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Q1lDTEVfQ09VTlRfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkN5Y2xlIENvdW50IEJ5IExvY2F0aW9uIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNZQ0xFX0NPVU5UUEJZX0xPQyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlByb2R1Y3QgSW52ZW50b3J5IEN5Y2xlIENvdW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVBJX0NZQ0xFX0NPVU5UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQ3ljbGUgQ291bnQgUGFwZXIiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiQmxvY2sgQXVkaXQiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiQ3JlYXRlIFNldCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1DWUNMRV9DVF9QUFJfQ1JTX0JMSyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlByaW50aW5nICYgU2V0IEVudHJ5IFBhZ2UiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Q1lDTEVfQ1RfUFBSX1NMUF9CTEsiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiQ3ljbGUgQ291bnQiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiQ3JlYXRlIFNldCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1DWUNMRV9DVF9QUFJfQ1JTX0NZQyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlByaW50aW5nICYgU2V0IEVudHJ5IFBhZ2UiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Q1lDTEVfQ1RfUFBSX1NMUF9DWUMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiUmVjb3VudCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJDcmVhdGUgU2V0IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNZQ0xFX0NUX1BQUl9DUlNfUkNUIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUHJpbnRpbmcgJiBTZXQgRW50cnkgUGFnZSIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1DWUNMRV9DVF9QUFJfU0xQX1JDVCIsIl9zZWxmIiwgbnVsbF1dXSxbbnVsbCwiUGh5c2ljYWwgSW52ZW50b3J5IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVBJX0NZQ0xFX0NPVU5UX0RUTCIsIl9zZWxmIiwgbnVsbF1dLFtudWxsLCJLYW5iYW4iLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiTWFudWFsIFpvbmUiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9em9uZV9yZXBsZW5pc2htZW50IiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiTWFudWFsIEZpeGVkIExvY2F0aW9ucyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1maXhlZF9sb2NhdGlvbnMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiV2FyZWhvdXNlIE1vbml0b3IiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiVGFzayBRdWVyaWVzIiwiZmxvb3JwbGFuX3Rhc2tfdmlldy5mYWNlcyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkludmVudG9yeSBRdWVyaWVzIiwiZmxvb3JwbGFuX2ludmVudG9yeV92aWV3LmZhY2VzIiwiX3NlbGYiLCBudWxsXV1dLFtudWxsLCJDb25maWd1cmF0aW9uIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIk1hcHBpbmcgTG9naWNhbCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJBdHRyaWJ1dGUgTWFzdGVyIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUFUVFJJQlVURV9NR01UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQXR0cmlidXRlIE1hcHMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9QVRUUklCVVRFX01BUF9NR01UMiIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkF0dHJpYnV0ZSBDb2xsZWN0aW9uIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUFUVFJJQlVURV9DTENUX01HTVQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJDdXQgTWFjaGluZSBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNVVF9NQUNISU5FX01HTVQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJMb2NhdGlvbiBDYWxjdWxhdGlvbiBDaGFpbiIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1MT0NBVElPTl9DQUxDX0NIQUlOIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiTG9jYXRpb24gQ2FsY3VsYXRpb24iLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TE9DQVRJT05fQ0FMQ1VMQVRJT04iLCJfc2VsZiIsIG51bGxdLFtudWxsLCJQaWNrIE9wdGlvbiBDb25maWciLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9UElDS09QVElPTkNPTkZJRyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlByb2R1Y3QgQ2xhc3MgQ29uZmlnIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVBST0RVQ1RDTEFTU0NPTkZJRyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlRhc2sgVHlwZSBNb3ZlbWVudCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1UQVNLX1RZUEVfTU9WRU1FTlQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJXb3JrIEFyZWEgTW92ZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9V09SS19BUkVBX01WTVQiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiTWFwcGluZyBPdXRib3VuZCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJMb2NhdGlvbiBaaXAgQXNzb2NpYXRpb24iLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9bG9jX3ppcF9hc3NvY2lhdGlvbiIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkxvY2F0aW9uIFBpY2t1cCBHcm91cCBTdGFnaW5nIFR5cGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPWxvY1BpY2t1cEdycFNUeXBlIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQ2FycmllciBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNBUlJJRVJfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkNhcnJpZXIgU2VydmljZSBMZXZlbCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1DQVJSSUVSX1NFUlZJQ0UiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJTaGlwIEdyb3VwIFRlbXBsYXRlIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVNISVBfR1JPVVBfVEVNUExBVEUiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiTWFwcGluZyBQaHlzaWNhbCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJMb2NhdGlvbiBUYXNrIFR5cGUgRHJvcCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1MT0NfVEFTS19UWVBFX0RST1AiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJNU0MgQ29kZXMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TVNDX0NPREVTIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUmVhc29uIENvZGUgVHlwZSIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1SRUFTT05fQ09ERV9UWVBFIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiVU9NIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VU9NX01HTVQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJET0NLIERPT1JTIENPTkZJR1VSQVRJT04iLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9ZG9ja19kb29yX21hbmFnZW1lbnQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJEQyBBcmVhIFVzZXIgQWNjZXNzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPWRjX2FyZWFfdXNlcl9hY2Nlc3MiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJQYWNrYWdlIFR5cGUvUmVlbCBUeXBlIEFzc29jaWF0aW9ucyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1QS0dUX1JUX0FTU09DIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiTWF0ZXJpYWwgTW92ZW1lbnQgTG9jYXRpb24gQ2FsY3VsYXRpb24gT3ZlcnJpZGUiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TUFURVJJQUxNT1ZFTUVOVExDQUwiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJDdXN0b21lciBNYXRlcmlhbCBNb3ZlbWVudCBBc3NpZ25zIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUNVU1RNQVRFUklBTE1PVkVNRU5UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQXJlYSBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUFSRUFfTUFOQUdFTUVOVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkFyZWEgVG8gRXF1aXBtZW50IFR5cGVzIEFsbG93ZWQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9QVJFQV9FUVVJUF9BTExPV0VEIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQXJlYSBUbyBVc2VycyBBbGxvd2VkIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUFSRUFfVVNFUlNfQUxMT1dFRCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkN1c3RvbWVyIE9yZGVyIFR5cGUgQXNzaWducyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1DVVNUT01FUl9PUkRFUl9UWVBFIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiRXF1aXBtZW50IE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9RVFVSVBNRU5UX01HTVQiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJMb2NhdGlvbiBBcmVhIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TE9DQVRJT05fQVJFQV9NR01UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiTG9jYXRpb24gQ2FsY3VsYXRpb24gQ2FycmllciBTZXJ2aWNlIE92ZXJyaWRlcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1MT0NfQ0FMQ19DU19PVkVSUklERSIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkxvY2F0aW9uIENhbGN1bGF0aW9uIFByb2R1Y3QgT3ZlcnJpZGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUxPQ19DQUxDX1BST0RfT1ZSUkRFIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiTG9jYXRpb24gQ2FycmllciBBc3NpZ25zIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUxPQ0FUSU9OX0NBUlJJRVIiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJMb2NhdGlvbiBNYW5hZ2VtZW50IiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUxvY2F0aW9uTWFuYWdlbWVudCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIk9yZGVyIFR5cGUgTG9jYXRpb24gQ2FsY3VsYXRpb24gT3ZlcnJpZGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPU9SRFJUWVBfTE9DQUxDX09WRVJEIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUGFja2FnZSBUeXBlIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVBBQ0tBR0VfVFlQRSIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlVzZXIgUmVzdHJpY3RlZCBUbyBFcXVpcG1lbnQgVHlwZXMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VVNFUl9SRVNUUklDVF9FUVRZUCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlVzZXIgUmVzdHJpY3RlZCBUbyBUYXNrIFR5cGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVVTRVJfUkVTVFJJQ1RfVFRZUCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlpvbmUgUGFja2FnZSBUeXBlIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVpPTkVfUEFDS0FHRV9UWVBFIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiWm9uZSBQcm9kdWN0IENsYXNzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVpvbmVQcm9kdWN0Q2xhc3MiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJab25lIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Wk9ORV9NQU5BR0VNRU5UIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiWm9uZSBNU0MgQ29kZXMiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Wk9ORV9NU0NfQ09ERVMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJab25lIFJlcGxlbmlzaG1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Wk9ORV9SRVBMX1ZJRVciLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiU2VjdXJpdHkiLG51bGwsIl9zZWxmIiwgbnVsbCxbbnVsbCwiQWxsIFVzZXJzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPXVzZXJfbWdtdCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkRDIFVzZXJzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUFsbF9Vc2VycyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlJvbGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVJPTEVTIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiVXNlciBSb2xlcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1VU0VSX1JPTEVTIiwiX3NlbGYiLCBudWxsXV0sW251bGwsIlJlc2VhcmNoIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlpvbmUgUmVzdHJpY3Rpb24gQ2hlY2siLCJjb3VudF96b25lX3ZhbGlkYXRlZF9sb2NhdGlvbnMuZmFjZXMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJFUiBMb2cgU2VhcmNoIiwiZXJMb2dSZXN1bHRzLmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiVmFsaWRhdGUgREMgQ29uZmlnIiwidmFsaWRhdGVfZGMuZmFjZXMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJQcm9kdWN0IEFyZWEgQW5hbHlzaXMiLCJwcm9kdWN0X2FyZWFfYW5hbHlzaXMuZmFjZXMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiU3lzdGVtIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIkJ1bGsgUmVxdWVzdCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1CVUxLX1JFUVVFU1QiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJSZWVsIFR5cGVzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVJFRUxfVFlQRVMiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJEQyBQcmVmZXJlbmNlcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1EQ19QUkVGRVJFTkNFUyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkxPViBUeXBlIE1hbmFnZW1lbnQiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9TE9WX1RZUEVfTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkxPViBEQyBBc3NpZ25zIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPUxPVl9EQ19BU1NJR05fTUdNVCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIlN5c3RlbSBQYXJhbWV0ZXJzIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVNZU1RFTV9QQVJBTUVURVIiLCJfc2VsZiIsIG51bGxdLFtudWxsLCJUYXNrIFR5cGUiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9VEFTS19UWVBFX1ZJRVciLCJfc2VsZiIsIG51bGxdLFtudWxsLCJDb25maWd1cmF0aW9uIE1hcCIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1Db25maWd1cmF0aW9uX01hcCIsIl9zZWxmIiwgbnVsbF0sW251bGwsIkNvbmZpZ3VyYXRpb24gQ2hhbmdlIFJlcXVlc3QiLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9Q09ORklHX0NIR19SRVFVRVNUIiwiX3NlbGYiLCBudWxsXV0sW251bGwsIlVML0NTQSBNYWludGVuYW5jZSIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJQcm9kdWN0IFNldCBDb25maWd1cmF0aW9uIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlByb2R1Y3QgU2V0IE1haW50ZW5hbmNlIiwicXVlcnlfdmlld2VyLmZhY2VzP2lkPVVMQ1NBX1BST0RVQ1RfU0VUUyIsIl9zZWxmIiwgbnVsbF0sW251bGwsIk1haW50YWluIEF0dHJpYnV0ZSBMYWJlbCBOYW1lcyIsInVsY3NhX21haW50X2F0dF9sYWJlbF9uYW1lcy5mYWNlcyIsIl9zZWxmIiwgbnVsbF1dLFtudWxsLCJMb2NhdGlvbiBTZXR0aW5ncyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1VTENTQV9MT0NfU0VUVElOR1MiLCJfc2VsZiIsIG51bGxdXV0sW251bGwsIlRvb2xzIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIkxvZyBTZWFyY2giLCJxdWVyeV92aWV3ZXIuZmFjZXM/aWQ9V01YTG9nU2VhcmNoIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUmVwcmludCBpbiB0aGUgd2ViIFVJIixudWxsLCJfc2VsZiIsIG51bGwsW251bGwsIlJlcHJpbnQgUGFja2VkIENvbnRhaW5lciIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1SZXByaW50X3BrX0NvbnRhaW5lciIsIl9zZWxmIiwgbnVsbF0sW251bGwsIk1pc2NlbGxhbmVvdXMgUmVwcmludCIsIndlYl9taXNjX3JlcHJpbnQuZmFjZXMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiQ2xlYXIgRWxlbWVudHMgaW4gQ2FjaGUiLCJjb25maWdjX2ZpbGVfdXBsb2FkLmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiVXNlciBJbnRlcmZhY2UgVG9vbCIsbnVsbCwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQXBwIExvZyBNYW5hZ2VtZW50Iiwid2ViX2FwcGxvZ19tYW5hZ2VtZW50LmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiQXBwIExvZyBNYW5hZ2VtZW50IGZvciBNZXNzYWdpbmciLCJ3ZWJfYXBwbG9nX21zZ19tYW5hZ2VtZW50LmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiSVMgU3VwcG9ydCIsbnVsbCwiX3NlbGYiLCBudWxsLFtudWxsLCJMaWNlbnNlIFBsYXRlcyIsInF1ZXJ5X3ZpZXdlci5mYWNlcz9pZD1JU19MSUNFTlNFX1BMQVRFIiwiX3NlbGYiLCBudWxsXV0sW251bGwsIlByaW50ZXIgQ29uZmlndXJhdGlvbiIsImV4dF9wcmludF9jb25maWcuZmFjZXMiLCJfc2VsZiIsIG51bGxdXSxbbnVsbCwiSW5kaXJlY3QiLCJpbmRpcmVjdF90YXNrX2NyZWF0aW9uLmZhY2VzIiwiX3NlbGYiLCBudWxsXSxbbnVsbCwiUkYiLCJyZl9lcXVpcG1lbnQuaHRtbCIsIl9zZWxmIiwgbnVsbF1dOwovLy0tPjwvc2NyaXB0Pgo8ZGl2IGlkPSJtZW51X21lbnUiPjwvZGl2Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+PCEtLQpjbURyYXcgKCdtZW51X21lbnUnLCBteW1lbnUsICdoYnInLCBjbVRoZW1lQ2xpY2ssICdUaGVtZUNsaWNrJyk7Ci8vLS0+PC9zY3JpcHQ+DQoJCQkJCQkJCTwvdGQ+DQoJCQkJCQkJPC90cj4NCgkJCQkJCTwvdGFibGU+DQoJCQkJCTwvdGQ+DQoJCQkJPC90cj4NCgkJCQk8dHIgaWQ9InJvd1RpdGxlIj4NCgkJCQkJPHRkIHZhbGlnbj0idG9wIiB3aWR0aD0iMTAwJSI+DQoJCQkJCQk8dGFibGUgY2xhc3M9IlRlbXBsYXRlVGl0bGVCYXIiIHdpZHRoPSIxMDAlIj4NCgkJCQkJCQk8dHI+DQoJCQkJCQkJCTx0ZCB3aWR0aD0iNDAlIiBjbGFzcz0idGl0bGUiPg0KCQkJCQkJCQkJV2VsY29tZQ0KCQkJCQkJCQk8L3RkPg0KCQkJCQkJCQk8dGQgd2lkdGg9IjYwJSIgY2xhc3M9Im1lc3NhZ2UiPg0KCQkJCQkJCQkJDQoJCQkJCQkJCTwvdGQ+DQoJCQkJCQkJPC90cj4NCgkJCQkJCTwvdGFibGU+DQoJCQkJCTwvdGQ+DQoJCQkJPC90cj4NCgkJCQk8dHIgaWQ9InJvd01lc3NhZ2UiPg0KCQkJCQk8dGQgaWQ9Ik1lc3NhZ2VBcmVhIiBjbGFzcz0iTWVzc2FnZUFyZWEiIHZhbGlnbj0idG9wIiA+CQ0KCQkJCSANCgkJIAkJCQk8c3BhbiBjbGFzcz0iZXJyb3IiPjwvc3Bhbj4NCgkJIAkJCTwvdGQ+DQoJCQkJPC90cj4NCgkJCQk8dHIgaWQ9InJvd0NvbnRlbnQiPg0KCQkJCQk8dGQgY29sc3Bhbj0yIGlkPSJUZW1wbGF0ZUNvbnRlbnRBcmVhIiBjbGFzcz0iVGVtcGxhdGVDb250ZW50QXJlYSINCgkJCQkJCWFsaWduPSJjZW50ZXIiIHZhbGlnbj0idG9wIj4NCgkJCQkJCTxicj5Mb2dpbiBTdWNjZXNzZnVsLjxicj48YnI+PGJyPiZuYnNwOw0KIAkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiID4NCiAgDQoJCSAgIGRvY3VtZW50LmNvb2tpZT0iY3VycmVudExvZ2luUGFnZT1XZWI7ZXhwaXJlcz0wO3BhdGg9L3dteCI7DQoNCgkJPC9zY3JpcHQ+DQoJDQoJCQkJCTwvdGQ+DQoJCQkJPC90cj4NCgkJCTwvdGFibGU+DQoNCgkJCTxkaXYgaWQ9InByb2dyZXNzYmFyIiBzdHlsZT0iZGlzcGxheTpub25lIj48aW1nIHNyYz0iaW1hZ2UvaW5kZXRlcm1pbmF0ZS1wcm9ncmVzcy1iYXIuZ2lmIiAvPjwvZGl2PjxzY3JpcHQ+PCEtLQpzZXR1cFByb2dyZXNzQm94KCdwcm9ncmVzc2JhcicsICdQcm9jZXNzaW5nLi4uJyk7Ci8vLS0+PC9zY3JpcHQ+DQoJCQkJCQk8IS0tIGVycm9yIHJlcG9ydCBkaXYgLS0+DQoJCQkNCgkJCQk8ZGl2IGlkPSJlcnJvckJveFdyYXAiIGNsYXNzPSJtb2RhbEJveFdyYXAiPg0KCQkJCQk8ZGl2IGNsYXNzPSJtb2RhbEJveE92ZXJsYXkiPiZuYnNwOzwvZGl2PiAgICANCgkJCQkJPGRpdiBjbGFzcz0idmVydGljYWwtb2Zmc2V0Ij4NCgkJCQkJCTxkaXYgaWQ9ImVycm9yQm94IiBjbGFzcz0ibW9kYWxCb3giPgk8L2Rpdj4NCiAgICAJCQkJPC9kaXY+DQoJCQkJPC9kaXY+DQoJCQkJDQoJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoJCQkJLy8ganVzdCBzZXQgZm9jdXMgICAgDQoJCQkJc2V0Rm9jdXMoKTsNCgkJCTwvc2NyaXB0Pg0KCQkJDQoJCQkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KCQkJCQl2YXIgY29va2llTmFtZSA9ICJjdXJyZW50TG9jYXRpb24iOw0KDQoJCQkJCWZ1bmN0aW9uIHdyaXRlTG9jYXRpb25Db29raWUodmFsdWUpIHsNCgkJCQkJCXZhciBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCk7DQoJCQkJCQlleHBpcmF0aW9uRGF0ZS5zZXRGdWxsWWVhcigyMDk5KTsNCgkJCQkJCWV4cGlyYXRpb25EYXRlID0gZXhwaXJhdGlvbkRhdGUudG9HTVRTdHJpbmcoKTsNCgkJCQkJCQ0KCQkJCQkJZG9jdW1lbnQuY29va2llPWNvb2tpZU5hbWUgKyAiPSIgKyBlc2NhcGUodmFsdWUpICsgIjtleHBpcmVzPSIgKyBleHBpcmF0aW9uRGF0ZTsNCgkJCQkJfQ0KCQkJCQkNCgkJCQkJZnVuY3Rpb24gcmVhZExvY2F0aW9uQ29va2llKCkgew0KCQkJCQkJdmFyIGxvY2F0aW9uQ29va2llID0gZG9jdW1lbnQuY29va2llOw0KCQkJCQkJaWYoIGxvY2F0aW9uQ29va2llLmxlbmd0aCA+IDAgKSB7DQoJCQkJCQkJY19zdGFydD1sb2NhdGlvbkNvb2tpZS5pbmRleE9mKGNvb2tpZU5hbWUgKyAiPSIpDQoJCQkJCQkJaWYgKGNfc3RhcnQhPS0xKSB7DQoJCQkJCQkJCWNfc3RhcnQ9Y19zdGFydCArIGNvb2tpZU5hbWUubGVuZ3RoKzEgDQoJCQkJCQkJCWNfZW5kPWxvY2F0aW9uQ29va2llLmluZGV4T2YoIjsiLGNfc3RhcnQpDQoJCQkJCQkJCWlmIChjX2VuZCE9LTEpIHsNCgkJCQkJCQkJCXZhciBsb2NhdGlvbklkID0gdW5lc2NhcGUoZG9jdW1lbnQuY29va2llLnN1YnN0cmluZyhjX3N0YXJ0LGNfZW5kKSk7DQoJCQkJCQkJCQlyZXR1cm4gbG9jYXRpb25JZDsNCgkJCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkJCXZhciBsb2NhdGlvbklkID0gdW5lc2NhcGUoZG9jdW1lbnQuY29va2llLnN1YnN0cmluZyhjX3N0YXJ0KSk7DQoJCQkJCQkJCQlyZXR1cm4gbG9jYXRpb25JZC50cmltKCk7DQoJCQkJCQkJCX0NCgkJCQkJCQl9IA0KCQkJCQkJfQ0KCQkJCQkJcmV0dXJuIG51bGw7DQoJCQkJCX0NCgkJDQoJCQkJCXZhciBsb2NhdGlvbklkPXJlYWRMb2NhdGlvbkNvb2tpZSgpOw0KCQ0KCQkJCQlpZiggbG9jYXRpb25JZCAhPSBudWxsKSB7DQoJCQkJCQl2YXIgbG9jYXRpb25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicXVlcnlmb3JtTG9jYXRpb24iKTsNCgkJCQkJCWlmIChsb2NhdGlvblNlbGVjdCkgew0KCQkJCQkJCWxvY2F0aW9uU2VsZWN0LnZhbHVlID0gbG9jYXRpb25JZDsNCgkJCQkJCQkvLyBpZiB0aGUgdXNlciBzd2l0Y2hlZCBEQydzLCB0aGVuIGxvY2F0aW9uSWQgbWF5IG5vdCBiZSBpbiB0aGUgbGlzdC4uLg0KCQkJCQkJCWlmIChsb2NhdGlvblNlbGVjdC52YWx1ZSAhPSBsb2NhdGlvbklkKSB7DQoJCQkJCQkJCXdyaXRlTG9jYXRpb25Db29raWUoIiIpOw0KCQkJCQkJCQlsb2NhdGlvblNlbGVjdC5zZWxlY3RlZEluZGV4ID0gLTE7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWVsc2Ugew0KCQkJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJxdWVyeWZvcm1Mb2NhdGlvbiIpKSB7DQoJCQkJCQkJd3JpdGVMb2NhdGlvbkNvb2tpZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicXVlcnlmb3JtTG9jYXRpb24iKS52YWx1ZSk7DQoJCQkJCQl9CQ0KCQkJCQl9DQoJCQkJPC9zY3JpcHQ+DQoJCQkNCg0KCQkJPGI+PHNwYW4gY2xhc3M9InNlc3Npb25UZXh0Ij5QbGVhc2UgY29weSB0aGUgZm9sbG93aW5nIGFzIHRleHQgd2hlbiBsb2dnaW5nIGEgUUMuPC9zcGFuPjwvYj48YnIvPg0KCQkJPHNwYW4gY2xhc3M9InNlc3Npb25UZXh0Ij5TZXJ2ZXIgTmFtZTogICAgPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+V01YLVVJLUNMVVNURVI8L3NwYW4+PHNwYW4gY2xhc3M9InNlc3Npb25UZXh0Ij4gfCBBcHAgVmVyc2lvbjogICAgPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+NC4wLjIuNDQgKGU3MWFlMTEzMTA1MzBkNDBhNDgwOWI2ODczNWRiM2U2ZDU1ZDQ1MDYpPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+IHwgQ29uZmlnIFZlcnNpb246IDwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPjQuMC4yLjEyPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+IHwgQXBwIEJ1aWxkIERhdGU6IDwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPjIwMjQvMTEvMDUgMjE6Mjc6MTA8L3NwYW4+PHNwYW4gY2xhc3M9InNlc3Npb25UZXh0Ij4gfCBEQiBTZXJ2ZXI6ICAgICAgPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+VW5rbm93bi9VbmltcGxlbWVudGVkPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+IHwgVHJhbiBJZDogICAgICAgIDwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPmFhMWNkNzA4LTIwODYtNDRiOC05OTIyLWY4ODI0NzY1YjFmYzwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPiB8IFRyYW4gRGF0ZTogICAgICA8L3NwYW4+PHNwYW4gY2xhc3M9InNlc3Npb25UZXh0Ij4yMDI0LTExLTA3VDA5OjM1OjQ1LjA0NSswMDAwPC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+IHwgVXNlcklkOiAgICAgICAgIDwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPlBFUkYxMDgvOTM2PC9zcGFuPjxzcGFuIGNsYXNzPSJzZXNzaW9uVGV4dCI+IHwgSG9zdCBOYW1lOiAgICAgIDwvc3Bhbj48c3BhbiBjbGFzcz0ic2Vzc2lvblRleHQiPndteC1ib2x0LXFhLXVpLW1zMTwvc3Bhbj48aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0id214X3RyYW5zYWN0aW9uX2lkIiBuYW1lPSJ3bXhfdHJhbnNhY3Rpb25faWQiIHZhbHVlPSJhYTFjZDcwOC0yMDg2LTQ0YjgtOTkyMi1mODgyNDc2NWIxZmMiIC8+PGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9IndteF90cmFuc2FjdGlvbl9kYXRlIiBuYW1lPSJ3bXhfdHJhbnNhY3Rpb25fZGF0ZSIgdmFsdWU9IjIwMjQtMTEtMDdUMDk6MzU6NDUuMDQ1KzAwMDAiIC8+IA0KCQk8L2JvZHk+DQoJPC9odG1sPg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCjwhLS0gDQpib2R5IG5hbWU6IG51bGwgDQpyZXF1ZXN0ZWQgdGl0bGU6ICBudWxsLCBhY3R1YWwgdGl0bGUgbmFtZTogbnVsbCANCnJlcXVlc3RlZCBpbnRlcmZhY2UgaWQ6ICBudWxsLCBpbnRlcmZhY2UgaWQ6IG51bGwgDQpvbkV4aXRNZXRob2QgYm9keSBuYW1lOiANCklmIGV4aXN0cywgYWN0aW9uX3NlY3Rpb24gbmFtZTogbnVsbCANCg0KU2VydmVyTmFtZTogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpTZXJ2ZXJQb3J0OiA0NDMNClJlbW90ZUhvc3Q6IGF6bHdteGJvbHQwMnEud2VzY29kaXN0LmNvbQ0KUmVtb3RlQWRkcjogMTAuMjM4LjIxNi4yNg0KQnJvd3NlcjogTW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSkNCkxvY2FsZTogZW5fVVMNCg0KREM6IDkzNg0KVXNlcklkOiBQRVJGMTA4DQpFcXVpcG1lbnQ6IG51bGwNCkNvbmZpZ1ZlcnNpb246IDQuMC4yLjEyDQpBcHBTZXJ2ZXI6IFdNWC1VSS1DTFVTVEVSDQpBcHBCdWlsZE51bWJlcjogNC4wLjIuNDQNCkFwcFJldmlzaW9uOiBlNzFhZTExMzEwNTMwZDQwYTQ4MDliNjg3MzVkYjNlNmQ1NWQ0NTA2DQpBcHBCdWlsZERhdGU6IDIwMjQvMTEvMDUgMjE6Mjc6MTANCkRCU2VydmVyOiBVbmtub3duL1VuaW1wbGVtZW50ZWQNClRyYW5zYWN0aW9uSUQ6IGFhMWNkNzA4LTIwODYtNDRiOC05OTIyLWY4ODI0NzY1YjFmYyANClRyYW5zYWN0aW9uRGF0ZTogMjAyNC0xMS0wN1QwOTozNTo0NS4wNDUrMDAwMCANCi8vLS0+DQoNCg0KDQoNCg0KDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
      <HTTPTask id="15" hostname="qa.wmxbolt.wescodist.com" path="/wmx/css/drag_drop.css" url="https://qa.wmxbolt.wescodist.com/wmx/css/drag_drop.css" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="1" startDateTime="2024-11-07T09:35:45.881+00:00" startTime="2191" endTime="2199" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="1" waitTime="6" receiveTime="0" sslNegotiateTime="-1" responseBodySize="1320">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvY3NzL2RyYWdfZHJvcC5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>1073</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dGV4dC9jc3M=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTA3Mw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2Nzcw0KQ29udGVudC1MZW5ndGg6IDEwNzMNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyoqDQp0aGlzIGZpbGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIGEgSlNQIGlmIGRyYWcgYW5kIGRyb3Agb3Igc2VsZWN0aW9uIGxpc3QgYXJlIHVzZWQNCioqLw0KDQovKiBzZWxlY3RhYmxlIGxpc3QgKi8NCi5zZWxlY3RhYmxlTGlzdCB7DQp9DQoNCi5zZWxlY3RhYmxlTGlzdCB0aCB7DQoJYmFja2dyb3VuZDogIzAxNkZDOTsNCgljb2xvcjogI0ZGRkZGRjsNCglmb250LXdlaWdodDogYm9sZDsNCglmb250LXNpemU6IDEwcHQ7DQoJdGV4dC1hbGlnbjogY2VudGVyOw0KCWJvcmRlci10b3A6IDFweCBzb2xpZCBHQUlOU0JPUk87DQoJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBHQUlOU0JPUk87DQoJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIEJMQUNLOw0KCWJvcmRlci1yaWdodDogMXB4IHNvbGlkIEJMQUNLOw0KfQ0KDQouc2VsZWN0YWJsZUxpc3QgdGFibGUgew0KCXBhZGRpbmc6IDBweDsNCn0NCg0KLnNlbGVjdGFibGVMaXN0IHRkIHsNCgljb2xvcjogYmxhY2s7DQoJZm9udC1zaXplOiAxMHB0Ow0KCXBhZGRpbmctdG9wOiAwcHg7DQoJcGFkZGluZy1ib3R0b206IDBweDsNCglwYWRkaW5nLXJpZ2h0OiAwcHgNCn0NCg0KLnNlbGVjdGFibGVMaXN0IHNlbGVjdCB7DQoJYmFja2dyb3VuZDogV0hJVEU7DQoJY29sb3I6IEJMQUNLOw0KfQ0KLyogZW5kIHNlbGVjdGFibGUgbGlzdCAqLw0KDQovKiBzdGFydCBkcmFnIGFuZCBkcm9wICovDQouZHJhZ0Ryb3BTZWxlY3RJdGVtIHsNCgliYWNrZ3JvdW5kOiAjRDlDQ0VFOw0KCWJvcmRlcjogMXB4IHNvbGlkICM4RDY1Q0I7DQoJY3Vyc29yOiBtb3ZlOw0KfQ0KDQouZHJhZ0Ryb3BUYWJsZSB7DQoJYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQoJYm9yZGVyOiAxcHg7DQp9DQoNCi5kcmFnRHJvcFRhYmxlIHRkIHsNCglwYWRkaW5nOiA1cHg7DQoJd2lkdGg6IDIwMHB4Ow0KCWhlaWdodDogMjAwcHg7DQoJdmVydGljYWwtYWxpZ246IHRvcDsNCglib3JkZXI6IDFweCBzb2xpZCAjQ0NDQ0NDOw0KfQ0KDQouZHJhZ0Ryb3BUYWJsZSB0aCB7DQoJcGFkZGluZzogMHB4Ow0KCXdpZHRoOiAyMDBweDsNCn0NCi8qIGVuZCBkcmFnIGFuZCBkcm9wICovDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="16" hostname="qa.wmxbolt.wescodist.com" path="/wmx/css/treegrid/jquery.treegrid.css" url="https://qa.wmxbolt.wescodist.com/wmx/css/treegrid/jquery.treegrid.css" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="2" startDateTime="2024-11-07T09:35:45.881+00:00" startTime="2191" endTime="2197" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="5" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="668">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvY3NzL3RyZWVncmlkL2pxdWVyeS50cmVlZ3JpZC5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>422</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dGV4dC9jc3M=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>NDIy</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2Nzcw0KQ29udGVudC1MZW5ndGg6IDQyMg0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LnRyZWVncmlkLWluZGVudCB7d2lkdGg6MTZweDsgaGVpZ2h0OiAxNnB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBvc2l0aW9uOiByZWxhdGl2ZTt9DQoNCi50cmVlZ3JpZC1leHBhbmRlciB7d2lkdGg6MTZweDsgaGVpZ2h0OiAxNnB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBvc2l0aW9uOiByZWxhdGl2ZTsgY3Vyc29yOiBwb2ludGVyO30NCg0KLnRyZWVncmlkLWV4cGFuZGVyLWV4cGFuZGVke2JhY2tncm91bmQtaW1hZ2U6IHVybCguLi8uLi9pbWFnZS9hcnJvd19leHBhbmQuZ2lmKTsgd2lkdGg6IDEycHg7IGhlaWdodDogNnB4OyB9DQoudHJlZWdyaWQtZXhwYW5kZXItY29sbGFwc2Vke2JhY2tncm91bmQtaW1hZ2U6IHVybCguLi8uLi9pbWFnZS9hcnJvd19jb2xsYXBzZS5naWYpOyB3aWR0aDogNnB4OyBoZWlnaHQ6IDEycHg7IH0=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="17" hostname="qa.wmxbolt.wescodist.com" path="/wmx/css/jquery-ui.css" url="https://qa.wmxbolt.wescodist.com/wmx/css/jquery-ui.css" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="3" startDateTime="2024-11-07T09:35:45.888+00:00" startTime="2198" endTime="2208" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="6" waitTime="0" receiveTime="4" sslNegotiateTime="-1" responseBodySize="32412">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvY3NzL2pxdWVyeS11aS5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>32164</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dGV4dC9jc3M=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MzIxNjQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2Nzcw0KQ29udGVudC1MZW5ndGg6IDMyMTY0DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpYLVBvd2VyZWQtQnk6IFNlcnZsZXQvMy4wDQpYLVVBLUNvbXBhdGlibGU6IElFPTgNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjQgT2N0IDIwMjQgMjA6MjY6NDQgR01UDQpDb250ZW50LUxhbmd1YWdlOiBlbi1VUw0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyohIGpRdWVyeSBVSSAtIHYxLjEyLjEgLSAyMDE4LTAzLTA2DQoqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiogSW5jbHVkZXM6IGRyYWdnYWJsZS5jc3MsIGNvcmUuY3NzLCByZXNpemFibGUuY3NzLCBzZWxlY3RhYmxlLmNzcywgc29ydGFibGUuY3NzLCBidXR0b24uY3NzLCBjb250cm9sZ3JvdXAuY3NzLCBjaGVja2JveHJhZGlvLmNzcywgZGF0ZXBpY2tlci5jc3MsIGRpYWxvZy5jc3MsIHByb2dyZXNzYmFyLmNzcywgdG9vbHRpcC5jc3MsIHRoZW1lLmNzcw0KKiBUbyB2aWV3IGFuZCBtb2RpZnkgdGhpcyB0aGVtZSwgdmlzaXQgaHR0cDovL2pxdWVyeXVpLmNvbS90aGVtZXJvbGxlci8/c2NvcGU9JmZvbGRlck5hbWU9YmFzZSZjb3JuZXJSYWRpdXNTaGFkb3c9OHB4Jm9mZnNldExlZnRTaGFkb3c9MHB4Jm9mZnNldFRvcFNoYWRvdz0wcHgmdGhpY2tuZXNzU2hhZG93PTVweCZvcGFjaXR5U2hhZG93PTMwJmJnSW1nT3BhY2l0eVNoYWRvdz0wJmJnVGV4dHVyZVNoYWRvdz1mbGF0JmJnQ29sb3JTaGFkb3c9NjY2NjY2Jm9wYWNpdHlPdmVybGF5PTMwJmJnSW1nT3BhY2l0eU92ZXJsYXk9MCZiZ1RleHR1cmVPdmVybGF5PWZsYXQmYmdDb2xvck92ZXJsYXk9YWFhYWFhJmljb25Db2xvckVycm9yPWNjMDAwMCZmY0Vycm9yPTVmM2YzZiZib3JkZXJDb2xvckVycm9yPWYxYTg5OSZiZ1RleHR1cmVFcnJvcj1mbGF0JmJnQ29sb3JFcnJvcj1mZGRmZGYmaWNvbkNvbG9ySGlnaGxpZ2h0PTc3NzYyMCZmY0hpZ2hsaWdodD03Nzc2MjAmYm9yZGVyQ29sb3JIaWdobGlnaHQ9ZGFkNTVlJmJnVGV4dHVyZUhpZ2hsaWdodD1mbGF0JmJnQ29sb3JIaWdobGlnaHQ9ZmZmYTkwJmljb25Db2xvckFjdGl2ZT1mZmZmZmYmZmNBY3RpdmU9ZmZmZmZmJmJvcmRlckNvbG9yQWN0aXZlPTAwM2VmZiZiZ1RleHR1cmVBY3RpdmU9ZmxhdCZiZ0NvbG9yQWN0aXZlPTAwN2ZmZiZpY29uQ29sb3JIb3Zlcj01NTU1NTUmZmNIb3Zlcj0yYjJiMmImYm9yZGVyQ29sb3JIb3Zlcj1jY2NjY2MmYmdUZXh0dXJlSG92ZXI9ZmxhdCZiZ0NvbG9ySG92ZXI9ZWRlZGVkJmljb25Db2xvckRlZmF1bHQ9Nzc3Nzc3JmZjRGVmYXVsdD00NTQ1NDUmYm9yZGVyQ29sb3JEZWZhdWx0PWM1YzVjNSZiZ1RleHR1cmVEZWZhdWx0PWZsYXQmYmdDb2xvckRlZmF1bHQ9ZjZmNmY2Jmljb25Db2xvckNvbnRlbnQ9NDQ0NDQ0JmZjQ29udGVudD0zMzMzMzMmYm9yZGVyQ29sb3JDb250ZW50PWRkZGRkZCZiZ1RleHR1cmVDb250ZW50PWZsYXQmYmdDb2xvckNvbnRlbnQ9ZmZmZmZmJmljb25Db2xvckhlYWRlcj00NDQ0NDQmZmNIZWFkZXI9MzMzMzMzJmJvcmRlckNvbG9ySGVhZGVyPWRkZGRkZCZiZ1RleHR1cmVIZWFkZXI9ZmxhdCZiZ0NvbG9ySGVhZGVyPWU5ZTllOSZjb3JuZXJSYWRpdXM9M3B4JmZ3RGVmYXVsdD1ub3JtYWwmZnNEZWZhdWx0PTFlbSZmZkRlZmF1bHQ9QXJpYWwlMkNIZWx2ZXRpY2ElMkNzYW5zLXNlcmlmDQoqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi8NCg0KLnVpLWRyYWdnYWJsZS1oYW5kbGUgew0KCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7DQoJdG91Y2gtYWN0aW9uOiBub25lOw0KfQ0KLyogTGF5b3V0IGhlbHBlcnMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLnVpLWhlbHBlci1oaWRkZW4gew0KCWRpc3BsYXk6IG5vbmU7DQp9DQoudWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIHsNCglib3JkZXI6IDA7DQoJY2xpcDogcmVjdCgwIDAgMCAwKTsNCgloZWlnaHQ6IDFweDsNCgltYXJnaW46IC0xcHg7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCglwYWRkaW5nOiAwOw0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgl3aWR0aDogMXB4Ow0KfQ0KLnVpLWhlbHBlci1yZXNldCB7DQoJbWFyZ2luOiAwOw0KCXBhZGRpbmc6IDA7DQoJYm9yZGVyOiAwOw0KCW91dGxpbmU6IDA7DQoJbGluZS1oZWlnaHQ6IDEuMzsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJZm9udC1zaXplOiAxMDAlOw0KCWxpc3Qtc3R5bGU6IG5vbmU7DQp9DQoudWktaGVscGVyLWNsZWFyZml4OmJlZm9yZSwNCi51aS1oZWxwZXItY2xlYXJmaXg6YWZ0ZXIgew0KCWNvbnRlbnQ6ICIiOw0KCWRpc3BsYXk6IHRhYmxlOw0KCWJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7DQp9DQoudWktaGVscGVyLWNsZWFyZml4OmFmdGVyIHsNCgljbGVhcjogYm90aDsNCn0NCi51aS1oZWxwZXItemZpeCB7DQoJd2lkdGg6IDEwMCU7DQoJaGVpZ2h0OiAxMDAlOw0KCXRvcDogMDsNCglsZWZ0OiAwOw0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCglvcGFjaXR5OiAwOw0KCWZpbHRlcjpBbHBoYShPcGFjaXR5PTApOyAvKiBzdXBwb3J0OiBJRTggKi8NCn0NCg0KLnVpLWZyb250IHsNCgl6LWluZGV4OiAxMDA7DQp9DQoNCg0KLyogSW50ZXJhY3Rpb24gQ3Vlcw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoudWktc3RhdGUtZGlzYWJsZWQgew0KCWN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50Ow0KCXBvaW50ZXItZXZlbnRzOiBub25lOw0KfQ0KDQoNCi8qIEljb25zDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCi51aS1pY29uIHsNCglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQoJdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCgltYXJnaW4tdG9wOiAtLjI1ZW07DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCXRleHQtaW5kZW50OiAtOTk5OTlweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCWJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQoNCi51aS13aWRnZXQtaWNvbi1ibG9jayB7DQoJbGVmdDogNTAlOw0KCW1hcmdpbi1sZWZ0OiAtOHB4Ow0KCWRpc3BsYXk6IGJsb2NrOw0KfQ0KDQovKiBNaXNjIHZpc3VhbHMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQovKiBPdmVybGF5cyAqLw0KLnVpLXdpZGdldC1vdmVybGF5IHsNCglwb3NpdGlvbjogZml4ZWQ7DQoJdG9wOiAwOw0KCWxlZnQ6IDA7DQoJd2lkdGg6IDEwMCU7DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KLnVpLXJlc2l6YWJsZSB7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLnVpLXJlc2l6YWJsZS1oYW5kbGUgew0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCglmb250LXNpemU6IDAuMXB4Ow0KCWRpc3BsYXk6IGJsb2NrOw0KCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7DQoJdG91Y2gtYWN0aW9uOiBub25lOw0KfQ0KLnVpLXJlc2l6YWJsZS1kaXNhYmxlZCAudWktcmVzaXphYmxlLWhhbmRsZSwNCi51aS1yZXNpemFibGUtYXV0b2hpZGUgLnVpLXJlc2l6YWJsZS1oYW5kbGUgew0KCWRpc3BsYXk6IG5vbmU7DQp9DQoudWktcmVzaXphYmxlLW4gew0KCWN1cnNvcjogbi1yZXNpemU7DQoJaGVpZ2h0OiA3cHg7DQoJd2lkdGg6IDEwMCU7DQoJdG9wOiAtNXB4Ow0KCWxlZnQ6IDA7DQp9DQoudWktcmVzaXphYmxlLXMgew0KCWN1cnNvcjogcy1yZXNpemU7DQoJaGVpZ2h0OiA3cHg7DQoJd2lkdGg6IDEwMCU7DQoJYm90dG9tOiAtNXB4Ow0KCWxlZnQ6IDA7DQp9DQoudWktcmVzaXphYmxlLWUgew0KCWN1cnNvcjogZS1yZXNpemU7DQoJd2lkdGg6IDdweDsNCglyaWdodDogLTVweDsNCgl0b3A6IDA7DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KLnVpLXJlc2l6YWJsZS13IHsNCgljdXJzb3I6IHctcmVzaXplOw0KCXdpZHRoOiA3cHg7DQoJbGVmdDogLTVweDsNCgl0b3A6IDA7DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KLnVpLXJlc2l6YWJsZS1zZSB7DQoJY3Vyc29yOiBzZS1yZXNpemU7DQoJd2lkdGg6IDEycHg7DQoJaGVpZ2h0OiAxMnB4Ow0KCXJpZ2h0OiAxcHg7DQoJYm90dG9tOiAxcHg7DQp9DQoudWktcmVzaXphYmxlLXN3IHsNCgljdXJzb3I6IHN3LXJlc2l6ZTsNCgl3aWR0aDogOXB4Ow0KCWhlaWdodDogOXB4Ow0KCWxlZnQ6IC01cHg7DQoJYm90dG9tOiAtNXB4Ow0KfQ0KLnVpLXJlc2l6YWJsZS1udyB7DQoJY3Vyc29yOiBudy1yZXNpemU7DQoJd2lkdGg6IDlweDsNCgloZWlnaHQ6IDlweDsNCglsZWZ0OiAtNXB4Ow0KCXRvcDogLTVweDsNCn0NCi51aS1yZXNpemFibGUtbmUgew0KCWN1cnNvcjogbmUtcmVzaXplOw0KCXdpZHRoOiA5cHg7DQoJaGVpZ2h0OiA5cHg7DQoJcmlnaHQ6IC01cHg7DQoJdG9wOiAtNXB4Ow0KfQ0KLnVpLXNlbGVjdGFibGUgew0KCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7DQoJdG91Y2gtYWN0aW9uOiBub25lOw0KfQ0KLnVpLXNlbGVjdGFibGUtaGVscGVyIHsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJei1pbmRleDogMTAwOw0KCWJvcmRlcjogMXB4IGRvdHRlZCBibGFjazsNCn0NCi51aS1zb3J0YWJsZS1oYW5kbGUgew0KCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7DQoJdG91Y2gtYWN0aW9uOiBub25lOw0KfQ0KLnVpLWJ1dHRvbiB7DQoJcGFkZGluZzogLjRlbSAxZW07DQoJZGlzcGxheTogaW5saW5lLWJsb2NrOw0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCglsaW5lLWhlaWdodDogbm9ybWFsOw0KCW1hcmdpbi1yaWdodDogLjFlbTsNCgljdXJzb3I6IHBvaW50ZXI7DQoJdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsNCgktbW96LXVzZXItc2VsZWN0OiBub25lOw0KCS1tcy11c2VyLXNlbGVjdDogbm9uZTsNCgl1c2VyLXNlbGVjdDogbm9uZTsNCg0KCS8qIFN1cHBvcnQ6IElFIDw9IDExICovDQoJb3ZlcmZsb3c6IHZpc2libGU7DQp9DQoNCi51aS1idXR0b24sDQoudWktYnV0dG9uOmxpbmssDQoudWktYnV0dG9uOnZpc2l0ZWQsDQoudWktYnV0dG9uOmhvdmVyLA0KLnVpLWJ1dHRvbjphY3RpdmUgew0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KLyogdG8gbWFrZSByb29tIGZvciB0aGUgaWNvbiwgYSB3aWR0aCBuZWVkcyB0byBiZSBzZXQgaGVyZSAqLw0KLnVpLWJ1dHRvbi1pY29uLW9ubHkgew0KCXdpZHRoOiAyZW07DQoJYm94LXNpemluZzogYm9yZGVyLWJveDsNCgl0ZXh0LWluZGVudDogLTk5OTlweDsNCgl3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0KDQovKiBubyBpY29uIHN1cHBvcnQgZm9yIGlucHV0IGVsZW1lbnRzICovDQppbnB1dC51aS1idXR0b24udWktYnV0dG9uLWljb24tb25seSB7DQoJdGV4dC1pbmRlbnQ6IDA7DQp9DQoNCi8qIGJ1dHRvbiBpY29uIGVsZW1lbnQocykgKi8NCi51aS1idXR0b24taWNvbi1vbmx5IC51aS1pY29uIHsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJdG9wOiA1MCU7DQoJbGVmdDogNTAlOw0KCW1hcmdpbi10b3A6IC04cHg7DQoJbWFyZ2luLWxlZnQ6IC04cHg7DQp9DQoNCi51aS1idXR0b24udWktaWNvbi1ub3RleHQgLnVpLWljb24gew0KCXBhZGRpbmc6IDA7DQoJd2lkdGg6IDIuMWVtOw0KCWhlaWdodDogMi4xZW07DQoJdGV4dC1pbmRlbnQ6IC05OTk5cHg7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCg0KfQ0KDQppbnB1dC51aS1idXR0b24udWktaWNvbi1ub3RleHQgLnVpLWljb24gew0KCXdpZHRoOiBhdXRvOw0KCWhlaWdodDogYXV0bzsNCgl0ZXh0LWluZGVudDogMDsNCgl3aGl0ZS1zcGFjZTogbm9ybWFsOw0KCXBhZGRpbmc6IC40ZW0gMWVtOw0KfQ0KDQovKiB3b3JrYXJvdW5kcyAqLw0KLyogU3VwcG9ydDogRmlyZWZveCA1IC0gNDAgKi8NCmlucHV0LnVpLWJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lciwNCmJ1dHRvbi51aS1idXR0b246Oi1tb3otZm9jdXMtaW5uZXIgew0KCWJvcmRlcjogMDsNCglwYWRkaW5nOiAwOw0KfQ0KLnVpLWNvbnRyb2xncm91cCB7DQoJdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQoudWktY29udHJvbGdyb3VwID4gLnVpLWNvbnRyb2xncm91cC1pdGVtIHsNCglmbG9hdDogbGVmdDsNCgltYXJnaW4tbGVmdDogMDsNCgltYXJnaW4tcmlnaHQ6IDA7DQp9DQoudWktY29udHJvbGdyb3VwID4gLnVpLWNvbnRyb2xncm91cC1pdGVtOmZvY3VzLA0KLnVpLWNvbnRyb2xncm91cCA+IC51aS1jb250cm9sZ3JvdXAtaXRlbS51aS12aXN1YWwtZm9jdXMgew0KCXotaW5kZXg6IDk5OTk7DQp9DQoudWktY29udHJvbGdyb3VwLXZlcnRpY2FsID4gLnVpLWNvbnRyb2xncm91cC1pdGVtIHsNCglkaXNwbGF5OiBibG9jazsNCglmbG9hdDogbm9uZTsNCgl3aWR0aDogMTAwJTsNCgltYXJnaW4tdG9wOiAwOw0KCW1hcmdpbi1ib3R0b206IDA7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCi51aS1jb250cm9sZ3JvdXAtdmVydGljYWwgLnVpLWNvbnRyb2xncm91cC1pdGVtIHsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLnVpLWNvbnRyb2xncm91cCAudWktY29udHJvbGdyb3VwLWxhYmVsIHsNCglwYWRkaW5nOiAuNGVtIDFlbTsNCn0NCi51aS1jb250cm9sZ3JvdXAgLnVpLWNvbnRyb2xncm91cC1sYWJlbCBzcGFuIHsNCglmb250LXNpemU6IDgwJTsNCn0NCi51aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCAudWktY29udHJvbGdyb3VwLWxhYmVsICsgLnVpLWNvbnRyb2xncm91cC1pdGVtIHsNCglib3JkZXItbGVmdDogbm9uZTsNCn0NCi51aS1jb250cm9sZ3JvdXAtdmVydGljYWwgLnVpLWNvbnRyb2xncm91cC1sYWJlbCArIC51aS1jb250cm9sZ3JvdXAtaXRlbSB7DQoJYm9yZGVyLXRvcDogbm9uZTsNCn0NCi51aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCAudWktY29udHJvbGdyb3VwLWxhYmVsLnVpLXdpZGdldC1jb250ZW50IHsNCglib3JkZXItcmlnaHQ6IG5vbmU7DQp9DQoudWktY29udHJvbGdyb3VwLXZlcnRpY2FsIC51aS1jb250cm9sZ3JvdXAtbGFiZWwudWktd2lkZ2V0LWNvbnRlbnQgew0KCWJvcmRlci1ib3R0b206IG5vbmU7DQp9DQoNCi8qIFNwaW5uZXIgc3BlY2lmaWMgc3R5bGUgZml4ZXMgKi8NCi51aS1jb250cm9sZ3JvdXAtdmVydGljYWwgLnVpLXNwaW5uZXItaW5wdXQgew0KDQoJLyogU3VwcG9ydDogSUU4IG9ubHksIEFuZHJvaWQgPCA0LjQgb25seSAqLw0KCXdpZHRoOiA3NSU7DQoJd2lkdGg6IGNhbGMoIDEwMCUgLSAyLjRlbSApOw0KfQ0KLnVpLWNvbnRyb2xncm91cC12ZXJ0aWNhbCAudWktc3Bpbm5lciAudWktc3Bpbm5lci11cCB7DQoJYm9yZGVyLXRvcC1zdHlsZTogc29saWQ7DQp9DQoNCi51aS1jaGVja2JveHJhZGlvLWxhYmVsIC51aS1pY29uLWJhY2tncm91bmQgew0KCWJveC1zaGFkb3c6IGluc2V0IDFweCAxcHggMXB4ICNjY2M7DQoJYm9yZGVyLXJhZGl1czogLjEyZW07DQoJYm9yZGVyOiBub25lOw0KfQ0KLnVpLWNoZWNrYm94cmFkaW8tcmFkaW8tbGFiZWwgLnVpLWljb24tYmFja2dyb3VuZCB7DQoJd2lkdGg6IDE2cHg7DQoJaGVpZ2h0OiAxNnB4Ow0KCWJvcmRlci1yYWRpdXM6IDFlbTsNCglvdmVyZmxvdzogdmlzaWJsZTsNCglib3JkZXI6IG5vbmU7DQp9DQoudWktY2hlY2tib3hyYWRpby1yYWRpby1sYWJlbC51aS1jaGVja2JveHJhZGlvLWNoZWNrZWQgLnVpLWljb24sDQoudWktY2hlY2tib3hyYWRpby1yYWRpby1sYWJlbC51aS1jaGVja2JveHJhZGlvLWNoZWNrZWQ6aG92ZXIgLnVpLWljb24gew0KCWJhY2tncm91bmQtaW1hZ2U6IG5vbmU7DQoJd2lkdGg6IDhweDsNCgloZWlnaHQ6IDhweDsNCglib3JkZXItd2lkdGg6IDRweDsNCglib3JkZXItc3R5bGU6IHNvbGlkOw0KfQ0KLnVpLWNoZWNrYm94cmFkaW8tZGlzYWJsZWQgew0KCXBvaW50ZXItZXZlbnRzOiBub25lOw0KfQ0KLnVpLWRhdGVwaWNrZXIgew0KCXdpZHRoOiAxN2VtOw0KCXBhZGRpbmc6IC4yZW0gLjJlbSAwOw0KCWRpc3BsYXk6IG5vbmU7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1oZWFkZXIgew0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCglwYWRkaW5nOiAuMmVtIDA7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2LA0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItbmV4dCB7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCXRvcDogMnB4Ow0KCXdpZHRoOiAxLjhlbTsNCgloZWlnaHQ6IDEuOGVtOw0KfQ0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciwNCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLW5leHQtaG92ZXIgew0KCXRvcDogMXB4Ow0KfQ0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItcHJldiB7DQoJbGVmdDogMnB4Ow0KfQ0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItbmV4dCB7DQoJcmlnaHQ6IDJweDsNCn0NCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLXByZXYtaG92ZXIgew0KCWxlZnQ6IDFweDsNCn0NCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLW5leHQtaG92ZXIgew0KCXJpZ2h0OiAxcHg7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2IHNwYW4sDQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1uZXh0IHNwYW4gew0KCWRpc3BsYXk6IGJsb2NrOw0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCglsZWZ0OiA1MCU7DQoJbWFyZ2luLWxlZnQ6IC04cHg7DQoJdG9wOiA1MCU7DQoJbWFyZ2luLXRvcDogLThweDsNCn0NCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLXRpdGxlIHsNCgltYXJnaW46IDAgMi4zZW07DQoJbGluZS1oZWlnaHQ6IDEuOGVtOw0KCXRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLXRpdGxlIHNlbGVjdCB7DQoJZm9udC1zaXplOiAxZW07DQoJbWFyZ2luOiAxcHggMDsNCn0NCi51aS1kYXRlcGlja2VyIHNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLA0KLnVpLWRhdGVwaWNrZXIgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciB7DQoJd2lkdGg6IDQ1JTsNCn0NCi51aS1kYXRlcGlja2VyIHRhYmxlIHsNCgl3aWR0aDogMTAwJTsNCglmb250LXNpemU6IC45ZW07DQoJYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCgltYXJnaW46IDAgMCAuNGVtOw0KfQ0KLnVpLWRhdGVwaWNrZXIgdGggew0KCXBhZGRpbmc6IC43ZW0gLjNlbTsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJYm9yZGVyOiAwOw0KfQ0KLnVpLWRhdGVwaWNrZXIgdGQgew0KCWJvcmRlcjogMDsNCglwYWRkaW5nOiAxcHg7DQp9DQoudWktZGF0ZXBpY2tlciB0ZCBzcGFuLA0KLnVpLWRhdGVwaWNrZXIgdGQgYSB7DQoJZGlzcGxheTogYmxvY2s7DQoJcGFkZGluZzogLjJlbTsNCgl0ZXh0LWFsaWduOiByaWdodDsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHsNCgliYWNrZ3JvdW5kLWltYWdlOiBub25lOw0KCW1hcmdpbjogLjdlbSAwIDAgMDsNCglwYWRkaW5nOiAwIC4yZW07DQoJYm9yZGVyLWxlZnQ6IDA7DQoJYm9yZGVyLXJpZ2h0OiAwOw0KCWJvcmRlci1ib3R0b206IDA7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbiB7DQoJZmxvYXQ6IHJpZ2h0Ow0KCW1hcmdpbjogLjVlbSAuMmVtIC40ZW07DQoJY3Vyc29yOiBwb2ludGVyOw0KCXBhZGRpbmc6IC4yZW0gLjZlbSAuM2VtIC42ZW07DQoJd2lkdGg6IGF1dG87DQoJb3ZlcmZsb3c6IHZpc2libGU7DQp9DQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbi51aS1kYXRlcGlja2VyLWN1cnJlbnQgew0KCWZsb2F0OiBsZWZ0Ow0KfQ0KDQovKiB3aXRoIG11bHRpcGxlIGNhbGVuZGFycyAqLw0KLnVpLWRhdGVwaWNrZXIudWktZGF0ZXBpY2tlci1tdWx0aSB7DQoJd2lkdGg6IGF1dG87DQp9DQoudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cCB7DQoJZmxvYXQ6IGxlZnQ7DQp9DQoudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cCB0YWJsZSB7DQoJd2lkdGg6IDk1JTsNCgltYXJnaW46IDAgYXV0byAuNGVtOw0KfQ0KLnVpLWRhdGVwaWNrZXItbXVsdGktMiAudWktZGF0ZXBpY2tlci1ncm91cCB7DQoJd2lkdGg6IDUwJTsNCn0NCi51aS1kYXRlcGlja2VyLW11bHRpLTMgLnVpLWRhdGVwaWNrZXItZ3JvdXAgew0KCXdpZHRoOiAzMy4zJTsNCn0NCi51aS1kYXRlcGlja2VyLW11bHRpLTQgLnVpLWRhdGVwaWNrZXItZ3JvdXAgew0KCXdpZHRoOiAyNSU7DQp9DQoudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cC1sYXN0IC51aS1kYXRlcGlja2VyLWhlYWRlciwNCi51aS1kYXRlcGlja2VyLW11bHRpIC51aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZSAudWktZGF0ZXBpY2tlci1oZWFkZXIgew0KCWJvcmRlci1sZWZ0LXdpZHRoOiAwOw0KfQ0KLnVpLWRhdGVwaWNrZXItbXVsdGkgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB7DQoJY2xlYXI6IGxlZnQ7DQp9DQoudWktZGF0ZXBpY2tlci1yb3ctYnJlYWsgew0KCWNsZWFyOiBib3RoOw0KCXdpZHRoOiAxMDAlOw0KCWZvbnQtc2l6ZTogMDsNCn0NCg0KLyogUlRMIHN1cHBvcnQgKi8NCi51aS1kYXRlcGlja2VyLXJ0bCB7DQoJZGlyZWN0aW9uOiBydGw7DQp9DQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItcHJldiB7DQoJcmlnaHQ6IDJweDsNCglsZWZ0OiBhdXRvOw0KfQ0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLW5leHQgew0KCWxlZnQ6IDJweDsNCglyaWdodDogYXV0bzsNCn0NCi51aS1kYXRlcGlja2VyLXJ0bCAudWktZGF0ZXBpY2tlci1wcmV2OmhvdmVyIHsNCglyaWdodDogMXB4Ow0KCWxlZnQ6IGF1dG87DQp9DQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItbmV4dDpob3ZlciB7DQoJbGVmdDogMXB4Ow0KCXJpZ2h0OiBhdXRvOw0KfQ0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgew0KCWNsZWFyOiByaWdodDsNCn0NCi51aS1kYXRlcGlja2VyLXJ0bCAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbiB7DQoJZmxvYXQ6IGxlZnQ7DQp9DQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSBidXR0b24udWktZGF0ZXBpY2tlci1jdXJyZW50LA0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWdyb3VwIHsNCglmbG9hdDogcmlnaHQ7DQp9DQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCAudWktZGF0ZXBpY2tlci1oZWFkZXIsDQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIC51aS1kYXRlcGlja2VyLWhlYWRlciB7DQoJYm9yZGVyLXJpZ2h0LXdpZHRoOiAwOw0KCWJvcmRlci1sZWZ0LXdpZHRoOiAxcHg7DQp9DQoNCi8qIEljb25zICovDQoudWktZGF0ZXBpY2tlciAudWktaWNvbiB7DQoJZGlzcGxheTogYmxvY2s7DQoJdGV4dC1pbmRlbnQ6IC05OTk5OXB4Ow0KCW92ZXJmbG93OiBoaWRkZW47DQoJYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsNCglsZWZ0OiAuNWVtOw0KCXRvcDogLjNlbTsNCn0NCi51aS1kaWFsb2cgew0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgl0b3A6IDA7DQoJbGVmdDogMDsNCglwYWRkaW5nOiAuMmVtOw0KCW91dGxpbmU6IDA7DQp9DQoudWktZGlhbG9nIC51aS1kaWFsb2ctdGl0bGViYXIgew0KCXBhZGRpbmc6IC40ZW0gMWVtOw0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCi51aS1kaWFsb2cgLnVpLWRpYWxvZy10aXRsZSB7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luOiAuMWVtIDA7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCgl3aWR0aDogOTAlOw0KCW92ZXJmbG93OiBoaWRkZW47DQoJdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQp9DQoudWktZGlhbG9nIC51aS1kaWFsb2ctdGl0bGViYXItY2xvc2Ugew0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCglyaWdodDogLjNlbTsNCgl0b3A6IDUwJTsNCgl3aWR0aDogMjBweDsNCgltYXJnaW46IC0xMHB4IDAgMCAwOw0KCXBhZGRpbmc6IDFweDsNCgloZWlnaHQ6IDIwcHg7DQp9DQoudWktZGlhbG9nIC51aS1kaWFsb2ctY29udGVudCB7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCWJvcmRlcjogMDsNCglwYWRkaW5nOiAuNWVtIDFlbTsNCgliYWNrZ3JvdW5kOiBub25lOw0KCW92ZXJmbG93OiBhdXRvOw0KfQ0KLnVpLWRpYWxvZyAudWktZGlhbG9nLWJ1dHRvbnBhbmUgew0KCXRleHQtYWxpZ246IGxlZnQ7DQoJYm9yZGVyLXdpZHRoOiAxcHggMCAwIDA7DQoJYmFja2dyb3VuZC1pbWFnZTogbm9uZTsNCgltYXJnaW4tdG9wOiAuNWVtOw0KCXBhZGRpbmc6IC4zZW0gMWVtIC41ZW0gLjRlbTsNCn0NCi51aS1kaWFsb2cgLnVpLWRpYWxvZy1idXR0b25wYW5lIC51aS1kaWFsb2ctYnV0dG9uc2V0IHsNCglmbG9hdDogcmlnaHQ7DQp9DQoudWktZGlhbG9nIC51aS1kaWFsb2ctYnV0dG9ucGFuZSBidXR0b24gew0KCW1hcmdpbjogLjVlbSAuNGVtIC41ZW0gMDsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQoudWktZGlhbG9nIC51aS1yZXNpemFibGUtbiB7DQoJaGVpZ2h0OiAycHg7DQoJdG9wOiAwOw0KfQ0KLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLWUgew0KCXdpZHRoOiAycHg7DQoJcmlnaHQ6IDA7DQp9DQoudWktZGlhbG9nIC51aS1yZXNpemFibGUtcyB7DQoJaGVpZ2h0OiAycHg7DQoJYm90dG9tOiAwOw0KfQ0KLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLXcgew0KCXdpZHRoOiAycHg7DQoJbGVmdDogMDsNCn0NCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1zZSwNCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1zdywNCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1uZSwNCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1udyB7DQoJd2lkdGg6IDdweDsNCgloZWlnaHQ6IDdweDsNCn0NCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1zZSB7DQoJcmlnaHQ6IDA7DQoJYm90dG9tOiAwOw0KfQ0KLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLXN3IHsNCglsZWZ0OiAwOw0KCWJvdHRvbTogMDsNCn0NCi51aS1kaWFsb2cgLnVpLXJlc2l6YWJsZS1uZSB7DQoJcmlnaHQ6IDA7DQoJdG9wOiAwOw0KfQ0KLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLW53IHsNCglsZWZ0OiAwOw0KCXRvcDogMDsNCn0NCi51aS1kcmFnZ2FibGUgLnVpLWRpYWxvZy10aXRsZWJhciB7DQoJY3Vyc29yOiBtb3ZlOw0KfQ0KLnVpLXByb2dyZXNzYmFyIHsNCgloZWlnaHQ6IDJlbTsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KCW92ZXJmbG93OiBoaWRkZW47DQp9DQoudWktcHJvZ3Jlc3NiYXIgLnVpLXByb2dyZXNzYmFyLXZhbHVlIHsNCgltYXJnaW46IC0xcHg7DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KLnVpLXByb2dyZXNzYmFyIC51aS1wcm9ncmVzc2Jhci1vdmVybGF5IHsNCgliYWNrZ3JvdW5kOiB1cmwoImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEtBQW9BSUFCQUFBQUFQLy8veUgvQzA1RlZGTkRRVkJGTWk0d0F3RUFBQUFoK1FRSkFRQUJBQ3dBQUFBQUtBQW9BQUFDa1l3TnFYcmRDNTJEUzA2YTdNRlpJKzRGSEJDS29EZVdLWHF5bVBxR3F4dkpyWFpiTXg3VHRjK3c5WGdVMkZCM2xPeVFSV0VUMklGR2lVOW0xZnJEVnB4WlpjNmJmSHd2NGMxWVhQNmsxVmR5MjkyRmI2VWt1dkZ0WHB2V1N6QStIeWNYSkhVWGlHWUlpTWcyUjZXNDU5Z25XR2ZITmRqSXFEV1ZxZW1IMmVrcE9ia3BPbHBwV1VxWmlxcjZlZHFxV1FBQUlma0VDUUVBQVFBc0FBQUFBQ2dBS0FBQUFwU01nWm5HZmFxY2cxRTJ1dXpEbW1IVUJSOFFpbDk1aGlQS3FXbjNhcXRMc1MxOHk3RzFTek5lb3dXQkVOdFFkK1QxSmt0UDA1bnpQVGRKWmxSNnZVeE5XV2pWK3ZVV2hXTmtXRnd4bDlWcFpSZWRZY2ZsSU9MYWZhYTI4WGRzSC95bmxjYzF1UFZEWnhRSVIwSzI1K2NJQ0Ntb3FDZTVtR2haT2ZlWVNVaDV5SmNKeXJrWldXcGFSOGRvSjJvNE5ZcTYybEFBQUNINUJBa0JBQUVBTEFBQUFBQW9BQ2dBQUFLVkRJNFl5MjJabklOUk5xb3N3MEJ2N2kxZ3lIVWtGajdvU2FXbHUzb3ZDOEd4TnNvNWZsdXozcUxWaEJWZVQvTHo3WlRIeXhMNWREYWxRV1BWT3NRV3RSbnV3WGFGVGo5alZWaDhwbWE5SmpaNHpZU2o1Wk95bWE3dXVvbGZmaCtJUjVhVzk3Y0h1QlVYS0dLWGxLam4rRGlIV01jWUphaDROMGxZQ01sSk9YaXBHUnI1cWRnb1NUcnFXU3E2V0ZsMnlwb2FVQUFBSWZrRUNRRUFBUUFzQUFBQUFDZ0FLQUFBQXBhRWI2SExnZC9pTzdGTld0Y0ZXZSt1Zk9ER2pSZm9pSjJha1NoYnVlYjB3dEk1MHptMDJwYnZ3ZldFTVdCUTF6S0dsTEloc2tpRVBtOVI2dlJYeFY0WnpXVDJ5SE9HcFdNeW9yYmxLbE5wOEhtSEViL2xDWGpjVzdibXRYUDhYdDIyOU9WV1IxZm9kMmVXcU5mSHVNalhDUGtJR05pbGVPaUltVm1DT0Vtb1NmbjN5WGxKV21vSEdocXA2aWxZdVdZcG1UcUtVZ0FBSWZrRUNRRUFBUUFzQUFBQUFDZ0FLQUFBQXBpRUg2a2I1OGJpUTNGTld0TUZXVzNlTlZjb2p1RkdmcW5acVNlYnVTMDZ3NVY4MC9YMDJwS2U4ekZ3UDZFRldPVDFsREZrOHJHRVJoMVRUTk9vY1E2MUhtNFhtMlZleFVIcHpqeW1WaUhyRmJpRUxzZWZWcm42WEtmbnQyUTlHLytYZGllNDk5WEhkMmc0aDdpb09HaFhHSmJvR0FuWFNCbm9Cd0tZeWZpb3ViWkoySG4wUnVSWmFmbFpPaWw1NlpwNmlpb0tTWHBVQUFBaCtRUUpBUUFCQUN3QUFBQUFLQUFvQUFBQ2tvUVJxUnZueHVJN2tVMWExVVU1YmQ1dG5TZU9aWGhtbjVsV0szcU5UV3ZSZFF4UDhxdmFDKy95YVlRelhPN0JNdmFVRW1KUmQzVHNpTUFnc3dtTllyU2daZFlyVFg2dFNIR1pPNzNlenVBdzJ1eHVRK0JiZVpmTXhzZXhZMzUrL1FlNEoxaW5WMGc0eDNXSHVNaElsMmpYT0tUMlErVlU1ZmdvU1VJNTJWZlp5ZmtKR2toYTZqbVkrYWFZZGlycStsUUFBQ0g1QkFrQkFBRUFMQUFBQUFBb0FDZ0FBQUtXQklLcFllMEwzWU5LVG9xc3dVbHZ6bmlnZDR3aVI0S2hackt0OVVwcWlwNjFpOUUzdk12eFJkSGxiRUZpRVhmazlZQVJZeE9aWkQ2VlEycFV1bkJtdFJYbzFMZjhoTVZWY05sOEphZlYzOGFNMi9GdTVWMTZCbjYzcjZ4dDk3ajA5K01YU0ZpNEJuaUdGYWUzaHpiSDkraFlCemtwdVVoNWFabUh1YW5aT1pnSXV2YkdpTmVvbUNuYXh4YXAydXBhQ1pzcSsxa0FBQ0g1QkFrQkFBRUFMQUFBQUFBb0FDZ0FBQUtYakk4Qnk1emY0a094VFZyWE5WbHYxWDBkOElHWkdLTG5OcFl0bThMcjljcVZldU9TdmZPVzc5RDlhREhpek5oREppZEZaaE55ZEVhaE9hREg2bm9tdEpqcDF0dXRLb05Xa3ZBNkpxZlJWTEhVL1FVZmF1OWwyeDdHNTRkMWZsOTk1eGNJR0FkWHFNZkJOYWRvWXJoSCtNZzJLQmxwVnBibHVDaVhtTW5aMlNoNEdCcUorY2tJT3FxSjZMbUtTbGxabXNvcTZ3cFFBQUFoK1FRSkFRQUJBQ3dBQUFBQUtBQW9BQUFDbFl4L29Mdm94dUpEa1UxYTFZVVpiSjU5blNkMlpYaFdxYlJhMi9nRjhHdTJEWTNpcXM3eXJxK3hCWUVrWXZGU004YVNTT2JFK1pnUmwxQkhGWk5yN3BSQ2F2WjVCVzIxNDJoWTNBTi96V3RzbWYxMnA5WHh4RmwybHBMbjFyc2V6dGZYWmpkSVdJZjJzNWRJdHdqWUtCZ285eWc1cEhnekpYVEVlR2xadWVucHlQbXBHUW9LT1drWW1TcGFTbnFLaWxlSTJGQUFBQ0g1QkFrQkFBRUFMQUFBQUFBb0FDZ0FBQUtWakIrZ3Urakc0a09SVFZyVmhSbHNubjJkSjNabGVGYXB0RnJiK0NYbU85T296ZUw1VmZQOTlIdkFXaHBpVWRjd2twQkgzODI1QXdZZFU4eFRxbExHaHRDb3NBcktNcHZmYTFtTVJhZTlWdldaZmVCMlhmUGtlTG1tMThsVWNCaitwNWRuTjhqWFozWUlHRWhZdU9VbjQ1YW9DRGtwMTZobDVJallKdmpXS2Nub0dRcHF5UGxwT2hyM2FFbGFxcnE1NkJxN1ZBQUFPdz09Iik7DQoJaGVpZ2h0OiAxMDAlOw0KCWZpbHRlcjogYWxwaGEob3BhY2l0eT0yNSk7IC8qIHN1cHBvcnQ6IElFOCAqLw0KCW9wYWNpdHk6IDAuMjU7DQp9DQoudWktcHJvZ3Jlc3NiYXItaW5kZXRlcm1pbmF0ZSAudWktcHJvZ3Jlc3NiYXItdmFsdWUgew0KCWJhY2tncm91bmQtaW1hZ2U6IG5vbmU7DQp9DQoudWktdG9vbHRpcCB7DQoJcGFkZGluZzogOHB4Ow0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgl6LWluZGV4OiA5OTk5Ow0KCW1heC13aWR0aDogMzAwcHg7DQp9DQpib2R5IC51aS10b29sdGlwIHsNCglib3JkZXItd2lkdGg6IDJweDsNCn0NCg0KLyogQ29tcG9uZW50IGNvbnRhaW5lcnMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLnVpLXdpZGdldCB7DQoJZm9udC1mYW1pbHk6IEFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTogMWVtOw0KfQ0KLnVpLXdpZGdldCAudWktd2lkZ2V0IHsNCglmb250LXNpemU6IDFlbTsNCn0NCi51aS13aWRnZXQgaW5wdXQsDQoudWktd2lkZ2V0IHNlbGVjdCwNCi51aS13aWRnZXQgdGV4dGFyZWEsDQoudWktd2lkZ2V0IGJ1dHRvbiB7DQoJZm9udC1mYW1pbHk6IEFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTogMWVtOw0KfQ0KLnVpLXdpZGdldC51aS13aWRnZXQtY29udGVudCB7DQoJYm9yZGVyOiAxcHggc29saWQgI2M1YzVjNTsNCn0NCi51aS13aWRnZXQtY29udGVudCB7DQoJYm9yZGVyOiAxcHggc29saWQgI2RkZGRkZDsNCgliYWNrZ3JvdW5kOiAjZmZmZmZmOw0KCWNvbG9yOiAjMzMzMzMzOw0KfQ0KLnVpLXdpZGdldC1jb250ZW50IGEgew0KCWNvbG9yOiAjMzMzMzMzOw0KfQ0KLnVpLXdpZGdldC1oZWFkZXIgew0KCWJvcmRlcjogMXB4IHNvbGlkICNkZGRkZGQ7DQoJYmFja2dyb3VuZDogI2U5ZTllOTsNCgljb2xvcjogIzMzMzMzMzsNCglmb250LXdlaWdodDogYm9sZDsNCn0NCi51aS13aWRnZXQtaGVhZGVyIGEgew0KCWNvbG9yOiAjMzMzMzMzOw0KfQ0KDQovKiBJbnRlcmFjdGlvbiBzdGF0ZXMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLnVpLXN0YXRlLWRlZmF1bHQsDQoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWRlZmF1bHQsDQoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZGVmYXVsdCwNCi51aS1idXR0b24sDQoNCi8qIFdlIHVzZSBodG1sIGhlcmUgYmVjYXVzZSB3ZSBuZWVkIGEgZ3JlYXRlciBzcGVjaWZpY2l0eSB0byBtYWtlIHN1cmUgZGlzYWJsZWQNCndvcmtzIHByb3Blcmx5IHdoZW4gY2xpY2tlZCBvciBob3ZlcmVkICovDQpodG1sIC51aS1idXR0b24udWktc3RhdGUtZGlzYWJsZWQ6aG92ZXIsDQpodG1sIC51aS1idXR0b24udWktc3RhdGUtZGlzYWJsZWQ6YWN0aXZlIHsNCglib3JkZXI6IDFweCBzb2xpZCAjYzVjNWM1Ow0KCWJhY2tncm91bmQ6ICNmNmY2ZjY7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCgljb2xvcjogIzQ1NDU0NTsNCn0NCi51aS1zdGF0ZS1kZWZhdWx0IGEsDQoudWktc3RhdGUtZGVmYXVsdCBhOmxpbmssDQoudWktc3RhdGUtZGVmYXVsdCBhOnZpc2l0ZWQsDQphLnVpLWJ1dHRvbiwNCmE6bGluay51aS1idXR0b24sDQphOnZpc2l0ZWQudWktYnV0dG9uLA0KLnVpLWJ1dHRvbiB7DQoJY29sb3I6ICM0NTQ1NDU7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KLnVpLXN0YXRlLWhvdmVyLA0KLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1ob3ZlciwNCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1ob3ZlciwNCi51aS1zdGF0ZS1mb2N1cywNCi51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtZm9jdXMsDQoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZm9jdXMsDQoudWktYnV0dG9uOmhvdmVyLA0KLnVpLWJ1dHRvbjpmb2N1cyB7DQoJYm9yZGVyOiAxcHggc29saWQgI2NjY2NjYzsNCgliYWNrZ3JvdW5kOiAjZWRlZGVkOw0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQoJY29sb3I6ICMyYjJiMmI7DQp9DQoudWktc3RhdGUtaG92ZXIgYSwNCi51aS1zdGF0ZS1ob3ZlciBhOmhvdmVyLA0KLnVpLXN0YXRlLWhvdmVyIGE6bGluaywNCi51aS1zdGF0ZS1ob3ZlciBhOnZpc2l0ZWQsDQoudWktc3RhdGUtZm9jdXMgYSwNCi51aS1zdGF0ZS1mb2N1cyBhOmhvdmVyLA0KLnVpLXN0YXRlLWZvY3VzIGE6bGluaywNCi51aS1zdGF0ZS1mb2N1cyBhOnZpc2l0ZWQsDQphLnVpLWJ1dHRvbjpob3ZlciwNCmEudWktYnV0dG9uOmZvY3VzIHsNCgljb2xvcjogIzJiMmIyYjsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCi51aS12aXN1YWwtZm9jdXMgew0KCWJveC1zaGFkb3c6IDAgMCAzcHggMXB4IHJnYig5NCwgMTU4LCAyMTQpOw0KfQ0KLnVpLXN0YXRlLWFjdGl2ZSwNCi51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtYWN0aXZlLA0KLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWFjdGl2ZSwNCmEudWktYnV0dG9uOmFjdGl2ZSwNCi51aS1idXR0b246YWN0aXZlLA0KLnVpLWJ1dHRvbi51aS1zdGF0ZS1hY3RpdmU6aG92ZXIgew0KCWJvcmRlcjogMXB4IHNvbGlkICMwMDNlZmY7DQoJYmFja2dyb3VuZDogIzAwN2ZmZjsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCWNvbG9yOiAjZmZmZmZmOw0KfQ0KLnVpLWljb24tYmFja2dyb3VuZCwNCi51aS1zdGF0ZS1hY3RpdmUgLnVpLWljb24tYmFja2dyb3VuZCB7DQoJYm9yZGVyOiAjMDAzZWZmOw0KCWJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQp9DQoudWktc3RhdGUtYWN0aXZlIGEsDQoudWktc3RhdGUtYWN0aXZlIGE6bGluaywNCi51aS1zdGF0ZS1hY3RpdmUgYTp2aXNpdGVkIHsNCgljb2xvcjogI2ZmZmZmZjsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCi8qIEludGVyYWN0aW9uIEN1ZXMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLnVpLXN0YXRlLWhpZ2hsaWdodCwNCi51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtaGlnaGxpZ2h0LA0KLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhpZ2hsaWdodCB7DQoJYm9yZGVyOiAxcHggc29saWQgI2RhZDU1ZTsNCgliYWNrZ3JvdW5kOiAjZmZmYTkwOw0KCWNvbG9yOiAjNzc3NjIwOw0KfQ0KLnVpLXN0YXRlLWNoZWNrZWQgew0KCWJvcmRlcjogMXB4IHNvbGlkICNkYWQ1NWU7DQoJYmFja2dyb3VuZDogI2ZmZmE5MDsNCn0NCi51aS1zdGF0ZS1oaWdobGlnaHQgYSwNCi51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtaGlnaGxpZ2h0IGEsDQoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtaGlnaGxpZ2h0IGEgew0KCWNvbG9yOiAjNzc3NjIwOw0KfQ0KLnVpLXN0YXRlLWVycm9yLA0KLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1lcnJvciwNCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1lcnJvciB7DQoJYm9yZGVyOiAxcHggc29saWQgI2YxYTg5OTsNCgliYWNrZ3JvdW5kOiAjZmRkZmRmOw0KCWNvbG9yOiAjNWYzZjNmOw0KfQ0KLnVpLXN0YXRlLWVycm9yIGEsDQoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWVycm9yIGEsDQoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZXJyb3IgYSB7DQoJY29sb3I6ICM1ZjNmM2Y7DQp9DQoudWktc3RhdGUtZXJyb3ItdGV4dCwNCi51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtZXJyb3ItdGV4dCwNCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1lcnJvci10ZXh0IHsNCgljb2xvcjogIzVmM2YzZjsNCn0NCi51aS1wcmlvcml0eS1wcmltYXJ5LA0KLnVpLXdpZGdldC1jb250ZW50IC51aS1wcmlvcml0eS1wcmltYXJ5LA0KLnVpLXdpZGdldC1oZWFkZXIgLnVpLXByaW9yaXR5LXByaW1hcnkgew0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLnVpLXByaW9yaXR5LXNlY29uZGFyeSwNCi51aS13aWRnZXQtY29udGVudCAudWktcHJpb3JpdHktc2Vjb25kYXJ5LA0KLnVpLXdpZGdldC1oZWFkZXIgLnVpLXByaW9yaXR5LXNlY29uZGFyeSB7DQoJb3BhY2l0eTogLjc7DQoJZmlsdGVyOkFscGhhKE9wYWNpdHk9NzApOyAvKiBzdXBwb3J0OiBJRTggKi8NCglmb250LXdlaWdodDogbm9ybWFsOw0KfQ0KLnVpLXN0YXRlLWRpc2FibGVkLA0KLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1kaXNhYmxlZCwNCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1kaXNhYmxlZCB7DQoJb3BhY2l0eTogLjM1Ow0KCWZpbHRlcjpBbHBoYShPcGFjaXR5PTM1KTsgLyogc3VwcG9ydDogSUU4ICovDQoJYmFja2dyb3VuZC1pbWFnZTogbm9uZTsNCn0NCi51aS1zdGF0ZS1kaXNhYmxlZCAudWktaWNvbiB7DQoJZmlsdGVyOkFscGhhKE9wYWNpdHk9MzUpOyAvKiBzdXBwb3J0OiBJRTggLSBTZWUgIzYwNTkgKi8NCn0NCg0KLyogSWNvbnMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQovKiBzdGF0ZXMgYW5kIGltYWdlcyAqLw0KLnVpLWljb24gew0KCXdpZHRoOiAxNnB4Ow0KCWhlaWdodDogMTZweDsNCn0NCi51aS1pY29uLA0KLnVpLXdpZGdldC1jb250ZW50IC51aS1pY29uIHsNCgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoImltYWdlcy91aS1pY29uc180NDQ0NDRfMjU2eDI0MC5wbmciKTsNCn0NCi51aS13aWRnZXQtaGVhZGVyIC51aS1pY29uIHsNCgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoImltYWdlcy91aS1pY29uc180NDQ0NDRfMjU2eDI0MC5wbmciKTsNCn0NCi51aS1zdGF0ZS1ob3ZlciAudWktaWNvbiwNCi51aS1zdGF0ZS1mb2N1cyAudWktaWNvbiwNCi51aS1idXR0b246aG92ZXIgLnVpLWljb24sDQoudWktYnV0dG9uOmZvY3VzIC51aS1pY29uIHsNCgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoImltYWdlcy91aS1pY29uc181NTU1NTVfMjU2eDI0MC5wbmciKTsNCn0NCi51aS1zdGF0ZS1hY3RpdmUgLnVpLWljb24sDQoudWktYnV0dG9uOmFjdGl2ZSAudWktaWNvbiB7DQoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfZmZmZmZmXzI1NngyNDAucG5nIik7DQp9DQoudWktc3RhdGUtaGlnaGxpZ2h0IC51aS1pY29uLA0KLnVpLWJ1dHRvbiAudWktc3RhdGUtaGlnaGxpZ2h0LnVpLWljb24gew0KCWJhY2tncm91bmQtaW1hZ2U6IHVybCgiaW1hZ2VzL3VpLWljb25zXzc3NzYyMF8yNTZ4MjQwLnBuZyIpOw0KfQ0KLnVpLXN0YXRlLWVycm9yIC51aS1pY29uLA0KLnVpLXN0YXRlLWVycm9yLXRleHQgLnVpLWljb24gew0KCWJhY2tncm91bmQtaW1hZ2U6IHVybCgiaW1hZ2VzL3VpLWljb25zX2NjMDAwMF8yNTZ4MjQwLnBuZyIpOw0KfQ0KLnVpLWJ1dHRvbiAudWktaWNvbiB7DQoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfNzc3Nzc3XzI1NngyNDAucG5nIik7DQp9DQoNCi8qIHBvc2l0aW9uaW5nICovDQoudWktaWNvbi1ibGFuayB7IGJhY2tncm91bmQtcG9zaXRpb246IDE2cHggMTZweDsgfQ0KLnVpLWljb24tY2FyZXQtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwOyB9DQoudWktaWNvbi1jYXJldC0xLW5lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggMDsgfQ0KLnVpLWljb24tY2FyZXQtMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggMDsgfQ0KLnVpLWljb24tY2FyZXQtMS1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IDA7IH0NCi51aS1pY29uLWNhcmV0LTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NXB4IDA7IH0NCi51aS1pY29uLWNhcmV0LTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAwOyB9DQoudWktaWNvbi1jYXJldC0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAwOyB9DQoudWktaWNvbi1jYXJldC0xLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IDA7IH0NCi51aS1pY29uLWNhcmV0LTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IDA7IH0NCi51aS1pY29uLWNhcmV0LTItZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IDA7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE2cHg7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTEtbmUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTZweDsgfQ0KLnVpLWljb24tdHJpYW5nbGUtMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE2cHg7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTEtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTZweDsgfQ0KLnVpLWljb24tdHJpYW5nbGUtMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY1cHggLTE2cHg7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTZweDsgfQ0KLnVpLWljb24tdHJpYW5nbGUtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE2cHg7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTEtbncgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTE2cHg7IH0NCi51aS1pY29uLXRyaWFuZ2xlLTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xNnB4OyB9DQoudWktaWNvbi10cmlhbmdsZS0yLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTZweDsgfQ0KLnVpLWljb24tYXJyb3ctMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMzJweDsgfQ0KLnVpLWljb24tYXJyb3ctMS1uZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvdy0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMzJweDsgfQ0KLnVpLWljb24tYXJyb3ctMS1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvdy0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjVweCAtMzJweDsgfQ0KLnVpLWljb24tYXJyb3ctMS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvdy0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMzJweDsgfQ0KLnVpLWljb24tYXJyb3ctMS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMzJweDsgfQ0KLnVpLWljb24tYXJyb3ctMi1uLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTMycHg7IH0NCi51aS1pY29uLWFycm93LTItbmUtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTMycHg7IH0NCi51aS1pY29uLWFycm93LTItZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvdy0yLXNlLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvd3N0b3AtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvd3N0b3AtMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvd3N0b3AtMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvd3N0b3AtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0zMnB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IDFweCAtNDhweDsgfQ0KLnVpLWljb24tYXJyb3d0aGljay0xLW5lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTQ4cHg7IH0NCi51aS1pY29uLWFycm93dGhpY2stMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTQ4cHg7IH0NCi51aS1pY29uLWFycm93dGhpY2stMS1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrLTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtNDhweDsgfQ0KLnVpLWljb24tYXJyb3d0aGljay0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtNDhweDsgfQ0KLnVpLWljb24tYXJyb3d0aGljay0xLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrLTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrLTItbmUtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTQ4cHg7IH0NCi51aS1pY29uLWFycm93dGhpY2stMi1lLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTQ4cHg7IH0NCi51aS1pY29uLWFycm93dGhpY2stMi1zZS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtNDhweDsgfQ0KLnVpLWljb24tYXJyb3d0aGlja3N0b3AtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3RoaWNrc3RvcC0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjA4cHggLTQ4cHg7IH0NCi51aS1pY29uLWFycm93dGhpY2tzdG9wLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtNDhweDsgfQ0KLnVpLWljb24tYXJyb3d0aGlja3N0b3AtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC00OHB4OyB9DQoudWktaWNvbi1hcnJvd3JldHVybnRoaWNrLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTY0cHg7IH0NCi51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTY0cHg7IH0NCi51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTY0cHg7IH0NCi51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTY0cHg7IH0NCi51aS1pY29uLWFycm93cmV0dXJuLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC02NHB4OyB9DQoudWktaWNvbi1hcnJvd3JldHVybi0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3dyZXR1cm4tMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTY0cHg7IH0NCi51aS1pY29uLWFycm93cmV0dXJuLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtNjRweDsgfQ0KLnVpLWljb24tYXJyb3ctNCB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTgwcHg7IH0NCi51aS1pY29uLWFycm93LTQtZGlhZyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC04MHB4OyB9DQoudWktaWNvbi1leHRsaW5rIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTgwcHg7IH0NCi51aS1pY29uLW5ld3dpbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC04MHB4OyB9DQoudWktaWNvbi1yZWZyZXNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTgwcHg7IH0NCi51aS1pY29uLXNodWZmbGUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtODBweDsgfQ0KLnVpLWljb24tdHJhbnNmZXItZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTgwcHg7IH0NCi51aS1pY29uLXRyYW5zZmVydGhpY2stZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC04MHB4OyB9DQoudWktaWNvbi1mb2xkZXItY29sbGFwc2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtOTZweDsgfQ0KLnVpLWljb24tZm9sZGVyLW9wZW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtOTZweDsgfQ0KLnVpLWljb24tZG9jdW1lbnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtOTZweDsgfQ0KLnVpLWljb24tZG9jdW1lbnQtYiB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC05NnB4OyB9DQoudWktaWNvbi1ub3RlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTk2cHg7IH0NCi51aS1pY29uLW1haWwtY2xvc2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTk2cHg7IH0NCi51aS1pY29uLW1haWwtb3BlbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC05NnB4OyB9DQoudWktaWNvbi1zdWl0Y2FzZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtOTZweDsgfQ0KLnVpLWljb24tY29tbWVudCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtOTZweDsgfQ0KLnVpLWljb24tcGVyc29uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC05NnB4OyB9DQoudWktaWNvbi1wcmludCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtOTZweDsgfQ0KLnVpLWljb24tdHJhc2ggeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTk2cHg7IH0NCi51aS1pY29uLWxvY2tlZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtOTZweDsgfQ0KLnVpLWljb24tdW5sb2NrZWQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjA4cHggLTk2cHg7IH0NCi51aS1pY29uLWJvb2ttYXJrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC05NnB4OyB9DQoudWktaWNvbi10YWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTk2cHg7IH0NCi51aS1pY29uLWhvbWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xMTJweDsgfQ0KLnVpLWljb24tZmxhZyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xMTJweDsgfQ0KLnVpLWljb24tY2FsZW5kYXIgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTEycHg7IH0NCi51aS1pY29uLWNhcnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTEycHg7IH0NCi51aS1pY29uLXBlbmNpbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xMTJweDsgfQ0KLnVpLWljb24tY2xvY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTEycHg7IH0NCi51aS1pY29uLWRpc2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTEycHg7IH0NCi51aS1pY29uLWNhbGN1bGF0b3IgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTExMnB4OyB9DQoudWktaWNvbi16b29taW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTExMnB4OyB9DQoudWktaWNvbi16b29tb3V0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xMTJweDsgfQ0KLnVpLWljb24tc2VhcmNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xMTJweDsgfQ0KLnVpLWljb24td3JlbmNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0xMTJweDsgfQ0KLnVpLWljb24tZ2VhciB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtMTEycHg7IH0NCi51aS1pY29uLWhlYXJ0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0xMTJweDsgfQ0KLnVpLWljb24tc3RhciB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtMTEycHg7IH0NCi51aS1pY29uLWxpbmsgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTExMnB4OyB9DQoudWktaWNvbi1jYW5jZWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xMjhweDsgfQ0KLnVpLWljb24tcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xMjhweDsgfQ0KLnVpLWljb24tcGx1c3RoaWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTEyOHB4OyB9DQoudWktaWNvbi1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xMjhweDsgfQ0KLnVpLWljb24tbWludXN0aGljayB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xMjhweDsgfQ0KLnVpLWljb24tY2xvc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTI4cHg7IH0NCi51aS1pY29uLWNsb3NldGhpY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTI4cHg7IH0NCi51aS1pY29uLWtleSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMTI4cHg7IH0NCi51aS1pY29uLWxpZ2h0YnVsYiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtMTI4cHg7IH0NCi51aS1pY29uLXNjaXNzb3JzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xMjhweDsgfQ0KLnVpLWljb24tY2xpcGJvYXJkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xMjhweDsgfQ0KLnVpLWljb24tY29weSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtMTI4cHg7IH0NCi51aS1pY29uLWNvbnRhY3QgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTEyOHB4OyB9DQoudWktaWNvbi1pbWFnZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtMTI4cHg7IH0NCi51aS1pY29uLXZpZGVvIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC0xMjhweDsgfQ0KLnVpLWljb24tc2NyaXB0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0xMjhweDsgfQ0KLnVpLWljb24tYWxlcnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xNDRweDsgfQ0KLnVpLWljb24taW5mbyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xNDRweDsgfQ0KLnVpLWljb24tbm90aWNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE0NHB4OyB9DQoudWktaWNvbi1oZWxwIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE0NHB4OyB9DQoudWktaWNvbi1jaGVjayB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xNDRweDsgfQ0KLnVpLWljb24tYnVsbGV0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE0NHB4OyB9DQoudWktaWNvbi1yYWRpby1vbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xNDRweDsgfQ0KLnVpLWljb24tcmFkaW8tb2ZmIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xNDRweDsgfQ0KLnVpLWljb24tcGluLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTE0NHB4OyB9DQoudWktaWNvbi1waW4tcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTQ0cHg7IH0NCi51aS1pY29uLXBsYXkgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xNjBweDsgfQ0KLnVpLWljb24tcGF1c2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTYwcHg7IH0NCi51aS1pY29uLXNlZWstbmV4dCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNjBweDsgfQ0KLnVpLWljb24tc2Vlay1wcmV2IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE2MHB4OyB9DQoudWktaWNvbi1zZWVrLWVuZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xNjBweDsgfQ0KLnVpLWljb24tc2Vlay1zdGFydCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNjBweDsgfQ0KLyogdWktaWNvbi1zZWVrLWZpcnN0IGlzIGRlcHJlY2F0ZWQsIHVzZSB1aS1pY29uLXNlZWstc3RhcnQgaW5zdGVhZCAqLw0KLnVpLWljb24tc2Vlay1maXJzdCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNjBweDsgfQ0KLnVpLWljb24tc3RvcCB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xNjBweDsgfQ0KLnVpLWljb24tZWplY3QgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTE2MHB4OyB9DQoudWktaWNvbi12b2x1bWUtb2ZmIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xNjBweDsgfQ0KLnVpLWljb24tdm9sdW1lLW9uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xNjBweDsgfQ0KLnVpLWljb24tcG93ZXIgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xNzZweDsgfQ0KLnVpLWljb24tc2lnbmFsLWRpYWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTc2cHg7IH0NCi51aS1pY29uLXNpZ25hbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNzZweDsgfQ0KLnVpLWljb24tYmF0dGVyeS0wIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE3NnB4OyB9DQoudWktaWNvbi1iYXR0ZXJ5LTEgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTc2cHg7IH0NCi51aS1pY29uLWJhdHRlcnktMiB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNzZweDsgfQ0KLnVpLWljb24tYmF0dGVyeS0zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE3NnB4OyB9DQoudWktaWNvbi1jaXJjbGUtcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE5MnB4OyB9DQoudWktaWNvbi1jaXJjbGUtbWludXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTkycHg7IH0NCi51aS1pY29uLWNpcmNsZS1jbG9zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTkycHg7IH0NCi51aS1pY29uLWNpcmNsZS10cmlhbmdsZS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTE5MnB4OyB9DQoudWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTkycHg7IH0NCi51aS1pY29uLWNpcmNsZS1hcnJvdy1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlLWFycm93LXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTE5MnB4OyB9DQoudWktaWNvbi1jaXJjbGUtYXJyb3ctdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTkycHg7IH0NCi51aS1pY29uLWNpcmNsZS1hcnJvdy1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlLXpvb21pbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtMTkycHg7IH0NCi51aS1pY29uLWNpcmNsZS16b29tb3V0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlLWNoZWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0xOTJweDsgfQ0KLnVpLWljb24tY2lyY2xlc21hbGwtcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTIwOHB4OyB9DQoudWktaWNvbi1jaXJjbGVzbWFsbC1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0yMDhweDsgfQ0KLnVpLWljb24tY2lyY2xlc21hbGwtY2xvc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMjA4cHg7IH0NCi51aS1pY29uLXNxdWFyZXNtYWxsLXBsdXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMjA4cHg7IH0NCi51aS1pY29uLXNxdWFyZXNtYWxsLW1pbnVzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTIwOHB4OyB9DQoudWktaWNvbi1zcXVhcmVzbWFsbC1jbG9zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0yMDhweDsgfQ0KLnVpLWljb24tZ3JpcC1kb3R0ZWQtdmVydGljYWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0yMjRweDsgfQ0KLnVpLWljb24tZ3JpcC1kb3R0ZWQtaG9yaXpvbnRhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0yMjRweDsgfQ0KLnVpLWljb24tZ3JpcC1zb2xpZC12ZXJ0aWNhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0yMjRweDsgfQ0KLnVpLWljb24tZ3JpcC1zb2xpZC1ob3Jpem9udGFsIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTIyNHB4OyB9DQoudWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMjI0cHg7IH0NCi51aS1pY29uLWdyaXAtZGlhZ29uYWwtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMjI0cHg7IH0NCg0KDQovKiBNaXNjIHZpc3VhbHMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQovKiBDb3JuZXIgcmFkaXVzICovDQoudWktY29ybmVyLWFsbCwNCi51aS1jb3JuZXItdG9wLA0KLnVpLWNvcm5lci1sZWZ0LA0KLnVpLWNvcm5lci10bCB7DQoJYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogM3B4Ow0KfQ0KLnVpLWNvcm5lci1hbGwsDQoudWktY29ybmVyLXRvcCwNCi51aS1jb3JuZXItcmlnaHQsDQoudWktY29ybmVyLXRyIHsNCglib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogM3B4Ow0KfQ0KLnVpLWNvcm5lci1hbGwsDQoudWktY29ybmVyLWJvdHRvbSwNCi51aS1jb3JuZXItbGVmdCwNCi51aS1jb3JuZXItYmwgew0KCWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDNweDsNCn0NCi51aS1jb3JuZXItYWxsLA0KLnVpLWNvcm5lci1ib3R0b20sDQoudWktY29ybmVyLXJpZ2h0LA0KLnVpLWNvcm5lci1iciB7DQoJYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsNCn0NCg0KLyogT3ZlcmxheXMgKi8NCi51aS13aWRnZXQtb3ZlcmxheSB7DQoJYmFja2dyb3VuZDogI2FhYWFhYTsNCglvcGFjaXR5OiAuMzsNCglmaWx0ZXI6IEFscGhhKE9wYWNpdHk9MzApOyAvKiBzdXBwb3J0OiBJRTggKi8NCn0NCi51aS13aWRnZXQtc2hhZG93IHsNCgktd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggNXB4ICM2NjY2NjY7DQoJYm94LXNoYWRvdzogMHB4IDBweCA1cHggIzY2NjY2NjsNCn0NCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="18" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jscookmenu/JSCookMenu.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jscookmenu/JSCookMenu.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="4" startDateTime="2024-11-07T09:35:45.890+00:00" startTime="2200" endTime="2213" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="10" waitTime="0" receiveTime="3" sslNegotiateTime="-1" responseBodySize="26482">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qc2Nvb2ttZW51L0pTQ29va01lbnUuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>26220</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjYyMjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMjYyMjANCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyoNCglKU0Nvb2tNZW51IHYxLjMxLiAgKGMpIENvcHlyaWdodCAyMDAyLTIwMDUgYnkgSGVuZyBZdWFuDQoNCglQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQ0KCWNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksDQoJdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbg0KCXRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLA0KCWFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQ0KCVNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6DQoNCglUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZA0KCWluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLg0KDQoJVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MNCglPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwNCglJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQ0KCUFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVINCglMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORw0KCUZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVINCglERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuDQoqLw0KDQovLyBHbG9iYWxzDQp2YXIgX2NtSURDb3VudCA9IDA7DQp2YXIgX2NtSUROYW1lID0gJ2NtU3ViTWVudUlEJzsJCS8vIGZvciBjcmVhdGluZyBzdWJtZW51IGlkDQoNCnZhciBfY21UaW1lT3V0ID0gbnVsbDsJCQkvLyBob3cgbG9uZyB0aGUgbWVudSB3b3VsZCBzdGF5DQp2YXIgX2NtQ3VycmVudEl0ZW0gPSBudWxsOwkJLy8gdGhlIGN1cnJlbnQgbWVudSBpdGVtIGJlaW5nIHNlbGVjdGVkOw0KDQp2YXIgX2NtTm9BY3Rpb24gPSBuZXcgT2JqZWN0ICgpOwkvLyBpbmRpY2F0ZSB0aGF0IHRoZSBpdGVtIGNhbm5vdCBiZSBob3ZlcmVkLg0KdmFyIF9jbU5vQ2xpY2sgPSBuZXcgT2JqZWN0ICgpOwkJLy8gc2ltaWxhciB0byBfY21Ob0FjdGlvbiBidXQgZG9lcyBub3QgcmVzcG9uZCB0byBtb3VzZXVwL21vdXNlZG93biBldmVudHMNCnZhciBfY21TcGxpdCA9IG5ldyBPYmplY3QgKCk7CQkvLyBpbmRpY2F0ZSB0aGF0IHRoZSBpdGVtIGlzIGEgbWVudSBzcGxpdA0KDQp2YXIgX2NtSXRlbUxpc3QgPSBuZXcgQXJyYXkgKCk7CQkvLyBhIHNpbXBsZSBsaXN0IG9mIGl0ZW1zDQoNCi8vIGRlZmF1bHQgbm9kZSBwcm9wZXJ0aWVzDQp2YXIgX2NtTm9kZVByb3BlcnRpZXMgPQ0Kew0KICAJLy8gbWFpbiBtZW51IGRpc3BsYXkgYXR0cmlidXRlcw0KICAJLy8NCiAgCS8vIE5vdGUuICBXaGVuIHRoZSBtZW51IGJhciBpcyBob3Jpem9udGFsLA0KICAJLy8gbWFpbkZvbGRlckxlZnQgYW5kIG1haW5Gb2xkZXJSaWdodCBhcmUNCiAgCS8vIHB1dCBpbiA8c3Bhbj48L3NwYW4+LiAgV2hlbiB0aGUgbWVudQ0KICAJLy8gYmFyIGlzIHZlcnRpY2FsLCB0aGV5IHdvdWxkIGJlIHB1dCBpbg0KICAJLy8gYSBzZXBhcmF0ZSBURCBjZWxsLg0KDQogIAkvLyBIVE1MIGNvZGUgdG8gdGhlIGxlZnQgb2YgdGhlIGZvbGRlciBpdGVtDQogIAltYWluRm9sZGVyTGVmdDogJycsDQogIAkvLyBIVE1MIGNvZGUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBmb2xkZXIgaXRlbQ0KICAJbWFpbkZvbGRlclJpZ2h0OiAnJywNCgkvLyBIVE1MIGNvZGUgdG8gdGhlIGxlZnQgb2YgdGhlIHJlZ3VsYXIgaXRlbQ0KCW1haW5JdGVtTGVmdDogJycsDQoJLy8gSFRNTCBjb2RlIHRvIHRoZSByaWdodCBvZiB0aGUgcmVndWxhciBpdGVtDQoJbWFpbkl0ZW1SaWdodDogJycsDQoNCgkvLyBzdWIgbWVudSBkaXNwbGF5IGF0dHJpYnV0ZXMNCg0KCS8vIEhUTUwgY29kZSB0byB0aGUgbGVmdCBvZiB0aGUgZm9sZGVyIGl0ZW0NCglmb2xkZXJMZWZ0OiAnJywNCgkvLyBIVE1MIGNvZGUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBmb2xkZXIgaXRlbQ0KCWZvbGRlclJpZ2h0OiAnJywNCgkvLyBIVE1MIGNvZGUgdG8gdGhlIGxlZnQgb2YgdGhlIHJlZ3VsYXIgaXRlbQ0KCWl0ZW1MZWZ0OiAnJywNCgkvLyBIVE1MIGNvZGUgdG8gdGhlIHJpZ2h0IG9mIHRoZSByZWd1bGFyIGl0ZW0NCglpdGVtUmlnaHQ6ICcnLA0KCS8vIGNlbGwgc3BhY2luZyBmb3IgbWFpbiBtZW51DQoJbWFpblNwYWNpbmc6IDAsDQoJLy8gY2VsbCBzcGFjaW5nIGZvciBzdWIgbWVudXMNCglzdWJTcGFjaW5nOiAwLA0KCS8vIGF1dG8gZGlzYXBwZWFyIHRpbWUgZm9yIHN1Ym1lbnVzIGluIG1pbGxpLXNlY29uZHMNCglkZWxheTogNTAwDQp9Ow0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLw0KLy8gRHJhd2luZyBGdW5jdGlvbnMgYW5kIFV0aWxpdHkgRnVuY3Rpb25zDQovLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQovLw0KLy8gcHJvZHVjZSBhIG5ldyB1bmlxdWUgaWQNCi8vDQpmdW5jdGlvbiBjbU5ld0lEICgpDQp7DQoJcmV0dXJuIF9jbUlETmFtZSArICgrK19jbUlEQ291bnQpOw0KfQ0KDQovLw0KLy8gcmV0dXJuIHRoZSBwcm9wZXJ0eSBzdHJpbmcgZm9yIHRoZSBtZW51IGl0ZW0NCi8vDQpmdW5jdGlvbiBjbUFjdGlvbkl0ZW0gKGl0ZW0sIHByZWZpeCwgaXNNYWluLCBpZFN1Yiwgb3JpZW50LCBub2RlUHJvcGVydGllcykNCnsNCgkvLyB2YXIgaW5kZXggPSBfY21JdGVtTGlzdC5wdXNoIChpdGVtKSAtIDE7DQoJX2NtSXRlbUxpc3RbX2NtSXRlbUxpc3QubGVuZ3RoXSA9IGl0ZW07DQoJdmFyIGluZGV4ID0gX2NtSXRlbUxpc3QubGVuZ3RoIC0gMTsNCglpZFN1YiA9ICghaWRTdWIpID8gJ251bGwnIDogKCdcJycgKyBpZFN1YiArICdcJycpOw0KCW9yaWVudCA9ICdcJycgKyBvcmllbnQgKyAnXCcnOw0KCXByZWZpeCA9ICdcJycgKyBwcmVmaXggKyAnXCcnOw0KCS8vcmV0dXJuICcgb25tb3VzZW92ZXI9ImNtSXRlbU1vdXNlT3ZlciAodGhpcywnICsgcHJlZml4ICsgJywnICsgaXNNYWluICsgJywnICsgaWRTdWIgKyAnLCcgKyBvcmllbnQgKyAnLCcgKyBpbmRleCArICcpIiBvbm1vdXNlb3V0PSJjbUl0ZW1Nb3VzZU91dCAodGhpcywnICsgbm9kZVByb3BlcnRpZXMuZGVsYXkgKyAnKSIgb25tb3VzZWRvd249ImNtSXRlbU1vdXNlRG93biAodGhpcywnICsgaW5kZXggKyAnKSIgb25tb3VzZXVwPSJjbUl0ZW1Nb3VzZVVwICh0aGlzLCcgKyBpbmRleCArICcpIic7DQoJcmV0dXJuICcgb25tb3VzZW92ZXI9ImNtSXRlbU1vdXNlT3ZlciAodGhpcywnICsgcHJlZml4ICsgJywnICsgaXNNYWluICsgJywnICsgaWRTdWIgKyAnLCcgKyBvcmllbnQgKyAnLCcgKyBpbmRleCArICcpIiBvbm1vdXNlb3V0PSJjbUl0ZW1Nb3VzZU91dCAodGhpcywnICsgbm9kZVByb3BlcnRpZXMuZGVsYXkgKyAnKSInOw0KfQ0KDQovLw0KLy8gdGhpcyBvbmUgaXMgdXNlZCBieSBfY21Ob0NsaWNrIHRvIG9ubHkgdGFrZSBjYXJlIG9mIG9ubW91c2VvdmVyIGFuZCBvbm1vdXNlb3V0DQovLyBldmVudHMgd2hpY2ggYXJlIGFzc29jaWF0ZWQgd2l0aCBtZW51IGJ1dCBub3QgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggbWVudSBjbGlja2luZy9jbG9zaW5nDQovLw0KZnVuY3Rpb24gY21Ob0NsaWNrSXRlbSAoaXRlbSwgcHJlZml4LCBpc01haW4sIGlkU3ViLCBvcmllbnQsIG5vZGVQcm9wZXJ0aWVzKQ0Kew0KCS8vIHZhciBpbmRleCA9IF9jbUl0ZW1MaXN0LnB1c2ggKGl0ZW0pIC0gMTsNCglfY21JdGVtTGlzdFtfY21JdGVtTGlzdC5sZW5ndGhdID0gaXRlbTsNCgl2YXIgaW5kZXggPSBfY21JdGVtTGlzdC5sZW5ndGggLSAxOw0KCWlkU3ViID0gKCFpZFN1YikgPyAnbnVsbCcgOiAoJ1wnJyArIGlkU3ViICsgJ1wnJyk7DQoJb3JpZW50ID0gJ1wnJyArIG9yaWVudCArICdcJyc7DQoJcHJlZml4ID0gJ1wnJyArIHByZWZpeCArICdcJyc7DQoJcmV0dXJuICcgb25tb3VzZW92ZXI9ImNtSXRlbU1vdXNlT3ZlciAodGhpcywnICsgcHJlZml4ICsgJywnICsgaXNNYWluICsgJywnICsgaWRTdWIgKyAnLCcgKyBvcmllbnQgKyAnLCcgKyBpbmRleCArICcpIiBvbm1vdXNlb3V0PSJjbUl0ZW1Nb3VzZU91dCAodGhpcywnICsgbm9kZVByb3BlcnRpZXMuZGVsYXkgKyAnKSInOw0KfQ0KDQpmdW5jdGlvbiBjbU5vQWN0aW9uSXRlbSAoaXRlbSwgcHJlZml4KQ0Kew0KCXJldHVybiBpdGVtWzFdOw0KfQ0KDQpmdW5jdGlvbiBjbVNwbGl0SXRlbSAocHJlZml4LCBpc01haW4sIHZlcnRpY2FsKQ0Kew0KCXZhciBjbGFzc1N0ciA9ICdjbScgKyBwcmVmaXg7DQoJaWYgKGlzTWFpbikNCgl7DQoJCWNsYXNzU3RyICs9ICdNYWluJzsNCgkJaWYgKHZlcnRpY2FsKQ0KCQkJY2xhc3NTdHIgKz0gJ0hTcGxpdCc7DQoJCWVsc2UNCgkJCWNsYXNzU3RyICs9ICdWU3BsaXQnOw0KCX0NCgllbHNlDQoJCWNsYXNzU3RyICs9ICdIU3BsaXQnOw0KCXZhciBpdGVtID0gZXZhbCAoY2xhc3NTdHIpOw0KCXJldHVybiBjbU5vQWN0aW9uSXRlbSAoaXRlbSwgcHJlZml4KTsNCn0NCg0KLy8NCi8vIGRyYXcgdGhlIHN1YiBtZW51IHJlY3Vyc2l2ZWx5DQovLw0KZnVuY3Rpb24gY21EcmF3U3ViTWVudSAoc3ViTWVudSwgcHJlZml4LCBpZCwgb3JpZW50LCBub2RlUHJvcGVydGllcykNCnsNCgl2YXIgc3RyID0gJzxkaXYgY2xhc3M9IicgKyBwcmVmaXggKyAnU3ViTWVudSIgaWQ9IicgKyBpZCArICciPjx0YWJsZSBzdW1tYXJ5PSJzdWIgbWVudSIgY2VsbHNwYWNpbmc9IicgKyBub2RlUHJvcGVydGllcy5zdWJTcGFjaW5nICsgJyIgY2xhc3M9IicgKyBwcmVmaXggKyAnU3ViTWVudVRhYmxlIj4nOw0KCXZhciBzdHJTdWIgPSAnJzsNCg0KCXZhciBpdGVtOw0KCXZhciBpZFN1YjsNCgl2YXIgaGFzQ2hpbGQ7DQoNCgl2YXIgaTsNCg0KCXZhciBjbGFzc1N0cjsNCg0KCWZvciAoaSA9IDU7IGkgPCBzdWJNZW51Lmxlbmd0aDsgKytpKQ0KCXsNCgkJaXRlbSA9IHN1Yk1lbnVbaV07DQoJCWlmICghaXRlbSkNCgkJCWNvbnRpbnVlOw0KDQoJCWhhc0NoaWxkID0gKGl0ZW0ubGVuZ3RoID4gNSk7DQoJCWlkU3ViID0gaGFzQ2hpbGQgPyBjbU5ld0lEICgpIDogbnVsbDsNCg0KCQlzdHIgKz0gJzx0ciBjbGFzcz0iJyArIHByZWZpeCArICdNZW51SXRlbSInOw0KCQlpZiAoaXRlbVswXSAhPSBfY21Ob0NsaWNrKQ0KCQkJc3RyICs9IGNtQWN0aW9uSXRlbSAoaXRlbSwgcHJlZml4LCAwLCBpZFN1Yiwgb3JpZW50LCBub2RlUHJvcGVydGllcyk7DQoJCWVsc2UNCgkJCXN0ciArPSBjbU5vQ2xpY2tJdGVtIChpdGVtLCBwcmVmaXgsIDAsIGlkU3ViLCBvcmllbnQsIG5vZGVQcm9wZXJ0aWVzKTsNCgkJc3RyICs9ICc+Jw0KDQoJCWlmIChpdGVtID09IF9jbVNwbGl0KQ0KCQl7DQoJCQlzdHIgKz0gY21TcGxpdEl0ZW0gKHByZWZpeCwgMCwgdHJ1ZSk7DQoJCQlzdHIgKz0gJzwvdHI+JzsNCgkJCWNvbnRpbnVlOw0KCQl9DQoNCgkJaWYgKGl0ZW1bMF0gPT0gX2NtTm9BY3Rpb24gfHwgaXRlbVswXSA9PSBfY21Ob0NsaWNrKQ0KCQl7DQoJCQlzdHIgKz0gY21Ob0FjdGlvbkl0ZW0gKGl0ZW0sIHByZWZpeCk7DQoJCQlzdHIgKz0gJzwvdHI+JzsNCgkJCWNvbnRpbnVlOw0KCQl9DQoNCgkJY2xhc3NTdHIgPSBwcmVmaXggKyAnTWVudSc7DQoJCWNsYXNzU3RyICs9IGhhc0NoaWxkID8gJ0ZvbGRlcicgOiAnSXRlbSc7DQoNCgkJc3RyICs9ICc8dGQgY2xhc3M9IicgKyBjbGFzc1N0ciArICdMZWZ0Ij4nOw0KDQoJCWlmIChpdGVtWzBdICE9IG51bGwpDQoJCQlzdHIgKz0gaXRlbVswXTsNCgkJZWxzZQ0KCQkJc3RyICs9IGhhc0NoaWxkID8gbm9kZVByb3BlcnRpZXMuZm9sZGVyTGVmdCA6IG5vZGVQcm9wZXJ0aWVzLml0ZW1MZWZ0Ow0KDQoNCgkJLy8gbW9kaWZpZWQgdG8gdXNlIGh5cGVybGlua3MNCgkJc3RyICs9ICc8dGQgY2xhc3M9IicgKyBjbGFzc1N0ciArICdUZXh0Ij4nOw0KDQoJCWlmIChpdGVtWzJdICE9IG51bGwpDQoJCQlzdHIgKz0gIjxhIGhyZWY9XCIiICsgaXRlbVsyXSArICJcIj4iICsgaXRlbVsxXSArICI8L2E+IjsNCgkJZWxzZQ0KCQkJc3RyICs9IGl0ZW1bMV07DQoNCgkJc3RyICs9ICc8L3RkPjx0ZCBjbGFzcz0iJyArIGNsYXNzU3RyICsgJ1JpZ2h0Ij4nOw0KDQoJCWlmIChoYXNDaGlsZCkNCgkJew0KCQkJc3RyICs9IG5vZGVQcm9wZXJ0aWVzLmZvbGRlclJpZ2h0Ow0KCQkJc3RyU3ViICs9IGNtRHJhd1N1Yk1lbnUgKGl0ZW0sIHByZWZpeCwgaWRTdWIsIG9yaWVudCwgbm9kZVByb3BlcnRpZXMpOw0KCQl9DQoJCWVsc2UNCgkJCXN0ciArPSBub2RlUHJvcGVydGllcy5pdGVtUmlnaHQ7DQoJCXN0ciArPSAnPC90ZD48L3RyPic7DQoJfQ0KDQoJc3RyICs9ICc8L3RhYmxlPjwvZGl2PicgKyBzdHJTdWI7DQoJcmV0dXJuIHN0cjsNCn0NCg0KLy8NCi8vIFRoZSBmdW5jdGlvbiB0aGF0IGJ1aWxkcyB0aGUgbWVudSBpbnNpZGUgdGhlIHNwZWNpZmllZCBlbGVtZW50IGlkLg0KLy8NCi8vIEBwYXJhbQlpZAlpZCBvZiB0aGUgZWxlbWVudA0KLy8JCW9yaWVudAlvcmllbnRhdGlvbiBvZiB0aGUgbWVudSBpbiBbaHZdW2FiXVtscl0gZm9ybWF0DQovLwkJbWVudQl0aGUgbWVudSBvYmplY3QgdG8gYmUgZHJhd24NCi8vCQlub2RlUHJvcGVydGllcwlwcm9wZXJ0aWVzIGZvciBlYWNoIG1lbnUgbm9kZQ0KLy8NCmZ1bmN0aW9uIGNtRHJhdyAoaWQsIG1lbnUsIG9yaWVudCwgbm9kZVByb3BlcnRpZXMsIHByZWZpeCkNCnsNCgl2YXIgb2JqID0gY21HZXRPYmplY3QgKGlkKTsNCg0KCWlmICghbm9kZVByb3BlcnRpZXMpDQoJCW5vZGVQcm9wZXJ0aWVzID0gX2NtTm9kZVByb3BlcnRpZXM7DQoJaWYgKCFwcmVmaXgpDQoJCXByZWZpeCA9ICcnOw0KDQoJdmFyIHN0ciA9ICc8dGFibGUgc3VtbWFyeT0ibWFpbiBtZW51IiBjbGFzcz0iJyArIHByZWZpeCArICdNZW51IiBjZWxsc3BhY2luZz0iJyArIG5vZGVQcm9wZXJ0aWVzLm1haW5TcGFjaW5nICsgJyI+JzsNCgl2YXIgc3RyU3ViID0gJyc7DQoNCglpZiAoIW9yaWVudCkNCgkJb3JpZW50ID0gJ2hicic7DQoNCgl2YXIgb3JpZW50U3RyID0gU3RyaW5nIChvcmllbnQpOw0KCXZhciBvcmllbnRTdWI7DQoJdmFyIHZlcnRpY2FsOw0KDQoJLy8gZHJhdyB0aGUgbWFpbiBtZW51IGl0ZW1zDQoJaWYgKG9yaWVudFN0ci5jaGFyQXQgKDApID09ICdoJykNCgl7DQoJCS8vIGhvcml6b250YWwgbWVudQ0KCQlvcmllbnRTdWIgPSAndicgKyBvcmllbnRTdHIuc3Vic3RyICgxLCAyKTsNCgkJc3RyICs9ICc8dHI+JzsNCgkJdmVydGljYWwgPSBmYWxzZTsNCgl9DQoJZWxzZQ0KCXsNCgkJLy8gdmVydGljYWwgbWVudQ0KCQlvcmllbnRTdWIgPSAndicgKyBvcmllbnRTdHIuc3Vic3RyICgxLCAyKTsNCgkJdmVydGljYWwgPSB0cnVlOw0KCX0NCg0KCXZhciBpOw0KCXZhciBpdGVtOw0KCXZhciBpZFN1YjsNCgl2YXIgaGFzQ2hpbGQ7DQoNCgl2YXIgY2xhc3NTdHI7DQoNCglmb3IgKGkgPSAwOyBpIDwgbWVudS5sZW5ndGg7ICsraSkNCgl7DQoJCWl0ZW0gPSBtZW51W2ldOw0KDQoJCWlmICghaXRlbSkNCgkJCWNvbnRpbnVlOw0KDQoJCXN0ciArPSB2ZXJ0aWNhbCA/ICc8dHInIDogJzx0ZCc7DQoJCXN0ciArPSAnIGNsYXNzPSInICsgcHJlZml4ICsgJ01haW5JdGVtIic7DQoNCgkJaGFzQ2hpbGQgPSAoaXRlbS5sZW5ndGggPiA1KTsNCgkJaWRTdWIgPSBoYXNDaGlsZCA/IGNtTmV3SUQgKCkgOiBudWxsOw0KDQoJCXN0ciArPSBjbUFjdGlvbkl0ZW0gKGl0ZW0sIHByZWZpeCwgMSwgaWRTdWIsIG9yaWVudCwgbm9kZVByb3BlcnRpZXMpICsgJz4nOw0KDQoJCWlmIChpdGVtID09IF9jbVNwbGl0KQ0KCQl7DQoJCQlzdHIgKz0gY21TcGxpdEl0ZW0gKHByZWZpeCwgMSwgdmVydGljYWwpOw0KCQkJc3RyICs9IHZlcnRpY2FsPyAnPC90cj4nIDogJzwvdGQ+JzsNCgkJCWNvbnRpbnVlOw0KCQl9DQoNCgkJaWYgKGl0ZW1bMF0gPT0gX2NtTm9BY3Rpb24gfHwgaXRlbVswXSA9PSBfY21Ob0NsaWNrKQ0KCQl7DQoJCQlzdHIgKz0gY21Ob0FjdGlvbkl0ZW0gKGl0ZW0sIHByZWZpeCk7DQoJCQlzdHIgKz0gdmVydGljYWw/ICc8L3RyPicgOiAnPC90ZD4nOw0KCQkJY29udGludWU7DQoJCX0NCg0KCQljbGFzc1N0ciA9IHByZWZpeCArICdNYWluJyArIChoYXNDaGlsZCA/ICdGb2xkZXInIDogJ0l0ZW0nKTsNCg0KCQlzdHIgKz0gdmVydGljYWwgPyAnPHRkJyA6ICc8c3Bhbic7DQoJCXN0ciArPSAnIGNsYXNzPSInICsgY2xhc3NTdHIgKyAnTGVmdCI+JzsNCg0KCQlzdHIgKz0gKGl0ZW1bMF0gPT0gbnVsbCkgPyAoaGFzQ2hpbGQgPyBub2RlUHJvcGVydGllcy5tYWluRm9sZGVyTGVmdCA6IG5vZGVQcm9wZXJ0aWVzLm1haW5JdGVtTGVmdCkNCgkJCQkJIDogaXRlbVswXTsNCgkJc3RyICs9IHZlcnRpY2FsID8gJzwvdGQ+JyA6ICc8L3NwYW4+JzsNCg0KCQlzdHIgKz0gdmVydGljYWwgPyAnPHRkJyA6ICc8c3Bhbic7DQoJCXN0ciArPSAnIGNsYXNzPSInICsgY2xhc3NTdHIgKyAnVGV4dCI+JzsNCgkJDQoJCS8vIG1vZGlmaWVkIHRvIHVzZSBoeXBlcmxpbmtzDQoJCS8vc3RyICs9IGl0ZW1bMV07DQoJCWlmIChpdGVtWzJdICE9IG51bGwpDQoJCQlzdHIgKz0gIjxhIGhyZWY9XCIiICsgaXRlbVsyXSArICJcIj4iICsgaXRlbVsxXSArICI8L2E+IjsNCgkJZWxzZQ0KCQkJc3RyICs9IGl0ZW1bMV07DQoNCgkJc3RyICs9IHZlcnRpY2FsID8gJzwvdGQ+JyA6ICc8L3NwYW4+JzsNCg0KCQlzdHIgKz0gdmVydGljYWwgPyAnPHRkJyA6ICc8c3Bhbic7DQoJCXN0ciArPSAnIGNsYXNzPSInICsgY2xhc3NTdHIgKyAnUmlnaHQiPic7DQoNCgkJc3RyICs9IGhhc0NoaWxkID8gbm9kZVByb3BlcnRpZXMubWFpbkZvbGRlclJpZ2h0IDogbm9kZVByb3BlcnRpZXMubWFpbkl0ZW1SaWdodDsNCg0KCQlzdHIgKz0gdmVydGljYWwgPyAnPC90ZD4nIDogJzwvc3Bhbj4nOw0KDQoJCXN0ciArPSB2ZXJ0aWNhbCA/ICc8L3RyPicgOiAnPC90ZD4nOw0KDQoJCWlmIChoYXNDaGlsZCkNCgkJCXN0clN1YiArPSBjbURyYXdTdWJNZW51IChpdGVtLCBwcmVmaXgsIGlkU3ViLCBvcmllbnRTdWIsIG5vZGVQcm9wZXJ0aWVzKTsNCgl9DQoJaWYgKCF2ZXJ0aWNhbCkNCgkJc3RyICs9ICc8L3RyPic7DQoJc3RyICs9ICc8L3RhYmxlPicgKyBzdHJTdWI7DQoJb2JqLmlubmVySFRNTCA9IHN0cjsNCgkvL2RvY3VtZW50LndyaXRlICgiPHhtcD4iICsgc3RyICsgIjwveG1wPiIpOw0KfQ0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLw0KLy8gTW91c2UgRXZlbnQgSGFuZGxpbmcgRnVuY3Rpb25zDQovLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQovLw0KLy8gYWN0aW9uIHNob3VsZCBiZSB0YWtlbiBmb3IgbW91c2UgbW92aW5nIGluIHRvIHRoZSBtZW51IGl0ZW0NCi8vDQpmdW5jdGlvbiBjbUl0ZW1Nb3VzZU92ZXIgKG9iaiwgcHJlZml4LCBpc01haW4sIGlkU3ViLCBvcmllbnQsIGluZGV4KQ0Kew0KCWNsZWFyVGltZW91dCAoX2NtVGltZU91dCk7DQoNCglpZiAoIW9iai5jbVByZWZpeCkNCgl7DQoJCW9iai5jbVByZWZpeCA9IHByZWZpeDsNCgkJb2JqLmNtSXNNYWluID0gaXNNYWluOw0KCX0NCg0KCXZhciB0aGlzTWVudSA9IGNtR2V0VGhpc01lbnUgKG9iaiwgcHJlZml4KTsNCg0KCS8vIGluc2VydCBvYmogaW50byBjbUl0ZW1zIGlmIGNtSXRlbXMgZG9lc24ndCBoYXZlIG9iag0KCWlmICghdGhpc01lbnUuY21JdGVtcykNCgkJdGhpc01lbnUuY21JdGVtcyA9IG5ldyBBcnJheSAoKTsNCgl2YXIgaTsNCglmb3IgKGkgPSAwOyBpIDwgdGhpc01lbnUuY21JdGVtcy5sZW5ndGg7ICsraSkNCgl7DQoJCWlmICh0aGlzTWVudS5jbUl0ZW1zW2ldID09IG9iaikNCgkJCWJyZWFrOw0KCX0NCglpZiAoaSA9PSB0aGlzTWVudS5jbUl0ZW1zLmxlbmd0aCkNCgl7DQoJCS8vdGhpc01lbnUuY21JdGVtcy5wdXNoIChvYmopOw0KCQl0aGlzTWVudS5jbUl0ZW1zW2ldID0gb2JqOw0KCX0NCg0KCS8vIGhpZGUgdGhlIHByZXZpb3VzIHN1Ym1lbnUgdGhhdCBpcyBub3QgdGhpcyBicmFuY2gNCglpZiAoX2NtQ3VycmVudEl0ZW0pDQoJew0KCQkvLyBvY2NhdGlvbmFsbHksIHdlIGdldCB0aGlzIGNhc2Ugd2hlbiB1c2VyDQoJCS8vIG1vdmUgdGhlIG1vdXNlIHNsb3dseSB0byB0aGUgYm9yZGVyDQoJCWlmIChfY21DdXJyZW50SXRlbSA9PSB0aGlzTWVudSkNCgkJCXJldHVybjsNCg0KCQl2YXIgdGhhdFByZWZpeCA9IF9jbUN1cnJlbnRJdGVtLmNtUHJlZml4Ow0KCQl2YXIgdGhhdE1lbnUgPSBjbUdldFRoaXNNZW51IChfY21DdXJyZW50SXRlbSwgdGhhdFByZWZpeCk7DQoJCWlmICh0aGF0TWVudSAhPSB0aGlzTWVudS5jbVBhcmVudE1lbnUpDQoJCXsNCgkJCWlmIChfY21DdXJyZW50SXRlbS5jbUlzTWFpbikNCgkJCQlfY21DdXJyZW50SXRlbS5jbGFzc05hbWUgPSB0aGF0UHJlZml4ICsgJ01haW5JdGVtJzsNCgkJCWVsc2UNCgkJCQlfY21DdXJyZW50SXRlbS5jbGFzc05hbWUgPSB0aGF0UHJlZml4ICsgJ01lbnVJdGVtJzsNCgkJCWlmICh0aGF0TWVudS5pZCAhPSBpZFN1YikNCgkJCQljbUhpZGVNZW51ICh0aGF0TWVudSwgdGhpc01lbnUsIHRoYXRQcmVmaXgpOw0KCQl9DQoJfQ0KDQoJLy8gb2theSwgc2V0IHRoZSBjdXJyZW50IG1lbnUgdG8gdGhpcyBvYmoNCglfY21DdXJyZW50SXRlbSA9IG9iajsNCg0KCS8vIGp1c3QgaW4gY2FzZSwgcmVzZXQgYWxsIGl0ZW1zIGluIHRoaXMgbWVudSB0byBNZW51SXRlbQ0KCWNtUmVzZXRNZW51ICh0aGlzTWVudSwgcHJlZml4KTsNCg0KCXZhciBpdGVtID0gX2NtSXRlbUxpc3RbaW5kZXhdOw0KCXZhciBpc0RlZmF1bHRJdGVtID0gY21Jc0RlZmF1bHRJdGVtIChpdGVtKTsNCg0KCWlmIChpc0RlZmF1bHRJdGVtKQ0KCXsNCgkJaWYgKGlzTWFpbikNCgkJCW9iai5jbGFzc05hbWUgPSBwcmVmaXggKyAnTWFpbkl0ZW1Ib3Zlcic7DQoJCWVsc2UNCgkJCW9iai5jbGFzc05hbWUgPSBwcmVmaXggKyAnTWVudUl0ZW1Ib3Zlcic7DQoJfQ0KDQoJaWYgKGlkU3ViKQ0KCXsNCgkJdmFyIHN1Yk1lbnUgPSBjbUdldE9iamVjdCAoaWRTdWIpOw0KCQljbVNob3dTdWJNZW51IChvYmosIHByZWZpeCwgc3ViTWVudSwgb3JpZW50KTsNCgl9DQoNCgkvKg0KCXZhciBkZXNjcmlwdCA9ICcnOw0KCWlmIChpdGVtLmxlbmd0aCA+IDQpDQoJCWRlc2NyaXB0ID0gKGl0ZW1bNF0gIT0gbnVsbCkgPyBpdGVtWzRdIDogKGl0ZW1bMl0gPyBpdGVtWzJdIDogZGVzY3JpcHQpOw0KCWVsc2UgaWYgKGl0ZW0ubGVuZ3RoID4gMikNCgkJZGVzY3JpcHQgPSAoaXRlbVsyXSA/IGl0ZW1bMl0gOiBkZXNjcmlwdCk7DQoNCgl3aW5kb3cuZGVmYXVsdFN0YXR1cyA9IGRlc2NyaXB0Ow0KCSovDQp9DQoNCi8vDQovLyBhY3Rpb24gc2hvdWxkIGJlIHRha2VuIGZvciBtb3VzZSBtb3Zpbmcgb3V0IG9mIHRoZSBtZW51IGl0ZW0NCi8vDQpmdW5jdGlvbiBjbUl0ZW1Nb3VzZU91dCAob2JqLCBkZWxheVRpbWUpDQp7DQoJaWYgKCFkZWxheVRpbWUpDQoJCWRlbGF5VGltZSA9IF9jbU5vZGVQcm9wZXJ0aWVzLmRlbGF5Ow0KCV9jbVRpbWVPdXQgPSB3aW5kb3cuc2V0VGltZW91dCAoJ2NtSGlkZU1lbnVUaW1lICgpJywgZGVsYXlUaW1lKTsNCgl3aW5kb3cuZGVmYXVsdFN0YXR1cyA9ICcnOw0KfQ0KDQovLw0KLy8gYWN0aW9uIHNob3VsZCBiZSB0YWtlbiBmb3IgbW91c2UgYnV0dG9uIGRvd24gYXQgYSBtZW51IGl0ZW0NCi8vDQpmdW5jdGlvbiBjbUl0ZW1Nb3VzZURvd24gKG9iaiwgaW5kZXgpDQp7DQoJaWYgKGNtSXNEZWZhdWx0SXRlbSAoX2NtSXRlbUxpc3RbaW5kZXhdKSkNCgl7DQoJCWlmIChvYmouY21Jc01haW4pDQoJCQlvYmouY2xhc3NOYW1lID0gb2JqLmNtUHJlZml4ICsgJ01haW5JdGVtQWN0aXZlJzsNCgkJZWxzZQ0KCQkJb2JqLmNsYXNzTmFtZSA9IG9iai5jbVByZWZpeCArICdNZW51SXRlbUFjdGl2ZSc7DQoJfQ0KfQ0KDQovLw0KLy8gYWN0aW9uIHNob3VsZCBiZSB0YWtlbiBmb3IgbW91c2UgYnV0dG9uIHVwIGF0IGEgbWVudSBpdGVtDQovLw0KZnVuY3Rpb24gY21JdGVtTW91c2VVcCAob2JqLCBpbmRleCkNCnsNCgl2YXIgaXRlbSA9IF9jbUl0ZW1MaXN0W2luZGV4XTsNCg0KCXZhciBsaW5rID0gbnVsbCwgdGFyZ2V0ID0gJ19zZWxmJzsNCg0KCWlmIChpdGVtLmxlbmd0aCA+IDIpDQoJCWxpbmsgPSBpdGVtWzJdOw0KCWlmIChpdGVtLmxlbmd0aCA+IDMgJiYgaXRlbVszXSkNCgkJdGFyZ2V0ID0gaXRlbVszXTsNCg0KCWlmIChsaW5rICE9IG51bGwpDQoJew0KCQl3aW5kb3cub3BlbiAobGluaywgdGFyZ2V0KTsNCgl9DQoNCgl2YXIgcHJlZml4ID0gb2JqLmNtUHJlZml4Ow0KCXZhciB0aGlzTWVudSA9IGNtR2V0VGhpc01lbnUgKG9iaiwgcHJlZml4KTsNCg0KCXZhciBoYXNDaGlsZCA9IChpdGVtLmxlbmd0aCA+IDUpOw0KCWlmICghaGFzQ2hpbGQpDQoJew0KCQlpZiAoY21Jc0RlZmF1bHRJdGVtIChpdGVtKSkNCgkJew0KCQkJaWYgKG9iai5jbUlzTWFpbikNCgkJCQlvYmouY2xhc3NOYW1lID0gcHJlZml4ICsgJ01haW5JdGVtJzsNCgkJCWVsc2UNCgkJCQlvYmouY2xhc3NOYW1lID0gcHJlZml4ICsgJ01lbnVJdGVtJzsNCgkJfQ0KCQljbUhpZGVNZW51ICh0aGlzTWVudSwgbnVsbCwgcHJlZml4KTsNCgl9DQoJZWxzZQ0KCXsNCgkJaWYgKGNtSXNEZWZhdWx0SXRlbSAoaXRlbSkpDQoJCXsNCgkJCWlmIChvYmouY21Jc01haW4pDQoJCQkJb2JqLmNsYXNzTmFtZSA9IHByZWZpeCArICdNYWluSXRlbUhvdmVyJzsNCgkJCWVsc2UNCgkJCQlvYmouY2xhc3NOYW1lID0gcHJlZml4ICsgJ01lbnVJdGVtSG92ZXInOw0KCQl9DQoJfQ0KfQ0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLw0KLy8gTW91c2UgRXZlbnQgU3VwcG9ydCBVdGlsaXR5IEZ1bmN0aW9ucw0KLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCg0KLy8NCi8vIG1vdmUgc3VibWVudSB0byB0aGUgYXBwcm9wcmlhdGUgbG9jYXRpb24NCi8vDQovLyBAcGFyYW0Jb2JqCXRoZSBtZW51IGl0ZW0gdGhhdCBvcGVucyB1cCB0aGUgc3ViTWVudQ0KLy8JCXN1Yk1lbnUJdGhlIHN1YiBtZW51IHRvIGJlIHNob3duDQovLwkJb3JpZW50CXRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc3ViTWVudQ0KLy8NCmZ1bmN0aW9uIGNtTW92ZVN1Yk1lbnUgKG9iaiwgc3ViTWVudSwgb3JpZW50KQ0Kew0KCXZhciBtb2RlID0gU3RyaW5nIChvcmllbnQpOw0KCXZhciBwID0gc3ViTWVudS5vZmZzZXRQYXJlbnQ7DQoJdmFyIHN1Yk1lbnVXaWR0aCA9IGNtR2V0V2lkdGggKHN1Yk1lbnUpOw0KCXZhciBob3JpeiA9IGNtR2V0SG9yaXpvbnRhbEFsaWduIChvYmosIG1vZGUsIHAsIHN1Yk1lbnVXaWR0aCk7DQoJaWYgKG1vZGUuY2hhckF0ICgwKSA9PSAnaCcpDQoJew0KCQlpZiAobW9kZS5jaGFyQXQgKDEpID09ICdiJykNCgkJCXN1Yk1lbnUuc3R5bGUudG9wID0gKGNtR2V0WUF0IChvYmosIHApICsgY21HZXRIZWlnaHQgKG9iaikpICsgJ3B4JzsNCgkJZWxzZQ0KCQkJc3ViTWVudS5zdHlsZS50b3AgPSAoY21HZXRZQXQgKG9iaiwgcCkgLSBjbUdldEhlaWdodCAoc3ViTWVudSkpICsgJ3B4JzsNCgkJaWYgKGhvcml6ID09ICdyJykNCgkJCXN1Yk1lbnUuc3R5bGUubGVmdCA9IChjbUdldFhBdCAob2JqLCBwKSkgKyAncHgnOw0KCQllbHNlDQoJCQlzdWJNZW51LnN0eWxlLmxlZnQgPSAoY21HZXRYQXQgKG9iaiwgcCkgKyBjbUdldFdpZHRoIChvYmopIC0gc3ViTWVudVdpZHRoKSArICdweCc7DQoJfQ0KCWVsc2UNCgl7DQoJCWlmIChob3JpeiA9PSAncicpDQoJCQlzdWJNZW51LnN0eWxlLmxlZnQgPSAoY21HZXRYQXQgKG9iaiwgcCkgKyBjbUdldFdpZHRoIChvYmopKSArICdweCc7DQoJCWVsc2UNCgkJCXN1Yk1lbnUuc3R5bGUubGVmdCA9IChjbUdldFhBdCAob2JqLCBwKSAtIHN1Yk1lbnVXaWR0aCkgKyAncHgnOw0KCQlpZiAobW9kZS5jaGFyQXQgKDEpID09ICdiJykNCgkJCXN1Yk1lbnUuc3R5bGUudG9wID0gKGNtR2V0WUF0IChvYmosIHApKSArICdweCc7DQoJCWVsc2UNCgkJCXN1Yk1lbnUuc3R5bGUudG9wID0gKGNtR2V0WUF0IChvYmosIHApICsgY21HZXRIZWlnaHQgKG9iaikgLSBjbUdldEhlaWdodCAoc3ViTWVudSkpICsgJ3B4JzsNCgl9DQoJDQoJLyogV01YIEJPTFQgQ0hBTkdFUyAqLwkNCgljb25zdCBzdWJNZW51SGVpZ2h0ID0gY21HZXRIZWlnaHQoc3ViTWVudSk7DQoJY29uc3Qgcm93VG9wSGVhZGVyID0gOTU7DQoJY29uc3Qgcm93SGVhZGVyID0gMzA7DQoJY29uc3QgdG9wRGlzdGFuY2UgPSBjbUdldFlBdChvYmosIHApICsgcm93VG9wSGVhZGVyICsgcm93SGVhZGVyOw0KCQ0KCWlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCAoc3ViTWVudUhlaWdodCArIHRvcERpc3RhbmNlKSkgew0KCQlzdWJNZW51LnN0eWxlLmhlaWdodCA9ICdjYWxjKDEwMHZoIC0gJyArIHRvcERpc3RhbmNlICsgJ3B4KSc7DQoJCSBzdWJNZW51LnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nOw0KCX0NCgkvKiBFTkQgV01YIEJPTFQgQ0hBTkdFUyAqLw0KfQ0KDQovLw0KLy8gYXV0b21hdGljYWxseSByZS1hZGp1c3QgdGhlIG1lbnUgcG9zaXRpb24gYmFzZWQgb24gYXZhaWxhYmxlIHNjcmVlbiBzaXplLg0KLy8NCmZ1bmN0aW9uIGNtR2V0SG9yaXpvbnRhbEFsaWduIChvYmosIG1vZGUsIHAsIHN1Yk1lbnVXaWR0aCkNCnsNCgl2YXIgaG9yaXogPSBtb2RlLmNoYXJBdCAoMik7DQoJaWYgKCEoZG9jdW1lbnQuYm9keSkpDQoJCXJldHVybiBob3JpejsNCgl2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7DQoJdmFyIGJyb3dzZXJMZWZ0Ow0KCXZhciBicm93c2VyUmlnaHQ7DQoJaWYgKHdpbmRvdy5pbm5lcldpZHRoKQ0KCXsNCgkJLy8gRE9NIHdpbmRvdyBhdHRyaWJ1dGVzDQoJCWJyb3dzZXJMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0Ow0KCQlicm93c2VyUmlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCArIGJyb3dzZXJMZWZ0Ow0KCX0NCgllbHNlIGlmIChib2R5LmNsaWVudFdpZHRoKQ0KCXsNCgkJLy8gSUUgYXR0cmlidXRlcw0KCQlicm93c2VyTGVmdCA9IGJvZHkuY2xpZW50TGVmdDsNCgkJYnJvd3NlclJpZ2h0ID0gYm9keS5jbGllbnRXaWR0aCArIGJyb3dzZXJMZWZ0Ow0KCX0NCgllbHNlDQoJCXJldHVybiBob3JpejsNCglpZiAobW9kZS5jaGFyQXQgKDApID09ICdoJykNCgl7DQoJCWlmIChob3JpeiA9PSAncicgJiYgKGNtR2V0WEF0IChvYmopICsgc3ViTWVudVdpZHRoKSA+IGJyb3dzZXJSaWdodCkNCgkJCWhvcml6ID0gJ2wnOw0KCQlpZiAoaG9yaXogPT0gJ2wnICYmIChjbUdldFhBdCAob2JqKSArIGNtR2V0V2lkdGggKG9iaikgLSBzdWJNZW51V2lkdGgpIDwgYnJvd3NlckxlZnQpDQoJCQlob3JpeiA9ICdyJzsNCgkJcmV0dXJuIGhvcml6Ow0KCX0NCgllbHNlDQoJew0KCQlpZiAoaG9yaXogPT0gJ3InICYmIChjbUdldFhBdCAob2JqLCBwKSArIGNtR2V0V2lkdGggKG9iaikgKyBzdWJNZW51V2lkdGgpID4gYnJvd3NlclJpZ2h0KQ0KCQkJaG9yaXogPSAnbCc7DQoJCWlmIChob3JpeiA9PSAnbCcgJiYgKGNtR2V0WEF0IChvYmosIHApIC0gc3ViTWVudVdpZHRoKSA8IGJyb3dzZXJMZWZ0KQ0KCQkJaG9yaXogPSAncic7DQoJCXJldHVybiBob3JpejsNCgl9DQp9DQoNCi8vDQovLyBzaG93IHRoZSBzdWJNZW51IHcvIHNwZWNpZmllZCBvcmllbnRhdGlvbg0KLy8gYWxzbyBtb3ZlIGl0IHRvIHRoZSBjb3JyZWN0IGNvb3JkaW5hdGVzDQovLw0KLy8gQHBhcmFtCW9iagl0aGUgbWVudSBpdGVtIHRoYXQgb3BlbnMgdXAgdGhlIHN1Yk1lbnUNCi8vCQlzdWJNZW51CXRoZSBzdWIgbWVudSB0byBiZSBzaG93bg0KLy8JCW9yaWVudAl0aGUgb3JpZW50YXRpb24gb2YgdGhlIHN1Yk1lbnUNCi8vDQpmdW5jdGlvbiBjbVNob3dTdWJNZW51IChvYmosIHByZWZpeCwgc3ViTWVudSwgb3JpZW50KQ0Kew0KCWlmICghc3ViTWVudS5jbVBhcmVudE1lbnUpDQoJew0KCQkvLyBlc3RhYmxpc2ggdGhlIHRyZWUgdy8gYmFjayBlZGdlDQoJCXZhciB0aGlzTWVudSA9IGNtR2V0VGhpc01lbnUgKG9iaiwgcHJlZml4KTsNCgkJc3ViTWVudS5jbVBhcmVudE1lbnUgPSB0aGlzTWVudTsNCgkJaWYgKCF0aGlzTWVudS5jbVN1Yk1lbnUpDQoJCQl0aGlzTWVudS5jbVN1Yk1lbnUgPSBuZXcgQXJyYXkgKCk7DQoJCS8vdGhpc01lbnUuY21TdWJNZW51LnB1c2ggKHN1Yk1lbnUpOw0KCQl0aGlzTWVudS5jbVN1Yk1lbnVbdGhpc01lbnUuY21TdWJNZW51Lmxlbmd0aF0gPSBzdWJNZW51Ow0KCX0NCg0KCS8vIHBvc2l0aW9uIHRoZSBzdWIgbWVudQ0KCWNtTW92ZVN1Yk1lbnUgKG9iaiwgc3ViTWVudSwgb3JpZW50KTsNCglzdWJNZW51LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoNCgkvLw0KCS8vIE9uIElFLCBjb250cm9scyBzdWNoIGFzIFNFTEVDVCwgT0JKRUNULCBJRlJBTUUgKGJlZm9yZSA1LjUpDQoJLy8gYXJlIHdpbmRvdyBiYXNlZCBjb250cm9scy4gIFNvLCBpZiB0aGUgc3ViIG1lbnUgYW5kIHRoZXNlDQoJLy8gY29udHJvbHMgb3ZlcmxhcCwgc3ViIG1lbnUgd291bGQgYmUgaGlkZGVuIGJlaGluZCB0aGVtLiAgVGh1cw0KCS8vIG9uZSBuZWVkcyB0byB0dXJuIHRoZSB2aXNpYmlsaXR5IG9mIHRoZXNlIGNvbnRyb2xzIG9mZiB3aGVuIHRoZQ0KCS8vIHN1YiBtZW51IGlzIHNob3dpbmcsIGFuZCB0dXJuIHRoZWlyIHZpc2liaWxpdHkgYmFjayBvbg0KCS8vIHdoZW4gdGhlIHN1YiBtZW51IGlzIGhpZGluZy4NCgkvLw0KCWlmIChkb2N1bWVudC5hbGwpCS8vIGl0IGlzIElFDQoJew0KCQkvKiBwYXJ0IG9mIEZlbGl4IFphc2xhdnNraXkncyBmaXggb24gaGlkaW5nIGNvbnRyb2xzDQoJCSAgIG5vdCByZWFsbHkgc3VyZSBpZiB0aGlzIHBhcnQgaXMgbmVjZXNzYXJ5LCBidXQgc2hvdWxkbid0DQoJCSAgIGh1cnQuICovDQoJCWlmICghc3ViTWVudS5jbU92ZXJsYXApDQoJCQlzdWJNZW51LmNtT3ZlcmxhcCA9IG5ldyBBcnJheSAoKTsNCi8qQGNjX29uIEAqLw0KLypAaWYgKEBfanNjcmlwdF92ZXJzaW9uID49IDUuNSkNCkBlbHNlIEAqLw0KCQljbUhpZGVDb250cm9sICgiSUZSQU1FIiwgc3ViTWVudSk7DQovKkBlbmQgQCovDQoJCWNtSGlkZUNvbnRyb2wgKCJTRUxFQ1QiLCBzdWJNZW51KTsNCgkJY21IaWRlQ29udHJvbCAoIk9CSkVDVCIsIHN1Yk1lbnUpOw0KCX0NCn0NCg0KLy8NCi8vIHJlc2V0IGFsbCB0aGUgbWVudSBpdGVtcyB0byBjbGFzcyBNZW51SXRlbSBpbiB0aGlzTWVudQ0KLy8NCmZ1bmN0aW9uIGNtUmVzZXRNZW51ICh0aGlzTWVudSwgcHJlZml4KQ0Kew0KCWlmICh0aGlzTWVudS5jbUl0ZW1zKQ0KCXsNCgkJdmFyIGk7DQoJCXZhciBzdHI7DQoJCXZhciBpdGVtcyA9IHRoaXNNZW51LmNtSXRlbXM7DQoJCWZvciAoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkNCgkJew0KCQkJaWYgKGl0ZW1zW2ldLmNtSXNNYWluKQ0KCQkJCXN0ciA9IHByZWZpeCArICdNYWluSXRlbSc7DQoJCQllbHNlDQoJCQkJc3RyID0gcHJlZml4ICsgJ01lbnVJdGVtJzsNCgkJCWlmIChpdGVtc1tpXS5jbGFzc05hbWUgIT0gc3RyKQ0KCQkJCWl0ZW1zW2ldLmNsYXNzTmFtZSA9IHN0cjsNCgkJfQ0KCX0NCn0NCg0KLy8NCi8vIGNhbGxlZCBieSB0aGUgdGltZXIgdG8gaGlkZSB0aGUgbWVudQ0KLy8NCmZ1bmN0aW9uIGNtSGlkZU1lbnVUaW1lICgpDQp7DQoJaWYgKF9jbUN1cnJlbnRJdGVtKQ0KCXsNCgkJdmFyIHByZWZpeCA9IF9jbUN1cnJlbnRJdGVtLmNtUHJlZml4Ow0KCQljbUhpZGVNZW51IChjbUdldFRoaXNNZW51IChfY21DdXJyZW50SXRlbSwgcHJlZml4KSwgbnVsbCwgcHJlZml4KTsNCgl9DQp9DQoNCi8vDQovLyBoaWRlIHRoaXNNZW51LCBjaGlsZHJlbiBvZiB0aGlzTWVudSwgYXMgd2VsbCBhcyB0aGUgYW5jZXN0b3INCi8vIG9mIHRoaXNNZW51IHVudGlsIGN1cnJlbnRNZW51IGlzIGVuY291bnRlcmVkLiAgY3VycmVudE1lbnUNCi8vIHdpbGwgbm90IGJlIGhpZGRlbg0KLy8NCmZ1bmN0aW9uIGNtSGlkZU1lbnUgKHRoaXNNZW51LCBjdXJyZW50TWVudSwgcHJlZml4KQ0Kew0KCXZhciBzdHIgPSBwcmVmaXggKyAnU3ViTWVudSc7DQoNCgkvLyBoaWRlIHRoZSBkb3duIHN0cmVhbSBtZW51cw0KCWlmICh0aGlzTWVudS5jbVN1Yk1lbnUpDQoJew0KCQl2YXIgaTsNCgkJZm9yIChpID0gMDsgaSA8IHRoaXNNZW51LmNtU3ViTWVudS5sZW5ndGg7ICsraSkNCgkJew0KCQkJY21IaWRlU3ViTWVudSAodGhpc01lbnUuY21TdWJNZW51W2ldLCBwcmVmaXgpOw0KCQl9DQoJfQ0KDQoJLy8gaGlkZSB0aGUgdXBzdHJlYW0gbWVudXMNCgl3aGlsZSAodGhpc01lbnUgJiYgdGhpc01lbnUgIT0gY3VycmVudE1lbnUpDQoJew0KCQljbVJlc2V0TWVudSAodGhpc01lbnUsIHByZWZpeCk7DQoJCWlmICh0aGlzTWVudS5jbGFzc05hbWUgPT0gc3RyKQ0KCQl7DQoJCQl0aGlzTWVudS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7DQoJCQljbVNob3dDb250cm9sICh0aGlzTWVudSk7DQoJCX0NCgkJZWxzZQ0KCQkJYnJlYWs7DQoJCXRoaXNNZW51ID0gY21HZXRUaGlzTWVudSAodGhpc01lbnUuY21QYXJlbnRNZW51LCBwcmVmaXgpOw0KCX0NCn0NCg0KLy8NCi8vIGhpZGUgdGhpc01lbnUgYXMgd2VsbCBhcyBpdHMgc3ViIG1lbnVzIGlmIHRoaXNNZW51IGlzIG5vdA0KLy8gYWxyZWFkeSBoaWRkZW4NCi8vDQpmdW5jdGlvbiBjbUhpZGVTdWJNZW51ICh0aGlzTWVudSwgcHJlZml4KQ0Kew0KCWlmICh0aGlzTWVudS5zdHlsZS52aXNpYmlsaXR5ID09ICdoaWRkZW4nKQ0KCQlyZXR1cm47DQoJaWYgKHRoaXNNZW51LmNtU3ViTWVudSkNCgl7DQoJCXZhciBpOw0KCQlmb3IgKGkgPSAwOyBpIDwgdGhpc01lbnUuY21TdWJNZW51Lmxlbmd0aDsgKytpKQ0KCQl7DQoJCQljbUhpZGVTdWJNZW51ICh0aGlzTWVudS5jbVN1Yk1lbnVbaV0sIHByZWZpeCk7DQoJCX0NCgl9DQoJY21SZXNldE1lbnUgKHRoaXNNZW51LCBwcmVmaXgpOw0KCXRoaXNNZW51LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsNCgljbVNob3dDb250cm9sICh0aGlzTWVudSk7DQp9DQoNCi8vDQovLyBoaWRlIGEgY29udHJvbCBzdWNoIGFzIElGUkFNRQ0KLy8NCmZ1bmN0aW9uIGNtSGlkZUNvbnRyb2wgKHRhZ05hbWUsIHN1Yk1lbnUpDQp7DQoJdmFyIHggPSBjbUdldFggKHN1Yk1lbnUpOw0KCXZhciB5ID0gY21HZXRZIChzdWJNZW51KTsNCgl2YXIgdyA9IHN1Yk1lbnUub2Zmc2V0V2lkdGg7DQoJdmFyIGggPSBzdWJNZW51Lm9mZnNldEhlaWdodDsNCg0KCXZhciBpOw0KCWZvciAoaSA9IDA7IGkgPCBkb2N1bWVudC5hbGwudGFncyh0YWdOYW1lKS5sZW5ndGg7ICsraSkNCgl7DQoJCXZhciBvYmogPSBkb2N1bWVudC5hbGwudGFncyh0YWdOYW1lKVtpXTsNCgkJaWYgKCFvYmogfHwgIW9iai5vZmZzZXRQYXJlbnQpDQoJCQljb250aW51ZTsNCg0KCQkvLyBjaGVjayBpZiB0aGUgb2JqZWN0IGFuZCB0aGUgc3ViTWVudSBvdmVybGFwDQoNCgkJdmFyIG94ID0gY21HZXRYIChvYmopOw0KCQl2YXIgb3kgPSBjbUdldFkgKG9iaik7DQoJCXZhciBvdyA9IG9iai5vZmZzZXRXaWR0aDsNCgkJdmFyIG9oID0gb2JqLm9mZnNldEhlaWdodDsNCg0KCQlpZiAob3ggPiAoeCArIHcpIHx8IChveCArIG93KSA8IHgpDQoJCQljb250aW51ZTsNCgkJaWYgKG95ID4gKHkgKyBoKSB8fCAob3kgKyBvaCkgPCB5KQ0KCQkJY29udGludWU7DQoNCgkJLy8gaWYgb2JqZWN0IGlzIGFscmVhZHkgbWFkZSBoaWRkZW4gYnkgYSBkaWZmZXJlbnQNCgkJLy8gc3VibWVudSB0aGVuIHdlIGRvbnQgd2FudCB0byBwdXQgaXQgb24gb3ZlcmxhcCBsaXN0IG9mDQoJCS8vIG9mIGEgc3VibWVudSBhIHNlY29uZCB0aW1lLg0KCQkvLyAtIGJ1ZyBmaXhlZCBieSBGZWxpeCBaYXNsYXZza2l5DQoJCWlmKG9iai5zdHlsZS52aXNpYmlsaXR5ID09ICJoaWRkZW4iKQ0KCQkJY29udGludWU7DQoNCgkJLy9zdWJNZW51LmNtT3ZlcmxhcC5wdXNoIChvYmopOw0KCQlzdWJNZW51LmNtT3ZlcmxhcFtzdWJNZW51LmNtT3ZlcmxhcC5sZW5ndGhdID0gb2JqOw0KCQlvYmouc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KCX0NCn0NCg0KLy8NCi8vIHNob3cgdGhlIGNvbnRyb2wgaGlkZGVuIGJ5IHRoZSBzdWJNZW51DQovLw0KZnVuY3Rpb24gY21TaG93Q29udHJvbCAoc3ViTWVudSkNCnsNCglpZiAoc3ViTWVudS5jbU92ZXJsYXApDQoJew0KCQl2YXIgaTsNCgkJZm9yIChpID0gMDsgaSA8IHN1Yk1lbnUuY21PdmVybGFwLmxlbmd0aDsgKytpKQ0KCQkJc3ViTWVudS5jbU92ZXJsYXBbaV0uc3R5bGUudmlzaWJpbGl0eSA9ICIiOw0KCX0NCglzdWJNZW51LmNtT3ZlcmxhcCA9IG51bGw7DQp9DQoNCi8vDQovLyByZXR1cm5zIHRoZSBtYWluIG1lbnUgb3IgdGhlIHN1Ym1lbnUgdGFibGUgd2hlcmUgdGhpcyBvYmogKG1lbnUgaXRlbSkNCi8vIGlzIGluDQovLw0KZnVuY3Rpb24gY21HZXRUaGlzTWVudSAob2JqLCBwcmVmaXgpDQp7DQoJdmFyIHN0cjEgPSBwcmVmaXggKyAnU3ViTWVudSc7DQoJdmFyIHN0cjIgPSBwcmVmaXggKyAnTWVudSc7DQoJd2hpbGUgKG9iaikNCgl7DQoJCWlmIChvYmouY2xhc3NOYW1lID09IHN0cjEgfHwgb2JqLmNsYXNzTmFtZSA9PSBzdHIyKQ0KCQkJcmV0dXJuIG9iajsNCgkJb2JqID0gb2JqLnBhcmVudE5vZGU7DQoJfQ0KCXJldHVybiBudWxsOw0KfQ0KDQovLw0KLy8gcmV0dXJuIHRydWUgaWYgdGhpcyBpdGVtIGlzIGhhbmRsZWQgdXNpbmcgZGVmYXVsdCBoYW5kbGVycw0KLy8NCmZ1bmN0aW9uIGNtSXNEZWZhdWx0SXRlbSAoaXRlbSkNCnsNCglpZiAoaXRlbSA9PSBfY21TcGxpdCB8fCBpdGVtWzBdID09IF9jbU5vQWN0aW9uIHx8IGl0ZW1bMF0gPT0gX2NtTm9DbGljaykNCgkJcmV0dXJuIGZhbHNlOw0KCXJldHVybiB0cnVlOw0KfQ0KDQovLw0KLy8gcmV0dXJucyB0aGUgb2JqZWN0IGJhcmluZyB0aGUgaWQNCi8vDQpmdW5jdGlvbiBjbUdldE9iamVjdCAoaWQpDQp7DQoJaWYgKGRvY3VtZW50LmFsbCkNCgkJcmV0dXJuIGRvY3VtZW50LmFsbFtpZF07DQoJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIChpZCk7DQp9DQoNCi8vDQovLyBmdW5jdGlvbnMgdGhhdCBvYnRhaW4gdGhlIHdpZHRoIG9mIGFuIEhUTUwgZWxlbWVudC4NCi8vDQpmdW5jdGlvbiBjbUdldFdpZHRoIChvYmopDQp7DQoJdmFyIHdpZHRoID0gb2JqLm9mZnNldFdpZHRoOw0KCWlmICh3aWR0aCA+IDAgfHwgIWNtSXNUUk5vZGUgKG9iaikpDQoJCXJldHVybiB3aWR0aDsNCglpZiAoIW9iai5maXJzdENoaWxkKQ0KCQlyZXR1cm4gMDsNCgkvLyB1c2UgVEFCTEUncyBsZW5ndGggY2FuIGNhdXNlIGFuIGV4dHJhIHBpeGVsIGdhcA0KCS8vcmV0dXJuIG9iai5wYXJlbnROb2RlLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7DQoNCgkvLyB1c2UgdGhlIGxlZnQgYW5kIHJpZ2h0IGNoaWxkIGluc3RlYWQNCglyZXR1cm4gb2JqLmxhc3RDaGlsZC5vZmZzZXRMZWZ0IC0gb2JqLmZpcnN0Q2hpbGQub2Zmc2V0TGVmdCArIGNtR2V0V2lkdGggKG9iai5sYXN0Q2hpbGQpOw0KfQ0KDQovLw0KLy8gZnVuY3Rpb25zIHRoYXQgb2J0YWluIHRoZSBoZWlnaHQgb2YgYW4gSFRNTCBlbGVtZW50Lg0KLy8NCmZ1bmN0aW9uIGNtR2V0SGVpZ2h0IChvYmopDQp7DQoJdmFyIGhlaWdodCA9IG9iai5vZmZzZXRIZWlnaHQ7DQoJaWYgKGhlaWdodCA+IDAgfHwgIWNtSXNUUk5vZGUgKG9iaikpDQoJCXJldHVybiBoZWlnaHQ7DQoJaWYgKCFvYmouZmlyc3RDaGlsZCkNCgkJcmV0dXJuIDA7DQoJLy8gdXNlIHRoZSBmaXJzdCBjaGlsZCdzIGhlaWdodA0KCXJldHVybiBvYmouZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQ7DQp9DQoNCi8vDQovLyBmdW5jdGlvbnMgdGhhdCBvYnRhaW4gdGhlIGNvb3JkaW5hdGVzIG9mIGFuIEhUTUwgZWxlbWVudA0KLy8NCmZ1bmN0aW9uIGNtR2V0WCAob2JqKQ0Kew0KCXZhciB4ID0gMDsNCg0KCWRvDQoJew0KCQl4ICs9IG9iai5vZmZzZXRMZWZ0Ow0KCQlvYmogPSBvYmoub2Zmc2V0UGFyZW50Ow0KCX0NCgl3aGlsZSAob2JqKTsNCglyZXR1cm4geDsNCn0NCg0KZnVuY3Rpb24gY21HZXRYQXQgKG9iaiwgZWxtKQ0Kew0KCXZhciB4ID0gMDsNCg0KCXdoaWxlIChvYmogJiYgb2JqICE9IGVsbSkNCgl7DQoJCXggKz0gb2JqLm9mZnNldExlZnQ7DQoJCW9iaiA9IG9iai5vZmZzZXRQYXJlbnQ7DQoJfQ0KCWlmIChvYmogPT0gZWxtKQ0KCQlyZXR1cm4geDsNCglyZXR1cm4geCAtIGNtR2V0WCAoZWxtKTsNCn0NCg0KZnVuY3Rpb24gY21HZXRZIChvYmopDQp7DQoJdmFyIHkgPSAwOw0KCWRvDQoJew0KCQl5ICs9IG9iai5vZmZzZXRUb3A7DQoJCW9iaiA9IG9iai5vZmZzZXRQYXJlbnQ7DQoJfQ0KCXdoaWxlIChvYmopOw0KCXJldHVybiB5Ow0KfQ0KDQpmdW5jdGlvbiBjbUlzVFJOb2RlIChvYmopDQp7DQoJdmFyIHRhZ05hbWUgPSBvYmoudGFnTmFtZTsNCglyZXR1cm4gdGFnTmFtZSA9PSAiVFIiIHx8IHRhZ05hbWUgPT0gInRyIiB8fCB0YWdOYW1lID09ICJUciIgfHwgdGFnTmFtZSA9PSAidFIiOw0KfQ0KDQovLw0KLy8gZ2V0IHRoZSBZIHBvc2l0aW9uIG9mIHRoZSBvYmplY3QuICBJbiBjYXNlIG9mIFRSIGVsZW1lbnQgdGhvdWdoLA0KLy8gd2UgYXR0ZW1wdCB0byBhZGp1c3QgdGhlIHZhbHVlLg0KLy8NCmZ1bmN0aW9uIGNtR2V0WUF0IChvYmosIGVsbSkNCnsNCgl2YXIgeSA9IDA7DQoNCglpZiAoIW9iai5vZmZzZXRIZWlnaHQgJiYgY21Jc1RSTm9kZSAob2JqKSkNCgl7DQoJCXZhciBmaXJzdFRSID0gb2JqLnBhcmVudE5vZGUuZmlyc3RDaGlsZDsNCgkJb2JqID0gb2JqLmZpcnN0Q2hpbGQ7DQoJCXkgLT0gZmlyc3RUUi5maXJzdENoaWxkLm9mZnNldFRvcDsNCgl9DQoNCgl3aGlsZSAob2JqICYmIG9iaiAhPSBlbG0pDQoJew0KCQl5ICs9IG9iai5vZmZzZXRUb3A7DQoJCW9iaiA9IG9iai5vZmZzZXRQYXJlbnQ7DQoJfQ0KDQoJaWYgKG9iaiA9PSBlbG0pDQoJCXJldHVybiB5Ow0KCXJldHVybiB5IC0gY21HZXRZIChlbG0pOw0KfQ0KDQovLw0KLy8gZGVidWcgZnVuY3Rpb24sIGlnbm9yZSA6KQ0KLy8NCmZ1bmN0aW9uIGNtR2V0UHJvcGVydGllcyAob2JqKQ0Kew0KCWlmIChvYmogPT0gdW5kZWZpbmVkKQ0KCQlyZXR1cm4gJ3VuZGVmaW5lZCc7DQoJaWYgKG9iaiA9PSBudWxsKQ0KCQlyZXR1cm4gJ251bGwnOw0KDQoJdmFyIG1zZyA9IG9iaiArICc6XG4nOw0KCXZhciBpOw0KCWZvciAoaSBpbiBvYmopDQoJCW1zZyArPSBpICsgJyA9ICcgKyBvYmpbaV0gKyAnOyAnOw0KCXJldHVybiBtc2c7DQp9DQoNCi8qIEpTQ29va01lbnUgdjEuMzEgMS4gZml4IGEgYnVnIG9uIElFIHdpdGggY2F1c2VzIHN1Ym1lbnVzIHRvIGRpc3BsYXkgYXQgdGhlIHRvcA0KCQkJCQkgICBsZWZ0IGNvcm5lciBkdWUgdG8gZG9jdHlwZS4gIFRoZSBmaXggd2FzIHByb3ZpZGVkIGJ5DQoJCQkJCSAgIEJ1cnRvbiBTdHJhdXNzIDxCdXJ0b25AbnRvcHN1cHBvcnQuY29tPi4NCiovDQovKiBKU0Nvb2tNZW51IHYxLjMJMS4gYXV0b21hdGljYWxseSByZWFsaWduIChsZWZ0IGFuZCByaWdodCkgdGhlIHN1Ym1lbnUgd2hlbg0KCQkJCQkgICBjbGllbnQgc3BhY2UgaXMgbm90IGVub3VnaC4NCgkJCQkJMi4gYWRkIF9jbU5vQ2xpY2sgdG8gZ2V0IHJpZCBvZiBtZW51IGNsb3NpbmcgYmVoYXZpb3INCgkJCQkJICAgb24gdGhlIHBhcnRpY3VsYXIgbWVudSBpdGVtLCB0byBtYWtlIGl0IHBvc3NpYmxlIGZvciB0aGluZ3MNCgkJCQkJICAgc3VjaCBhcyBzZWFyY2ggYm94IHRvIGJlIGluc2lkZSB0aGUgbWVudS4NCiovDQovKiBKU0Nvb2tNZW51IHYxLjI1CTEuIGZpeCBTYWZhcmkgcG9zaXRpb25pbmcgaXNzdWUuICBUaGUgcHJvYmxlbSBpcyB0aGF0IGFsbCBUUiBlbGVtZW50cyBhcmUgbG9jYXRlZA0KCQkJCQkgICBhdCB0aGUgdG9wIGxlZnQgY29ybmVyLiAgVGh1cywgbmVlZCB0byBvYnRhaW4gdGhlICJ2aXJ0dWFsIg0KCQkJCQkgICBwb3NpdGlvbiBvZiB0aGVzZSBlbGVtZW50IGNvdWxkIGJlIGF0Lg0KKi8NCi8qIEpTQ29va01lbnUgdjEuMjQJMS4gZml4IHdpbmRvdyBiYXNlZCBjb250cm9sIGhpZGluZyBidWcNCgkJCQkJICAgdGhhbmtzIHRvIEZlbGl4IFphc2xhdnNraXkgPGZlbGl4QGJlYmluYXJ5LmNvbT4gZm9yIHRoZSBmaXguDQoqLw0KLyogSlNDb29rTWVudSB2MS4yMwkxLiBjb3JyZWN0IGEgcG9zaXRpb24gYnVnIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBwb3NpdGlvbmVkLg0KCQkJCQkgIHRoYW5rcyB0byBBbmRyZSA8YW5kZXJzQG5ldHNwYWNlLm5ldC5hdT4gZm9yIG5hcnJvd2luZyBkb3duDQoJCQkJCSAgdGhlIHByb2JsZW0uDQoqLw0KLyogSlNDb29rTWVudSB2MS4yMgkxLiBjaGFuZ2UgQXJyYXkucHVzaCAob2JqKSBjYWxsIHRvIEFycmF5W2xlbmd0aF0gPSBvYmouDQoJCQkJCSAgIFN1Z2dlc3Rpb24gZnJvbSBEaWNrIHZhbiBkZXIgS2FhZGVuIDxkaWNrQG5ldHJleC5ubD4gdG8NCgkJCQkJICAgbWFrZSB0aGUgc2NyaXB0IGNvbXBhdGlibGUgd2l0aCBJRSA1LjANCgkJCQkJMi4gQ2hhbmdlZCB0aGVtZSBmaWxlcyBhIGxpdHRsZSB0byBhZGQgei1pbmRleDogMTAwIGZvciBzdWINCgkJCQkJICAgbWVudXMuICBUaGlzIGNoYW5nZSBpcyBuZWNlc3NhcnkgZm9yIE5ldHNjYXBlIHRvIGF2b2lkDQoJCQkJCSAgIGEgZGlzcGxheSBwcm9ibGVtLg0KCQkJCQkzLiBzb21lIGNoYW5nZXMgdG8gdGhlIERPTSBzdHJ1Y3R1cmUgdG8gbWFrZSB0aGlzIG1lbnUgd29ya2luZw0KCQkJCQkgICBvbiBOZXRzY2FwZSA2LjAgKHRlc3RlZCkuICBUaGUgbWFpbiByZWFzb24gaXMgdGhhdCBOTjYgZG9lcw0KCQkJCQkgICBub3QgZG8gYWJzb2x1dGUgcG9zaXRpb25pbmcgd2l0aCB0YWJsZXMuICBUaGVyZWZvcmUgYW4gZXh0cmENCgkJCQkJICAgZGl2IGxheWVyIG11c3QgYmUgcHV0IGFyb3VuZCB0aGUgdGFibGUuDQoqLw0KLyogSlNDb29rTWVudSB2MS4yMQkxLiBmaXhlZCBhIGJ1ZyB0aGF0IGRpZG4ndCBhZGQgJ3B4JyBhcyBwYXJ0IG9mIGNvb3JkaW5hdGVzLg0KCQkJCQkgICBKU0Nvb2tNZW51IHNob3VsZCBiZSBYSFRNTCB2YWxpZGF0b3IgZnJpZW5kbHkgbm93Lg0KCQkJCQkyLiByZW1vdmVkIHVubmVjZXNzYXJ5IGRpc3BsYXkgYXR0cmlidXRlIGFuZCBjb3JyZXNwb25kaW5nDQoJCQkJCSAgIHRoZW1lIGVudHJ5IHRvIGZpeCBhIHByb2JsZW0gdGhhdCBOZXRzY2FwZSBzb21ldGltZXMNCgkJCQkJICAgcmVuZGVyIE9mZmljZSB0aGVtZSBpbmNvcnJlY3RseQ0KKi8NCi8qIEpTQ29va01lbnUgdjEuMi4JMS4gZml4IHRoZSBwcm9ibGVtIG9mIHNob3dpbmcgc3RhdHVzIGluIE5ldHNjYXBlDQoJCQkJCTIuIGNoYW5nZWQgdGhlIGhhbmRsZXIgcGFyYW1ldGVycyBhIGJpdCB0byBhbGxvdw0KCQkJCQkgICBzdHJpbmcgbGl0ZXJhbHMgdG8gYmUgcGFzc2VkIHRvIGphdmFzY3JpcHQgYmFzZWQNCgkJCQkJICAgbGlua3MNCgkJCQkJMy4gaGF2aW5nIG51bGwgaW4gdGFyZ2V0IGZpZWxkIHdvdWxkIGNhdXNlIHRoZSBsaW5rDQoJCQkJCSAgIHRvIGJlIG9wZW5lZCBpbiB0aGUgY3VycmVudCB3aW5kb3csIGJ1dCB0aGlzIGJlaGF2aW9yDQoJCQkJCSAgIGNvdWxkIGNoYW5nZSBpbiB0aGUgZnV0dXJlIHJlbGVhc2VzDQoqLw0KLyogSlNDb29rTWVudSB2MS4xLgkJYWRkZWQgYWJpbGl0eSB0byBoaWRlIGNvbnRyb2xzIGluIElFIHRvIHNob3cgc3VibWVudXMgcHJvcGVybHkgKi8NCi8qIEpTQ29va01lbnUgdjEuMDEuCWNtRHJhdyBnZW5lcmF0ZXMgWEhUTUwgY29kZSAqLw0KLyogSlNDb29rTWVudSB2MS4wLgkJKGMpIENvcHlyaWdodCAyMDAyIGJ5IEhlbmcgWXVhbiAqLw0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="19" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jscookmenu/Click/theme.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jscookmenu/Click/theme.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="5" startDateTime="2024-11-07T09:35:45.900+00:00" startTime="2209" endTime="2215" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="5" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="1996">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qc2Nvb2ttZW51L0NsaWNrL3RoZW1lLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwczovL3FhLndteGJvbHQud2VzY29kaXN0LmNvbS93bXgvd2VsY29tZS5mYWNlcw0KVXNlci1BZ2VudDogTW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogZW4tdXMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBxYS53bXhib2x0Lndlc2NvZGlzdC5jb20NCkNvb2tpZTogc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWINCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>1735</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTczNQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMTczNQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>DQp2YXIgY21UaGVtZUNsaWNrQmFzZSA9ICdqYXZhc2NyaXB0L2pzY29va21lbnUvQ2xpY2svJzsNCg0KdmFyIGNtVGhlbWVDbGljayA9DQp7DQogICAgLy8gbWFpbiBtZW51IGRpc3BsYXkgYXR0cmlidXRlcw0KICAgIC8vDQogICAgLy8gTm90ZS4gIFdoZW4gdGhlIG1lbnUgYmFyIGlzIGhvcml6b250YWwsDQogICAgLy8gbWFpbkZvbGRlckxlZnQgYW5kIG1haW5Gb2xkZXJSaWdodCBhcmUNCiAgICAvLyBwdXQgaW4gPHNwYW4+PC9zcGFuPi4gIFdoZW4gdGhlIG1lbnUNCiAgICAvLyBiYXIgaXMgdmVydGljYWwsIHRoZXkgd291bGQgYmUgcHV0IGluDQogICAgLy8gYSBzZXBhcmF0ZSBURCBjZWxsLg0KDQogICAgLy8gSFRNTCBjb2RlIHRvIHRoZSBsZWZ0IG9mIHRoZSBmb2xkZXIgaXRlbQ0KICAgIG1haW5Gb2xkZXJMZWZ0OiAnJywNCiAgICAvLyBIVE1MIGNvZGUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBmb2xkZXIgaXRlbQ0KICAgIG1haW5Gb2xkZXJSaWdodDogJycsDQogICAgLy8gSFRNTCBjb2RlIHRvIHRoZSBsZWZ0IG9mIHRoZSByZWd1bGFyIGl0ZW0NCiAgICBtYWluSXRlbUxlZnQ6ICcnLA0KICAgIC8vIEhUTUwgY29kZSB0byB0aGUgcmlnaHQgb2YgdGhlIHJlZ3VsYXIgaXRlbQ0KICAgIG1haW5JdGVtUmlnaHQ6ICcnLA0KDQogICAgLy8gc3ViIG1lbnUgZGlzcGxheSBhdHRyaWJ1dGVzDQoNCiAgICAvLyBIVE1MIGNvZGUgdG8gdGhlIGxlZnQgb2YgdGhlIGZvbGRlciBpdGVtDQogICAgZm9sZGVyTGVmdDogJycsDQogICAgLy8gSFRNTCBjb2RlIHRvIHRoZSByaWdodCBvZiB0aGUgZm9sZGVyIGl0ZW0NCiAgICBmb2xkZXJSaWdodDogJzxpbWcgYWx0PSIiIHNyYz0iJyArIGNtVGhlbWVDbGlja0Jhc2UgKyAnYXJyb3cuZ2lmIj4nLA0KICAgIC8vIEhUTUwgY29kZSB0byB0aGUgbGVmdCBvZiB0aGUgcmVndWxhciBpdGVtDQogICAgaXRlbUxlZnQ6ICcnLA0KICAgIC8vIEhUTUwgY29kZSB0byB0aGUgcmlnaHQgb2YgdGhlIHJlZ3VsYXIgaXRlbQ0KICAgIGl0ZW1SaWdodDogJycsDQogICAgLy8gY2VsbCBzcGFjaW5nIGZvciBtYWluIG1lbnUNCiAgICBtYWluU3BhY2luZzogMCwNCiAgICAvLyBjZWxsIHBhZGRpbmcgZm9yIG1haW4gbWVudQ0KICAgIG1haW5QYWRkaW5nOiAwLA0KICAgIC8vIGNlbGwgc3BhY2luZyBmb3Igc3ViIG1lbnVzDQogICAgc3ViU3BhY2luZzogMCwNCiAgICAvLyBhdXRvIGRpc3BlYXIgdGltZSBmb3Igc3VibWVudXMgaW4gbWlsbGktc2Vjb25kcw0KICAgIGRlbGF5OiAzMDANCn07DQoNCi8vIGhvcml6b250YWwgc3BsaXQsIHVzZWQgb25seSBpbiBzdWIgbWVudXMNCnZhciBjbVRoZW1lQ2xpY2tIU3BsaXQgPSBbX2NtTm9BY3Rpb24sICc8dGQgY29sc3Bhbj0iMyIgc3R5bGU9ImhlaWdodDogM3B4OyBvdmVyZmxvdzogaGlkZGVuIj48ZGl2IGNsYXNzPSJUaGVtZUNsaWNrTWVudVNwbGl0Ij48L2Rpdj48L3RkPiddOw0KLy8gdmVydGljYWwgc3BsaXQsIHVzZWQgb25seSBpbiBtYWluIG1lbnUNCnZhciBjbVRoZW1lQ2xpY2tNYWluVlNwbGl0ID0gW19jbU5vQWN0aW9uLCAnPGRpdiBjbGFzcz0iVGhlbWVDbGlja01lbnVWU3BsaXQiPjwvZGl2PiddOw0KLy8gaG9yaXpvbnRhbCBzcGxpdCwgdXNlZCBvbmx5IGluIG1haW4gbWVudQ0KdmFyIGNtVGhlbWVDbGlja01haW5IU3BsaXQgPSBbX2NtTm9BY3Rpb24sICc8dGQgY29sc3Bhbj0iMyI+PGRpdiBjbGFzcz0iVGhlbWVDbGlja01lbnVTcGxpdCI+PC9kaXY+PC90ZD4nXTsNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="20" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/wmx-global.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/wmx-global.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="6" startDateTime="2024-11-07T09:35:45.905+00:00" startTime="2214" endTime="2220" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="5" waitTime="0" receiveTime="0" sslNegotiateTime="-1" responseBodySize="2637">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC93bXgtZ2xvYmFsLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwczovL3FhLndteGJvbHQud2VzY29kaXN0LmNvbS93bXgvd2VsY29tZS5mYWNlcw0KVXNlci1BZ2VudDogTW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogZW4tdXMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBxYS53bXhib2x0Lndlc2NvZGlzdC5jb20NCkNvb2tpZTogc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWINCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>2376</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjM3Ng==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMjM3Ng0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZnVuY3Rpb24gdHJhbnNmb3JtVHlwZWRDaGFyKGNoYXJTdHIpIHsNCglyZXR1cm4gL1thLXpdLy50ZXN0KGNoYXJTdHIpID8gY2hhclN0ci50b1VwcGVyQ2FzZSgpIDogY2hhclN0cjsNCn0NCg0KZnVuY3Rpb24gY29udmVydFVwcGVyY2FzZUVsZW1lbnQoZSwgb2JqKSB7DQoJdmFyIHZhbCA9IG9iai52YWx1ZTsNCglldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsNCgkNCgl2YXIgY2hhckNvZGUgPSB0eXBlb2YgZXZ0LndoaWNoID09ICJudW1iZXIiID8gZXZ0LndoaWNoIDogZXZ0LmtleUNvZGU7DQogICAgICAgIGlmICh2YWwubGVuZ3RoID49IG9iai5tYXhMZW5ndGgpew0KICAgICAgICAgICAgaWYgKGNoYXJDb2RlID49IDMyICYmIGNoYXJDb2RlIDw9IDEyNikNCgkgICAgICAgcmV0dXJuIGZhbHNlOw0KCX0NCiAgICAgICAgDQogICAgICAgIHZhciBldnRPYmplY3QgPSB3aW5kb3cuZXZlbnQ/d2luZG93LmV2ZW50OmU7DQogICAgICAgIGlmKGV2dE9iamVjdC5jdHJsS2V5IHx8IGV2dE9iamVjdC5hbHRLZXkgfHwgZXZ0T2JqZWN0LnNoaWZ0S2V5IHx8IGV2dE9iamVjdC5tZXRhS2V5KQ0KICAgIAl7DQogICAgICAgIAljaGFyQ29kZSA9IDA7DQogICAgCX0gICAgIA0KDQoJLy8gRW5zdXJlIHdlIG9ubHkgaGFuZGxlIHByaW50YWJsZSBrZXlzLCBleGNsdWRpbmcgZW50ZXIgYW5kIHNwYWNlDQoJaWYgKGNoYXJDb2RlICYmIGNoYXJDb2RlID4gMzIpIHsNCgkJdmFyIGtleUNoYXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTsNCg0KCQkvLyBUcmFuc2Zvcm0gdHlwZWQgY2hhcmFjdGVyDQoJCXZhciBtYXBwZWRDaGFyID0gdHJhbnNmb3JtVHlwZWRDaGFyKGtleUNoYXIpOw0KDQoJCXZhciBzdGFydCwgZW5kOw0KCQlpZiAodHlwZW9mIG9iai5zZWxlY3Rpb25TdGFydCA9PSAibnVtYmVyIg0KCQkJCSYmIHR5cGVvZiBvYmouc2VsZWN0aW9uRW5kID09ICJudW1iZXIiKSB7DQoJCQkvLyBOb24tSUUgYnJvd3NlcnMgYW5kIElFIDkNCgkJCQ0KCQkJc3RhcnQgPSBvYmouc2VsZWN0aW9uU3RhcnQ7DQoJCQllbmQgPSBvYmouc2VsZWN0aW9uRW5kOw0KCQkJb2JqLnZhbHVlID0gdmFsLnNsaWNlKDAsIHN0YXJ0KSArIG1hcHBlZENoYXIgKyB2YWwuc2xpY2UoZW5kKTsNCg0KCQkJLy8gTW92ZSB0aGUgY2FyZXQNCgkJCW9iai5zZWxlY3Rpb25TdGFydCA9IG9iai5zZWxlY3Rpb25FbmQgPSBzdGFydCArIDE7DQoJCX0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSkgew0KCQkJLy8gRm9yIElFIHVwIHRvIHZlcnNpb24gOA0KCQkJdmFyIHNlbGVjdGlvblJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7DQoJCQl2YXIgdGV4dElucHV0UmFuZ2UgPSBvYmouY3JlYXRlVGV4dFJhbmdlKCk7DQoJCQl2YXIgcHJlY2VkaW5nUmFuZ2UgPSBvYmouY3JlYXRlVGV4dFJhbmdlKCk7DQoJCQl2YXIgYm9va21hcmsgPSBzZWxlY3Rpb25SYW5nZS5nZXRCb29rbWFyaygpOw0KCQkJdGV4dElucHV0UmFuZ2UubW92ZVRvQm9va21hcmsoYm9va21hcmspOw0KCQkJcHJlY2VkaW5nUmFuZ2Uuc2V0RW5kUG9pbnQoIkVuZFRvU3RhcnQiLCB0ZXh0SW5wdXRSYW5nZSk7DQoJCQlzdGFydCA9IHByZWNlZGluZ1JhbmdlLnRleHQubGVuZ3RoOw0KCQkJZW5kID0gc3RhcnQgKyBzZWxlY3Rpb25SYW5nZS50ZXh0Lmxlbmd0aDsNCg0KCQkJb2JqLnZhbHVlID0gdmFsLnNsaWNlKDAsIHN0YXJ0KSArIG1hcHBlZENoYXIgKyB2YWwuc2xpY2UoZW5kKTsNCgkJCXN0YXJ0Kys7DQoNCgkJCS8vIE1vdmUgdGhlIGNhcmV0DQoJCQl0ZXh0SW5wdXRSYW5nZSA9IG9iai5jcmVhdGVUZXh0UmFuZ2UoKTsNCgkJCXRleHRJbnB1dFJhbmdlLmNvbGxhcHNlKHRydWUpOw0KCQkJdGV4dElucHV0UmFuZ2UubW92ZSgiY2hhcmFjdGVyIiwgc3RhcnQNCgkJCQkJLSAob2JqLnZhbHVlLnNsaWNlKDAsIHN0YXJ0KS5zcGxpdCgiXHJcbiIpLmxlbmd0aCAtIDEpKTsNCgkJCXRleHRJbnB1dFJhbmdlLnNlbGVjdCgpOw0KCQl9DQoNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn0NCg0KLy9jdXN0b21pemVkIGxvZ291dCBiZWhhdmlvci4gaWYgYSBwYWdlIGhhcyBpdHMgbG9nb3V0KCkgamF2YXNjcmlwdCBmdW5jdGlvbiBkZWZpbmVkLA0KLy9pdCB3aWxsIGJlIGNhbGxlZCBieSB0aGlzIHZhbGlkYXRlTG9nb3V0KCkgZnVuY3Rpb24uDQpmdW5jdGlvbiB2YWxpZGF0ZUxvZ291dCgpIHsNCgkvLyBsb2dvdXQgaXMgdGhlIGZ1bmN0aW9uIHRvIGNhbGwgdG8gY3VzdG9taXplIGxvZ291dCBiZWhhdmlvciBmb3IgYSBwYWdlDQoJaWYodHlwZW9mIGxvZ291dCA9PSAnZnVuY3Rpb24nKSB7DQoJCXJldHVybiBsb2dvdXQoKTsNCgl9IA0KCXJldHVybiB0cnVlOw0KfQ0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="21" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/dragdrop/prototype.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/dragdrop/prototype.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="7" startDateTime="2024-11-07T09:35:45.906+00:00" startTime="2216" endTime="2232" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="6" waitTime="0" receiveTime="9" sslNegotiateTime="-1" responseBodySize="144991">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9kcmFnZHJvcC9wcm90b3R5cGUuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>144728</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTQ0NzI4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMTQ0NzI4DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpYLVBvd2VyZWQtQnk6IFNlcnZsZXQvMy4wDQpYLVVBLUNvbXBhdGlibGU6IElFPTgNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjQgT2N0IDIwMjQgMjA6MjY6NDQgR01UDQpDb250ZW50LUxhbmd1YWdlOiBlbi1VUw0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyogIFByb3RvdHlwZSBKYXZhU2NyaXB0IGZyYW1ld29yaywgdmVyc2lvbiAxLjYuMQ0KICogIChjKSAyMDA1LTIwMDkgU2FtIFN0ZXBoZW5zb24NCiAqDQogKiAgUHJvdG90eXBlIGlzIGZyZWVseSBkaXN0cmlidXRhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiBhbiBNSVQtc3R5bGUgbGljZW5zZS4NCiAqICBGb3IgZGV0YWlscywgc2VlIHRoZSBQcm90b3R5cGUgd2ViIHNpdGU6IGh0dHA6Ly93d3cucHJvdG90eXBlanMub3JnLw0KICoNCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQp2YXIgUHJvdG90eXBlID0gew0KICBWZXJzaW9uOiAnMS42LjEnLA0KDQogIEJyb3dzZXI6IChmdW5jdGlvbigpew0KICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgdmFyIGlzT3BlcmEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhKSA9PSAnW29iamVjdCBPcGVyYV0nOw0KICAgIHJldHVybiB7DQogICAgICBJRTogICAgICAgICAgICAgISF3aW5kb3cuYXR0YWNoRXZlbnQgJiYgIWlzT3BlcmEsDQogICAgICBPcGVyYTogICAgICAgICAgaXNPcGVyYSwNCiAgICAgIFdlYktpdDogICAgICAgICB1YS5pbmRleE9mKCdBcHBsZVdlYktpdC8nKSA+IC0xLA0KICAgICAgR2Vja286ICAgICAgICAgIHVhLmluZGV4T2YoJ0dlY2tvJykgPiAtMSAmJiB1YS5pbmRleE9mKCdLSFRNTCcpID09PSAtMSwNCiAgICAgIE1vYmlsZVNhZmFyaTogICAvQXBwbGUuKk1vYmlsZS4qU2FmYXJpLy50ZXN0KHVhKQ0KICAgIH0NCiAgfSkoKSwNCg0KICBCcm93c2VyRmVhdHVyZXM6IHsNCiAgICBYUGF0aDogISFkb2N1bWVudC5ldmFsdWF0ZSwNCiAgICBTZWxlY3RvcnNBUEk6ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvciwNCiAgICBFbGVtZW50RXh0ZW5zaW9uczogKGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIGNvbnN0cnVjdG9yID0gd2luZG93LkVsZW1lbnQgfHwgd2luZG93LkhUTUxFbGVtZW50Ow0KICAgICAgcmV0dXJuICEhKGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7DQogICAgfSkoKSwNCiAgICBTcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zOiAoZnVuY3Rpb24oKSB7DQogICAgICBpZiAodHlwZW9mIHdpbmRvdy5IVE1MRGl2RWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTsNCiAgICAgIHZhciBpc1N1cHBvcnRlZCA9IGZhbHNlOw0KDQogICAgICBpZiAoZGl2WydfX3Byb3RvX18nXSAmJiAoZGl2WydfX3Byb3RvX18nXSAhPT0gZm9ybVsnX19wcm90b19fJ10pKSB7DQogICAgICAgIGlzU3VwcG9ydGVkID0gdHJ1ZTsNCiAgICAgIH0NCg0KICAgICAgZGl2ID0gZm9ybSA9IG51bGw7DQoNCiAgICAgIHJldHVybiBpc1N1cHBvcnRlZDsNCiAgICB9KSgpDQogIH0sDQoNCiAgU2NyaXB0RnJhZ21lbnQ6ICc8c2NyaXB0W14+XSo+KFtcXFNcXHNdKj8pPFwvc2NyaXB0PicsDQogIEpTT05GaWx0ZXI6IC9eXC9cKi1zZWN1cmUtKFtcc1xTXSopXCpcL1xzKiQvLA0KDQogIGVtcHR5RnVuY3Rpb246IGZ1bmN0aW9uKCkgeyB9LA0KICBLOiBmdW5jdGlvbih4KSB7IHJldHVybiB4IH0NCn07DQoNCmlmIChQcm90b3R5cGUuQnJvd3Nlci5Nb2JpbGVTYWZhcmkpDQogIFByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9ucyA9IGZhbHNlOw0KDQoNCnZhciBBYnN0cmFjdCA9IHsgfTsNCg0KDQp2YXIgVHJ5ID0gew0KICB0aGVzZTogZnVuY3Rpb24oKSB7DQogICAgdmFyIHJldHVyblZhbHVlOw0KDQogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGxhbWJkYSA9IGFyZ3VtZW50c1tpXTsNCiAgICAgIHRyeSB7DQogICAgICAgIHJldHVyblZhbHVlID0gbGFtYmRhKCk7DQogICAgICAgIGJyZWFrOw0KICAgICAgfSBjYXRjaCAoZSkgeyB9DQogICAgfQ0KDQogICAgcmV0dXJuIHJldHVyblZhbHVlOw0KICB9DQp9Ow0KDQovKiBCYXNlZCBvbiBBbGV4IEFybmVsbCdzIGluaGVyaXRhbmNlIGltcGxlbWVudGF0aW9uLiAqLw0KDQp2YXIgQ2xhc3MgPSAoZnVuY3Rpb24oKSB7DQogIGZ1bmN0aW9uIHN1YmNsYXNzKCkge307DQogIGZ1bmN0aW9uIGNyZWF0ZSgpIHsNCiAgICB2YXIgcGFyZW50ID0gbnVsbCwgcHJvcGVydGllcyA9ICRBKGFyZ3VtZW50cyk7DQogICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKHByb3BlcnRpZXNbMF0pKQ0KICAgICAgcGFyZW50ID0gcHJvcGVydGllcy5zaGlmdCgpOw0KDQogICAgZnVuY3Rpb24ga2xhc3MoKSB7DQogICAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICB9DQoNCiAgICBPYmplY3QuZXh0ZW5kKGtsYXNzLCBDbGFzcy5NZXRob2RzKTsNCiAgICBrbGFzcy5zdXBlcmNsYXNzID0gcGFyZW50Ow0KICAgIGtsYXNzLnN1YmNsYXNzZXMgPSBbXTsNCg0KICAgIGlmIChwYXJlbnQpIHsNCiAgICAgIHN1YmNsYXNzLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7DQogICAgICBrbGFzcy5wcm90b3R5cGUgPSBuZXcgc3ViY2xhc3M7DQogICAgICBwYXJlbnQuc3ViY2xhc3Nlcy5wdXNoKGtsYXNzKTsNCiAgICB9DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspDQogICAgICBrbGFzcy5hZGRNZXRob2RzKHByb3BlcnRpZXNbaV0pOw0KDQogICAgaWYgKCFrbGFzcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSkNCiAgICAgIGtsYXNzLnByb3RvdHlwZS5pbml0aWFsaXplID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247DQoNCiAgICBrbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBrbGFzczsNCiAgICByZXR1cm4ga2xhc3M7DQogIH0NCg0KICBmdW5jdGlvbiBhZGRNZXRob2RzKHNvdXJjZSkgew0KICAgIHZhciBhbmNlc3RvciAgID0gdGhpcy5zdXBlcmNsYXNzICYmIHRoaXMuc3VwZXJjbGFzcy5wcm90b3R5cGU7DQogICAgdmFyIHByb3BlcnRpZXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOw0KDQogICAgaWYgKCFPYmplY3Qua2V5cyh7IHRvU3RyaW5nOiB0cnVlIH0pLmxlbmd0aCkgew0KICAgICAgaWYgKHNvdXJjZS50b1N0cmluZyAhPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKQ0KICAgICAgICBwcm9wZXJ0aWVzLnB1c2goInRvU3RyaW5nIik7DQogICAgICBpZiAoc291cmNlLnZhbHVlT2YgIT0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mKQ0KICAgICAgICBwcm9wZXJ0aWVzLnB1c2goInZhbHVlT2YiKTsNCiAgICB9DQoNCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc1tpXSwgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldOw0KICAgICAgaWYgKGFuY2VzdG9yICYmIE9iamVjdC5pc0Z1bmN0aW9uKHZhbHVlKSAmJg0KICAgICAgICAgIHZhbHVlLmFyZ3VtZW50TmFtZXMoKS5maXJzdCgpID09ICIkc3VwZXIiKSB7DQogICAgICAgIHZhciBtZXRob2QgPSB2YWx1ZTsNCiAgICAgICAgdmFsdWUgPSAoZnVuY3Rpb24obSkgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGFuY2VzdG9yW21dLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07DQogICAgICAgIH0pKHByb3BlcnR5KS53cmFwKG1ldGhvZCk7DQoNCiAgICAgICAgdmFsdWUudmFsdWVPZiA9IG1ldGhvZC52YWx1ZU9mLmJpbmQobWV0aG9kKTsNCiAgICAgICAgdmFsdWUudG9TdHJpbmcgPSBtZXRob2QudG9TdHJpbmcuYmluZChtZXRob2QpOw0KICAgICAgfQ0KICAgICAgdGhpcy5wcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7DQogICAgfQ0KDQogICAgcmV0dXJuIHRoaXM7DQogIH0NCg0KICByZXR1cm4gew0KICAgIGNyZWF0ZTogY3JlYXRlLA0KICAgIE1ldGhvZHM6IHsNCiAgICAgIGFkZE1ldGhvZHM6IGFkZE1ldGhvZHMNCiAgICB9DQogIH07DQp9KSgpOw0KKGZ1bmN0aW9uKCkgew0KDQogIHZhciBfdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOw0KDQogIGZ1bmN0aW9uIGV4dGVuZChkZXN0aW5hdGlvbiwgc291cmNlKSB7DQogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gc291cmNlKQ0KICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gc291cmNlW3Byb3BlcnR5XTsNCiAgICByZXR1cm4gZGVzdGluYXRpb247DQogIH0NCg0KICBmdW5jdGlvbiBpbnNwZWN0KG9iamVjdCkgew0KICAgIHRyeSB7DQogICAgICBpZiAoaXNVbmRlZmluZWQob2JqZWN0KSkgcmV0dXJuICd1bmRlZmluZWQnOw0KICAgICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgcmV0dXJuICdudWxsJzsNCiAgICAgIHJldHVybiBvYmplY3QuaW5zcGVjdCA/IG9iamVjdC5pbnNwZWN0KCkgOiBTdHJpbmcob2JqZWN0KTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBpZiAoZSBpbnN0YW5jZW9mIFJhbmdlRXJyb3IpIHJldHVybiAnLi4uJzsNCiAgICAgIHRocm93IGU7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gdG9KU09OKG9iamVjdCkgew0KICAgIHZhciB0eXBlID0gdHlwZW9mIG9iamVjdDsNCiAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6DQogICAgICBjYXNlICdmdW5jdGlvbic6DQogICAgICBjYXNlICd1bmtub3duJzogcmV0dXJuOw0KICAgICAgY2FzZSAnYm9vbGVhbic6IHJldHVybiBvYmplY3QudG9TdHJpbmcoKTsNCiAgICB9DQoNCiAgICBpZiAob2JqZWN0ID09PSBudWxsKSByZXR1cm4gJ251bGwnOw0KICAgIGlmIChvYmplY3QudG9KU09OKSByZXR1cm4gb2JqZWN0LnRvSlNPTigpOw0KICAgIGlmIChpc0VsZW1lbnQob2JqZWN0KSkgcmV0dXJuOw0KDQogICAgdmFyIHJlc3VsdHMgPSBbXTsNCiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHsNCiAgICAgIHZhciB2YWx1ZSA9IHRvSlNPTihvYmplY3RbcHJvcGVydHldKTsNCiAgICAgIGlmICghaXNVbmRlZmluZWQodmFsdWUpKQ0KICAgICAgICByZXN1bHRzLnB1c2gocHJvcGVydHkudG9KU09OKCkgKyAnOiAnICsgdmFsdWUpOw0KICAgIH0NCg0KICAgIHJldHVybiAneycgKyByZXN1bHRzLmpvaW4oJywgJykgKyAnfSc7DQogIH0NCg0KICBmdW5jdGlvbiB0b1F1ZXJ5U3RyaW5nKG9iamVjdCkgew0KICAgIHJldHVybiAkSChvYmplY3QpLnRvUXVlcnlTdHJpbmcoKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvSFRNTChvYmplY3QpIHsNCiAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC50b0hUTUwgPyBvYmplY3QudG9IVE1MKCkgOiBTdHJpbmcuaW50ZXJwcmV0KG9iamVjdCk7DQogIH0NCg0KICBmdW5jdGlvbiBrZXlzKG9iamVjdCkgew0KICAgIHZhciByZXN1bHRzID0gW107DQogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KQ0KICAgICAgcmVzdWx0cy5wdXNoKHByb3BlcnR5KTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfQ0KDQogIGZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHsNCiAgICB2YXIgcmVzdWx0cyA9IFtdOw0KICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkNCiAgICAgIHJlc3VsdHMucHVzaChvYmplY3RbcHJvcGVydHldKTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNsb25lKG9iamVjdCkgew0KICAgIHJldHVybiBleHRlbmQoeyB9LCBvYmplY3QpOw0KICB9DQoNCiAgZnVuY3Rpb24gaXNFbGVtZW50KG9iamVjdCkgew0KICAgIHJldHVybiAhIShvYmplY3QgJiYgb2JqZWN0Lm5vZGVUeXBlID09IDEpOw0KICB9DQoNCiAgZnVuY3Rpb24gaXNBcnJheShvYmplY3QpIHsNCiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAiW29iamVjdCBBcnJheV0iOw0KICB9DQoNCg0KICBmdW5jdGlvbiBpc0hhc2gob2JqZWN0KSB7DQogICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEhhc2g7DQogIH0NCg0KICBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iamVjdCkgew0KICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAiZnVuY3Rpb24iOw0KICB9DQoNCiAgZnVuY3Rpb24gaXNTdHJpbmcob2JqZWN0KSB7DQogICAgcmV0dXJuIF90b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gIltvYmplY3QgU3RyaW5nXSI7DQogIH0NCg0KICBmdW5jdGlvbiBpc051bWJlcihvYmplY3QpIHsNCiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAiW29iamVjdCBOdW1iZXJdIjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKG9iamVjdCkgew0KICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAidW5kZWZpbmVkIjsNCiAgfQ0KDQogIGV4dGVuZChPYmplY3QsIHsNCiAgICBleHRlbmQ6ICAgICAgICBleHRlbmQsDQogICAgaW5zcGVjdDogICAgICAgaW5zcGVjdCwNCiAgICB0b0pTT046ICAgICAgICB0b0pTT04sDQogICAgdG9RdWVyeVN0cmluZzogdG9RdWVyeVN0cmluZywNCiAgICB0b0hUTUw6ICAgICAgICB0b0hUTUwsDQogICAga2V5czogICAgICAgICAga2V5cywNCiAgICB2YWx1ZXM6ICAgICAgICB2YWx1ZXMsDQogICAgY2xvbmU6ICAgICAgICAgY2xvbmUsDQogICAgaXNFbGVtZW50OiAgICAgaXNFbGVtZW50LA0KICAgIGlzQXJyYXk6ICAgICAgIGlzQXJyYXksDQogICAgaXNIYXNoOiAgICAgICAgaXNIYXNoLA0KICAgIGlzRnVuY3Rpb246ICAgIGlzRnVuY3Rpb24sDQogICAgaXNTdHJpbmc6ICAgICAgaXNTdHJpbmcsDQogICAgaXNOdW1iZXI6ICAgICAgaXNOdW1iZXIsDQogICAgaXNVbmRlZmluZWQ6ICAgaXNVbmRlZmluZWQNCiAgfSk7DQp9KSgpOw0KT2JqZWN0LmV4dGVuZChGdW5jdGlvbi5wcm90b3R5cGUsIChmdW5jdGlvbigpIHsNCiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOw0KDQogIGZ1bmN0aW9uIHVwZGF0ZShhcnJheSwgYXJncykgew0KICAgIHZhciBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aCwgbGVuZ3RoID0gYXJncy5sZW5ndGg7DQogICAgd2hpbGUgKGxlbmd0aC0tKSBhcnJheVthcnJheUxlbmd0aCArIGxlbmd0aF0gPSBhcmdzW2xlbmd0aF07DQogICAgcmV0dXJuIGFycmF5Ow0KICB9DQoNCiAgZnVuY3Rpb24gbWVyZ2UoYXJyYXksIGFyZ3MpIHsNCiAgICBhcnJheSA9IHNsaWNlLmNhbGwoYXJyYXksIDApOw0KICAgIHJldHVybiB1cGRhdGUoYXJyYXksIGFyZ3MpOw0KICB9DQoNCiAgZnVuY3Rpb24gYXJndW1lbnROYW1lcygpIHsNCiAgICB2YXIgbmFtZXMgPSB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15bXHNcKF0qZnVuY3Rpb25bXihdKlwoKFteKV0qKVwpLylbMV0NCiAgICAgIC5yZXBsYWNlKC9cL1wvLio/W1xyXG5dfFwvXCooPzoufFtcclxuXSkqP1wqXC8vZywgJycpDQogICAgICAucmVwbGFjZSgvXHMrL2csICcnKS5zcGxpdCgnLCcpOw0KICAgIHJldHVybiBuYW1lcy5sZW5ndGggPT0gMSAmJiAhbmFtZXNbMF0gPyBbXSA6IG5hbWVzOw0KICB9DQoNCiAgZnVuY3Rpb24gYmluZChjb250ZXh0KSB7DQogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyICYmIE9iamVjdC5pc1VuZGVmaW5lZChhcmd1bWVudHNbMF0pKSByZXR1cm4gdGhpczsNCiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KICAgIHJldHVybiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciBhID0gbWVyZ2UoYXJncywgYXJndW1lbnRzKTsNCiAgICAgIHJldHVybiBfX21ldGhvZC5hcHBseShjb250ZXh0LCBhKTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBiaW5kQXNFdmVudExpc3RlbmVyKGNvbnRleHQpIHsNCiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KICAgIHJldHVybiBmdW5jdGlvbihldmVudCkgew0KICAgICAgdmFyIGEgPSB1cGRhdGUoW2V2ZW50IHx8IHdpbmRvdy5ldmVudF0sIGFyZ3MpOw0KICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KGNvbnRleHQsIGEpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGN1cnJ5KCkgew0KICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXM7DQogICAgdmFyIF9fbWV0aG9kID0gdGhpcywgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsNCiAgICByZXR1cm4gZnVuY3Rpb24oKSB7DQogICAgICB2YXIgYSA9IG1lcmdlKGFyZ3MsIGFyZ3VtZW50cyk7DQogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkodGhpcywgYSk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gZGVsYXkodGltZW91dCkgew0KICAgIHZhciBfX21ldGhvZCA9IHRoaXMsIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7DQogICAgdGltZW91dCA9IHRpbWVvdXQgKiAxMDAwDQogICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KF9fbWV0aG9kLCBhcmdzKTsNCiAgICB9LCB0aW1lb3V0KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGRlZmVyKCkgew0KICAgIHZhciBhcmdzID0gdXBkYXRlKFswLjAxXSwgYXJndW1lbnRzKTsNCiAgICByZXR1cm4gdGhpcy5kZWxheS5hcHBseSh0aGlzLCBhcmdzKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHdyYXAod3JhcHBlcikgew0KICAgIHZhciBfX21ldGhvZCA9IHRoaXM7DQogICAgcmV0dXJuIGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIGEgPSB1cGRhdGUoW19fbWV0aG9kLmJpbmQodGhpcyldLCBhcmd1bWVudHMpOw0KICAgICAgcmV0dXJuIHdyYXBwZXIuYXBwbHkodGhpcywgYSk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gbWV0aG9kaXplKCkgew0KICAgIGlmICh0aGlzLl9tZXRob2RpemVkKSByZXR1cm4gdGhpcy5fbWV0aG9kaXplZDsNCiAgICB2YXIgX19tZXRob2QgPSB0aGlzOw0KICAgIHJldHVybiB0aGlzLl9tZXRob2RpemVkID0gZnVuY3Rpb24oKSB7DQogICAgICB2YXIgYSA9IHVwZGF0ZShbdGhpc10sIGFyZ3VtZW50cyk7DQogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkobnVsbCwgYSk7DQogICAgfTsNCiAgfQ0KDQogIHJldHVybiB7DQogICAgYXJndW1lbnROYW1lczogICAgICAgYXJndW1lbnROYW1lcywNCiAgICBiaW5kOiAgICAgICAgICAgICAgICBiaW5kLA0KICAgIGJpbmRBc0V2ZW50TGlzdGVuZXI6IGJpbmRBc0V2ZW50TGlzdGVuZXIsDQogICAgY3Vycnk6ICAgICAgICAgICAgICAgY3VycnksDQogICAgZGVsYXk6ICAgICAgICAgICAgICAgZGVsYXksDQogICAgZGVmZXI6ICAgICAgICAgICAgICAgZGVmZXIsDQogICAgd3JhcDogICAgICAgICAgICAgICAgd3JhcCwNCiAgICBtZXRob2RpemU6ICAgICAgICAgICBtZXRob2RpemUNCiAgfQ0KfSkoKSk7DQoNCg0KRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7DQogIHJldHVybiAnIicgKyB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgKyAnLScgKw0KICAgICh0aGlzLmdldFVUQ01vbnRoKCkgKyAxKS50b1BhZGRlZFN0cmluZygyKSArICctJyArDQogICAgdGhpcy5nZXRVVENEYXRlKCkudG9QYWRkZWRTdHJpbmcoMikgKyAnVCcgKw0KICAgIHRoaXMuZ2V0VVRDSG91cnMoKS50b1BhZGRlZFN0cmluZygyKSArICc6JyArDQogICAgdGhpcy5nZXRVVENNaW51dGVzKCkudG9QYWRkZWRTdHJpbmcoMikgKyAnOicgKw0KICAgIHRoaXMuZ2V0VVRDU2Vjb25kcygpLnRvUGFkZGVkU3RyaW5nKDIpICsgJ1oiJzsNCn07DQoNCg0KUmVnRXhwLnByb3RvdHlwZS5tYXRjaCA9IFJlZ0V4cC5wcm90b3R5cGUudGVzdDsNCg0KUmVnRXhwLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cikgew0KICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCAnXFwkMScpOw0KfTsNCnZhciBQZXJpb2RpY2FsRXhlY3V0ZXIgPSBDbGFzcy5jcmVhdGUoew0KICBpbml0aWFsaXplOiBmdW5jdGlvbihjYWxsYmFjaywgZnJlcXVlbmN5KSB7DQogICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOw0KICAgIHRoaXMuZnJlcXVlbmN5ID0gZnJlcXVlbmN5Ow0KICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7DQoNCiAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soKTsNCiAgfSwNCg0KICByZWdpc3RlckNhbGxiYWNrOiBmdW5jdGlvbigpIHsNCiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5vblRpbWVyRXZlbnQuYmluZCh0aGlzKSwgdGhpcy5mcmVxdWVuY3kgKiAxMDAwKTsNCiAgfSwNCg0KICBleGVjdXRlOiBmdW5jdGlvbigpIHsNCiAgICB0aGlzLmNhbGxiYWNrKHRoaXMpOw0KICB9LA0KDQogIHN0b3A6IGZ1bmN0aW9uKCkgew0KICAgIGlmICghdGhpcy50aW1lcikgcmV0dXJuOw0KICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7DQogICAgdGhpcy50aW1lciA9IG51bGw7DQogIH0sDQoNCiAgb25UaW1lckV2ZW50OiBmdW5jdGlvbigpIHsNCiAgICBpZiAoIXRoaXMuY3VycmVudGx5RXhlY3V0aW5nKSB7DQogICAgICB0cnkgew0KICAgICAgICB0aGlzLmN1cnJlbnRseUV4ZWN1dGluZyA9IHRydWU7DQogICAgICAgIHRoaXMuZXhlY3V0ZSgpOw0KICAgICAgICB0aGlzLmN1cnJlbnRseUV4ZWN1dGluZyA9IGZhbHNlOw0KICAgICAgfSBjYXRjaChlKSB7DQogICAgICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7DQogICAgICAgIHRocm93IGU7DQogICAgICB9DQogICAgfQ0KICB9DQp9KTsNCk9iamVjdC5leHRlbmQoU3RyaW5nLCB7DQogIGludGVycHJldDogZnVuY3Rpb24odmFsdWUpIHsNCiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogU3RyaW5nKHZhbHVlKTsNCiAgfSwNCiAgc3BlY2lhbENoYXI6IHsNCiAgICAnXGInOiAnXFxiJywNCiAgICAnXHQnOiAnXFx0JywNCiAgICAnXG4nOiAnXFxuJywNCiAgICAnXGYnOiAnXFxmJywNCiAgICAnXHInOiAnXFxyJywNCiAgICAnXFwnOiAnXFxcXCcNCiAgfQ0KfSk7DQoNCk9iamVjdC5leHRlbmQoU3RyaW5nLnByb3RvdHlwZSwgKGZ1bmN0aW9uKCkgew0KDQogIGZ1bmN0aW9uIHByZXBhcmVSZXBsYWNlbWVudChyZXBsYWNlbWVudCkgew0KICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihyZXBsYWNlbWVudCkpIHJldHVybiByZXBsYWNlbWVudDsNCiAgICB2YXIgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVwbGFjZW1lbnQpOw0KICAgIHJldHVybiBmdW5jdGlvbihtYXRjaCkgeyByZXR1cm4gdGVtcGxhdGUuZXZhbHVhdGUobWF0Y2gpIH07DQogIH0NCg0KICBmdW5jdGlvbiBnc3ViKHBhdHRlcm4sIHJlcGxhY2VtZW50KSB7DQogICAgdmFyIHJlc3VsdCA9ICcnLCBzb3VyY2UgPSB0aGlzLCBtYXRjaDsNCiAgICByZXBsYWNlbWVudCA9IHByZXBhcmVSZXBsYWNlbWVudChyZXBsYWNlbWVudCk7DQoNCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKHBhdHRlcm4pKQ0KICAgICAgcGF0dGVybiA9IFJlZ0V4cC5lc2NhcGUocGF0dGVybik7DQoNCiAgICBpZiAoIShwYXR0ZXJuLmxlbmd0aCB8fCBwYXR0ZXJuLnNvdXJjZSkpIHsNCiAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnQoJycpOw0KICAgICAgcmV0dXJuIHJlcGxhY2VtZW50ICsgc291cmNlLnNwbGl0KCcnKS5qb2luKHJlcGxhY2VtZW50KSArIHJlcGxhY2VtZW50Ow0KICAgIH0NCg0KICAgIHdoaWxlIChzb3VyY2UubGVuZ3RoID4gMCkgew0KICAgICAgaWYgKG1hdGNoID0gc291cmNlLm1hdGNoKHBhdHRlcm4pKSB7DQogICAgICAgIHJlc3VsdCArPSBzb3VyY2Uuc2xpY2UoMCwgbWF0Y2guaW5kZXgpOw0KICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmludGVycHJldChyZXBsYWNlbWVudChtYXRjaCkpOw0KICAgICAgICBzb3VyY2UgID0gc291cmNlLnNsaWNlKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJlc3VsdCArPSBzb3VyY2UsIHNvdXJjZSA9ICcnOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gcmVzdWx0Ow0KICB9DQoNCiAgZnVuY3Rpb24gc3ViKHBhdHRlcm4sIHJlcGxhY2VtZW50LCBjb3VudCkgew0KICAgIHJlcGxhY2VtZW50ID0gcHJlcGFyZVJlcGxhY2VtZW50KHJlcGxhY2VtZW50KTsNCiAgICBjb3VudCA9IE9iamVjdC5pc1VuZGVmaW5lZChjb3VudCkgPyAxIDogY291bnQ7DQoNCiAgICByZXR1cm4gdGhpcy5nc3ViKHBhdHRlcm4sIGZ1bmN0aW9uKG1hdGNoKSB7DQogICAgICBpZiAoLS1jb3VudCA8IDApIHJldHVybiBtYXRjaFswXTsNCiAgICAgIHJldHVybiByZXBsYWNlbWVudChtYXRjaCk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBzY2FuKHBhdHRlcm4sIGl0ZXJhdG9yKSB7DQogICAgdGhpcy5nc3ViKHBhdHRlcm4sIGl0ZXJhdG9yKTsNCiAgICByZXR1cm4gU3RyaW5nKHRoaXMpOw0KICB9DQoNCiAgZnVuY3Rpb24gdHJ1bmNhdGUobGVuZ3RoLCB0cnVuY2F0aW9uKSB7DQogICAgbGVuZ3RoID0gbGVuZ3RoIHx8IDMwOw0KICAgIHRydW5jYXRpb24gPSBPYmplY3QuaXNVbmRlZmluZWQodHJ1bmNhdGlvbikgPyAnLi4uJyA6IHRydW5jYXRpb247DQogICAgcmV0dXJuIHRoaXMubGVuZ3RoID4gbGVuZ3RoID8NCiAgICAgIHRoaXMuc2xpY2UoMCwgbGVuZ3RoIC0gdHJ1bmNhdGlvbi5sZW5ndGgpICsgdHJ1bmNhdGlvbiA6IFN0cmluZyh0aGlzKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN0cmlwKCkgew0KICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15ccysvLCAnJykucmVwbGFjZSgvXHMrJC8sICcnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN0cmlwVGFncygpIHsNCiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC88XHcrKFxzKygiW14iXSoifCdbXiddKid8W14+XSkrKT8+fDxcL1x3Kz4vZ2ksICcnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN0cmlwU2NyaXB0cygpIHsNCiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKG5ldyBSZWdFeHAoUHJvdG90eXBlLlNjcmlwdEZyYWdtZW50LCAnaW1nJyksICcnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGV4dHJhY3RTY3JpcHRzKCkgew0KICAgIHZhciBtYXRjaEFsbCA9IG5ldyBSZWdFeHAoUHJvdG90eXBlLlNjcmlwdEZyYWdtZW50LCAnaW1nJyk7DQogICAgdmFyIG1hdGNoT25lID0gbmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsICdpbScpOw0KICAgIHJldHVybiAodGhpcy5tYXRjaChtYXRjaEFsbCkgfHwgW10pLm1hcChmdW5jdGlvbihzY3JpcHRUYWcpIHsNCiAgICAgIHJldHVybiAoc2NyaXB0VGFnLm1hdGNoKG1hdGNoT25lKSB8fCBbJycsICcnXSlbMV07DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBldmFsU2NyaXB0cygpIHsNCiAgICByZXR1cm4gdGhpcy5leHRyYWN0U2NyaXB0cygpLm1hcChmdW5jdGlvbihzY3JpcHQpIHsgcmV0dXJuIGV2YWwoc2NyaXB0KSB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGVzY2FwZUhUTUwoKSB7DQogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpOw0KICB9DQoNCiAgZnVuY3Rpb24gdW5lc2NhcGVIVE1MKCkgew0KICAgIHJldHVybiB0aGlzLnN0cmlwVGFncygpLnJlcGxhY2UoLyZsdDsvZywnPCcpLnJlcGxhY2UoLyZndDsvZywnPicpLnJlcGxhY2UoLyZhbXA7L2csJyYnKTsNCiAgfQ0KDQoNCiAgZnVuY3Rpb24gdG9RdWVyeVBhcmFtcyhzZXBhcmF0b3IpIHsNCiAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmlwKCkubWF0Y2goLyhbXj8jXSopKCMuKik/JC8pOw0KICAgIGlmICghbWF0Y2gpIHJldHVybiB7IH07DQoNCiAgICByZXR1cm4gbWF0Y2hbMV0uc3BsaXQoc2VwYXJhdG9yIHx8ICcmJykuaW5qZWN0KHsgfSwgZnVuY3Rpb24oaGFzaCwgcGFpcikgew0KICAgICAgaWYgKChwYWlyID0gcGFpci5zcGxpdCgnPScpKVswXSkgew0KICAgICAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2hpZnQoKSk7DQogICAgICAgIHZhciB2YWx1ZSA9IHBhaXIubGVuZ3RoID4gMSA/IHBhaXIuam9pbignPScpIDogcGFpclswXTsNCiAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOw0KDQogICAgICAgIGlmIChrZXkgaW4gaGFzaCkgew0KICAgICAgICAgIGlmICghT2JqZWN0LmlzQXJyYXkoaGFzaFtrZXldKSkgaGFzaFtrZXldID0gW2hhc2hba2V5XV07DQogICAgICAgICAgaGFzaFtrZXldLnB1c2godmFsdWUpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaGFzaFtrZXldID0gdmFsdWU7DQogICAgICB9DQogICAgICByZXR1cm4gaGFzaDsNCiAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvQXJyYXkoKSB7DQogICAgcmV0dXJuIHRoaXMuc3BsaXQoJycpOw0KICB9DQoNCiAgZnVuY3Rpb24gc3VjYygpIHsNCiAgICByZXR1cm4gdGhpcy5zbGljZSgwLCB0aGlzLmxlbmd0aCAtIDEpICsNCiAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5jaGFyQ29kZUF0KHRoaXMubGVuZ3RoIC0gMSkgKyAxKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRpbWVzKGNvdW50KSB7DQogICAgcmV0dXJuIGNvdW50IDwgMSA/ICcnIDogbmV3IEFycmF5KGNvdW50ICsgMSkuam9pbih0aGlzKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNhbWVsaXplKCkgew0KICAgIHZhciBwYXJ0cyA9IHRoaXMuc3BsaXQoJy0nKSwgbGVuID0gcGFydHMubGVuZ3RoOw0KICAgIGlmIChsZW4gPT0gMSkgcmV0dXJuIHBhcnRzWzBdOw0KDQogICAgdmFyIGNhbWVsaXplZCA9IHRoaXMuY2hhckF0KDApID09ICctJw0KICAgICAgPyBwYXJ0c1swXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnRzWzBdLnN1YnN0cmluZygxKQ0KICAgICAgOiBwYXJ0c1swXTsNCg0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspDQogICAgICBjYW1lbGl6ZWQgKz0gcGFydHNbaV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0c1tpXS5zdWJzdHJpbmcoMSk7DQoNCiAgICByZXR1cm4gY2FtZWxpemVkOw0KICB9DQoNCiAgZnVuY3Rpb24gY2FwaXRhbGl6ZSgpIHsNCiAgICByZXR1cm4gdGhpcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCk7DQogIH0NCg0KICBmdW5jdGlvbiB1bmRlcnNjb3JlKCkgew0KICAgIHJldHVybiB0aGlzLnJlcGxhY2UoLzo6L2csICcvJykNCiAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXpdKS9nLCAnJDFfJDInKQ0KICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbYS16XGRdKShbQS1aXSkvZywgJyQxXyQyJykNCiAgICAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csICdfJykNCiAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpOw0KICB9DQoNCiAgZnVuY3Rpb24gZGFzaGVyaXplKCkgew0KICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL18vZywgJy0nKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGluc3BlY3QodXNlRG91YmxlUXVvdGVzKSB7DQogICAgdmFyIGVzY2FwZWRTdHJpbmcgPSB0aGlzLnJlcGxhY2UoL1tceDAwLVx4MWZcXF0vZywgZnVuY3Rpb24oY2hhcmFjdGVyKSB7DQogICAgICBpZiAoY2hhcmFjdGVyIGluIFN0cmluZy5zcGVjaWFsQ2hhcikgew0KICAgICAgICByZXR1cm4gU3RyaW5nLnNwZWNpYWxDaGFyW2NoYXJhY3Rlcl07DQogICAgICB9DQogICAgICByZXR1cm4gJ1xcdTAwJyArIGNoYXJhY3Rlci5jaGFyQ29kZUF0KCkudG9QYWRkZWRTdHJpbmcoMiwgMTYpOw0KICAgIH0pOw0KICAgIGlmICh1c2VEb3VibGVRdW90ZXMpIHJldHVybiAnIicgKyBlc2NhcGVkU3RyaW5nLnJlcGxhY2UoLyIvZywgJ1xcIicpICsgJyInOw0KICAgIHJldHVybiAiJyIgKyBlc2NhcGVkU3RyaW5nLnJlcGxhY2UoLycvZywgJ1xcXCcnKSArICInIjsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvSlNPTigpIHsNCiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KHRydWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gdW5maWx0ZXJKU09OKGZpbHRlcikgew0KICAgIHJldHVybiB0aGlzLnJlcGxhY2UoZmlsdGVyIHx8IFByb3RvdHlwZS5KU09ORmlsdGVyLCAnJDEnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGlzSlNPTigpIHsNCiAgICB2YXIgc3RyID0gdGhpczsNCiAgICBpZiAoc3RyLmJsYW5rKCkpIHJldHVybiBmYWxzZTsNCiAgICBzdHIgPSB0aGlzLnJlcGxhY2UoL1xcLi9nLCAnQCcpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiIvZywgJycpOw0KICAgIHJldHVybiAoL15bLDp7fVxbXF0wLTkuXC0rRWFlZmxuci11IFxuXHJcdF0qJC8pLnRlc3Qoc3RyKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGV2YWxKU09OKHNhbml0aXplKSB7DQogICAgdmFyIGpzb24gPSB0aGlzLnVuZmlsdGVySlNPTigpOw0KICAgIHRyeSB7DQogICAgICBpZiAoIXNhbml0aXplIHx8IGpzb24uaXNKU09OKCkpIHJldHVybiBldmFsKCcoJyArIGpzb24gKyAnKScpOw0KICAgIH0gY2F0Y2ggKGUpIHsgfQ0KICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignQmFkbHkgZm9ybWVkIEpTT04gc3RyaW5nOiAnICsgdGhpcy5pbnNwZWN0KCkpOw0KICB9DQoNCiAgZnVuY3Rpb24gaW5jbHVkZShwYXR0ZXJuKSB7DQogICAgcmV0dXJuIHRoaXMuaW5kZXhPZihwYXR0ZXJuKSA+IC0xOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRzV2l0aChwYXR0ZXJuKSB7DQogICAgcmV0dXJuIHRoaXMuaW5kZXhPZihwYXR0ZXJuKSA9PT0gMDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGVuZHNXaXRoKHBhdHRlcm4pIHsNCiAgICB2YXIgZCA9IHRoaXMubGVuZ3RoIC0gcGF0dGVybi5sZW5ndGg7DQogICAgcmV0dXJuIGQgPj0gMCAmJiB0aGlzLmxhc3RJbmRleE9mKHBhdHRlcm4pID09PSBkOw0KICB9DQoNCiAgZnVuY3Rpb24gZW1wdHkoKSB7DQogICAgcmV0dXJuIHRoaXMgPT0gJyc7DQogIH0NCg0KICBmdW5jdGlvbiBibGFuaygpIHsNCiAgICByZXR1cm4gL15ccyokLy50ZXN0KHRoaXMpOw0KICB9DQoNCiAgZnVuY3Rpb24gaW50ZXJwb2xhdGUob2JqZWN0LCBwYXR0ZXJuKSB7DQogICAgcmV0dXJuIG5ldyBUZW1wbGF0ZSh0aGlzLCBwYXR0ZXJuKS5ldmFsdWF0ZShvYmplY3QpOw0KICB9DQoNCiAgcmV0dXJuIHsNCiAgICBnc3ViOiAgICAgICAgICAgZ3N1YiwNCiAgICBzdWI6ICAgICAgICAgICAgc3ViLA0KICAgIHNjYW46ICAgICAgICAgICBzY2FuLA0KICAgIHRydW5jYXRlOiAgICAgICB0cnVuY2F0ZSwNCiAgICBzdHJpcDogICAgICAgICAgU3RyaW5nLnByb3RvdHlwZS50cmltID8gU3RyaW5nLnByb3RvdHlwZS50cmltIDogc3RyaXAsDQogICAgc3RyaXBUYWdzOiAgICAgIHN0cmlwVGFncywNCiAgICBzdHJpcFNjcmlwdHM6ICAgc3RyaXBTY3JpcHRzLA0KICAgIGV4dHJhY3RTY3JpcHRzOiBleHRyYWN0U2NyaXB0cywNCiAgICBldmFsU2NyaXB0czogICAgZXZhbFNjcmlwdHMsDQogICAgZXNjYXBlSFRNTDogICAgIGVzY2FwZUhUTUwsDQogICAgdW5lc2NhcGVIVE1MOiAgIHVuZXNjYXBlSFRNTCwNCiAgICB0b1F1ZXJ5UGFyYW1zOiAgdG9RdWVyeVBhcmFtcywNCiAgICBwYXJzZVF1ZXJ5OiAgICAgdG9RdWVyeVBhcmFtcywNCiAgICB0b0FycmF5OiAgICAgICAgdG9BcnJheSwNCiAgICBzdWNjOiAgICAgICAgICAgc3VjYywNCiAgICB0aW1lczogICAgICAgICAgdGltZXMsDQogICAgY2FtZWxpemU6ICAgICAgIGNhbWVsaXplLA0KICAgIGNhcGl0YWxpemU6ICAgICBjYXBpdGFsaXplLA0KICAgIHVuZGVyc2NvcmU6ICAgICB1bmRlcnNjb3JlLA0KICAgIGRhc2hlcml6ZTogICAgICBkYXNoZXJpemUsDQogICAgaW5zcGVjdDogICAgICAgIGluc3BlY3QsDQogICAgdG9KU09OOiAgICAgICAgIHRvSlNPTiwNCiAgICB1bmZpbHRlckpTT046ICAgdW5maWx0ZXJKU09OLA0KICAgIGlzSlNPTjogICAgICAgICBpc0pTT04sDQogICAgZXZhbEpTT046ICAgICAgIGV2YWxKU09OLA0KICAgIGluY2x1ZGU6ICAgICAgICBpbmNsdWRlLA0KICAgIHN0YXJ0c1dpdGg6ICAgICBzdGFydHNXaXRoLA0KICAgIGVuZHNXaXRoOiAgICAgICBlbmRzV2l0aCwNCiAgICBlbXB0eTogICAgICAgICAgZW1wdHksDQogICAgYmxhbms6ICAgICAgICAgIGJsYW5rLA0KICAgIGludGVycG9sYXRlOiAgICBpbnRlcnBvbGF0ZQ0KICB9Ow0KfSkoKSk7DQoNCnZhciBUZW1wbGF0ZSA9IENsYXNzLmNyZWF0ZSh7DQogIGluaXRpYWxpemU6IGZ1bmN0aW9uKHRlbXBsYXRlLCBwYXR0ZXJuKSB7DQogICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlLnRvU3RyaW5nKCk7DQogICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybiB8fCBUZW1wbGF0ZS5QYXR0ZXJuOw0KICB9LA0KDQogIGV2YWx1YXRlOiBmdW5jdGlvbihvYmplY3QpIHsNCiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5pc0Z1bmN0aW9uKG9iamVjdC50b1RlbXBsYXRlUmVwbGFjZW1lbnRzKSkNCiAgICAgIG9iamVjdCA9IG9iamVjdC50b1RlbXBsYXRlUmVwbGFjZW1lbnRzKCk7DQoNCiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZS5nc3ViKHRoaXMucGF0dGVybiwgZnVuY3Rpb24obWF0Y2gpIHsNCiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuIChtYXRjaFsxXSArICcnKTsNCg0KICAgICAgdmFyIGJlZm9yZSA9IG1hdGNoWzFdIHx8ICcnOw0KICAgICAgaWYgKGJlZm9yZSA9PSAnXFwnKSByZXR1cm4gbWF0Y2hbMl07DQoNCiAgICAgIHZhciBjdHggPSBvYmplY3QsIGV4cHIgPSBtYXRjaFszXTsNCiAgICAgIHZhciBwYXR0ZXJuID0gL14oW14uW10rfFxbKCg/Oi4qP1teXFxdKT8pXF0pKFwufFxbfCQpLzsNCiAgICAgIG1hdGNoID0gcGF0dGVybi5leGVjKGV4cHIpOw0KICAgICAgaWYgKG1hdGNoID09IG51bGwpIHJldHVybiBiZWZvcmU7DQoNCiAgICAgIHdoaWxlIChtYXRjaCAhPSBudWxsKSB7DQogICAgICAgIHZhciBjb21wID0gbWF0Y2hbMV0uc3RhcnRzV2l0aCgnWycpID8gbWF0Y2hbMl0ucmVwbGFjZSgvXFxcXF0vZywgJ10nKSA6IG1hdGNoWzFdOw0KICAgICAgICBjdHggPSBjdHhbY29tcF07DQogICAgICAgIGlmIChudWxsID09IGN0eCB8fCAnJyA9PSBtYXRjaFszXSkgYnJlYWs7DQogICAgICAgIGV4cHIgPSBleHByLnN1YnN0cmluZygnWycgPT0gbWF0Y2hbM10gPyBtYXRjaFsxXS5sZW5ndGggOiBtYXRjaFswXS5sZW5ndGgpOw0KICAgICAgICBtYXRjaCA9IHBhdHRlcm4uZXhlYyhleHByKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIGJlZm9yZSArIFN0cmluZy5pbnRlcnByZXQoY3R4KTsNCiAgICB9KTsNCiAgfQ0KfSk7DQpUZW1wbGF0ZS5QYXR0ZXJuID0gLyhefC58XHJ8XG4pKCNceyguKj8pXH0pLzsNCg0KdmFyICRicmVhayA9IHsgfTsNCg0KdmFyIEVudW1lcmFibGUgPSAoZnVuY3Rpb24oKSB7DQogIGZ1bmN0aW9uIGVhY2goaXRlcmF0b3IsIGNvbnRleHQpIHsNCiAgICB2YXIgaW5kZXggPSAwOw0KICAgIHRyeSB7DQogICAgICB0aGlzLl9lYWNoKGZ1bmN0aW9uKHZhbHVlKSB7DQogICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KyspOw0KICAgICAgfSk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgaWYgKGUgIT0gJGJyZWFrKSB0aHJvdyBlOw0KICAgIH0NCiAgICByZXR1cm4gdGhpczsNCiAgfQ0KDQogIGZ1bmN0aW9uIGVhY2hTbGljZShudW1iZXIsIGl0ZXJhdG9yLCBjb250ZXh0KSB7DQogICAgdmFyIGluZGV4ID0gLW51bWJlciwgc2xpY2VzID0gW10sIGFycmF5ID0gdGhpcy50b0FycmF5KCk7DQogICAgaWYgKG51bWJlciA8IDEpIHJldHVybiBhcnJheTsNCiAgICB3aGlsZSAoKGluZGV4ICs9IG51bWJlcikgPCBhcnJheS5sZW5ndGgpDQogICAgICBzbGljZXMucHVzaChhcnJheS5zbGljZShpbmRleCwgaW5kZXgrbnVtYmVyKSk7DQogICAgcmV0dXJuIHNsaWNlcy5jb2xsZWN0KGl0ZXJhdG9yLCBjb250ZXh0KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFsbChpdGVyYXRvciwgY29udGV4dCkgew0KICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7DQogICAgdmFyIHJlc3VsdCA9IHRydWU7DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgew0KICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmICEhaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgpOw0KICAgICAgaWYgKCFyZXN1bHQpIHRocm93ICRicmVhazsNCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0Ow0KICB9DQoNCiAgZnVuY3Rpb24gYW55KGl0ZXJhdG9yLCBjb250ZXh0KSB7DQogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsNCiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgew0KICAgICAgaWYgKHJlc3VsdCA9ICEhaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgpKQ0KICAgICAgICB0aHJvdyAkYnJlYWs7DQogICAgfSk7DQogICAgcmV0dXJuIHJlc3VsdDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNvbGxlY3QoaXRlcmF0b3IsIGNvbnRleHQpIHsNCiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOw0KICAgIHZhciByZXN1bHRzID0gW107DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgew0KICAgICAgcmVzdWx0cy5wdXNoKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KSk7DQogICAgfSk7DQogICAgcmV0dXJuIHJlc3VsdHM7DQogIH0NCg0KICBmdW5jdGlvbiBkZXRlY3QoaXRlcmF0b3IsIGNvbnRleHQpIHsNCiAgICB2YXIgcmVzdWx0Ow0KICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCkpIHsNCiAgICAgICAgcmVzdWx0ID0gdmFsdWU7DQogICAgICAgIHRocm93ICRicmVhazsNCiAgICAgIH0NCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0Ow0KICB9DQoNCiAgZnVuY3Rpb24gZmluZEFsbChpdGVyYXRvciwgY29udGV4dCkgew0KICAgIHZhciByZXN1bHRzID0gW107DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgew0KICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KSkNCiAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTsNCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfQ0KDQogIGZ1bmN0aW9uIGdyZXAoZmlsdGVyLCBpdGVyYXRvciwgY29udGV4dCkgew0KICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7DQogICAgdmFyIHJlc3VsdHMgPSBbXTsNCg0KICAgIGlmIChPYmplY3QuaXNTdHJpbmcoZmlsdGVyKSkNCiAgICAgIGZpbHRlciA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShmaWx0ZXIpKTsNCg0KICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIGlmIChmaWx0ZXIubWF0Y2godmFsdWUpKQ0KICAgICAgICByZXN1bHRzLnB1c2goaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgpKTsNCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfQ0KDQogIGZ1bmN0aW9uIGluY2x1ZGUob2JqZWN0KSB7DQogICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKHRoaXMuaW5kZXhPZikpDQogICAgICBpZiAodGhpcy5pbmRleE9mKG9iamVjdCkgIT0gLTEpIHJldHVybiB0cnVlOw0KDQogICAgdmFyIGZvdW5kID0gZmFsc2U7DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUgPT0gb2JqZWN0KSB7DQogICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgdGhyb3cgJGJyZWFrOw0KICAgICAgfQ0KICAgIH0pOw0KICAgIHJldHVybiBmb3VuZDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGluR3JvdXBzT2YobnVtYmVyLCBmaWxsV2l0aCkgew0KICAgIGZpbGxXaXRoID0gT2JqZWN0LmlzVW5kZWZpbmVkKGZpbGxXaXRoKSA/IG51bGwgOiBmaWxsV2l0aDsNCiAgICByZXR1cm4gdGhpcy5lYWNoU2xpY2UobnVtYmVyLCBmdW5jdGlvbihzbGljZSkgew0KICAgICAgd2hpbGUoc2xpY2UubGVuZ3RoIDwgbnVtYmVyKSBzbGljZS5wdXNoKGZpbGxXaXRoKTsNCiAgICAgIHJldHVybiBzbGljZTsNCiAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGluamVjdChtZW1vLCBpdGVyYXRvciwgY29udGV4dCkgew0KICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIG1lbW8gPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG1lbW8sIHZhbHVlLCBpbmRleCk7DQogICAgfSk7DQogICAgcmV0dXJuIG1lbW87DQogIH0NCg0KICBmdW5jdGlvbiBpbnZva2UobWV0aG9kKSB7DQogICAgdmFyIGFyZ3MgPSAkQShhcmd1bWVudHMpLnNsaWNlKDEpOw0KICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbih2YWx1ZSkgew0KICAgICAgcmV0dXJuIHZhbHVlW21ldGhvZF0uYXBwbHkodmFsdWUsIGFyZ3MpOw0KICAgIH0pOw0KICB9DQoNCiAgZnVuY3Rpb24gbWF4KGl0ZXJhdG9yLCBjb250ZXh0KSB7DQogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsNCiAgICB2YXIgcmVzdWx0Ow0KICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIHZhbHVlID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgpOw0KICAgICAgaWYgKHJlc3VsdCA9PSBudWxsIHx8IHZhbHVlID49IHJlc3VsdCkNCiAgICAgICAgcmVzdWx0ID0gdmFsdWU7DQogICAgfSk7DQogICAgcmV0dXJuIHJlc3VsdDsNCiAgfQ0KDQogIGZ1bmN0aW9uIG1pbihpdGVyYXRvciwgY29udGV4dCkgew0KICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7DQogICAgdmFyIHJlc3VsdDsNCiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7DQogICAgICB2YWx1ZSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KTsNCiAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCB8fCB2YWx1ZSA8IHJlc3VsdCkNCiAgICAgICAgcmVzdWx0ID0gdmFsdWU7DQogICAgfSk7DQogICAgcmV0dXJuIHJlc3VsdDsNCiAgfQ0KDQogIGZ1bmN0aW9uIHBhcnRpdGlvbihpdGVyYXRvciwgY29udGV4dCkgew0KICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7DQogICAgdmFyIHRydWVzID0gW10sIGZhbHNlcyA9IFtdOw0KICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCkgPw0KICAgICAgICB0cnVlcyA6IGZhbHNlcykucHVzaCh2YWx1ZSk7DQogICAgfSk7DQogICAgcmV0dXJuIFt0cnVlcywgZmFsc2VzXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHBsdWNrKHByb3BlcnR5KSB7DQogICAgdmFyIHJlc3VsdHMgPSBbXTsNCiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUpIHsNCiAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZVtwcm9wZXJ0eV0pOw0KICAgIH0pOw0KICAgIHJldHVybiByZXN1bHRzOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVqZWN0KGl0ZXJhdG9yLCBjb250ZXh0KSB7DQogICAgdmFyIHJlc3VsdHMgPSBbXTsNCiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7DQogICAgICBpZiAoIWl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KSkNCiAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTsNCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNvcnRCeShpdGVyYXRvciwgY29udGV4dCkgew0KICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHZhbHVlOiB2YWx1ZSwNCiAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4KQ0KICAgICAgfTsNCiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7DQogICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWEsIGIgPSByaWdodC5jcml0ZXJpYTsNCiAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDsNCiAgICB9KS5wbHVjaygndmFsdWUnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvQXJyYXkoKSB7DQogICAgcmV0dXJuIHRoaXMubWFwKCk7DQogIH0NCg0KICBmdW5jdGlvbiB6aXAoKSB7DQogICAgdmFyIGl0ZXJhdG9yID0gUHJvdG90eXBlLkssIGFyZ3MgPSAkQShhcmd1bWVudHMpOw0KICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihhcmdzLmxhc3QoKSkpDQogICAgICBpdGVyYXRvciA9IGFyZ3MucG9wKCk7DQoNCiAgICB2YXIgY29sbGVjdGlvbnMgPSBbdGhpc10uY29uY2F0KGFyZ3MpLm1hcCgkQSk7DQogICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgew0KICAgICAgcmV0dXJuIGl0ZXJhdG9yKGNvbGxlY3Rpb25zLnBsdWNrKGluZGV4KSk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBzaXplKCkgew0KICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5sZW5ndGg7DQogIH0NCg0KICBmdW5jdGlvbiBpbnNwZWN0KCkgew0KICAgIHJldHVybiAnIzxFbnVtZXJhYmxlOicgKyB0aGlzLnRvQXJyYXkoKS5pbnNwZWN0KCkgKyAnPic7DQogIH0NCg0KDQoNCg0KDQoNCg0KDQoNCiAgcmV0dXJuIHsNCiAgICBlYWNoOiAgICAgICBlYWNoLA0KICAgIGVhY2hTbGljZTogIGVhY2hTbGljZSwNCiAgICBhbGw6ICAgICAgICBhbGwsDQogICAgZXZlcnk6ICAgICAgYWxsLA0KICAgIGFueTogICAgICAgIGFueSwNCiAgICBzb21lOiAgICAgICBhbnksDQogICAgY29sbGVjdDogICAgY29sbGVjdCwNCiAgICBtYXA6ICAgICAgICBjb2xsZWN0LA0KICAgIGRldGVjdDogICAgIGRldGVjdCwNCiAgICBmaW5kQWxsOiAgICBmaW5kQWxsLA0KICAgIHNlbGVjdDogICAgIGZpbmRBbGwsDQogICAgZmlsdGVyOiAgICAgZmluZEFsbCwNCiAgICBncmVwOiAgICAgICBncmVwLA0KICAgIGluY2x1ZGU6ICAgIGluY2x1ZGUsDQogICAgbWVtYmVyOiAgICAgaW5jbHVkZSwNCiAgICBpbkdyb3Vwc09mOiBpbkdyb3Vwc09mLA0KICAgIGluamVjdDogICAgIGluamVjdCwNCiAgICBpbnZva2U6ICAgICBpbnZva2UsDQogICAgbWF4OiAgICAgICAgbWF4LA0KICAgIG1pbjogICAgICAgIG1pbiwNCiAgICBwYXJ0aXRpb246ICBwYXJ0aXRpb24sDQogICAgcGx1Y2s6ICAgICAgcGx1Y2ssDQogICAgcmVqZWN0OiAgICAgcmVqZWN0LA0KICAgIHNvcnRCeTogICAgIHNvcnRCeSwNCiAgICB0b0FycmF5OiAgICB0b0FycmF5LA0KICAgIGVudHJpZXM6ICAgIHRvQXJyYXksDQogICAgemlwOiAgICAgICAgemlwLA0KICAgIHNpemU6ICAgICAgIHNpemUsDQogICAgaW5zcGVjdDogICAgaW5zcGVjdCwNCiAgICBmaW5kOiAgICAgICBkZXRlY3QNCiAgfTsNCn0pKCk7DQpmdW5jdGlvbiAkQShpdGVyYWJsZSkgew0KICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gW107DQogIGlmICgndG9BcnJheScgaW4gT2JqZWN0KGl0ZXJhYmxlKSkgcmV0dXJuIGl0ZXJhYmxlLnRvQXJyYXkoKTsNCiAgdmFyIGxlbmd0aCA9IGl0ZXJhYmxlLmxlbmd0aCB8fCAwLCByZXN1bHRzID0gbmV3IEFycmF5KGxlbmd0aCk7DQogIHdoaWxlIChsZW5ndGgtLSkgcmVzdWx0c1tsZW5ndGhdID0gaXRlcmFibGVbbGVuZ3RoXTsNCiAgcmV0dXJuIHJlc3VsdHM7DQp9DQoNCmZ1bmN0aW9uICR3KHN0cmluZykgew0KICBpZiAoIU9iamVjdC5pc1N0cmluZyhzdHJpbmcpKSByZXR1cm4gW107DQogIHN0cmluZyA9IHN0cmluZy5zdHJpcCgpOw0KICByZXR1cm4gc3RyaW5nID8gc3RyaW5nLnNwbGl0KC9ccysvKSA6IFtdOw0KfQ0KDQpBcnJheS5mcm9tID0gJEE7DQoNCg0KKGZ1bmN0aW9uKCkgew0KICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwNCiAgICAgIHNsaWNlID0gYXJyYXlQcm90by5zbGljZSwNCiAgICAgIF9lYWNoID0gYXJyYXlQcm90by5mb3JFYWNoOyAvLyB1c2UgbmF0aXZlIGJyb3dzZXIgSlMgMS42IGltcGxlbWVudGF0aW9uIGlmIGF2YWlsYWJsZQ0KDQogIGZ1bmN0aW9uIGVhY2goaXRlcmF0b3IpIHsNCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gdGhpcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykNCiAgICAgIGl0ZXJhdG9yKHRoaXNbaV0pOw0KICB9DQogIGlmICghX2VhY2gpIF9lYWNoID0gZWFjaDsNCg0KICBmdW5jdGlvbiBjbGVhcigpIHsNCiAgICB0aGlzLmxlbmd0aCA9IDA7DQogICAgcmV0dXJuIHRoaXM7DQogIH0NCg0KICBmdW5jdGlvbiBmaXJzdCgpIHsNCiAgICByZXR1cm4gdGhpc1swXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGxhc3QoKSB7DQogICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNvbXBhY3QoKSB7DQogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKHZhbHVlKSB7DQogICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbDsNCiAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGZsYXR0ZW4oKSB7DQogICAgcmV0dXJuIHRoaXMuaW5qZWN0KFtdLCBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHsNCiAgICAgIGlmIChPYmplY3QuaXNBcnJheSh2YWx1ZSkpDQogICAgICAgIHJldHVybiBhcnJheS5jb25jYXQodmFsdWUuZmxhdHRlbigpKTsNCiAgICAgIGFycmF5LnB1c2godmFsdWUpOw0KICAgICAgcmV0dXJuIGFycmF5Ow0KICAgIH0pOw0KICB9DQoNCiAgZnVuY3Rpb24gd2l0aG91dCgpIHsNCiAgICB2YXIgdmFsdWVzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApOw0KICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbih2YWx1ZSkgew0KICAgICAgcmV0dXJuICF2YWx1ZXMuaW5jbHVkZSh2YWx1ZSk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiByZXZlcnNlKGlubGluZSkgew0KICAgIHJldHVybiAoaW5saW5lICE9PSBmYWxzZSA/IHRoaXMgOiB0aGlzLnRvQXJyYXkoKSkuX3JldmVyc2UoKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHVuaXEoc29ydGVkKSB7DQogICAgcmV0dXJuIHRoaXMuaW5qZWN0KFtdLCBmdW5jdGlvbihhcnJheSwgdmFsdWUsIGluZGV4KSB7DQogICAgICBpZiAoMCA9PSBpbmRleCB8fCAoc29ydGVkID8gYXJyYXkubGFzdCgpICE9IHZhbHVlIDogIWFycmF5LmluY2x1ZGUodmFsdWUpKSkNCiAgICAgICAgYXJyYXkucHVzaCh2YWx1ZSk7DQogICAgICByZXR1cm4gYXJyYXk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBpbnRlcnNlY3QoYXJyYXkpIHsNCiAgICByZXR1cm4gdGhpcy51bmlxKCkuZmluZEFsbChmdW5jdGlvbihpdGVtKSB7DQogICAgICByZXR1cm4gYXJyYXkuZGV0ZWN0KGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBpdGVtID09PSB2YWx1ZSB9KTsNCiAgICB9KTsNCiAgfQ0KDQoNCiAgZnVuY3Rpb24gY2xvbmUoKSB7DQogICAgcmV0dXJuIHNsaWNlLmNhbGwodGhpcywgMCk7DQogIH0NCg0KICBmdW5jdGlvbiBzaXplKCkgew0KICAgIHJldHVybiB0aGlzLmxlbmd0aDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGluc3BlY3QoKSB7DQogICAgcmV0dXJuICdbJyArIHRoaXMubWFwKE9iamVjdC5pbnNwZWN0KS5qb2luKCcsICcpICsgJ10nOw0KICB9DQoNCiAgZnVuY3Rpb24gdG9KU09OKCkgew0KICAgIHZhciByZXN1bHRzID0gW107DQogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKG9iamVjdCkgew0KICAgICAgdmFyIHZhbHVlID0gT2JqZWN0LnRvSlNPTihvYmplY3QpOw0KICAgICAgaWYgKCFPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSByZXN1bHRzLnB1c2godmFsdWUpOw0KICAgIH0pOw0KICAgIHJldHVybiAnWycgKyByZXN1bHRzLmpvaW4oJywgJykgKyAnXSc7DQogIH0NCg0KICBmdW5jdGlvbiBpbmRleE9mKGl0ZW0sIGkpIHsNCiAgICBpIHx8IChpID0gMCk7DQogICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoOw0KICAgIGlmIChpIDwgMCkgaSA9IGxlbmd0aCArIGk7DQogICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykNCiAgICAgIGlmICh0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsNCiAgICByZXR1cm4gLTE7DQogIH0NCg0KICBmdW5jdGlvbiBsYXN0SW5kZXhPZihpdGVtLCBpKSB7DQogICAgaSA9IGlzTmFOKGkpID8gdGhpcy5sZW5ndGggOiAoaSA8IDAgPyB0aGlzLmxlbmd0aCArIGkgOiBpKSArIDE7DQogICAgdmFyIG4gPSB0aGlzLnNsaWNlKDAsIGkpLnJldmVyc2UoKS5pbmRleE9mKGl0ZW0pOw0KICAgIHJldHVybiAobiA8IDApID8gbiA6IGkgLSBuIC0gMTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNvbmNhdCgpIHsNCiAgICB2YXIgYXJyYXkgPSBzbGljZS5jYWxsKHRoaXMsIDApLCBpdGVtOw0KICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgIGl0ZW0gPSBhcmd1bWVudHNbaV07DQogICAgICBpZiAoT2JqZWN0LmlzQXJyYXkoaXRlbSkgJiYgISgnY2FsbGVlJyBpbiBpdGVtKSkgew0KICAgICAgICBmb3IgKHZhciBqID0gMCwgYXJyYXlMZW5ndGggPSBpdGVtLmxlbmd0aDsgaiA8IGFycmF5TGVuZ3RoOyBqKyspDQogICAgICAgICAgYXJyYXkucHVzaChpdGVtW2pdKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFycmF5LnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBhcnJheTsNCiAgfQ0KDQogIE9iamVjdC5leHRlbmQoYXJyYXlQcm90bywgRW51bWVyYWJsZSk7DQoNCiAgaWYgKCFhcnJheVByb3RvLl9yZXZlcnNlKQ0KICAgIGFycmF5UHJvdG8uX3JldmVyc2UgPSBhcnJheVByb3RvLnJldmVyc2U7DQoNCiAgT2JqZWN0LmV4dGVuZChhcnJheVByb3RvLCB7DQogICAgX2VhY2g6ICAgICBfZWFjaCwNCiAgICBjbGVhcjogICAgIGNsZWFyLA0KICAgIGZpcnN0OiAgICAgZmlyc3QsDQogICAgbGFzdDogICAgICBsYXN0LA0KICAgIGNvbXBhY3Q6ICAgY29tcGFjdCwNCiAgICBmbGF0dGVuOiAgIGZsYXR0ZW4sDQogICAgd2l0aG91dDogICB3aXRob3V0LA0KICAgIHJldmVyc2U6ICAgcmV2ZXJzZSwNCiAgICB1bmlxOiAgICAgIHVuaXEsDQogICAgaW50ZXJzZWN0OiBpbnRlcnNlY3QsDQogICAgY2xvbmU6ICAgICBjbG9uZSwNCiAgICB0b0FycmF5OiAgIGNsb25lLA0KICAgIHNpemU6ICAgICAgc2l6ZSwNCiAgICBpbnNwZWN0OiAgIGluc3BlY3QsDQogICAgdG9KU09OOiAgICB0b0pTT04NCiAgfSk7DQoNCiAgdmFyIENPTkNBVF9BUkdVTUVOVFNfQlVHR1kgPSAoZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIFtdLmNvbmNhdChhcmd1bWVudHMpWzBdWzBdICE9PSAxOw0KICB9KSgxLDIpDQoNCiAgaWYgKENPTkNBVF9BUkdVTUVOVFNfQlVHR1kpIGFycmF5UHJvdG8uY29uY2F0ID0gY29uY2F0Ow0KDQogIGlmICghYXJyYXlQcm90by5pbmRleE9mKSBhcnJheVByb3RvLmluZGV4T2YgPSBpbmRleE9mOw0KICBpZiAoIWFycmF5UHJvdG8ubGFzdEluZGV4T2YpIGFycmF5UHJvdG8ubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjsNCn0pKCk7DQpmdW5jdGlvbiAkSChvYmplY3QpIHsNCiAgcmV0dXJuIG5ldyBIYXNoKG9iamVjdCk7DQp9Ow0KDQp2YXIgSGFzaCA9IENsYXNzLmNyZWF0ZShFbnVtZXJhYmxlLCAoZnVuY3Rpb24oKSB7DQogIGZ1bmN0aW9uIGluaXRpYWxpemUob2JqZWN0KSB7DQogICAgdGhpcy5fb2JqZWN0ID0gT2JqZWN0LmlzSGFzaChvYmplY3QpID8gb2JqZWN0LnRvT2JqZWN0KCkgOiBPYmplY3QuY2xvbmUob2JqZWN0KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIF9lYWNoKGl0ZXJhdG9yKSB7DQogICAgZm9yICh2YXIga2V5IGluIHRoaXMuX29iamVjdCkgew0KICAgICAgdmFyIHZhbHVlID0gdGhpcy5fb2JqZWN0W2tleV0sIHBhaXIgPSBba2V5LCB2YWx1ZV07DQogICAgICBwYWlyLmtleSA9IGtleTsNCiAgICAgIHBhaXIudmFsdWUgPSB2YWx1ZTsNCiAgICAgIGl0ZXJhdG9yKHBhaXIpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7DQogICAgcmV0dXJuIHRoaXMuX29iamVjdFtrZXldID0gdmFsdWU7DQogIH0NCg0KICBmdW5jdGlvbiBnZXQoa2V5KSB7DQogICAgaWYgKHRoaXMuX29iamVjdFtrZXldICE9PSBPYmplY3QucHJvdG90eXBlW2tleV0pDQogICAgICByZXR1cm4gdGhpcy5fb2JqZWN0W2tleV07DQogIH0NCg0KICBmdW5jdGlvbiB1bnNldChrZXkpIHsNCiAgICB2YXIgdmFsdWUgPSB0aGlzLl9vYmplY3Rba2V5XTsNCiAgICBkZWxldGUgdGhpcy5fb2JqZWN0W2tleV07DQogICAgcmV0dXJuIHZhbHVlOw0KICB9DQoNCiAgZnVuY3Rpb24gdG9PYmplY3QoKSB7DQogICAgcmV0dXJuIE9iamVjdC5jbG9uZSh0aGlzLl9vYmplY3QpOw0KICB9DQoNCiAgZnVuY3Rpb24ga2V5cygpIHsNCiAgICByZXR1cm4gdGhpcy5wbHVjaygna2V5Jyk7DQogIH0NCg0KICBmdW5jdGlvbiB2YWx1ZXMoKSB7DQogICAgcmV0dXJuIHRoaXMucGx1Y2soJ3ZhbHVlJyk7DQogIH0NCg0KICBmdW5jdGlvbiBpbmRleCh2YWx1ZSkgew0KICAgIHZhciBtYXRjaCA9IHRoaXMuZGV0ZWN0KGZ1bmN0aW9uKHBhaXIpIHsNCiAgICAgIHJldHVybiBwYWlyLnZhbHVlID09PSB2YWx1ZTsNCiAgICB9KTsNCiAgICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gua2V5Ow0KICB9DQoNCiAgZnVuY3Rpb24gbWVyZ2Uob2JqZWN0KSB7DQogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS51cGRhdGUob2JqZWN0KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZShvYmplY3QpIHsNCiAgICByZXR1cm4gbmV3IEhhc2gob2JqZWN0KS5pbmplY3QodGhpcywgZnVuY3Rpb24ocmVzdWx0LCBwYWlyKSB7DQogICAgICByZXN1bHQuc2V0KHBhaXIua2V5LCBwYWlyLnZhbHVlKTsNCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiB0b1F1ZXJ5UGFpcihrZXksIHZhbHVlKSB7DQogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybiBrZXk7DQogICAgcmV0dXJuIGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcuaW50ZXJwcmV0KHZhbHVlKSk7DQogIH0NCg0KICBmdW5jdGlvbiB0b1F1ZXJ5U3RyaW5nKCkgew0KICAgIHJldHVybiB0aGlzLmluamVjdChbXSwgZnVuY3Rpb24ocmVzdWx0cywgcGFpcikgew0KICAgICAgdmFyIGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWlyLmtleSksIHZhbHVlcyA9IHBhaXIudmFsdWU7DQoNCiAgICAgIGlmICh2YWx1ZXMgJiYgdHlwZW9mIHZhbHVlcyA9PSAnb2JqZWN0Jykgew0KICAgICAgICBpZiAoT2JqZWN0LmlzQXJyYXkodmFsdWVzKSkNCiAgICAgICAgICByZXR1cm4gcmVzdWx0cy5jb25jYXQodmFsdWVzLm1hcCh0b1F1ZXJ5UGFpci5jdXJyeShrZXkpKSk7DQogICAgICB9IGVsc2UgcmVzdWx0cy5wdXNoKHRvUXVlcnlQYWlyKGtleSwgdmFsdWVzKSk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9KS5qb2luKCcmJyk7DQogIH0NCg0KICBmdW5jdGlvbiBpbnNwZWN0KCkgew0KICAgIHJldHVybiAnIzxIYXNoOnsnICsgdGhpcy5tYXAoZnVuY3Rpb24ocGFpcikgew0KICAgICAgcmV0dXJuIHBhaXIubWFwKE9iamVjdC5pbnNwZWN0KS5qb2luKCc6ICcpOw0KICAgIH0pLmpvaW4oJywgJykgKyAnfT4nOw0KICB9DQoNCiAgZnVuY3Rpb24gdG9KU09OKCkgew0KICAgIHJldHVybiBPYmplY3QudG9KU09OKHRoaXMudG9PYmplY3QoKSk7DQogIH0NCg0KICBmdW5jdGlvbiBjbG9uZSgpIHsNCiAgICByZXR1cm4gbmV3IEhhc2godGhpcyk7DQogIH0NCg0KICByZXR1cm4gew0KICAgIGluaXRpYWxpemU6ICAgICAgICAgICAgIGluaXRpYWxpemUsDQogICAgX2VhY2g6ICAgICAgICAgICAgICAgICAgX2VhY2gsDQogICAgc2V0OiAgICAgICAgICAgICAgICAgICAgc2V0LA0KICAgIGdldDogICAgICAgICAgICAgICAgICAgIGdldCwNCiAgICB1bnNldDogICAgICAgICAgICAgICAgICB1bnNldCwNCiAgICB0b09iamVjdDogICAgICAgICAgICAgICB0b09iamVjdCwNCiAgICB0b1RlbXBsYXRlUmVwbGFjZW1lbnRzOiB0b09iamVjdCwNCiAgICBrZXlzOiAgICAgICAgICAgICAgICAgICBrZXlzLA0KICAgIHZhbHVlczogICAgICAgICAgICAgICAgIHZhbHVlcywNCiAgICBpbmRleDogICAgICAgICAgICAgICAgICBpbmRleCwNCiAgICBtZXJnZTogICAgICAgICAgICAgICAgICBtZXJnZSwNCiAgICB1cGRhdGU6ICAgICAgICAgICAgICAgICB1cGRhdGUsDQogICAgdG9RdWVyeVN0cmluZzogICAgICAgICAgdG9RdWVyeVN0cmluZywNCiAgICBpbnNwZWN0OiAgICAgICAgICAgICAgICBpbnNwZWN0LA0KICAgIHRvSlNPTjogICAgICAgICAgICAgICAgIHRvSlNPTiwNCiAgICBjbG9uZTogICAgICAgICAgICAgICAgICBjbG9uZQ0KICB9Ow0KfSkoKSk7DQoNCkhhc2guZnJvbSA9ICRIOw0KT2JqZWN0LmV4dGVuZChOdW1iZXIucHJvdG90eXBlLCAoZnVuY3Rpb24oKSB7DQogIGZ1bmN0aW9uIHRvQ29sb3JQYXJ0KCkgew0KICAgIHJldHVybiB0aGlzLnRvUGFkZGVkU3RyaW5nKDIsIDE2KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHN1Y2MoKSB7DQogICAgcmV0dXJuIHRoaXMgKyAxOw0KICB9DQoNCiAgZnVuY3Rpb24gdGltZXMoaXRlcmF0b3IsIGNvbnRleHQpIHsNCiAgICAkUigwLCB0aGlzLCB0cnVlKS5lYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTsNCiAgICByZXR1cm4gdGhpczsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvUGFkZGVkU3RyaW5nKGxlbmd0aCwgcmFkaXgpIHsNCiAgICB2YXIgc3RyaW5nID0gdGhpcy50b1N0cmluZyhyYWRpeCB8fCAxMCk7DQogICAgcmV0dXJuICcwJy50aW1lcyhsZW5ndGggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZzsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRvSlNPTigpIHsNCiAgICByZXR1cm4gaXNGaW5pdGUodGhpcykgPyB0aGlzLnRvU3RyaW5nKCkgOiAnbnVsbCc7DQogIH0NCg0KICBmdW5jdGlvbiBhYnMoKSB7DQogICAgcmV0dXJuIE1hdGguYWJzKHRoaXMpOw0KICB9DQoNCiAgZnVuY3Rpb24gcm91bmQoKSB7DQogICAgcmV0dXJuIE1hdGgucm91bmQodGhpcyk7DQogIH0NCg0KICBmdW5jdGlvbiBjZWlsKCkgew0KICAgIHJldHVybiBNYXRoLmNlaWwodGhpcyk7DQogIH0NCg0KICBmdW5jdGlvbiBmbG9vcigpIHsNCiAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzKTsNCiAgfQ0KDQogIHJldHVybiB7DQogICAgdG9Db2xvclBhcnQ6ICAgIHRvQ29sb3JQYXJ0LA0KICAgIHN1Y2M6ICAgICAgICAgICBzdWNjLA0KICAgIHRpbWVzOiAgICAgICAgICB0aW1lcywNCiAgICB0b1BhZGRlZFN0cmluZzogdG9QYWRkZWRTdHJpbmcsDQogICAgdG9KU09OOiAgICAgICAgIHRvSlNPTiwNCiAgICBhYnM6ICAgICAgICAgICAgYWJzLA0KICAgIHJvdW5kOiAgICAgICAgICByb3VuZCwNCiAgICBjZWlsOiAgICAgICAgICAgY2VpbCwNCiAgICBmbG9vcjogICAgICAgICAgZmxvb3INCiAgfTsNCn0pKCkpOw0KDQpmdW5jdGlvbiAkUihzdGFydCwgZW5kLCBleGNsdXNpdmUpIHsNCiAgcmV0dXJuIG5ldyBPYmplY3RSYW5nZShzdGFydCwgZW5kLCBleGNsdXNpdmUpOw0KfQ0KDQp2YXIgT2JqZWN0UmFuZ2UgPSBDbGFzcy5jcmVhdGUoRW51bWVyYWJsZSwgKGZ1bmN0aW9uKCkgew0KICBmdW5jdGlvbiBpbml0aWFsaXplKHN0YXJ0LCBlbmQsIGV4Y2x1c2l2ZSkgew0KICAgIHRoaXMuc3RhcnQgPSBzdGFydDsNCiAgICB0aGlzLmVuZCA9IGVuZDsNCiAgICB0aGlzLmV4Y2x1c2l2ZSA9IGV4Y2x1c2l2ZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIF9lYWNoKGl0ZXJhdG9yKSB7DQogICAgdmFyIHZhbHVlID0gdGhpcy5zdGFydDsNCiAgICB3aGlsZSAodGhpcy5pbmNsdWRlKHZhbHVlKSkgew0KICAgICAgaXRlcmF0b3IodmFsdWUpOw0KICAgICAgdmFsdWUgPSB2YWx1ZS5zdWNjKCk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gaW5jbHVkZSh2YWx1ZSkgew0KICAgIGlmICh2YWx1ZSA8IHRoaXMuc3RhcnQpDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgaWYgKHRoaXMuZXhjbHVzaXZlKQ0KICAgICAgcmV0dXJuIHZhbHVlIDwgdGhpcy5lbmQ7DQogICAgcmV0dXJuIHZhbHVlIDw9IHRoaXMuZW5kOw0KICB9DQoNCiAgcmV0dXJuIHsNCiAgICBpbml0aWFsaXplOiBpbml0aWFsaXplLA0KICAgIF9lYWNoOiAgICAgIF9lYWNoLA0KICAgIGluY2x1ZGU6ICAgIGluY2x1ZGUNCiAgfTsNCn0pKCkpOw0KDQoNCg0KdmFyIEFqYXggPSB7DQogIGdldFRyYW5zcG9ydDogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIFRyeS50aGVzZSgNCiAgICAgIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKX0sDQogICAgICBmdW5jdGlvbigpIHtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQJyl9LA0KICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpfQ0KICAgICkgfHwgZmFsc2U7DQogIH0sDQoNCiAgYWN0aXZlUmVxdWVzdENvdW50OiAwDQp9Ow0KDQpBamF4LlJlc3BvbmRlcnMgPSB7DQogIHJlc3BvbmRlcnM6IFtdLA0KDQogIF9lYWNoOiBmdW5jdGlvbihpdGVyYXRvcikgew0KICAgIHRoaXMucmVzcG9uZGVycy5fZWFjaChpdGVyYXRvcik7DQogIH0sDQoNCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHJlc3BvbmRlcikgew0KICAgIGlmICghdGhpcy5pbmNsdWRlKHJlc3BvbmRlcikpDQogICAgICB0aGlzLnJlc3BvbmRlcnMucHVzaChyZXNwb25kZXIpOw0KICB9LA0KDQogIHVucmVnaXN0ZXI6IGZ1bmN0aW9uKHJlc3BvbmRlcikgew0KICAgIHRoaXMucmVzcG9uZGVycyA9IHRoaXMucmVzcG9uZGVycy53aXRob3V0KHJlc3BvbmRlcik7DQogIH0sDQoNCiAgZGlzcGF0Y2g6IGZ1bmN0aW9uKGNhbGxiYWNrLCByZXF1ZXN0LCB0cmFuc3BvcnQsIGpzb24pIHsNCiAgICB0aGlzLmVhY2goZnVuY3Rpb24ocmVzcG9uZGVyKSB7DQogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24ocmVzcG9uZGVyW2NhbGxiYWNrXSkpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICByZXNwb25kZXJbY2FsbGJhY2tdLmFwcGx5KHJlc3BvbmRlciwgW3JlcXVlc3QsIHRyYW5zcG9ydCwganNvbl0pOw0KICAgICAgICB9IGNhdGNoIChlKSB7IH0NCiAgICAgIH0NCiAgICB9KTsNCiAgfQ0KfTsNCg0KT2JqZWN0LmV4dGVuZChBamF4LlJlc3BvbmRlcnMsIEVudW1lcmFibGUpOw0KDQpBamF4LlJlc3BvbmRlcnMucmVnaXN0ZXIoew0KICBvbkNyZWF0ZTogICBmdW5jdGlvbigpIHsgQWpheC5hY3RpdmVSZXF1ZXN0Q291bnQrKyB9LA0KICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHsgQWpheC5hY3RpdmVSZXF1ZXN0Q291bnQtLSB9DQp9KTsNCkFqYXguQmFzZSA9IENsYXNzLmNyZWF0ZSh7DQogIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsNCiAgICB0aGlzLm9wdGlvbnMgPSB7DQogICAgICBtZXRob2Q6ICAgICAgICdwb3N0JywNCiAgICAgIGFzeW5jaHJvbm91czogdHJ1ZSwNCiAgICAgIGNvbnRlbnRUeXBlOiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsDQogICAgICBlbmNvZGluZzogICAgICdVVEYtOCcsDQogICAgICBwYXJhbWV0ZXJzOiAgICcnLA0KICAgICAgZXZhbEpTT046ICAgICB0cnVlLA0KICAgICAgZXZhbEpTOiAgICAgICB0cnVlDQogICAgfTsNCiAgICBPYmplY3QuZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7IH0pOw0KDQogICAgdGhpcy5vcHRpb25zLm1ldGhvZCA9IHRoaXMub3B0aW9ucy5tZXRob2QudG9Mb3dlckNhc2UoKTsNCg0KICAgIGlmIChPYmplY3QuaXNTdHJpbmcodGhpcy5vcHRpb25zLnBhcmFtZXRlcnMpKQ0KICAgICAgdGhpcy5vcHRpb25zLnBhcmFtZXRlcnMgPSB0aGlzLm9wdGlvbnMucGFyYW1ldGVycy50b1F1ZXJ5UGFyYW1zKCk7DQogICAgZWxzZSBpZiAoT2JqZWN0LmlzSGFzaCh0aGlzLm9wdGlvbnMucGFyYW1ldGVycykpDQogICAgICB0aGlzLm9wdGlvbnMucGFyYW1ldGVycyA9IHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzLnRvT2JqZWN0KCk7DQogIH0NCn0pOw0KQWpheC5SZXF1ZXN0ID0gQ2xhc3MuY3JlYXRlKEFqYXguQmFzZSwgew0KICBfY29tcGxldGU6IGZhbHNlLA0KDQogIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgdXJsLCBvcHRpb25zKSB7DQogICAgJHN1cGVyKG9wdGlvbnMpOw0KICAgIHRoaXMudHJhbnNwb3J0ID0gQWpheC5nZXRUcmFuc3BvcnQoKTsNCiAgICB0aGlzLnJlcXVlc3QodXJsKTsNCiAgfSwNCg0KICByZXF1ZXN0OiBmdW5jdGlvbih1cmwpIHsNCiAgICB0aGlzLnVybCA9IHVybDsNCiAgICB0aGlzLm1ldGhvZCA9IHRoaXMub3B0aW9ucy5tZXRob2Q7DQogICAgdmFyIHBhcmFtcyA9IE9iamVjdC5jbG9uZSh0aGlzLm9wdGlvbnMucGFyYW1ldGVycyk7DQoNCiAgICBpZiAoIVsnZ2V0JywgJ3Bvc3QnXS5pbmNsdWRlKHRoaXMubWV0aG9kKSkgew0KICAgICAgcGFyYW1zWydfbWV0aG9kJ10gPSB0aGlzLm1ldGhvZDsNCiAgICAgIHRoaXMubWV0aG9kID0gJ3Bvc3QnOw0KICAgIH0NCg0KICAgIHRoaXMucGFyYW1ldGVycyA9IHBhcmFtczsNCg0KICAgIGlmIChwYXJhbXMgPSBPYmplY3QudG9RdWVyeVN0cmluZyhwYXJhbXMpKSB7DQogICAgICBpZiAodGhpcy5tZXRob2QgPT0gJ2dldCcpDQogICAgICAgIHRoaXMudXJsICs9ICh0aGlzLnVybC5pbmNsdWRlKCc/JykgPyAnJicgOiAnPycpICsgcGFyYW1zOw0KICAgICAgZWxzZSBpZiAoL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpDQogICAgICAgIHBhcmFtcyArPSAnJl89JzsNCiAgICB9DQoNCiAgICB0cnkgew0KICAgICAgdmFyIHJlc3BvbnNlID0gbmV3IEFqYXguUmVzcG9uc2UodGhpcyk7DQogICAgICBpZiAodGhpcy5vcHRpb25zLm9uQ3JlYXRlKSB0aGlzLm9wdGlvbnMub25DcmVhdGUocmVzcG9uc2UpOw0KICAgICAgQWpheC5SZXNwb25kZXJzLmRpc3BhdGNoKCdvbkNyZWF0ZScsIHRoaXMsIHJlc3BvbnNlKTsNCg0KICAgICAgdGhpcy50cmFuc3BvcnQub3Blbih0aGlzLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCB0aGlzLnVybCwNCiAgICAgICAgdGhpcy5vcHRpb25zLmFzeW5jaHJvbm91cyk7DQoNCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzKSB0aGlzLnJlc3BvbmRUb1JlYWR5U3RhdGUuYmluZCh0aGlzKS5kZWZlcigxKTsNCg0KICAgICAgdGhpcy50cmFuc3BvcnQub25yZWFkeXN0YXRlY2hhbmdlID0gdGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7DQogICAgICB0aGlzLnNldFJlcXVlc3RIZWFkZXJzKCk7DQoNCiAgICAgIHRoaXMuYm9keSA9IHRoaXMubWV0aG9kID09ICdwb3N0JyA/ICh0aGlzLm9wdGlvbnMucG9zdEJvZHkgfHwgcGFyYW1zKSA6IG51bGw7DQogICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuYm9keSk7DQoNCiAgICAgIC8qIEZvcmNlIEZpcmVmb3ggdG8gaGFuZGxlIHJlYWR5IHN0YXRlIDQgZm9yIHN5bmNocm9ub3VzIHJlcXVlc3RzICovDQogICAgICBpZiAoIXRoaXMub3B0aW9ucy5hc3luY2hyb25vdXMgJiYgdGhpcy50cmFuc3BvcnQub3ZlcnJpZGVNaW1lVHlwZSkNCiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKCk7DQoNCiAgICB9DQogICAgY2F0Y2ggKGUpIHsNCiAgICAgIHRoaXMuZGlzcGF0Y2hFeGNlcHRpb24oZSk7DQogICAgfQ0KICB9LA0KDQogIG9uU3RhdGVDaGFuZ2U6IGZ1bmN0aW9uKCkgew0KICAgIHZhciByZWFkeVN0YXRlID0gdGhpcy50cmFuc3BvcnQucmVhZHlTdGF0ZTsNCiAgICBpZiAocmVhZHlTdGF0ZSA+IDEgJiYgISgocmVhZHlTdGF0ZSA9PSA0KSAmJiB0aGlzLl9jb21wbGV0ZSkpDQogICAgICB0aGlzLnJlc3BvbmRUb1JlYWR5U3RhdGUodGhpcy50cmFuc3BvcnQucmVhZHlTdGF0ZSk7DQogIH0sDQoNCiAgc2V0UmVxdWVzdEhlYWRlcnM6IGZ1bmN0aW9uKCkgew0KICAgIHZhciBoZWFkZXJzID0gew0KICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLA0KICAgICAgJ1gtUHJvdG90eXBlLVZlcnNpb24nOiBQcm90b3R5cGUuVmVyc2lvbiwNCiAgICAgICdBY2NlcHQnOiAndGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKicNCiAgICB9Ow0KDQogICAgaWYgKHRoaXMubWV0aG9kID09ICdwb3N0Jykgew0KICAgICAgaGVhZGVyc1snQ29udGVudC10eXBlJ10gPSB0aGlzLm9wdGlvbnMuY29udGVudFR5cGUgKw0KICAgICAgICAodGhpcy5vcHRpb25zLmVuY29kaW5nID8gJzsgY2hhcnNldD0nICsgdGhpcy5vcHRpb25zLmVuY29kaW5nIDogJycpOw0KDQogICAgICAvKiBGb3JjZSAiQ29ubmVjdGlvbjogY2xvc2UiIGZvciBvbGRlciBNb3ppbGxhIGJyb3dzZXJzIHRvIHdvcmsNCiAgICAgICAqIGFyb3VuZCBhIGJ1ZyB3aGVyZSBYTUxIdHRwUmVxdWVzdCBzZW5kcyBhbiBpbmNvcnJlY3QNCiAgICAgICAqIENvbnRlbnQtbGVuZ3RoIGhlYWRlci4gU2VlIE1vemlsbGEgQnVnemlsbGEgIzI0NjY1MS4NCiAgICAgICAqLw0KICAgICAgaWYgKHRoaXMudHJhbnNwb3J0Lm92ZXJyaWRlTWltZVR5cGUgJiYNCiAgICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvR2Vja29cLyhcZHs0fSkvKSB8fCBbMCwyMDA1XSlbMV0gPCAyMDA1KQ0KICAgICAgICAgICAgaGVhZGVyc1snQ29ubmVjdGlvbiddID0gJ2Nsb3NlJzsNCiAgICB9DQoNCiAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5yZXF1ZXN0SGVhZGVycyA9PSAnb2JqZWN0Jykgew0KICAgICAgdmFyIGV4dHJhcyA9IHRoaXMub3B0aW9ucy5yZXF1ZXN0SGVhZGVyczsNCg0KICAgICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKGV4dHJhcy5wdXNoKSkNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGV4dHJhcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkgKz0gMikNCiAgICAgICAgICBoZWFkZXJzW2V4dHJhc1tpXV0gPSBleHRyYXNbaSsxXTsNCiAgICAgIGVsc2UNCiAgICAgICAgJEgoZXh0cmFzKS5lYWNoKGZ1bmN0aW9uKHBhaXIpIHsgaGVhZGVyc1twYWlyLmtleV0gPSBwYWlyLnZhbHVlIH0pOw0KICAgIH0NCg0KICAgIGZvciAodmFyIG5hbWUgaW4gaGVhZGVycykNCiAgICAgIHRoaXMudHJhbnNwb3J0LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgaGVhZGVyc1tuYW1lXSk7DQogIH0sDQoNCiAgc3VjY2VzczogZnVuY3Rpb24oKSB7DQogICAgdmFyIHN0YXR1cyA9IHRoaXMuZ2V0U3RhdHVzKCk7DQogICAgcmV0dXJuICFzdGF0dXMgfHwgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKTsNCiAgfSwNCg0KICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkgew0KICAgIHRyeSB7DQogICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc3RhdHVzIHx8IDA7DQogICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gMCB9DQogIH0sDQoNCiAgcmVzcG9uZFRvUmVhZHlTdGF0ZTogZnVuY3Rpb24ocmVhZHlTdGF0ZSkgew0KICAgIHZhciBzdGF0ZSA9IEFqYXguUmVxdWVzdC5FdmVudHNbcmVhZHlTdGF0ZV0sIHJlc3BvbnNlID0gbmV3IEFqYXguUmVzcG9uc2UodGhpcyk7DQoNCiAgICBpZiAoc3RhdGUgPT0gJ0NvbXBsZXRlJykgew0KICAgICAgdHJ5IHsNCiAgICAgICAgdGhpcy5fY29tcGxldGUgPSB0cnVlOw0KICAgICAgICAodGhpcy5vcHRpb25zWydvbicgKyByZXNwb25zZS5zdGF0dXNdDQogICAgICAgICB8fCB0aGlzLm9wdGlvbnNbJ29uJyArICh0aGlzLnN1Y2Nlc3MoKSA/ICdTdWNjZXNzJyA6ICdGYWlsdXJlJyldDQogICAgICAgICB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikocmVzcG9uc2UsIHJlc3BvbnNlLmhlYWRlckpTT04pOw0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICB0aGlzLmRpc3BhdGNoRXhjZXB0aW9uKGUpOw0KICAgICAgfQ0KDQogICAgICB2YXIgY29udGVudFR5cGUgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0NvbnRlbnQtdHlwZScpOw0KICAgICAgaWYgKHRoaXMub3B0aW9ucy5ldmFsSlMgPT0gJ2ZvcmNlJw0KICAgICAgICAgIHx8ICh0aGlzLm9wdGlvbnMuZXZhbEpTICYmIHRoaXMuaXNTYW1lT3JpZ2luKCkgJiYgY29udGVudFR5cGUNCiAgICAgICAgICAmJiBjb250ZW50VHlwZS5tYXRjaCgvXlxzKih0ZXh0fGFwcGxpY2F0aW9uKVwvKHgtKT8oamF2YXxlY21hKXNjcmlwdCg7LiopP1xzKiQvaSkpKQ0KICAgICAgICB0aGlzLmV2YWxSZXNwb25zZSgpOw0KICAgIH0NCg0KICAgIHRyeSB7DQogICAgICAodGhpcy5vcHRpb25zWydvbicgKyBzdGF0ZV0gfHwgUHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pKHJlc3BvbnNlLCByZXNwb25zZS5oZWFkZXJKU09OKTsNCiAgICAgIEFqYXguUmVzcG9uZGVycy5kaXNwYXRjaCgnb24nICsgc3RhdGUsIHRoaXMsIHJlc3BvbnNlLCByZXNwb25zZS5oZWFkZXJKU09OKTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICB0aGlzLmRpc3BhdGNoRXhjZXB0aW9uKGUpOw0KICAgIH0NCg0KICAgIGlmIChzdGF0ZSA9PSAnQ29tcGxldGUnKSB7DQogICAgICB0aGlzLnRyYW5zcG9ydC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbjsNCiAgICB9DQogIH0sDQoNCiAgaXNTYW1lT3JpZ2luOiBmdW5jdGlvbigpIHsNCiAgICB2YXIgbSA9IHRoaXMudXJsLm1hdGNoKC9eXHMqaHR0cHM/OlwvXC9bXlwvXSovKTsNCiAgICByZXR1cm4gIW0gfHwgKG1bMF0gPT0gJyN7cHJvdG9jb2x9Ly8je2RvbWFpbn0je3BvcnR9Jy5pbnRlcnBvbGF0ZSh7DQogICAgICBwcm90b2NvbDogbG9jYXRpb24ucHJvdG9jb2wsDQogICAgICBkb21haW46IGRvY3VtZW50LmRvbWFpbiwNCiAgICAgIHBvcnQ6IGxvY2F0aW9uLnBvcnQgPyAnOicgKyBsb2NhdGlvbi5wb3J0IDogJycNCiAgICB9KSk7DQogIH0sDQoNCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRSZXNwb25zZUhlYWRlcihuYW1lKSB8fCBudWxsOw0KICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH0NCiAgfSwNCg0KICBldmFsUmVzcG9uc2U6IGZ1bmN0aW9uKCkgew0KICAgIHRyeSB7DQogICAgICByZXR1cm4gZXZhbCgodGhpcy50cmFuc3BvcnQucmVzcG9uc2VUZXh0IHx8ICcnKS51bmZpbHRlckpTT04oKSk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgdGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihlKTsNCiAgICB9DQogIH0sDQoNCiAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikgew0KICAgICh0aGlzLm9wdGlvbnMub25FeGNlcHRpb24gfHwgUHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pKHRoaXMsIGV4Y2VwdGlvbik7DQogICAgQWpheC5SZXNwb25kZXJzLmRpc3BhdGNoKCdvbkV4Y2VwdGlvbicsIHRoaXMsIGV4Y2VwdGlvbik7DQogIH0NCn0pOw0KDQpBamF4LlJlcXVlc3QuRXZlbnRzID0NCiAgWydVbmluaXRpYWxpemVkJywgJ0xvYWRpbmcnLCAnTG9hZGVkJywgJ0ludGVyYWN0aXZlJywgJ0NvbXBsZXRlJ107DQoNCg0KDQoNCg0KDQoNCg0KQWpheC5SZXNwb25zZSA9IENsYXNzLmNyZWF0ZSh7DQogIGluaXRpYWxpemU6IGZ1bmN0aW9uKHJlcXVlc3Qpew0KICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7DQogICAgdmFyIHRyYW5zcG9ydCAgPSB0aGlzLnRyYW5zcG9ydCAgPSByZXF1ZXN0LnRyYW5zcG9ydCwNCiAgICAgICAgcmVhZHlTdGF0ZSA9IHRoaXMucmVhZHlTdGF0ZSA9IHRyYW5zcG9ydC5yZWFkeVN0YXRlOw0KDQogICAgaWYoKHJlYWR5U3RhdGUgPiAyICYmICFQcm90b3R5cGUuQnJvd3Nlci5JRSkgfHwgcmVhZHlTdGF0ZSA9PSA0KSB7DQogICAgICB0aGlzLnN0YXR1cyAgICAgICA9IHRoaXMuZ2V0U3RhdHVzKCk7DQogICAgICB0aGlzLnN0YXR1c1RleHQgICA9IHRoaXMuZ2V0U3RhdHVzVGV4dCgpOw0KICAgICAgdGhpcy5yZXNwb25zZVRleHQgPSBTdHJpbmcuaW50ZXJwcmV0KHRyYW5zcG9ydC5yZXNwb25zZVRleHQpOw0KICAgICAgdGhpcy5oZWFkZXJKU09OICAgPSB0aGlzLl9nZXRIZWFkZXJKU09OKCk7DQogICAgfQ0KDQogICAgaWYocmVhZHlTdGF0ZSA9PSA0KSB7DQogICAgICB2YXIgeG1sID0gdHJhbnNwb3J0LnJlc3BvbnNlWE1MOw0KICAgICAgdGhpcy5yZXNwb25zZVhNTCAgPSBPYmplY3QuaXNVbmRlZmluZWQoeG1sKSA/IG51bGwgOiB4bWw7DQogICAgICB0aGlzLnJlc3BvbnNlSlNPTiA9IHRoaXMuX2dldFJlc3BvbnNlSlNPTigpOw0KICAgIH0NCiAgfSwNCg0KICBzdGF0dXM6ICAgICAgMCwNCg0KICBzdGF0dXNUZXh0OiAnJywNCg0KICBnZXRTdGF0dXM6IEFqYXguUmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhdHVzLA0KDQogIGdldFN0YXR1c1RleHQ6IGZ1bmN0aW9uKCkgew0KICAgIHRyeSB7DQogICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc3RhdHVzVGV4dCB8fCAnJzsNCiAgICB9IGNhdGNoIChlKSB7IHJldHVybiAnJyB9DQogIH0sDQoNCiAgZ2V0SGVhZGVyOiBBamF4LlJlcXVlc3QucHJvdG90eXBlLmdldEhlYWRlciwNCg0KICBnZXRBbGxIZWFkZXJzOiBmdW5jdGlvbigpIHsNCiAgICB0cnkgew0KICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7DQogICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbCB9DQogIH0sDQoNCiAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKG5hbWUpIHsNCiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSk7DQogIH0sDQoNCiAgZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7DQogIH0sDQoNCiAgX2dldEhlYWRlckpTT046IGZ1bmN0aW9uKCkgew0KICAgIHZhciBqc29uID0gdGhpcy5nZXRIZWFkZXIoJ1gtSlNPTicpOw0KICAgIGlmICghanNvbikgcmV0dXJuIG51bGw7DQogICAganNvbiA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoanNvbikpOw0KICAgIHRyeSB7DQogICAgICByZXR1cm4ganNvbi5ldmFsSlNPTih0aGlzLnJlcXVlc3Qub3B0aW9ucy5zYW5pdGl6ZUpTT04gfHwNCiAgICAgICAgIXRoaXMucmVxdWVzdC5pc1NhbWVPcmlnaW4oKSk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgdGhpcy5yZXF1ZXN0LmRpc3BhdGNoRXhjZXB0aW9uKGUpOw0KICAgIH0NCiAgfSwNCg0KICBfZ2V0UmVzcG9uc2VKU09OOiBmdW5jdGlvbigpIHsNCiAgICB2YXIgb3B0aW9ucyA9IHRoaXMucmVxdWVzdC5vcHRpb25zOw0KICAgIGlmICghb3B0aW9ucy5ldmFsSlNPTiB8fCAob3B0aW9ucy5ldmFsSlNPTiAhPSAnZm9yY2UnICYmDQogICAgICAhKHRoaXMuZ2V0SGVhZGVyKCdDb250ZW50LXR5cGUnKSB8fCAnJykuaW5jbHVkZSgnYXBwbGljYXRpb24vanNvbicpKSB8fA0KICAgICAgICB0aGlzLnJlc3BvbnNlVGV4dC5ibGFuaygpKQ0KICAgICAgICAgIHJldHVybiBudWxsOw0KICAgIHRyeSB7DQogICAgICByZXR1cm4gdGhpcy5yZXNwb25zZVRleHQuZXZhbEpTT04ob3B0aW9ucy5zYW5pdGl6ZUpTT04gfHwNCiAgICAgICAgIXRoaXMucmVxdWVzdC5pc1NhbWVPcmlnaW4oKSk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgdGhpcy5yZXF1ZXN0LmRpc3BhdGNoRXhjZXB0aW9uKGUpOw0KICAgIH0NCiAgfQ0KfSk7DQoNCkFqYXguVXBkYXRlciA9IENsYXNzLmNyZWF0ZShBamF4LlJlcXVlc3QsIHsNCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oJHN1cGVyLCBjb250YWluZXIsIHVybCwgb3B0aW9ucykgew0KICAgIHRoaXMuY29udGFpbmVyID0gew0KICAgICAgc3VjY2VzczogKGNvbnRhaW5lci5zdWNjZXNzIHx8IGNvbnRhaW5lciksDQogICAgICBmYWlsdXJlOiAoY29udGFpbmVyLmZhaWx1cmUgfHwgKGNvbnRhaW5lci5zdWNjZXNzID8gbnVsbCA6IGNvbnRhaW5lcikpDQogICAgfTsNCg0KICAgIG9wdGlvbnMgPSBPYmplY3QuY2xvbmUob3B0aW9ucyk7DQogICAgdmFyIG9uQ29tcGxldGUgPSBvcHRpb25zLm9uQ29tcGxldGU7DQogICAgb3B0aW9ucy5vbkNvbXBsZXRlID0gKGZ1bmN0aW9uKHJlc3BvbnNlLCBqc29uKSB7DQogICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsNCiAgICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihvbkNvbXBsZXRlKSkgb25Db21wbGV0ZShyZXNwb25zZSwganNvbik7DQogICAgfSkuYmluZCh0aGlzKTsNCg0KICAgICRzdXBlcih1cmwsIG9wdGlvbnMpOw0KICB9LA0KDQogIHVwZGF0ZUNvbnRlbnQ6IGZ1bmN0aW9uKHJlc3BvbnNlVGV4dCkgew0KICAgIHZhciByZWNlaXZlciA9IHRoaXMuY29udGFpbmVyW3RoaXMuc3VjY2VzcygpID8gJ3N1Y2Nlc3MnIDogJ2ZhaWx1cmUnXSwNCiAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsNCg0KICAgIGlmICghb3B0aW9ucy5ldmFsU2NyaXB0cykgcmVzcG9uc2VUZXh0ID0gcmVzcG9uc2VUZXh0LnN0cmlwU2NyaXB0cygpOw0KDQogICAgaWYgKHJlY2VpdmVyID0gJChyZWNlaXZlcikpIHsNCiAgICAgIGlmIChvcHRpb25zLmluc2VydGlvbikgew0KICAgICAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKG9wdGlvbnMuaW5zZXJ0aW9uKSkgew0KICAgICAgICAgIHZhciBpbnNlcnRpb24gPSB7IH07IGluc2VydGlvbltvcHRpb25zLmluc2VydGlvbl0gPSByZXNwb25zZVRleHQ7DQogICAgICAgICAgcmVjZWl2ZXIuaW5zZXJ0KGluc2VydGlvbik7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBvcHRpb25zLmluc2VydGlvbihyZWNlaXZlciwgcmVzcG9uc2VUZXh0KTsNCiAgICAgIH0NCiAgICAgIGVsc2UgcmVjZWl2ZXIudXBkYXRlKHJlc3BvbnNlVGV4dCk7DQogICAgfQ0KICB9DQp9KTsNCg0KQWpheC5QZXJpb2RpY2FsVXBkYXRlciA9IENsYXNzLmNyZWF0ZShBamF4LkJhc2UsIHsNCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oJHN1cGVyLCBjb250YWluZXIsIHVybCwgb3B0aW9ucykgew0KICAgICRzdXBlcihvcHRpb25zKTsNCiAgICB0aGlzLm9uQ29tcGxldGUgPSB0aGlzLm9wdGlvbnMub25Db21wbGV0ZTsNCg0KICAgIHRoaXMuZnJlcXVlbmN5ID0gKHRoaXMub3B0aW9ucy5mcmVxdWVuY3kgfHwgMik7DQogICAgdGhpcy5kZWNheSA9ICh0aGlzLm9wdGlvbnMuZGVjYXkgfHwgMSk7DQoNCiAgICB0aGlzLnVwZGF0ZXIgPSB7IH07DQogICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7DQogICAgdGhpcy51cmwgPSB1cmw7DQoNCiAgICB0aGlzLnN0YXJ0KCk7DQogIH0sDQoNCiAgc3RhcnQ6IGZ1bmN0aW9uKCkgew0KICAgIHRoaXMub3B0aW9ucy5vbkNvbXBsZXRlID0gdGhpcy51cGRhdGVDb21wbGV0ZS5iaW5kKHRoaXMpOw0KICAgIHRoaXMub25UaW1lckV2ZW50KCk7DQogIH0sDQoNCiAgc3RvcDogZnVuY3Rpb24oKSB7DQogICAgdGhpcy51cGRhdGVyLm9wdGlvbnMub25Db21wbGV0ZSA9IHVuZGVmaW5lZDsNCiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7DQogICAgKHRoaXMub25Db21wbGV0ZSB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgfSwNCg0KICB1cGRhdGVDb21wbGV0ZTogZnVuY3Rpb24ocmVzcG9uc2UpIHsNCiAgICBpZiAodGhpcy5vcHRpb25zLmRlY2F5KSB7DQogICAgICB0aGlzLmRlY2F5ID0gKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCA9PSB0aGlzLmxhc3RUZXh0ID8NCiAgICAgICAgdGhpcy5kZWNheSAqIHRoaXMub3B0aW9ucy5kZWNheSA6IDEpOw0KDQogICAgICB0aGlzLmxhc3RUZXh0ID0gcmVzcG9uc2UucmVzcG9uc2VUZXh0Ow0KICAgIH0NCiAgICB0aGlzLnRpbWVyID0gdGhpcy5vblRpbWVyRXZlbnQuYmluZCh0aGlzKS5kZWxheSh0aGlzLmRlY2F5ICogdGhpcy5mcmVxdWVuY3kpOw0KICB9LA0KDQogIG9uVGltZXJFdmVudDogZnVuY3Rpb24oKSB7DQogICAgdGhpcy51cGRhdGVyID0gbmV3IEFqYXguVXBkYXRlcih0aGlzLmNvbnRhaW5lciwgdGhpcy51cmwsIHRoaXMub3B0aW9ucyk7DQogIH0NCn0pOw0KDQoNCg0KZnVuY3Rpb24gJChlbGVtZW50KSB7DQogIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgew0KICAgIGZvciAodmFyIGkgPSAwLCBlbGVtZW50cyA9IFtdLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspDQogICAgICBlbGVtZW50cy5wdXNoKCQoYXJndW1lbnRzW2ldKSk7DQogICAgcmV0dXJuIGVsZW1lbnRzOw0KICB9DQogIGlmIChPYmplY3QuaXNTdHJpbmcoZWxlbWVudCkpDQogICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpOw0KICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7DQp9DQoNCmlmIChQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLlhQYXRoKSB7DQogIGRvY3VtZW50Ll9nZXRFbGVtZW50c0J5WFBhdGggPSBmdW5jdGlvbihleHByZXNzaW9uLCBwYXJlbnRFbGVtZW50KSB7DQogICAgdmFyIHJlc3VsdHMgPSBbXTsNCiAgICB2YXIgcXVlcnkgPSBkb2N1bWVudC5ldmFsdWF0ZShleHByZXNzaW9uLCAkKHBhcmVudEVsZW1lbnQpIHx8IGRvY3VtZW50LA0KICAgICAgbnVsbCwgWFBhdGhSZXN1bHQuT1JERVJFRF9OT0RFX1NOQVBTSE9UX1RZUEUsIG51bGwpOw0KICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBxdWVyeS5zbmFwc2hvdExlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKQ0KICAgICAgcmVzdWx0cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKHF1ZXJ5LnNuYXBzaG90SXRlbShpKSkpOw0KICAgIHJldHVybiByZXN1bHRzOw0KICB9Ow0KfQ0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KaWYgKCF3aW5kb3cuTm9kZSkgdmFyIE5vZGUgPSB7IH07DQoNCmlmICghTm9kZS5FTEVNRU5UX05PREUpIHsNCiAgT2JqZWN0LmV4dGVuZChOb2RlLCB7DQogICAgRUxFTUVOVF9OT0RFOiAxLA0KICAgIEFUVFJJQlVURV9OT0RFOiAyLA0KICAgIFRFWFRfTk9ERTogMywNCiAgICBDREFUQV9TRUNUSU9OX05PREU6IDQsDQogICAgRU5USVRZX1JFRkVSRU5DRV9OT0RFOiA1LA0KICAgIEVOVElUWV9OT0RFOiA2LA0KICAgIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERTogNywNCiAgICBDT01NRU5UX05PREU6IDgsDQogICAgRE9DVU1FTlRfTk9ERTogOSwNCiAgICBET0NVTUVOVF9UWVBFX05PREU6IDEwLA0KICAgIERPQ1VNRU5UX0ZSQUdNRU5UX05PREU6IDExLA0KICAgIE5PVEFUSU9OX05PREU6IDEyDQogIH0pOw0KfQ0KDQoNCihmdW5jdGlvbihnbG9iYWwpIHsNCg0KICB2YXIgU0VUQVRUUklCVVRFX0lHTk9SRVNfTkFNRSA9IChmdW5jdGlvbigpew0KICAgIHZhciBlbEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7DQogICAgdmFyIGVsSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KICAgIHZhciByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Ow0KICAgIGVsSW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwgInRlc3QiKTsNCiAgICBlbEZvcm0uYXBwZW5kQ2hpbGQoZWxJbnB1dCk7DQogICAgcm9vdC5hcHBlbmRDaGlsZChlbEZvcm0pOw0KICAgIHZhciBpc0J1Z2d5ID0gZWxGb3JtLmVsZW1lbnRzDQogICAgICA/ICh0eXBlb2YgZWxGb3JtLmVsZW1lbnRzLnRlc3QgPT0gInVuZGVmaW5lZCIpDQogICAgICA6IG51bGw7DQogICAgcm9vdC5yZW1vdmVDaGlsZChlbEZvcm0pOw0KICAgIGVsRm9ybSA9IGVsSW5wdXQgPSBudWxsOw0KICAgIHJldHVybiBpc0J1Z2d5Ow0KICB9KSgpOw0KDQogIHZhciBlbGVtZW50ID0gZ2xvYmFsLkVsZW1lbnQ7DQogIGdsb2JhbC5FbGVtZW50ID0gZnVuY3Rpb24odGFnTmFtZSwgYXR0cmlidXRlcykgew0KICAgIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzIHx8IHsgfTsNCiAgICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpOw0KICAgIHZhciBjYWNoZSA9IEVsZW1lbnQuY2FjaGU7DQogICAgaWYgKFNFVEFUVFJJQlVURV9JR05PUkVTX05BTUUgJiYgYXR0cmlidXRlcy5uYW1lKSB7DQogICAgICB0YWdOYW1lID0gJzwnICsgdGFnTmFtZSArICcgbmFtZT0iJyArIGF0dHJpYnV0ZXMubmFtZSArICciPic7DQogICAgICBkZWxldGUgYXR0cmlidXRlcy5uYW1lOw0KICAgICAgcmV0dXJuIEVsZW1lbnQud3JpdGVBdHRyaWJ1dGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSwgYXR0cmlidXRlcyk7DQogICAgfQ0KICAgIGlmICghY2FjaGVbdGFnTmFtZV0pIGNhY2hlW3RhZ05hbWVdID0gRWxlbWVudC5leHRlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSk7DQogICAgcmV0dXJuIEVsZW1lbnQud3JpdGVBdHRyaWJ1dGUoY2FjaGVbdGFnTmFtZV0uY2xvbmVOb2RlKGZhbHNlKSwgYXR0cmlidXRlcyk7DQogIH07DQogIE9iamVjdC5leHRlbmQoZ2xvYmFsLkVsZW1lbnQsIGVsZW1lbnQgfHwgeyB9KTsNCiAgaWYgKGVsZW1lbnQpIGdsb2JhbC5FbGVtZW50LnByb3RvdHlwZSA9IGVsZW1lbnQucHJvdG90eXBlOw0KfSkodGhpcyk7DQoNCkVsZW1lbnQuY2FjaGUgPSB7IH07DQpFbGVtZW50LmlkQ291bnRlciA9IDE7DQoNCkVsZW1lbnQuTWV0aG9kcyA9IHsNCiAgdmlzaWJsZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHJldHVybiAkKGVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnOw0KICB9LA0KDQogIHRvZ2dsZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIEVsZW1lbnRbRWxlbWVudC52aXNpYmxlKGVsZW1lbnQpID8gJ2hpZGUnIDogJ3Nob3cnXShlbGVtZW50KTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KDQogIGhpZGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgc2hvdzogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIHJlbW92ZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICB1cGRhdGU6IChmdW5jdGlvbigpew0KDQogICAgdmFyIFNFTEVDVF9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSA9IChmdW5jdGlvbigpew0KICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksDQogICAgICAgICAgaXNCdWdneSA9IHRydWU7DQogICAgICBlbC5pbm5lckhUTUwgPSAiPG9wdGlvbiB2YWx1ZT1cInRlc3RcIj50ZXN0PC9vcHRpb24+IjsNCiAgICAgIGlmIChlbC5vcHRpb25zICYmIGVsLm9wdGlvbnNbMF0pIHsNCiAgICAgICAgaXNCdWdneSA9IGVsLm9wdGlvbnNbMF0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gIk9QVElPTiI7DQogICAgICB9DQogICAgICBlbCA9IG51bGw7DQogICAgICByZXR1cm4gaXNCdWdneTsNCiAgICB9KSgpOw0KDQogICAgdmFyIFRBQkxFX0VMRU1FTlRfSU5ORVJIVE1MX0JVR0dZID0gKGZ1bmN0aW9uKCl7DQogICAgICB0cnkgew0KICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpOw0KICAgICAgICBpZiAoZWwgJiYgZWwudEJvZGllcykgew0KICAgICAgICAgIGVsLmlubmVySFRNTCA9ICI8dGJvZHk+PHRyPjx0ZD50ZXN0PC90ZD48L3RyPjwvdGJvZHk+IjsNCiAgICAgICAgICB2YXIgaXNCdWdneSA9IHR5cGVvZiBlbC50Qm9kaWVzWzBdID09ICJ1bmRlZmluZWQiOw0KICAgICAgICAgIGVsID0gbnVsbDsNCiAgICAgICAgICByZXR1cm4gaXNCdWdneTsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICB9KSgpOw0KDQogICAgdmFyIFNDUklQVF9FTEVNRU5UX1JFSkVDVFNfVEVYVE5PREVfQVBQRU5ESU5HID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksDQogICAgICAgICAgaXNCdWdneSA9IGZhbHNlOw0KICAgICAgdHJ5IHsNCiAgICAgICAgcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpOw0KICAgICAgICBpc0J1Z2d5ID0gIXMuZmlyc3RDaGlsZCB8fA0KICAgICAgICAgIHMuZmlyc3RDaGlsZCAmJiBzLmZpcnN0Q2hpbGQubm9kZVR5cGUgIT09IDM7DQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGlzQnVnZ3kgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgcyA9IG51bGw7DQogICAgICByZXR1cm4gaXNCdWdneTsNCiAgICB9KSgpOw0KDQogICAgZnVuY3Rpb24gdXBkYXRlKGVsZW1lbnQsIGNvbnRlbnQpIHsNCiAgICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KDQogICAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnRvRWxlbWVudCkNCiAgICAgICAgY29udGVudCA9IGNvbnRlbnQudG9FbGVtZW50KCk7DQoNCiAgICAgIGlmIChPYmplY3QuaXNFbGVtZW50KGNvbnRlbnQpKQ0KICAgICAgICByZXR1cm4gZWxlbWVudC51cGRhdGUoKS5pbnNlcnQoY29udGVudCk7DQoNCiAgICAgIGNvbnRlbnQgPSBPYmplY3QudG9IVE1MKGNvbnRlbnQpOw0KDQogICAgICB2YXIgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICBpZiAodGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgU0NSSVBUX0VMRU1FTlRfUkVKRUNUU19URVhUTk9ERV9BUFBFTkRJTkcpIHsNCiAgICAgICAgZWxlbWVudC50ZXh0ID0gY29udGVudDsNCiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7DQogICAgICB9DQoNCiAgICAgIGlmIChTRUxFQ1RfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kgfHwgVEFCTEVfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kpIHsNCiAgICAgICAgaWYgKHRhZ05hbWUgaW4gRWxlbWVudC5faW5zZXJ0aW9uVHJhbnNsYXRpb25zLnRhZ3MpIHsNCiAgICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7DQogICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIEVsZW1lbnQuX2dldENvbnRlbnRGcm9tQW5vbnltb3VzRWxlbWVudCh0YWdOYW1lLCBjb250ZW50LnN0cmlwU2NyaXB0cygpKQ0KICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24obm9kZSkgew0KICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQuc3RyaXBTY3JpcHRzKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGVsc2Ugew0KICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQuc3RyaXBTY3JpcHRzKCk7DQogICAgICB9DQoNCiAgICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOw0KICAgICAgcmV0dXJuIGVsZW1lbnQ7DQogICAgfQ0KDQogICAgcmV0dXJuIHVwZGF0ZTsNCiAgfSkoKSwNCg0KICByZXBsYWNlOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b0VsZW1lbnQpIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOw0KICAgIGVsc2UgaWYgKCFPYmplY3QuaXNFbGVtZW50KGNvbnRlbnQpKSB7DQogICAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsNCiAgICAgIHZhciByYW5nZSA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpOw0KICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShlbGVtZW50KTsNCiAgICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOw0KICAgICAgY29udGVudCA9IHJhbmdlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChjb250ZW50LnN0cmlwU2NyaXB0cygpKTsNCiAgICB9DQogICAgZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjb250ZW50LCBlbGVtZW50KTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICBpbnNlcnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGluc2VydGlvbnMpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCg0KICAgIGlmIChPYmplY3QuaXNTdHJpbmcoaW5zZXJ0aW9ucykgfHwgT2JqZWN0LmlzTnVtYmVyKGluc2VydGlvbnMpIHx8DQogICAgICAgIE9iamVjdC5pc0VsZW1lbnQoaW5zZXJ0aW9ucykgfHwgKGluc2VydGlvbnMgJiYgKGluc2VydGlvbnMudG9FbGVtZW50IHx8IGluc2VydGlvbnMudG9IVE1MKSkpDQogICAgICAgICAgaW5zZXJ0aW9ucyA9IHtib3R0b206aW5zZXJ0aW9uc307DQoNCiAgICB2YXIgY29udGVudCwgaW5zZXJ0LCB0YWdOYW1lLCBjaGlsZE5vZGVzOw0KDQogICAgZm9yICh2YXIgcG9zaXRpb24gaW4gaW5zZXJ0aW9ucykgew0KICAgICAgY29udGVudCAgPSBpbnNlcnRpb25zW3Bvc2l0aW9uXTsNCiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24udG9Mb3dlckNhc2UoKTsNCiAgICAgIGluc2VydCA9IEVsZW1lbnQuX2luc2VydGlvblRyYW5zbGF0aW9uc1twb3NpdGlvbl07DQoNCiAgICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQudG9FbGVtZW50KSBjb250ZW50ID0gY29udGVudC50b0VsZW1lbnQoKTsNCiAgICAgIGlmIChPYmplY3QuaXNFbGVtZW50KGNvbnRlbnQpKSB7DQogICAgICAgIGluc2VydChlbGVtZW50LCBjb250ZW50KTsNCiAgICAgICAgY29udGludWU7DQogICAgICB9DQoNCiAgICAgIGNvbnRlbnQgPSBPYmplY3QudG9IVE1MKGNvbnRlbnQpOw0KDQogICAgICB0YWdOYW1lID0gKChwb3NpdGlvbiA9PSAnYmVmb3JlJyB8fCBwb3NpdGlvbiA9PSAnYWZ0ZXInKQ0KICAgICAgICA/IGVsZW1lbnQucGFyZW50Tm9kZSA6IGVsZW1lbnQpLnRhZ05hbWUudG9VcHBlckNhc2UoKTsNCg0KICAgICAgY2hpbGROb2RlcyA9IEVsZW1lbnQuX2dldENvbnRlbnRGcm9tQW5vbnltb3VzRWxlbWVudCh0YWdOYW1lLCBjb250ZW50LnN0cmlwU2NyaXB0cygpKTsNCg0KICAgICAgaWYgKHBvc2l0aW9uID09ICd0b3AnIHx8IHBvc2l0aW9uID09ICdhZnRlcicpIGNoaWxkTm9kZXMucmV2ZXJzZSgpOw0KICAgICAgY2hpbGROb2Rlcy5lYWNoKGluc2VydC5jdXJyeShlbGVtZW50KSk7DQoNCiAgICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOw0KICAgIH0NCg0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIHdyYXA6IGZ1bmN0aW9uKGVsZW1lbnQsIHdyYXBwZXIsIGF0dHJpYnV0ZXMpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoT2JqZWN0LmlzRWxlbWVudCh3cmFwcGVyKSkNCiAgICAgICQod3JhcHBlcikud3JpdGVBdHRyaWJ1dGUoYXR0cmlidXRlcyB8fCB7IH0pOw0KICAgIGVsc2UgaWYgKE9iamVjdC5pc1N0cmluZyh3cmFwcGVyKSkgd3JhcHBlciA9IG5ldyBFbGVtZW50KHdyYXBwZXIsIGF0dHJpYnV0ZXMpOw0KICAgIGVsc2Ugd3JhcHBlciA9IG5ldyBFbGVtZW50KCdkaXYnLCB3cmFwcGVyKTsNCiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKQ0KICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbGVtZW50KTsNCiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpOw0KICAgIHJldHVybiB3cmFwcGVyOw0KICB9LA0KDQogIGluc3BlY3Q6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgcmVzdWx0ID0gJzwnICsgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgJEgoeydpZCc6ICdpZCcsICdjbGFzc05hbWUnOiAnY2xhc3MnfSkuZWFjaChmdW5jdGlvbihwYWlyKSB7DQogICAgICB2YXIgcHJvcGVydHkgPSBwYWlyLmZpcnN0KCksIGF0dHJpYnV0ZSA9IHBhaXIubGFzdCgpOw0KICAgICAgdmFyIHZhbHVlID0gKGVsZW1lbnRbcHJvcGVydHldIHx8ICcnKS50b1N0cmluZygpOw0KICAgICAgaWYgKHZhbHVlKSByZXN1bHQgKz0gJyAnICsgYXR0cmlidXRlICsgJz0nICsgdmFsdWUuaW5zcGVjdCh0cnVlKTsNCiAgICB9KTsNCiAgICByZXR1cm4gcmVzdWx0ICsgJz4nOw0KICB9LA0KDQogIHJlY3Vyc2l2ZWx5Q29sbGVjdDogZnVuY3Rpb24oZWxlbWVudCwgcHJvcGVydHkpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgZWxlbWVudHMgPSBbXTsNCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnRbcHJvcGVydHldKQ0KICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT0gMSkNCiAgICAgICAgZWxlbWVudHMucHVzaChFbGVtZW50LmV4dGVuZChlbGVtZW50KSk7DQogICAgcmV0dXJuIGVsZW1lbnRzOw0KICB9LA0KDQogIGFuY2VzdG9yczogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHJldHVybiBFbGVtZW50LnJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncGFyZW50Tm9kZScpOw0KICB9LA0KDQogIGRlc2NlbmRhbnRzOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgcmV0dXJuIEVsZW1lbnQuc2VsZWN0KGVsZW1lbnQsICIqIik7DQogIH0sDQoNCiAgZmlyc3REZXNjZW5kYW50OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCkuZmlyc3RDaGlsZDsNCiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlICE9IDEpIGVsZW1lbnQgPSBlbGVtZW50Lm5leHRTaWJsaW5nOw0KICAgIHJldHVybiAkKGVsZW1lbnQpOw0KICB9LA0KDQogIGltbWVkaWF0ZURlc2NlbmRhbnRzOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkuZmlyc3RDaGlsZCkpIHJldHVybiBbXTsNCiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlICE9IDEpIGVsZW1lbnQgPSBlbGVtZW50Lm5leHRTaWJsaW5nOw0KICAgIGlmIChlbGVtZW50KSByZXR1cm4gW2VsZW1lbnRdLmNvbmNhdCgkKGVsZW1lbnQpLm5leHRTaWJsaW5ncygpKTsNCiAgICByZXR1cm4gW107DQogIH0sDQoNCiAgcHJldmlvdXNTaWJsaW5nczogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHJldHVybiBFbGVtZW50LnJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncHJldmlvdXNTaWJsaW5nJyk7DQogIH0sDQoNCiAgbmV4dFNpYmxpbmdzOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgcmV0dXJuIEVsZW1lbnQucmVjdXJzaXZlbHlDb2xsZWN0KGVsZW1lbnQsICduZXh0U2libGluZycpOw0KICB9LA0KDQogIHNpYmxpbmdzOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgcmV0dXJuIEVsZW1lbnQucHJldmlvdXNTaWJsaW5ncyhlbGVtZW50KS5yZXZlcnNlKCkNCiAgICAgIC5jb25jYXQoRWxlbWVudC5uZXh0U2libGluZ3MoZWxlbWVudCkpOw0KICB9LA0KDQogIG1hdGNoOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rvcikgew0KICAgIGlmIChPYmplY3QuaXNTdHJpbmcoc2VsZWN0b3IpKQ0KICAgICAgc2VsZWN0b3IgPSBuZXcgU2VsZWN0b3Ioc2VsZWN0b3IpOw0KICAgIHJldHVybiBzZWxlY3Rvci5tYXRjaCgkKGVsZW1lbnQpKTsNCiAgfSwNCg0KICB1cDogZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgaW5kZXgpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSByZXR1cm4gJChlbGVtZW50LnBhcmVudE5vZGUpOw0KICAgIHZhciBhbmNlc3RvcnMgPSBFbGVtZW50LmFuY2VzdG9ycyhlbGVtZW50KTsNCiAgICByZXR1cm4gT2JqZWN0LmlzTnVtYmVyKGV4cHJlc3Npb24pID8gYW5jZXN0b3JzW2V4cHJlc3Npb25dIDoNCiAgICAgIFNlbGVjdG9yLmZpbmRFbGVtZW50KGFuY2VzdG9ycywgZXhwcmVzc2lvbiwgaW5kZXgpOw0KICB9LA0KDQogIGRvd246IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIGluZGV4KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgcmV0dXJuIEVsZW1lbnQuZmlyc3REZXNjZW5kYW50KGVsZW1lbnQpOw0KICAgIHJldHVybiBPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikgPyBFbGVtZW50LmRlc2NlbmRhbnRzKGVsZW1lbnQpW2V4cHJlc3Npb25dIDoNCiAgICAgIEVsZW1lbnQuc2VsZWN0KGVsZW1lbnQsIGV4cHJlc3Npb24pW2luZGV4IHx8IDBdOw0KICB9LA0KDQogIHByZXZpb3VzOiBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBpbmRleCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHJldHVybiAkKFNlbGVjdG9yLmhhbmRsZXJzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcoZWxlbWVudCkpOw0KICAgIHZhciBwcmV2aW91c1NpYmxpbmdzID0gRWxlbWVudC5wcmV2aW91c1NpYmxpbmdzKGVsZW1lbnQpOw0KICAgIHJldHVybiBPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikgPyBwcmV2aW91c1NpYmxpbmdzW2V4cHJlc3Npb25dIDoNCiAgICAgIFNlbGVjdG9yLmZpbmRFbGVtZW50KHByZXZpb3VzU2libGluZ3MsIGV4cHJlc3Npb24sIGluZGV4KTsNCiAgfSwNCg0KICBuZXh0OiBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBpbmRleCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHJldHVybiAkKFNlbGVjdG9yLmhhbmRsZXJzLm5leHRFbGVtZW50U2libGluZyhlbGVtZW50KSk7DQogICAgdmFyIG5leHRTaWJsaW5ncyA9IEVsZW1lbnQubmV4dFNpYmxpbmdzKGVsZW1lbnQpOw0KICAgIHJldHVybiBPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikgPyBuZXh0U2libGluZ3NbZXhwcmVzc2lvbl0gOg0KICAgICAgU2VsZWN0b3IuZmluZEVsZW1lbnQobmV4dFNpYmxpbmdzLCBleHByZXNzaW9uLCBpbmRleCk7DQogIH0sDQoNCg0KICBzZWxlY3Q6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7DQogICAgcmV0dXJuIFNlbGVjdG9yLmZpbmRDaGlsZEVsZW1lbnRzKGVsZW1lbnQsIGFyZ3MpOw0KICB9LA0KDQogIGFkamFjZW50OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KICAgIHJldHVybiBTZWxlY3Rvci5maW5kQ2hpbGRFbGVtZW50cyhlbGVtZW50LnBhcmVudE5vZGUsIGFyZ3MpLndpdGhvdXQoZWxlbWVudCk7DQogIH0sDQoNCiAgaWRlbnRpZnk6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgaWQgPSBFbGVtZW50LnJlYWRBdHRyaWJ1dGUoZWxlbWVudCwgJ2lkJyk7DQogICAgaWYgKGlkKSByZXR1cm4gaWQ7DQogICAgZG8geyBpZCA9ICdhbm9ueW1vdXNfZWxlbWVudF8nICsgRWxlbWVudC5pZENvdW50ZXIrKyB9IHdoaWxlICgkKGlkKSk7DQogICAgRWxlbWVudC53cml0ZUF0dHJpYnV0ZShlbGVtZW50LCAnaWQnLCBpZCk7DQogICAgcmV0dXJuIGlkOw0KICB9LA0KDQogIHJlYWRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoUHJvdG90eXBlLkJyb3dzZXIuSUUpIHsNCiAgICAgIHZhciB0ID0gRWxlbWVudC5fYXR0cmlidXRlVHJhbnNsYXRpb25zLnJlYWQ7DQogICAgICBpZiAodC52YWx1ZXNbbmFtZV0pIHJldHVybiB0LnZhbHVlc1tuYW1lXShlbGVtZW50LCBuYW1lKTsNCiAgICAgIGlmICh0Lm5hbWVzW25hbWVdKSBuYW1lID0gdC5uYW1lc1tuYW1lXTsNCiAgICAgIGlmIChuYW1lLmluY2x1ZGUoJzonKSkgew0KICAgICAgICByZXR1cm4gKCFlbGVtZW50LmF0dHJpYnV0ZXMgfHwgIWVsZW1lbnQuYXR0cmlidXRlc1tuYW1lXSkgPyBudWxsIDoNCiAgICAgICAgIGVsZW1lbnQuYXR0cmlidXRlc1tuYW1lXS52YWx1ZTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpOw0KICB9LA0KDQogIHdyaXRlQXR0cmlidXRlOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIHZhciBhdHRyaWJ1dGVzID0geyB9LCB0ID0gRWxlbWVudC5fYXR0cmlidXRlVHJhbnNsYXRpb25zLndyaXRlOw0KDQogICAgaWYgKHR5cGVvZiBuYW1lID09ICdvYmplY3QnKSBhdHRyaWJ1dGVzID0gbmFtZTsNCiAgICBlbHNlIGF0dHJpYnV0ZXNbbmFtZV0gPSBPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpID8gdHJ1ZSA6IHZhbHVlOw0KDQogICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7DQogICAgICBuYW1lID0gdC5uYW1lc1thdHRyXSB8fCBhdHRyOw0KICAgICAgdmFsdWUgPSBhdHRyaWJ1dGVzW2F0dHJdOw0KICAgICAgaWYgKHQudmFsdWVzW2F0dHJdKSBuYW1lID0gdC52YWx1ZXNbYXR0cl0oZWxlbWVudCwgdmFsdWUpOw0KICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gbnVsbCkNCiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7DQogICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gdHJ1ZSkNCiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgbmFtZSk7DQogICAgICBlbHNlIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTsNCiAgICB9DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgcmV0dXJuIEVsZW1lbnQuZ2V0RGltZW5zaW9ucyhlbGVtZW50KS5oZWlnaHQ7DQogIH0sDQoNCiAgZ2V0V2lkdGg6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICByZXR1cm4gRWxlbWVudC5nZXREaW1lbnNpb25zKGVsZW1lbnQpLndpZHRoOw0KICB9LA0KDQogIGNsYXNzTmFtZXM6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICByZXR1cm4gbmV3IEVsZW1lbnQuQ2xhc3NOYW1lcyhlbGVtZW50KTsNCiAgfSwNCg0KICBoYXNDbGFzc05hbWU6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkgew0KICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOw0KICAgIHZhciBlbGVtZW50Q2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7DQogICAgcmV0dXJuIChlbGVtZW50Q2xhc3NOYW1lLmxlbmd0aCA+IDAgJiYgKGVsZW1lbnRDbGFzc05hbWUgPT0gY2xhc3NOYW1lIHx8DQogICAgICBuZXcgUmVnRXhwKCIoXnxcXHMpIiArIGNsYXNzTmFtZSArICIoXFxzfCQpIikudGVzdChlbGVtZW50Q2xhc3NOYW1lKSkpOw0KICB9LA0KDQogIGFkZENsYXNzTmFtZTogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7DQogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47DQogICAgaWYgKCFFbGVtZW50Lmhhc0NsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpKQ0KICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gKGVsZW1lbnQuY2xhc3NOYW1lID8gJyAnIDogJycpICsgY2xhc3NOYW1lOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIHJlbW92ZUNsYXNzTmFtZTogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7DQogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47DQogICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKA0KICAgICAgbmV3IFJlZ0V4cCgiKF58XFxzKykiICsgY2xhc3NOYW1lICsgIihcXHMrfCQpIiksICcgJykuc3RyaXAoKTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICB0b2dnbGVDbGFzc05hbWU6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkgew0KICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOw0KICAgIHJldHVybiBFbGVtZW50W0VsZW1lbnQuaGFzQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkgPw0KICAgICAgJ3JlbW92ZUNsYXNzTmFtZScgOiAnYWRkQ2xhc3NOYW1lJ10oZWxlbWVudCwgY2xhc3NOYW1lKTsNCiAgfSwNCg0KICBjbGVhbldoaXRlc3BhY2U6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgbm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsNCiAgICB3aGlsZSAobm9kZSkgew0KICAgICAgdmFyIG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZzsNCiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgIS9cUy8udGVzdChub2RlLm5vZGVWYWx1ZSkpDQogICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7DQogICAgICBub2RlID0gbmV4dE5vZGU7DQogICAgfQ0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIGVtcHR5OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgcmV0dXJuICQoZWxlbWVudCkuaW5uZXJIVE1MLmJsYW5rKCk7DQogIH0sDQoNCiAgZGVzY2VuZGFudE9mOiBmdW5jdGlvbihlbGVtZW50LCBhbmNlc3Rvcikgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpLCBhbmNlc3RvciA9ICQoYW5jZXN0b3IpOw0KDQogICAgaWYgKGVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24pDQogICAgICByZXR1cm4gKGVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYW5jZXN0b3IpICYgOCkgPT09IDg7DQoNCiAgICBpZiAoYW5jZXN0b3IuY29udGFpbnMpDQogICAgICByZXR1cm4gYW5jZXN0b3IuY29udGFpbnMoZWxlbWVudCkgJiYgYW5jZXN0b3IgIT09IGVsZW1lbnQ7DQoNCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSkNCiAgICAgIGlmIChlbGVtZW50ID09IGFuY2VzdG9yKSByZXR1cm4gdHJ1ZTsNCg0KICAgIHJldHVybiBmYWxzZTsNCiAgfSwNCg0KICBzY3JvbGxUbzogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIHZhciBwb3MgPSBFbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCk7DQogICAgd2luZG93LnNjcm9sbFRvKHBvc1swXSwgcG9zWzFdKTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICBnZXRTdHlsZTogZnVuY3Rpb24oZWxlbWVudCwgc3R5bGUpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBzdHlsZSA9IHN0eWxlID09ICdmbG9hdCcgPyAnY3NzRmxvYXQnIDogc3R5bGUuY2FtZWxpemUoKTsNCiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlXTsNCiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09ICdhdXRvJykgew0KICAgICAgdmFyIGNzcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7DQogICAgICB2YWx1ZSA9IGNzcyA/IGNzc1tzdHlsZV0gOiBudWxsOw0KICAgIH0NCiAgICBpZiAoc3R5bGUgPT0gJ29wYWNpdHknKSByZXR1cm4gdmFsdWUgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IDEuMDsNCiAgICByZXR1cm4gdmFsdWUgPT0gJ2F1dG8nID8gbnVsbCA6IHZhbHVlOw0KICB9LA0KDQogIGdldE9wYWNpdHk6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICByZXR1cm4gJChlbGVtZW50KS5nZXRTdHlsZSgnb3BhY2l0eScpOw0KICB9LA0KDQogIHNldFN0eWxlOiBmdW5jdGlvbihlbGVtZW50LCBzdHlsZXMpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgZWxlbWVudFN0eWxlID0gZWxlbWVudC5zdHlsZSwgbWF0Y2g7DQogICAgaWYgKE9iamVjdC5pc1N0cmluZyhzdHlsZXMpKSB7DQogICAgICBlbGVtZW50LnN0eWxlLmNzc1RleHQgKz0gJzsnICsgc3R5bGVzOw0KICAgICAgcmV0dXJuIHN0eWxlcy5pbmNsdWRlKCdvcGFjaXR5JykgPw0KICAgICAgICBlbGVtZW50LnNldE9wYWNpdHkoc3R5bGVzLm1hdGNoKC9vcGFjaXR5OlxzKihcZD9cLj9cZCopLylbMV0pIDogZWxlbWVudDsNCiAgICB9DQogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gc3R5bGVzKQ0KICAgICAgaWYgKHByb3BlcnR5ID09ICdvcGFjaXR5JykgZWxlbWVudC5zZXRPcGFjaXR5KHN0eWxlc1twcm9wZXJ0eV0pOw0KICAgICAgZWxzZQ0KICAgICAgICBlbGVtZW50U3R5bGVbKHByb3BlcnR5ID09ICdmbG9hdCcgfHwgcHJvcGVydHkgPT0gJ2Nzc0Zsb2F0JykgPw0KICAgICAgICAgIChPYmplY3QuaXNVbmRlZmluZWQoZWxlbWVudFN0eWxlLnN0eWxlRmxvYXQpID8gJ2Nzc0Zsb2F0JyA6ICdzdHlsZUZsb2F0JykgOg0KICAgICAgICAgICAgcHJvcGVydHldID0gc3R5bGVzW3Byb3BlcnR5XTsNCg0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIHNldE9wYWNpdHk6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gKHZhbHVlID09IDEgfHwgdmFsdWUgPT09ICcnKSA/ICcnIDoNCiAgICAgICh2YWx1ZSA8IDAuMDAwMDEpID8gMCA6IHZhbHVlOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIGdldERpbWVuc2lvbnM6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgZGlzcGxheSA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknKTsNCiAgICBpZiAoZGlzcGxheSAhPSAnbm9uZScgJiYgZGlzcGxheSAhPSBudWxsKSAvLyBTYWZhcmkgYnVnDQogICAgICByZXR1cm4ge3dpZHRoOiBlbGVtZW50Lm9mZnNldFdpZHRoLCBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0fTsNCg0KICAgIHZhciBlbHMgPSBlbGVtZW50LnN0eWxlOw0KICAgIHZhciBvcmlnaW5hbFZpc2liaWxpdHkgPSBlbHMudmlzaWJpbGl0eTsNCiAgICB2YXIgb3JpZ2luYWxQb3NpdGlvbiA9IGVscy5wb3NpdGlvbjsNCiAgICB2YXIgb3JpZ2luYWxEaXNwbGF5ID0gZWxzLmRpc3BsYXk7DQogICAgZWxzLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsNCiAgICBpZiAob3JpZ2luYWxQb3NpdGlvbiAhPSAnZml4ZWQnKSAvLyBTd2l0Y2hpbmcgZml4ZWQgdG8gYWJzb2x1dGUgY2F1c2VzIGlzc3VlcyBpbiBTYWZhcmkNCiAgICAgIGVscy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7DQogICAgZWxzLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIHZhciBvcmlnaW5hbFdpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aDsNCiAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodDsNCiAgICBlbHMuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheTsNCiAgICBlbHMucG9zaXRpb24gPSBvcmlnaW5hbFBvc2l0aW9uOw0KICAgIGVscy52aXNpYmlsaXR5ID0gb3JpZ2luYWxWaXNpYmlsaXR5Ow0KICAgIHJldHVybiB7d2lkdGg6IG9yaWdpbmFsV2lkdGgsIGhlaWdodDogb3JpZ2luYWxIZWlnaHR9Ow0KICB9LA0KDQogIG1ha2VQb3NpdGlvbmVkOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgdmFyIHBvcyA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJyk7DQogICAgaWYgKHBvcyA9PSAnc3RhdGljJyB8fCAhcG9zKSB7DQogICAgICBlbGVtZW50Ll9tYWRlUG9zaXRpb25lZCA9IHRydWU7DQogICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsNCiAgICAgIGlmIChQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSkgew0KICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IDA7DQogICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IDA7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIHVuZG9Qb3NpdGlvbmVkOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgaWYgKGVsZW1lbnQuX21hZGVQb3NpdGlvbmVkKSB7DQogICAgICBlbGVtZW50Ll9tYWRlUG9zaXRpb25lZCA9IHVuZGVmaW5lZDsNCiAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPQ0KICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9DQogICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9DQogICAgICAgIGVsZW1lbnQuc3R5bGUuYm90dG9tID0NCiAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9ICcnOw0KICAgIH0NCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICBtYWtlQ2xpcHBpbmc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoZWxlbWVudC5fb3ZlcmZsb3cpIHJldHVybiBlbGVtZW50Ow0KICAgIGVsZW1lbnQuX292ZXJmbG93ID0gRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAnb3ZlcmZsb3cnKSB8fCAnYXV0byc7DQogICAgaWYgKGVsZW1lbnQuX292ZXJmbG93ICE9PSAnaGlkZGVuJykNCiAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICB1bmRvQ2xpcHBpbmc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoIWVsZW1lbnQuX292ZXJmbG93KSByZXR1cm4gZWxlbWVudDsNCiAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gZWxlbWVudC5fb3ZlcmZsb3cgPT0gJ2F1dG8nID8gJycgOiBlbGVtZW50Ll9vdmVyZmxvdzsNCiAgICBlbGVtZW50Ll9vdmVyZmxvdyA9IG51bGw7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgY3VtdWxhdGl2ZU9mZnNldDogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHZhciB2YWx1ZVQgPSAwLCB2YWx1ZUwgPSAwOw0KICAgIGRvIHsNCiAgICAgIHZhbHVlVCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDsNCiAgICAgIHZhbHVlTCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDsNCiAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDsNCiAgICB9IHdoaWxlIChlbGVtZW50KTsNCiAgICByZXR1cm4gRWxlbWVudC5fcmV0dXJuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsNCiAgfSwNCg0KICBwb3NpdGlvbmVkT2Zmc2V0OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDA7DQogICAgZG8gew0KICAgICAgdmFsdWVUICs9IGVsZW1lbnQub2Zmc2V0VG9wICB8fCAwOw0KICAgICAgdmFsdWVMICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwOw0KICAgICAgZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50Ow0KICAgICAgaWYgKGVsZW1lbnQpIHsNCiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICdCT0RZJykgYnJlYWs7DQogICAgICAgIHZhciBwID0gRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKTsNCiAgICAgICAgaWYgKHAgIT09ICdzdGF0aWMnKSBicmVhazsNCiAgICAgIH0NCiAgICB9IHdoaWxlIChlbGVtZW50KTsNCiAgICByZXR1cm4gRWxlbWVudC5fcmV0dXJuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsNCiAgfSwNCg0KICBhYnNvbHV0aXplOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgaWYgKEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJykgPT0gJ2Fic29sdXRlJykgcmV0dXJuIGVsZW1lbnQ7DQoNCiAgICB2YXIgb2Zmc2V0cyA9IEVsZW1lbnQucG9zaXRpb25lZE9mZnNldChlbGVtZW50KTsNCiAgICB2YXIgdG9wICAgICA9IG9mZnNldHNbMV07DQogICAgdmFyIGxlZnQgICAgPSBvZmZzZXRzWzBdOw0KICAgIHZhciB3aWR0aCAgID0gZWxlbWVudC5jbGllbnRXaWR0aDsNCiAgICB2YXIgaGVpZ2h0ICA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KDQogICAgZWxlbWVudC5fb3JpZ2luYWxMZWZ0ICAgPSBsZWZ0IC0gcGFyc2VGbG9hdChlbGVtZW50LnN0eWxlLmxlZnQgIHx8IDApOw0KICAgIGVsZW1lbnQuX29yaWdpbmFsVG9wICAgID0gdG9wICAtIHBhcnNlRmxvYXQoZWxlbWVudC5zdHlsZS50b3AgfHwgMCk7DQogICAgZWxlbWVudC5fb3JpZ2luYWxXaWR0aCAgPSBlbGVtZW50LnN0eWxlLndpZHRoOw0KICAgIGVsZW1lbnQuX29yaWdpbmFsSGVpZ2h0ID0gZWxlbWVudC5zdHlsZS5oZWlnaHQ7DQoNCiAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsNCiAgICBlbGVtZW50LnN0eWxlLnRvcCAgICA9IHRvcCArICdweCc7DQogICAgZWxlbWVudC5zdHlsZS5sZWZ0ICAgPSBsZWZ0ICsgJ3B4JzsNCiAgICBlbGVtZW50LnN0eWxlLndpZHRoICA9IHdpZHRoICsgJ3B4JzsNCiAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgcmVsYXRpdml6ZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09ICdyZWxhdGl2ZScpIHJldHVybiBlbGVtZW50Ow0KDQogICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7DQogICAgdmFyIHRvcCAgPSBwYXJzZUZsb2F0KGVsZW1lbnQuc3R5bGUudG9wICB8fCAwKSAtIChlbGVtZW50Ll9vcmlnaW5hbFRvcCB8fCAwKTsNCiAgICB2YXIgbGVmdCA9IHBhcnNlRmxvYXQoZWxlbWVudC5zdHlsZS5sZWZ0IHx8IDApIC0gKGVsZW1lbnQuX29yaWdpbmFsTGVmdCB8fCAwKTsNCg0KICAgIGVsZW1lbnQuc3R5bGUudG9wICAgID0gdG9wICsgJ3B4JzsNCiAgICBlbGVtZW50LnN0eWxlLmxlZnQgICA9IGxlZnQgKyAncHgnOw0KICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5fb3JpZ2luYWxIZWlnaHQ7DQogICAgZWxlbWVudC5zdHlsZS53aWR0aCAgPSBlbGVtZW50Ll9vcmlnaW5hbFdpZHRoOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9LA0KDQogIGN1bXVsYXRpdmVTY3JvbGxPZmZzZXQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICB2YXIgdmFsdWVUID0gMCwgdmFsdWVMID0gMDsNCiAgICBkbyB7DQogICAgICB2YWx1ZVQgKz0gZWxlbWVudC5zY3JvbGxUb3AgIHx8IDA7DQogICAgICB2YWx1ZUwgKz0gZWxlbWVudC5zY3JvbGxMZWZ0IHx8IDA7DQogICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlOw0KICAgIH0gd2hpbGUgKGVsZW1lbnQpOw0KICAgIHJldHVybiBFbGVtZW50Ll9yZXR1cm5PZmZzZXQodmFsdWVMLCB2YWx1ZVQpOw0KICB9LA0KDQogIGdldE9mZnNldFBhcmVudDogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGlmIChlbGVtZW50Lm9mZnNldFBhcmVudCkgcmV0dXJuICQoZWxlbWVudC5vZmZzZXRQYXJlbnQpOw0KICAgIGlmIChlbGVtZW50ID09IGRvY3VtZW50LmJvZHkpIHJldHVybiAkKGVsZW1lbnQpOw0KDQogICAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSAmJiBlbGVtZW50ICE9IGRvY3VtZW50LmJvZHkpDQogICAgICBpZiAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSAhPSAnc3RhdGljJykNCiAgICAgICAgcmV0dXJuICQoZWxlbWVudCk7DQoNCiAgICByZXR1cm4gJChkb2N1bWVudC5ib2R5KTsNCiAgfSwNCg0KICB2aWV3cG9ydE9mZnNldDogZnVuY3Rpb24oZm9yRWxlbWVudCkgew0KICAgIHZhciB2YWx1ZVQgPSAwLCB2YWx1ZUwgPSAwOw0KDQogICAgdmFyIGVsZW1lbnQgPSBmb3JFbGVtZW50Ow0KICAgIGRvIHsNCiAgICAgIHZhbHVlVCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDsNCiAgICAgIHZhbHVlTCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDsNCg0KICAgICAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50ID09IGRvY3VtZW50LmJvZHkgJiYNCiAgICAgICAgRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PSAnYWJzb2x1dGUnKSBicmVhazsNCg0KICAgIH0gd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCk7DQoNCiAgICBlbGVtZW50ID0gZm9yRWxlbWVudDsNCiAgICBkbyB7DQogICAgICBpZiAoIVByb3RvdHlwZS5Ccm93c2VyLk9wZXJhIHx8IChlbGVtZW50LnRhZ05hbWUgJiYgKGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICdCT0RZJykpKSB7DQogICAgICAgIHZhbHVlVCAtPSBlbGVtZW50LnNjcm9sbFRvcCAgfHwgMDsNCiAgICAgICAgdmFsdWVMIC09IGVsZW1lbnQuc2Nyb2xsTGVmdCB8fCAwOw0KICAgICAgfQ0KICAgIH0gd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpOw0KDQogICAgcmV0dXJuIEVsZW1lbnQuX3JldHVybk9mZnNldCh2YWx1ZUwsIHZhbHVlVCk7DQogIH0sDQoNCiAgY2xvbmVQb3NpdGlvbjogZnVuY3Rpb24oZWxlbWVudCwgc291cmNlKSB7DQogICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZXh0ZW5kKHsNCiAgICAgIHNldExlZnQ6ICAgIHRydWUsDQogICAgICBzZXRUb3A6ICAgICB0cnVlLA0KICAgICAgc2V0V2lkdGg6ICAgdHJ1ZSwNCiAgICAgIHNldEhlaWdodDogIHRydWUsDQogICAgICBvZmZzZXRUb3A6ICAwLA0KICAgICAgb2Zmc2V0TGVmdDogMA0KICAgIH0sIGFyZ3VtZW50c1syXSB8fCB7IH0pOw0KDQogICAgc291cmNlID0gJChzb3VyY2UpOw0KICAgIHZhciBwID0gRWxlbWVudC52aWV3cG9ydE9mZnNldChzb3VyY2UpOw0KDQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgdmFyIGRlbHRhID0gWzAsIDBdOw0KICAgIHZhciBwYXJlbnQgPSBudWxsOw0KICAgIGlmIChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpID09ICdhYnNvbHV0ZScpIHsNCiAgICAgIHBhcmVudCA9IEVsZW1lbnQuZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpOw0KICAgICAgZGVsdGEgPSBFbGVtZW50LnZpZXdwb3J0T2Zmc2V0KHBhcmVudCk7DQogICAgfQ0KDQogICAgaWYgKHBhcmVudCA9PSBkb2N1bWVudC5ib2R5KSB7DQogICAgICBkZWx0YVswXSAtPSBkb2N1bWVudC5ib2R5Lm9mZnNldExlZnQ7DQogICAgICBkZWx0YVsxXSAtPSBkb2N1bWVudC5ib2R5Lm9mZnNldFRvcDsNCiAgICB9DQoNCiAgICBpZiAob3B0aW9ucy5zZXRMZWZ0KSAgIGVsZW1lbnQuc3R5bGUubGVmdCAgPSAocFswXSAtIGRlbHRhWzBdICsgb3B0aW9ucy5vZmZzZXRMZWZ0KSArICdweCc7DQogICAgaWYgKG9wdGlvbnMuc2V0VG9wKSAgICBlbGVtZW50LnN0eWxlLnRvcCAgID0gKHBbMV0gLSBkZWx0YVsxXSArIG9wdGlvbnMub2Zmc2V0VG9wKSArICdweCc7DQogICAgaWYgKG9wdGlvbnMuc2V0V2lkdGgpICBlbGVtZW50LnN0eWxlLndpZHRoID0gc291cmNlLm9mZnNldFdpZHRoICsgJ3B4JzsNCiAgICBpZiAob3B0aW9ucy5zZXRIZWlnaHQpIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gc291cmNlLm9mZnNldEhlaWdodCArICdweCc7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0NCn07DQoNCk9iamVjdC5leHRlbmQoRWxlbWVudC5NZXRob2RzLCB7DQogIGdldEVsZW1lbnRzQnlTZWxlY3RvcjogRWxlbWVudC5NZXRob2RzLnNlbGVjdCwNCg0KICBjaGlsZEVsZW1lbnRzOiBFbGVtZW50Lk1ldGhvZHMuaW1tZWRpYXRlRGVzY2VuZGFudHMNCn0pOw0KDQpFbGVtZW50Ll9hdHRyaWJ1dGVUcmFuc2xhdGlvbnMgPSB7DQogIHdyaXRlOiB7DQogICAgbmFtZXM6IHsNCiAgICAgIGNsYXNzTmFtZTogJ2NsYXNzJywNCiAgICAgIGh0bWxGb3I6ICAgJ2ZvcicNCiAgICB9LA0KICAgIHZhbHVlczogeyB9DQogIH0NCn07DQoNCmlmIChQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSkgew0KICBFbGVtZW50Lk1ldGhvZHMuZ2V0U3R5bGUgPSBFbGVtZW50Lk1ldGhvZHMuZ2V0U3R5bGUud3JhcCgNCiAgICBmdW5jdGlvbihwcm9jZWVkLCBlbGVtZW50LCBzdHlsZSkgew0KICAgICAgc3dpdGNoIChzdHlsZSkgew0KICAgICAgICBjYXNlICdsZWZ0JzogY2FzZSAndG9wJzogY2FzZSAncmlnaHQnOiBjYXNlICdib3R0b20nOg0KICAgICAgICAgIGlmIChwcm9jZWVkKGVsZW1lbnQsICdwb3NpdGlvbicpID09PSAnc3RhdGljJykgcmV0dXJuIG51bGw7DQogICAgICAgIGNhc2UgJ2hlaWdodCc6IGNhc2UgJ3dpZHRoJzoNCiAgICAgICAgICBpZiAoIUVsZW1lbnQudmlzaWJsZShlbGVtZW50KSkgcmV0dXJuIG51bGw7DQoNCiAgICAgICAgICB2YXIgZGltID0gcGFyc2VJbnQocHJvY2VlZChlbGVtZW50LCBzdHlsZSksIDEwKTsNCg0KICAgICAgICAgIGlmIChkaW0gIT09IGVsZW1lbnRbJ29mZnNldCcgKyBzdHlsZS5jYXBpdGFsaXplKCldKQ0KICAgICAgICAgICAgcmV0dXJuIGRpbSArICdweCc7DQoNCiAgICAgICAgICB2YXIgcHJvcGVydGllczsNCiAgICAgICAgICBpZiAoc3R5bGUgPT09ICdoZWlnaHQnKSB7DQogICAgICAgICAgICBwcm9wZXJ0aWVzID0gWydib3JkZXItdG9wLXdpZHRoJywgJ3BhZGRpbmctdG9wJywNCiAgICAgICAgICAgICAncGFkZGluZy1ib3R0b20nLCAnYm9yZGVyLWJvdHRvbS13aWR0aCddOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHByb3BlcnRpZXMgPSBbJ2JvcmRlci1sZWZ0LXdpZHRoJywgJ3BhZGRpbmctbGVmdCcsDQogICAgICAgICAgICAgJ3BhZGRpbmctcmlnaHQnLCAnYm9yZGVyLXJpZ2h0LXdpZHRoJ107DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzLmluamVjdChkaW0sIGZ1bmN0aW9uKG1lbW8sIHByb3BlcnR5KSB7DQogICAgICAgICAgICB2YXIgdmFsID0gcHJvY2VlZChlbGVtZW50LCBwcm9wZXJ0eSk7DQogICAgICAgICAgICByZXR1cm4gdmFsID09PSBudWxsID8gbWVtbyA6IG1lbW8gLSBwYXJzZUludCh2YWwsIDEwKTsNCiAgICAgICAgICB9KSArICdweCc7DQogICAgICAgIGRlZmF1bHQ6IHJldHVybiBwcm9jZWVkKGVsZW1lbnQsIHN0eWxlKTsNCiAgICAgIH0NCiAgICB9DQogICk7DQoNCiAgRWxlbWVudC5NZXRob2RzLnJlYWRBdHRyaWJ1dGUgPSBFbGVtZW50Lk1ldGhvZHMucmVhZEF0dHJpYnV0ZS53cmFwKA0KICAgIGZ1bmN0aW9uKHByb2NlZWQsIGVsZW1lbnQsIGF0dHJpYnV0ZSkgew0KICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ3RpdGxlJykgcmV0dXJuIGVsZW1lbnQudGl0bGU7DQogICAgICByZXR1cm4gcHJvY2VlZChlbGVtZW50LCBhdHRyaWJ1dGUpOw0KICAgIH0NCiAgKTsNCn0NCg0KZWxzZSBpZiAoUHJvdG90eXBlLkJyb3dzZXIuSUUpIHsNCiAgRWxlbWVudC5NZXRob2RzLmdldE9mZnNldFBhcmVudCA9IEVsZW1lbnQuTWV0aG9kcy5nZXRPZmZzZXRQYXJlbnQud3JhcCgNCiAgICBmdW5jdGlvbihwcm9jZWVkLCBlbGVtZW50KSB7DQogICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICAgIHRyeSB7IGVsZW1lbnQub2Zmc2V0UGFyZW50IH0NCiAgICAgIGNhdGNoKGUpIHsgcmV0dXJuICQoZG9jdW1lbnQuYm9keSkgfQ0KICAgICAgdmFyIHBvc2l0aW9uID0gZWxlbWVudC5nZXRTdHlsZSgncG9zaXRpb24nKTsNCiAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ3N0YXRpYycpIHJldHVybiBwcm9jZWVkKGVsZW1lbnQpOw0KICAgICAgZWxlbWVudC5zZXRTdHlsZSh7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH0pOw0KICAgICAgdmFyIHZhbHVlID0gcHJvY2VlZChlbGVtZW50KTsNCiAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyBwb3NpdGlvbjogcG9zaXRpb24gfSk7DQogICAgICByZXR1cm4gdmFsdWU7DQogICAgfQ0KICApOw0KDQogICR3KCdwb3NpdGlvbmVkT2Zmc2V0IHZpZXdwb3J0T2Zmc2V0JykuZWFjaChmdW5jdGlvbihtZXRob2QpIHsNCiAgICBFbGVtZW50Lk1ldGhvZHNbbWV0aG9kXSA9IEVsZW1lbnQuTWV0aG9kc1ttZXRob2RdLndyYXAoDQogICAgICBmdW5jdGlvbihwcm9jZWVkLCBlbGVtZW50KSB7DQogICAgICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgICAgICB0cnkgeyBlbGVtZW50Lm9mZnNldFBhcmVudCB9DQogICAgICAgIGNhdGNoKGUpIHsgcmV0dXJuIEVsZW1lbnQuX3JldHVybk9mZnNldCgwLDApIH0NCiAgICAgICAgdmFyIHBvc2l0aW9uID0gZWxlbWVudC5nZXRTdHlsZSgncG9zaXRpb24nKTsNCiAgICAgICAgaWYgKHBvc2l0aW9uICE9PSAnc3RhdGljJykgcmV0dXJuIHByb2NlZWQoZWxlbWVudCk7DQogICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBlbGVtZW50LmdldE9mZnNldFBhcmVudCgpOw0KICAgICAgICBpZiAob2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudC5nZXRTdHlsZSgncG9zaXRpb24nKSA9PT0gJ2ZpeGVkJykNCiAgICAgICAgICBvZmZzZXRQYXJlbnQuc2V0U3R5bGUoeyB6b29tOiAxIH0pOw0KICAgICAgICBlbGVtZW50LnNldFN0eWxlKHsgcG9zaXRpb246ICdyZWxhdGl2ZScgfSk7DQogICAgICAgIHZhciB2YWx1ZSA9IHByb2NlZWQoZWxlbWVudCk7DQogICAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyBwb3NpdGlvbjogcG9zaXRpb24gfSk7DQogICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgIH0NCiAgICApOw0KICB9KTsNCg0KICBFbGVtZW50Lk1ldGhvZHMuY3VtdWxhdGl2ZU9mZnNldCA9IEVsZW1lbnQuTWV0aG9kcy5jdW11bGF0aXZlT2Zmc2V0LndyYXAoDQogICAgZnVuY3Rpb24ocHJvY2VlZCwgZWxlbWVudCkgew0KICAgICAgdHJ5IHsgZWxlbWVudC5vZmZzZXRQYXJlbnQgfQ0KICAgICAgY2F0Y2goZSkgeyByZXR1cm4gRWxlbWVudC5fcmV0dXJuT2Zmc2V0KDAsMCkgfQ0KICAgICAgcmV0dXJuIHByb2NlZWQoZWxlbWVudCk7DQogICAgfQ0KICApOw0KDQogIEVsZW1lbnQuTWV0aG9kcy5nZXRTdHlsZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHN0eWxlKSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgc3R5bGUgPSAoc3R5bGUgPT0gJ2Zsb2F0JyB8fCBzdHlsZSA9PSAnY3NzRmxvYXQnKSA/ICdzdHlsZUZsb2F0JyA6IHN0eWxlLmNhbWVsaXplKCk7DQogICAgdmFyIHZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZV07DQogICAgaWYgKCF2YWx1ZSAmJiBlbGVtZW50LmN1cnJlbnRTdHlsZSkgdmFsdWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtzdHlsZV07DQoNCiAgICBpZiAoc3R5bGUgPT0gJ29wYWNpdHknKSB7DQogICAgICBpZiAodmFsdWUgPSAoZWxlbWVudC5nZXRTdHlsZSgnZmlsdGVyJykgfHwgJycpLm1hdGNoKC9hbHBoYVwob3BhY2l0eT0oLiopXCkvKSkNCiAgICAgICAgaWYgKHZhbHVlWzFdKSByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZVsxXSkgLyAxMDA7DQogICAgICByZXR1cm4gMS4wOw0KICAgIH0NCg0KICAgIGlmICh2YWx1ZSA9PSAnYXV0bycpIHsNCiAgICAgIGlmICgoc3R5bGUgPT0gJ3dpZHRoJyB8fCBzdHlsZSA9PSAnaGVpZ2h0JykgJiYgKGVsZW1lbnQuZ2V0U3R5bGUoJ2Rpc3BsYXknKSAhPSAnbm9uZScpKQ0KICAgICAgICByZXR1cm4gZWxlbWVudFsnb2Zmc2V0JyArIHN0eWxlLmNhcGl0YWxpemUoKV0gKyAncHgnOw0KICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KICAgIHJldHVybiB2YWx1ZTsNCiAgfTsNCg0KICBFbGVtZW50Lk1ldGhvZHMuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgZnVuY3Rpb24gc3RyaXBBbHBoYShmaWx0ZXIpew0KICAgICAgcmV0dXJuIGZpbHRlci5yZXBsYWNlKC9hbHBoYVwoW15cKV0qXCkvZ2ksJycpOw0KICAgIH0NCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgY3VycmVudFN0eWxlID0gZWxlbWVudC5jdXJyZW50U3R5bGU7DQogICAgaWYgKChjdXJyZW50U3R5bGUgJiYgIWN1cnJlbnRTdHlsZS5oYXNMYXlvdXQpIHx8DQogICAgICAoIWN1cnJlbnRTdHlsZSAmJiBlbGVtZW50LnN0eWxlLnpvb20gPT0gJ25vcm1hbCcpKQ0KICAgICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxOw0KDQogICAgdmFyIGZpbHRlciA9IGVsZW1lbnQuZ2V0U3R5bGUoJ2ZpbHRlcicpLCBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7DQogICAgaWYgKHZhbHVlID09IDEgfHwgdmFsdWUgPT09ICcnKSB7DQogICAgICAoZmlsdGVyID0gc3RyaXBBbHBoYShmaWx0ZXIpKSA/DQogICAgICAgIHN0eWxlLmZpbHRlciA9IGZpbHRlciA6IHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnZmlsdGVyJyk7DQogICAgICByZXR1cm4gZWxlbWVudDsNCiAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMC4wMDAwMSkgdmFsdWUgPSAwOw0KICAgIHN0eWxlLmZpbHRlciA9IHN0cmlwQWxwaGEoZmlsdGVyKSArDQogICAgICAnYWxwaGEob3BhY2l0eT0nICsgKHZhbHVlICogMTAwKSArICcpJzsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfTsNCg0KICBFbGVtZW50Ll9hdHRyaWJ1dGVUcmFuc2xhdGlvbnMgPSAoZnVuY3Rpb24oKXsNCg0KICAgIHZhciBjbGFzc1Byb3AgPSAnY2xhc3NOYW1lJzsNCiAgICB2YXIgZm9yUHJvcCA9ICdmb3InOw0KDQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQoNCiAgICBlbC5zZXRBdHRyaWJ1dGUoY2xhc3NQcm9wLCAneCcpOw0KDQogICAgaWYgKGVsLmNsYXNzTmFtZSAhPT0gJ3gnKSB7DQogICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3gnKTsNCiAgICAgIGlmIChlbC5jbGFzc05hbWUgPT09ICd4Jykgew0KICAgICAgICBjbGFzc1Byb3AgPSAnY2xhc3MnOw0KICAgICAgfQ0KICAgIH0NCiAgICBlbCA9IG51bGw7DQoNCiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7DQogICAgZWwuc2V0QXR0cmlidXRlKGZvclByb3AsICd4Jyk7DQogICAgaWYgKGVsLmh0bWxGb3IgIT09ICd4Jykgew0KICAgICAgZWwuc2V0QXR0cmlidXRlKCdodG1sRm9yJywgJ3gnKTsNCiAgICAgIGlmIChlbC5odG1sRm9yID09PSAneCcpIHsNCiAgICAgICAgZm9yUHJvcCA9ICdodG1sRm9yJzsNCiAgICAgIH0NCiAgICB9DQogICAgZWwgPSBudWxsOw0KDQogICAgcmV0dXJuIHsNCiAgICAgIHJlYWQ6IHsNCiAgICAgICAgbmFtZXM6IHsNCiAgICAgICAgICAnY2xhc3MnOiAgICAgIGNsYXNzUHJvcCwNCiAgICAgICAgICAnY2xhc3NOYW1lJzogIGNsYXNzUHJvcCwNCiAgICAgICAgICAnZm9yJzogICAgICAgIGZvclByb3AsDQogICAgICAgICAgJ2h0bWxGb3InOiAgICBmb3JQcm9wDQogICAgICAgIH0sDQogICAgICAgIHZhbHVlczogew0KICAgICAgICAgIF9nZXRBdHRyOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpOw0KICAgICAgICAgIH0sDQogICAgICAgICAgX2dldEF0dHIyOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIDIpOw0KICAgICAgICAgIH0sDQogICAgICAgICAgX2dldEF0dHJOb2RlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgIHZhciBub2RlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGVOb2RlKGF0dHJpYnV0ZSk7DQogICAgICAgICAgICByZXR1cm4gbm9kZSA/IG5vZGUudmFsdWUgOiAiIjsNCiAgICAgICAgICB9LA0KICAgICAgICAgIF9nZXRFdjogKGZ1bmN0aW9uKCl7DQoNCiAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgZWwub25jbGljayA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOw0KICAgICAgICAgICAgdmFyIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJyk7DQogICAgICAgICAgICB2YXIgZjsNCg0KICAgICAgICAgICAgaWYgKFN0cmluZyh2YWx1ZSkuaW5kZXhPZigneycpID4gLTEpIHsNCiAgICAgICAgICAgICAgZiA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZSkgew0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7DQogICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGUpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZS50b1N0cmluZygpOw0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZS5zcGxpdCgneycpWzFdOw0KICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZS5zcGxpdCgnfScpWzBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGUuc3RyaXAoKTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnJykgew0KICAgICAgICAgICAgICBmID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7DQogICAgICAgICAgICAgICAgYXR0cmlidXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTsNCiAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZSkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZS5zdHJpcCgpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWwgPSBudWxsOw0KICAgICAgICAgICAgcmV0dXJuIGY7DQogICAgICAgICAgfSkoKSwNCiAgICAgICAgICBfZmxhZzogZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7DQogICAgICAgICAgICByZXR1cm4gJChlbGVtZW50KS5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKSA/IGF0dHJpYnV0ZSA6IG51bGw7DQogICAgICAgICAgfSwNCiAgICAgICAgICBzdHlsZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgIH0sDQogICAgICAgICAgdGl0bGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnRpdGxlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSkoKTsNCg0KICBFbGVtZW50Ll9hdHRyaWJ1dGVUcmFuc2xhdGlvbnMud3JpdGUgPSB7DQogICAgbmFtZXM6IE9iamVjdC5leHRlbmQoew0KICAgICAgY2VsbHBhZGRpbmc6ICdjZWxsUGFkZGluZycsDQogICAgICBjZWxsc3BhY2luZzogJ2NlbGxTcGFjaW5nJw0KICAgIH0sIEVsZW1lbnQuX2F0dHJpYnV0ZVRyYW5zbGF0aW9ucy5yZWFkLm5hbWVzKSwNCiAgICB2YWx1ZXM6IHsNCiAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9ICEhdmFsdWU7DQogICAgICB9LA0KDQogICAgICBzdHlsZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHsNCiAgICAgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgPyB2YWx1ZSA6ICcnOw0KICAgICAgfQ0KICAgIH0NCiAgfTsNCg0KICBFbGVtZW50Ll9hdHRyaWJ1dGVUcmFuc2xhdGlvbnMuaGFzID0ge307DQoNCiAgJHcoJ2NvbFNwYW4gcm93U3BhbiB2QWxpZ24gZGF0ZVRpbWUgYWNjZXNzS2V5IHRhYkluZGV4ICcgKw0KICAgICAgJ2VuY1R5cGUgbWF4TGVuZ3RoIHJlYWRPbmx5IGxvbmdEZXNjIGZyYW1lQm9yZGVyJykuZWFjaChmdW5jdGlvbihhdHRyKSB7DQogICAgRWxlbWVudC5fYXR0cmlidXRlVHJhbnNsYXRpb25zLndyaXRlLm5hbWVzW2F0dHIudG9Mb3dlckNhc2UoKV0gPSBhdHRyOw0KICAgIEVsZW1lbnQuX2F0dHJpYnV0ZVRyYW5zbGF0aW9ucy5oYXNbYXR0ci50b0xvd2VyQ2FzZSgpXSA9IGF0dHI7DQogIH0pOw0KDQogIChmdW5jdGlvbih2KSB7DQogICAgT2JqZWN0LmV4dGVuZCh2LCB7DQogICAgICBocmVmOiAgICAgICAgdi5fZ2V0QXR0cjIsDQogICAgICBzcmM6ICAgICAgICAgdi5fZ2V0QXR0cjIsDQogICAgICB0eXBlOiAgICAgICAgdi5fZ2V0QXR0ciwNCiAgICAgIGFjdGlvbjogICAgICB2Ll9nZXRBdHRyTm9kZSwNCiAgICAgIGRpc2FibGVkOiAgICB2Ll9mbGFnLA0KICAgICAgY2hlY2tlZDogICAgIHYuX2ZsYWcsDQogICAgICByZWFkb25seTogICAgdi5fZmxhZywNCiAgICAgIG11bHRpcGxlOiAgICB2Ll9mbGFnLA0KICAgICAgb25sb2FkOiAgICAgIHYuX2dldEV2LA0KICAgICAgb251bmxvYWQ6ICAgIHYuX2dldEV2LA0KICAgICAgb25jbGljazogICAgIHYuX2dldEV2LA0KICAgICAgb25kYmxjbGljazogIHYuX2dldEV2LA0KICAgICAgb25tb3VzZWRvd246IHYuX2dldEV2LA0KICAgICAgb25tb3VzZXVwOiAgIHYuX2dldEV2LA0KICAgICAgb25tb3VzZW92ZXI6IHYuX2dldEV2LA0KICAgICAgb25tb3VzZW1vdmU6IHYuX2dldEV2LA0KICAgICAgb25tb3VzZW91dDogIHYuX2dldEV2LA0KICAgICAgb25mb2N1czogICAgIHYuX2dldEV2LA0KICAgICAgb25ibHVyOiAgICAgIHYuX2dldEV2LA0KICAgICAgb25rZXlwcmVzczogIHYuX2dldEV2LA0KICAgICAgb25rZXlkb3duOiAgIHYuX2dldEV2LA0KICAgICAgb25rZXl1cDogICAgIHYuX2dldEV2LA0KICAgICAgb25zdWJtaXQ6ICAgIHYuX2dldEV2LA0KICAgICAgb25yZXNldDogICAgIHYuX2dldEV2LA0KICAgICAgb25zZWxlY3Q6ICAgIHYuX2dldEV2LA0KICAgICAgb25jaGFuZ2U6ICAgIHYuX2dldEV2DQogICAgfSk7DQogIH0pKEVsZW1lbnQuX2F0dHJpYnV0ZVRyYW5zbGF0aW9ucy5yZWFkLnZhbHVlcyk7DQoNCiAgaWYgKFByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuRWxlbWVudEV4dGVuc2lvbnMpIHsNCiAgICAoZnVuY3Rpb24oKSB7DQogICAgICBmdW5jdGlvbiBfZGVzY2VuZGFudHMoZWxlbWVudCkgew0KICAgICAgICB2YXIgbm9kZXMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyksIHJlc3VsdHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgIT09ICIhIikgLy8gRmlsdGVyIG91dCBjb21tZW50IG5vZGVzLg0KICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgICByZXR1cm4gcmVzdWx0czsNCiAgICAgIH0NCg0KICAgICAgRWxlbWVudC5NZXRob2RzLmRvd24gPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBpbmRleCkgew0KICAgICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgcmV0dXJuIGVsZW1lbnQuZmlyc3REZXNjZW5kYW50KCk7DQogICAgICAgIHJldHVybiBPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikgPyBfZGVzY2VuZGFudHMoZWxlbWVudClbZXhwcmVzc2lvbl0gOg0KICAgICAgICAgIEVsZW1lbnQuc2VsZWN0KGVsZW1lbnQsIGV4cHJlc3Npb24pW2luZGV4IHx8IDBdOw0KICAgICAgfQ0KICAgIH0pKCk7DQogIH0NCg0KfQ0KDQplbHNlIGlmIChQcm90b3R5cGUuQnJvd3Nlci5HZWNrbyAmJiAvcnY6MVwuOFwuMC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KICBFbGVtZW50Lk1ldGhvZHMuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gKHZhbHVlID09IDEpID8gMC45OTk5OTkgOg0KICAgICAgKHZhbHVlID09PSAnJykgPyAnJyA6ICh2YWx1ZSA8IDAuMDAwMDEpID8gMCA6IHZhbHVlOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9Ow0KfQ0KDQplbHNlIGlmIChQcm90b3R5cGUuQnJvd3Nlci5XZWJLaXQpIHsNCiAgRWxlbWVudC5NZXRob2RzLnNldE9wYWNpdHkgPSBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICh2YWx1ZSA9PSAxIHx8IHZhbHVlID09PSAnJykgPyAnJyA6DQogICAgICAodmFsdWUgPCAwLjAwMDAxKSA/IDAgOiB2YWx1ZTsNCg0KICAgIGlmICh2YWx1ZSA9PSAxKQ0KICAgICAgaWYoZWxlbWVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0lNRycgJiYgZWxlbWVudC53aWR0aCkgew0KICAgICAgICBlbGVtZW50LndpZHRoKys7IGVsZW1lbnQud2lkdGgtLTsNCiAgICAgIH0gZWxzZSB0cnkgew0KICAgICAgICB2YXIgbiA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7DQogICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobik7DQogICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQobik7DQogICAgICB9IGNhdGNoIChlKSB7IH0NCg0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9Ow0KDQogIEVsZW1lbnQuTWV0aG9kcy5jdW11bGF0aXZlT2Zmc2V0ID0gZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHZhciB2YWx1ZVQgPSAwLCB2YWx1ZUwgPSAwOw0KICAgIGRvIHsNCiAgICAgIHZhbHVlVCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDsNCiAgICAgIHZhbHVlTCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDsNCiAgICAgIGlmIChlbGVtZW50Lm9mZnNldFBhcmVudCA9PSBkb2N1bWVudC5ib2R5KQ0KICAgICAgICBpZiAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PSAnYWJzb2x1dGUnKSBicmVhazsNCg0KICAgICAgZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50Ow0KICAgIH0gd2hpbGUgKGVsZW1lbnQpOw0KDQogICAgcmV0dXJuIEVsZW1lbnQuX3JldHVybk9mZnNldCh2YWx1ZUwsIHZhbHVlVCk7DQogIH07DQp9DQoNCmlmICgnb3V0ZXJIVE1MJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsNCiAgRWxlbWVudC5NZXRob2RzLnJlcGxhY2UgPSBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQoNCiAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnRvRWxlbWVudCkgY29udGVudCA9IGNvbnRlbnQudG9FbGVtZW50KCk7DQogICAgaWYgKE9iamVjdC5pc0VsZW1lbnQoY29udGVudCkpIHsNCiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY29udGVudCwgZWxlbWVudCk7DQogICAgICByZXR1cm4gZWxlbWVudDsNCiAgICB9DQoNCiAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsNCiAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLCB0YWdOYW1lID0gcGFyZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTsNCg0KICAgIGlmIChFbGVtZW50Ll9pbnNlcnRpb25UcmFuc2xhdGlvbnMudGFnc1t0YWdOYW1lXSkgew0KICAgICAgdmFyIG5leHRTaWJsaW5nID0gZWxlbWVudC5uZXh0KCk7DQogICAgICB2YXIgZnJhZ21lbnRzID0gRWxlbWVudC5fZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50KHRhZ05hbWUsIGNvbnRlbnQuc3RyaXBTY3JpcHRzKCkpOw0KICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpOw0KICAgICAgaWYgKG5leHRTaWJsaW5nKQ0KICAgICAgICBmcmFnbWVudHMuZWFjaChmdW5jdGlvbihub2RlKSB7IHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dFNpYmxpbmcpIH0pOw0KICAgICAgZWxzZQ0KICAgICAgICBmcmFnbWVudHMuZWFjaChmdW5jdGlvbihub2RlKSB7IHBhcmVudC5hcHBlbmRDaGlsZChub2RlKSB9KTsNCiAgICB9DQogICAgZWxzZSBlbGVtZW50Lm91dGVySFRNTCA9IGNvbnRlbnQuc3RyaXBTY3JpcHRzKCk7DQoNCiAgICBjb250ZW50LmV2YWxTY3JpcHRzLmJpbmQoY29udGVudCkuZGVmZXIoKTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfTsNCn0NCg0KRWxlbWVudC5fcmV0dXJuT2Zmc2V0ID0gZnVuY3Rpb24obCwgdCkgew0KICB2YXIgcmVzdWx0ID0gW2wsIHRdOw0KICByZXN1bHQubGVmdCA9IGw7DQogIHJlc3VsdC50b3AgPSB0Ow0KICByZXR1cm4gcmVzdWx0Ow0KfTsNCg0KRWxlbWVudC5fZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50ID0gZnVuY3Rpb24odGFnTmFtZSwgaHRtbCkgew0KICB2YXIgZGl2ID0gbmV3IEVsZW1lbnQoJ2RpdicpLCB0ID0gRWxlbWVudC5faW5zZXJ0aW9uVHJhbnNsYXRpb25zLnRhZ3NbdGFnTmFtZV07DQogIGlmICh0KSB7DQogICAgZGl2LmlubmVySFRNTCA9IHRbMF0gKyBodG1sICsgdFsxXTsNCiAgICB0WzJdLnRpbWVzKGZ1bmN0aW9uKCkgeyBkaXYgPSBkaXYuZmlyc3RDaGlsZCB9KTsNCiAgfSBlbHNlIGRpdi5pbm5lckhUTUwgPSBodG1sOw0KICByZXR1cm4gJEEoZGl2LmNoaWxkTm9kZXMpOw0KfTsNCg0KRWxlbWVudC5faW5zZXJ0aW9uVHJhbnNsYXRpb25zID0gew0KICBiZWZvcmU6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHsNCiAgICBlbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGVsZW1lbnQpOw0KICB9LA0KICB0b3A6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHsNCiAgICBlbGVtZW50Lmluc2VydEJlZm9yZShub2RlLCBlbGVtZW50LmZpcnN0Q2hpbGQpOw0KICB9LA0KICBib3R0b206IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHsNCiAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpOw0KICB9LA0KICBhZnRlcjogZnVuY3Rpb24oZWxlbWVudCwgbm9kZSkgew0KICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgZWxlbWVudC5uZXh0U2libGluZyk7DQogIH0sDQogIHRhZ3M6IHsNCiAgICBUQUJMRTogIFsnPHRhYmxlPicsICAgICAgICAgICAgICAgICc8L3RhYmxlPicsICAgICAgICAgICAgICAgICAgIDFdLA0KICAgIFRCT0RZOiAgWyc8dGFibGU+PHRib2R5PicsICAgICAgICAgJzwvdGJvZHk+PC90YWJsZT4nLCAgICAgICAgICAgMl0sDQogICAgVFI6ICAgICBbJzx0YWJsZT48dGJvZHk+PHRyPicsICAgICAnPC90cj48L3Rib2R5PjwvdGFibGU+JywgICAgICAzXSwNCiAgICBURDogICAgIFsnPHRhYmxlPjx0Ym9keT48dHI+PHRkPicsICc8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPicsIDRdLA0KICAgIFNFTEVDVDogWyc8c2VsZWN0PicsICAgICAgICAgICAgICAgJzwvc2VsZWN0PicsICAgICAgICAgICAgICAgICAgMV0NCiAgfQ0KfTsNCg0KKGZ1bmN0aW9uKCkgew0KICB2YXIgdGFncyA9IEVsZW1lbnQuX2luc2VydGlvblRyYW5zbGF0aW9ucy50YWdzOw0KICBPYmplY3QuZXh0ZW5kKHRhZ3MsIHsNCiAgICBUSEVBRDogdGFncy5UQk9EWSwNCiAgICBURk9PVDogdGFncy5UQk9EWSwNCiAgICBUSDogICAgdGFncy5URA0KICB9KTsNCn0pKCk7DQoNCkVsZW1lbnQuTWV0aG9kcy5TaW11bGF0ZWQgPSB7DQogIGhhc0F0dHJpYnV0ZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7DQogICAgYXR0cmlidXRlID0gRWxlbWVudC5fYXR0cmlidXRlVHJhbnNsYXRpb25zLmhhc1thdHRyaWJ1dGVdIHx8IGF0dHJpYnV0ZTsNCiAgICB2YXIgbm9kZSA9ICQoZWxlbWVudCkuZ2V0QXR0cmlidXRlTm9kZShhdHRyaWJ1dGUpOw0KICAgIHJldHVybiAhIShub2RlICYmIG5vZGUuc3BlY2lmaWVkKTsNCiAgfQ0KfTsNCg0KRWxlbWVudC5NZXRob2RzLkJ5VGFnID0geyB9Ow0KDQpPYmplY3QuZXh0ZW5kKEVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcyk7DQoNCihmdW5jdGlvbihkaXYpIHsNCg0KICBpZiAoIVByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuRWxlbWVudEV4dGVuc2lvbnMgJiYgZGl2WydfX3Byb3RvX18nXSkgew0KICAgIHdpbmRvdy5IVE1MRWxlbWVudCA9IHsgfTsNCiAgICB3aW5kb3cuSFRNTEVsZW1lbnQucHJvdG90eXBlID0gZGl2WydfX3Byb3RvX18nXTsNCiAgICBQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLkVsZW1lbnRFeHRlbnNpb25zID0gdHJ1ZTsNCiAgfQ0KDQogIGRpdiA9IG51bGw7DQoNCn0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKQ0KDQpFbGVtZW50LmV4dGVuZCA9IChmdW5jdGlvbigpIHsNCg0KICBmdW5jdGlvbiBjaGVja0RlZmljaWVuY3kodGFnTmFtZSkgew0KICAgIGlmICh0eXBlb2Ygd2luZG93LkVsZW1lbnQgIT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgIHZhciBwcm90byA9IHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZTsNCiAgICAgIGlmIChwcm90bykgew0KICAgICAgICB2YXIgaWQgPSAnXycgKyAoTWF0aC5yYW5kb20oKSsnJykuc2xpY2UoMik7DQogICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7DQogICAgICAgIHByb3RvW2lkXSA9ICd4JzsNCiAgICAgICAgdmFyIGlzQnVnZ3kgPSAoZWxbaWRdICE9PSAneCcpOw0KICAgICAgICBkZWxldGUgcHJvdG9baWRdOw0KICAgICAgICBlbCA9IG51bGw7DQogICAgICAgIHJldHVybiBpc0J1Z2d5Ow0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZmFsc2U7DQogIH0NCg0KICBmdW5jdGlvbiBleHRlbmRFbGVtZW50V2l0aChlbGVtZW50LCBtZXRob2RzKSB7DQogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gbWV0aG9kcykgew0KICAgICAgdmFyIHZhbHVlID0gbWV0aG9kc1twcm9wZXJ0eV07DQogICAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24odmFsdWUpICYmICEocHJvcGVydHkgaW4gZWxlbWVudCkpDQogICAgICAgIGVsZW1lbnRbcHJvcGVydHldID0gdmFsdWUubWV0aG9kaXplKCk7DQogICAgfQ0KICB9DQoNCiAgdmFyIEhUTUxPQkpFQ1RFTEVNRU5UX1BST1RPVFlQRV9CVUdHWSA9IGNoZWNrRGVmaWNpZW5jeSgnb2JqZWN0Jyk7DQoNCiAgaWYgKFByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9ucykgew0KICAgIGlmIChIVE1MT0JKRUNURUxFTUVOVF9QUk9UT1RZUEVfQlVHR1kpIHsNCiAgICAgIHJldHVybiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgICAgIGlmIChlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgdmFyIHQgPSBlbGVtZW50LnRhZ05hbWU7DQogICAgICAgICAgaWYgKHQgJiYgKC9eKD86b2JqZWN0fGFwcGxldHxlbWJlZCkkL2kudGVzdCh0KSkpIHsNCiAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcyk7DQogICAgICAgICAgICBleHRlbmRFbGVtZW50V2l0aChlbGVtZW50LCBFbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkKTsNCiAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcy5CeVRhZ1t0LnRvVXBwZXJDYXNlKCldKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBQcm90b3R5cGUuSzsNCiAgfQ0KDQogIHZhciBNZXRob2RzID0geyB9LCBCeVRhZyA9IEVsZW1lbnQuTWV0aG9kcy5CeVRhZzsNCg0KICB2YXIgZXh0ZW5kID0gT2JqZWN0LmV4dGVuZChmdW5jdGlvbihlbGVtZW50KSB7DQogICAgaWYgKCFlbGVtZW50IHx8IHR5cGVvZiBlbGVtZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlICE9ICd1bmRlZmluZWQnIHx8DQogICAgICAgIGVsZW1lbnQubm9kZVR5cGUgIT0gMSB8fCBlbGVtZW50ID09IHdpbmRvdykgcmV0dXJuIGVsZW1lbnQ7DQoNCiAgICB2YXIgbWV0aG9kcyA9IE9iamVjdC5jbG9uZShNZXRob2RzKSwNCiAgICAgICAgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOw0KDQogICAgaWYgKEJ5VGFnW3RhZ05hbWVdKSBPYmplY3QuZXh0ZW5kKG1ldGhvZHMsIEJ5VGFnW3RhZ05hbWVdKTsNCg0KICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIG1ldGhvZHMpOw0KDQogICAgZWxlbWVudC5fZXh0ZW5kZWRCeVByb3RvdHlwZSA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOw0KICAgIHJldHVybiBlbGVtZW50Ow0KDQogIH0sIHsNCiAgICByZWZyZXNoOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICghUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5FbGVtZW50RXh0ZW5zaW9ucykgew0KICAgICAgICBPYmplY3QuZXh0ZW5kKE1ldGhvZHMsIEVsZW1lbnQuTWV0aG9kcyk7DQogICAgICAgIE9iamVjdC5leHRlbmQoTWV0aG9kcywgRWxlbWVudC5NZXRob2RzLlNpbXVsYXRlZCk7DQogICAgICB9DQogICAgfQ0KICB9KTsNCg0KICBleHRlbmQucmVmcmVzaCgpOw0KICByZXR1cm4gZXh0ZW5kOw0KfSkoKTsNCg0KRWxlbWVudC5oYXNBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHsNCiAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKSByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKTsNCiAgcmV0dXJuIEVsZW1lbnQuTWV0aG9kcy5TaW11bGF0ZWQuaGFzQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSk7DQp9Ow0KDQpFbGVtZW50LmFkZE1ldGhvZHMgPSBmdW5jdGlvbihtZXRob2RzKSB7DQogIHZhciBGID0gUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcywgVCA9IEVsZW1lbnQuTWV0aG9kcy5CeVRhZzsNCg0KICBpZiAoIW1ldGhvZHMpIHsNCiAgICBPYmplY3QuZXh0ZW5kKEZvcm0sIEZvcm0uTWV0aG9kcyk7DQogICAgT2JqZWN0LmV4dGVuZChGb3JtLkVsZW1lbnQsIEZvcm0uRWxlbWVudC5NZXRob2RzKTsNCiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTWV0aG9kcy5CeVRhZywgew0KICAgICAgIkZPUk0iOiAgICAgT2JqZWN0LmNsb25lKEZvcm0uTWV0aG9kcyksDQogICAgICAiSU5QVVQiOiAgICBPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpLA0KICAgICAgIlNFTEVDVCI6ICAgT2JqZWN0LmNsb25lKEZvcm0uRWxlbWVudC5NZXRob2RzKSwNCiAgICAgICJURVhUQVJFQSI6IE9iamVjdC5jbG9uZShGb3JtLkVsZW1lbnQuTWV0aG9kcykNCiAgICB9KTsNCiAgfQ0KDQogIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHsNCiAgICB2YXIgdGFnTmFtZSA9IG1ldGhvZHM7DQogICAgbWV0aG9kcyA9IGFyZ3VtZW50c1sxXTsNCiAgfQ0KDQogIGlmICghdGFnTmFtZSkgT2JqZWN0LmV4dGVuZChFbGVtZW50Lk1ldGhvZHMsIG1ldGhvZHMgfHwgeyB9KTsNCiAgZWxzZSB7DQogICAgaWYgKE9iamVjdC5pc0FycmF5KHRhZ05hbWUpKSB0YWdOYW1lLmVhY2goZXh0ZW5kKTsNCiAgICBlbHNlIGV4dGVuZCh0YWdOYW1lKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGV4dGVuZCh0YWdOYW1lKSB7DQogICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTsNCiAgICBpZiAoIUVsZW1lbnQuTWV0aG9kcy5CeVRhZ1t0YWdOYW1lXSkNCiAgICAgIEVsZW1lbnQuTWV0aG9kcy5CeVRhZ1t0YWdOYW1lXSA9IHsgfTsNCiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTWV0aG9kcy5CeVRhZ1t0YWdOYW1lXSwgbWV0aG9kcyk7DQogIH0NCg0KICBmdW5jdGlvbiBjb3B5KG1ldGhvZHMsIGRlc3RpbmF0aW9uLCBvbmx5SWZBYnNlbnQpIHsNCiAgICBvbmx5SWZBYnNlbnQgPSBvbmx5SWZBYnNlbnQgfHwgZmFsc2U7DQogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gbWV0aG9kcykgew0KICAgICAgdmFyIHZhbHVlID0gbWV0aG9kc1twcm9wZXJ0eV07DQogICAgICBpZiAoIU9iamVjdC5pc0Z1bmN0aW9uKHZhbHVlKSkgY29udGludWU7DQogICAgICBpZiAoIW9ubHlJZkFic2VudCB8fCAhKHByb3BlcnR5IGluIGRlc3RpbmF0aW9uKSkNCiAgICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gdmFsdWUubWV0aG9kaXplKCk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gZmluZERPTUNsYXNzKHRhZ05hbWUpIHsNCiAgICB2YXIga2xhc3M7DQogICAgdmFyIHRyYW5zID0gew0KICAgICAgIk9QVEdST1VQIjogIk9wdEdyb3VwIiwgIlRFWFRBUkVBIjogIlRleHRBcmVhIiwgIlAiOiAiUGFyYWdyYXBoIiwNCiAgICAgICJGSUVMRFNFVCI6ICJGaWVsZFNldCIsICJVTCI6ICJVTGlzdCIsICJPTCI6ICJPTGlzdCIsICJETCI6ICJETGlzdCIsDQogICAgICAiRElSIjogIkRpcmVjdG9yeSIsICJIMSI6ICJIZWFkaW5nIiwgIkgyIjogIkhlYWRpbmciLCAiSDMiOiAiSGVhZGluZyIsDQogICAgICAiSDQiOiAiSGVhZGluZyIsICJINSI6ICJIZWFkaW5nIiwgIkg2IjogIkhlYWRpbmciLCAiUSI6ICJRdW90ZSIsDQogICAgICAiSU5TIjogIk1vZCIsICJERUwiOiAiTW9kIiwgIkEiOiAiQW5jaG9yIiwgIklNRyI6ICJJbWFnZSIsICJDQVBUSU9OIjoNCiAgICAgICJUYWJsZUNhcHRpb24iLCAiQ09MIjogIlRhYmxlQ29sIiwgIkNPTEdST1VQIjogIlRhYmxlQ29sIiwgIlRIRUFEIjoNCiAgICAgICJUYWJsZVNlY3Rpb24iLCAiVEZPT1QiOiAiVGFibGVTZWN0aW9uIiwgIlRCT0RZIjogIlRhYmxlU2VjdGlvbiIsICJUUiI6DQogICAgICAiVGFibGVSb3ciLCAiVEgiOiAiVGFibGVDZWxsIiwgIlREIjogIlRhYmxlQ2VsbCIsICJGUkFNRVNFVCI6DQogICAgICAiRnJhbWVTZXQiLCAiSUZSQU1FIjogIklGcmFtZSINCiAgICB9Ow0KICAgIGlmICh0cmFuc1t0YWdOYW1lXSkga2xhc3MgPSAnSFRNTCcgKyB0cmFuc1t0YWdOYW1lXSArICdFbGVtZW50JzsNCiAgICBpZiAod2luZG93W2tsYXNzXSkgcmV0dXJuIHdpbmRvd1trbGFzc107DQogICAga2xhc3MgPSAnSFRNTCcgKyB0YWdOYW1lICsgJ0VsZW1lbnQnOw0KICAgIGlmICh3aW5kb3dba2xhc3NdKSByZXR1cm4gd2luZG93W2tsYXNzXTsNCiAgICBrbGFzcyA9ICdIVE1MJyArIHRhZ05hbWUuY2FwaXRhbGl6ZSgpICsgJ0VsZW1lbnQnOw0KICAgIGlmICh3aW5kb3dba2xhc3NdKSByZXR1cm4gd2luZG93W2tsYXNzXTsNCg0KICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsNCiAgICB2YXIgcHJvdG8gPSBlbGVtZW50WydfX3Byb3RvX18nXSB8fCBlbGVtZW50LmNvbnN0cnVjdG9yLnByb3RvdHlwZTsNCiAgICBlbGVtZW50ID0gbnVsbDsNCiAgICByZXR1cm4gcHJvdG87DQogIH0NCg0KICB2YXIgZWxlbWVudFByb3RvdHlwZSA9IHdpbmRvdy5IVE1MRWxlbWVudCA/IEhUTUxFbGVtZW50LnByb3RvdHlwZSA6DQogICBFbGVtZW50LnByb3RvdHlwZTsNCg0KICBpZiAoRi5FbGVtZW50RXh0ZW5zaW9ucykgew0KICAgIGNvcHkoRWxlbWVudC5NZXRob2RzLCBlbGVtZW50UHJvdG90eXBlKTsNCiAgICBjb3B5KEVsZW1lbnQuTWV0aG9kcy5TaW11bGF0ZWQsIGVsZW1lbnRQcm90b3R5cGUsIHRydWUpOw0KICB9DQoNCiAgaWYgKEYuU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9ucykgew0KICAgIGZvciAodmFyIHRhZyBpbiBFbGVtZW50Lk1ldGhvZHMuQnlUYWcpIHsNCiAgICAgIHZhciBrbGFzcyA9IGZpbmRET01DbGFzcyh0YWcpOw0KICAgICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChrbGFzcykpIGNvbnRpbnVlOw0KICAgICAgY29weShUW3RhZ10sIGtsYXNzLnByb3RvdHlwZSk7DQogICAgfQ0KICB9DQoNCiAgT2JqZWN0LmV4dGVuZChFbGVtZW50LCBFbGVtZW50Lk1ldGhvZHMpOw0KICBkZWxldGUgRWxlbWVudC5CeVRhZzsNCg0KICBpZiAoRWxlbWVudC5leHRlbmQucmVmcmVzaCkgRWxlbWVudC5leHRlbmQucmVmcmVzaCgpOw0KICBFbGVtZW50LmNhY2hlID0geyB9Ow0KfTsNCg0KDQpkb2N1bWVudC52aWV3cG9ydCA9IHsNCg0KICBnZXREaW1lbnNpb25zOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4geyB3aWR0aDogdGhpcy5nZXRXaWR0aCgpLCBoZWlnaHQ6IHRoaXMuZ2V0SGVpZ2h0KCkgfTsNCiAgfSwNCg0KICBnZXRTY3JvbGxPZmZzZXRzOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gRWxlbWVudC5fcmV0dXJuT2Zmc2V0KA0KICAgICAgd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCwNCiAgICAgIHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7DQogIH0NCn07DQoNCihmdW5jdGlvbih2aWV3cG9ydCkgew0KICB2YXIgQiA9IFByb3RvdHlwZS5Ccm93c2VyLCBkb2MgPSBkb2N1bWVudCwgZWxlbWVudCwgcHJvcGVydHkgPSB7fTsNCg0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCgpIHsNCiAgICBpZiAoQi5XZWJLaXQgJiYgIWRvYy5ldmFsdWF0ZSkNCiAgICAgIHJldHVybiBkb2N1bWVudDsNCg0KICAgIGlmIChCLk9wZXJhICYmIHdpbmRvdy5wYXJzZUZsb2F0KHdpbmRvdy5vcGVyYS52ZXJzaW9uKCkpIDwgOS41KQ0KICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7DQoNCiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Ow0KICB9DQoNCiAgZnVuY3Rpb24gZGVmaW5lKEQpIHsNCiAgICBpZiAoIWVsZW1lbnQpIGVsZW1lbnQgPSBnZXRSb290RWxlbWVudCgpOw0KDQogICAgcHJvcGVydHlbRF0gPSAnY2xpZW50JyArIEQ7DQoNCiAgICB2aWV3cG9ydFsnZ2V0JyArIERdID0gZnVuY3Rpb24oKSB7IHJldHVybiBlbGVtZW50W3Byb3BlcnR5W0RdXSB9Ow0KICAgIHJldHVybiB2aWV3cG9ydFsnZ2V0JyArIERdKCk7DQogIH0NCg0KICB2aWV3cG9ydC5nZXRXaWR0aCAgPSBkZWZpbmUuY3VycnkoJ1dpZHRoJyk7DQoNCiAgdmlld3BvcnQuZ2V0SGVpZ2h0ID0gZGVmaW5lLmN1cnJ5KCdIZWlnaHQnKTsNCn0pKGRvY3VtZW50LnZpZXdwb3J0KTsNCg0KDQpFbGVtZW50LlN0b3JhZ2UgPSB7DQogIFVJRDogMQ0KfTsNCg0KRWxlbWVudC5hZGRNZXRob2RzKHsNCiAgZ2V0U3RvcmFnZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOw0KDQogICAgdmFyIHVpZDsNCiAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSB7DQogICAgICB1aWQgPSAwOw0KICAgIH0gZWxzZSB7DQogICAgICBpZiAodHlwZW9mIGVsZW1lbnQuX3Byb3RvdHlwZVVJRCA9PT0gInVuZGVmaW5lZCIpDQogICAgICAgIGVsZW1lbnQuX3Byb3RvdHlwZVVJRCA9IFtFbGVtZW50LlN0b3JhZ2UuVUlEKytdOw0KICAgICAgdWlkID0gZWxlbWVudC5fcHJvdG90eXBlVUlEWzBdOw0KICAgIH0NCg0KICAgIGlmICghRWxlbWVudC5TdG9yYWdlW3VpZF0pDQogICAgICBFbGVtZW50LlN0b3JhZ2VbdWlkXSA9ICRIKCk7DQoNCiAgICByZXR1cm4gRWxlbWVudC5TdG9yYWdlW3VpZF07DQogIH0sDQoNCiAgc3RvcmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGtleSwgdmFsdWUpIHsNCiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsNCg0KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7DQogICAgICBFbGVtZW50LmdldFN0b3JhZ2UoZWxlbWVudCkudXBkYXRlKGtleSk7DQogICAgfSBlbHNlIHsNCiAgICAgIEVsZW1lbnQuZ2V0U3RvcmFnZShlbGVtZW50KS5zZXQoa2V5LCB2YWx1ZSk7DQogICAgfQ0KDQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgcmV0cmlldmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGtleSwgZGVmYXVsdFZhbHVlKSB7DQogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47DQogICAgdmFyIGhhc2ggPSBFbGVtZW50LmdldFN0b3JhZ2UoZWxlbWVudCksIHZhbHVlID0gaGFzaC5nZXQoa2V5KTsNCg0KICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSB7DQogICAgICBoYXNoLnNldChrZXksIGRlZmF1bHRWYWx1ZSk7DQogICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdmFsdWU7DQogIH0sDQoNCiAgY2xvbmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGRlZXApIHsNCiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsNCiAgICB2YXIgY2xvbmUgPSBlbGVtZW50LmNsb25lTm9kZShkZWVwKTsNCiAgICBjbG9uZS5fcHJvdG90eXBlVUlEID0gdm9pZCAwOw0KICAgIGlmIChkZWVwKSB7DQogICAgICB2YXIgZGVzY2VuZGFudHMgPSBFbGVtZW50LnNlbGVjdChjbG9uZSwgJyonKSwNCiAgICAgICAgICBpID0gZGVzY2VuZGFudHMubGVuZ3RoOw0KICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICBkZXNjZW5kYW50c1tpXS5fcHJvdG90eXBlVUlEID0gdm9pZCAwOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoY2xvbmUpOw0KICB9DQp9KTsNCi8qIFBvcnRpb25zIG9mIHRoZSBTZWxlY3RvciBjbGFzcyBhcmUgZGVyaXZlZCBmcm9tIEphY2sgU2xvY3VtJ3MgRG9tUXVlcnksDQogKiBwYXJ0IG9mIFlVSS1FeHQgdmVyc2lvbiAwLjQwLCBkaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgYW4gTUlULXN0eWxlDQogKiBsaWNlbnNlLiAgUGxlYXNlIHNlZSBodHRwOi8vd3d3Lnl1aS1leHQuY29tLyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gKi8NCg0KdmFyIFNlbGVjdG9yID0gQ2xhc3MuY3JlYXRlKHsNCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZXhwcmVzc2lvbikgew0KICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uc3RyaXAoKTsNCg0KICAgIGlmICh0aGlzLnNob3VsZFVzZVNlbGVjdG9yc0FQSSgpKSB7DQogICAgICB0aGlzLm1vZGUgPSAnc2VsZWN0b3JzQVBJJzsNCiAgICB9IGVsc2UgaWYgKHRoaXMuc2hvdWxkVXNlWFBhdGgoKSkgew0KICAgICAgdGhpcy5tb2RlID0gJ3hwYXRoJzsNCiAgICAgIHRoaXMuY29tcGlsZVhQYXRoTWF0Y2hlcigpOw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLm1vZGUgPSAibm9ybWFsIjsNCiAgICAgIHRoaXMuY29tcGlsZU1hdGNoZXIoKTsNCiAgICB9DQoNCiAgfSwNCg0KICBzaG91bGRVc2VYUGF0aDogKGZ1bmN0aW9uKCkgew0KDQogICAgdmFyIElTX0RFU0NFTkRBTlRfU0VMRUNUT1JfQlVHR1kgPSAoZnVuY3Rpb24oKXsNCiAgICAgIHZhciBpc0J1Z2d5ID0gZmFsc2U7DQogICAgICBpZiAoZG9jdW1lbnQuZXZhbHVhdGUgJiYgd2luZG93LlhQYXRoUmVzdWx0KSB7DQogICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBlbC5pbm5lckhUTUwgPSAnPHVsPjxsaT48L2xpPjwvdWw+PGRpdj48dWw+PGxpPjwvbGk+PC91bD48L2Rpdj4nOw0KDQogICAgICAgIHZhciB4cGF0aCA9ICIuLy8qW2xvY2FsLW5hbWUoKT0ndWwnIG9yIGxvY2FsLW5hbWUoKT0nVUwnXSIgKw0KICAgICAgICAgICIvLypbbG9jYWwtbmFtZSgpPSdsaScgb3IgbG9jYWwtbmFtZSgpPSdMSSddIjsNCg0KICAgICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnQuZXZhbHVhdGUoeHBhdGgsIGVsLCBudWxsLA0KICAgICAgICAgIFhQYXRoUmVzdWx0Lk9SREVSRURfTk9ERV9TTkFQU0hPVF9UWVBFLCBudWxsKTsNCg0KICAgICAgICBpc0J1Z2d5ID0gKHJlc3VsdC5zbmFwc2hvdExlbmd0aCAhPT0gMik7DQogICAgICAgIGVsID0gbnVsbDsNCiAgICAgIH0NCiAgICAgIHJldHVybiBpc0J1Z2d5Ow0KICAgIH0pKCk7DQoNCiAgICByZXR1cm4gZnVuY3Rpb24oKSB7DQogICAgICBpZiAoIVByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuWFBhdGgpIHJldHVybiBmYWxzZTsNCg0KICAgICAgdmFyIGUgPSB0aGlzLmV4cHJlc3Npb247DQoNCiAgICAgIGlmIChQcm90b3R5cGUuQnJvd3Nlci5XZWJLaXQgJiYNCiAgICAgICAoZS5pbmNsdWRlKCItb2YtdHlwZSIpIHx8IGUuaW5jbHVkZSgiOmVtcHR5IikpKQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAgIGlmICgoLyhcW1tcdy1dKj86fDpjaGVja2VkKS8pLnRlc3QoZSkpDQogICAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgICAgaWYgKElTX0RFU0NFTkRBTlRfU0VMRUNUT1JfQlVHR1kpIHJldHVybiBmYWxzZTsNCg0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogIH0pKCksDQoNCiAgc2hvdWxkVXNlU2VsZWN0b3JzQVBJOiBmdW5jdGlvbigpIHsNCiAgICBpZiAoIVByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuU2VsZWN0b3JzQVBJKSByZXR1cm4gZmFsc2U7DQoNCiAgICBpZiAoU2VsZWN0b3IuQ0FTRV9JTlNFTlNJVElWRV9DTEFTU19OQU1FUykgcmV0dXJuIGZhbHNlOw0KDQogICAgaWYgKCFTZWxlY3Rvci5fZGl2KSBTZWxlY3Rvci5fZGl2ID0gbmV3IEVsZW1lbnQoJ2RpdicpOw0KDQogICAgdHJ5IHsNCiAgICAgIFNlbGVjdG9yLl9kaXYucXVlcnlTZWxlY3Rvcih0aGlzLmV4cHJlc3Npb24pOw0KICAgIH0gY2F0Y2goZSkgew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KICB9LA0KDQogIGNvbXBpbGVNYXRjaGVyOiBmdW5jdGlvbigpIHsNCiAgICB2YXIgZSA9IHRoaXMuZXhwcmVzc2lvbiwgcHMgPSBTZWxlY3Rvci5wYXR0ZXJucywgaCA9IFNlbGVjdG9yLmhhbmRsZXJzLA0KICAgICAgICBjID0gU2VsZWN0b3IuY3JpdGVyaWEsIGxlLCBwLCBtLCBsZW4gPSBwcy5sZW5ndGgsIG5hbWU7DQoNCiAgICBpZiAoU2VsZWN0b3IuX2NhY2hlW2VdKSB7DQogICAgICB0aGlzLm1hdGNoZXIgPSBTZWxlY3Rvci5fY2FjaGVbZV07DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgdGhpcy5tYXRjaGVyID0gWyJ0aGlzLm1hdGNoZXIgPSBmdW5jdGlvbihyb290KSB7IiwNCiAgICAgICAgICAgICAgICAgICAgInZhciByID0gcm9vdCwgaCA9IFNlbGVjdG9yLmhhbmRsZXJzLCBjID0gZmFsc2UsIG47Il07DQoNCiAgICB3aGlsZSAoZSAmJiBsZSAhPSBlICYmICgvXFMvKS50ZXN0KGUpKSB7DQogICAgICBsZSA9IGU7DQogICAgICBmb3IgKHZhciBpID0gMDsgaTxsZW47IGkrKykgew0KICAgICAgICBwID0gcHNbaV0ucmU7DQogICAgICAgIG5hbWUgPSBwc1tpXS5uYW1lOw0KICAgICAgICBpZiAobSA9IGUubWF0Y2gocCkpIHsNCiAgICAgICAgICB0aGlzLm1hdGNoZXIucHVzaChPYmplY3QuaXNGdW5jdGlvbihjW25hbWVdKSA/IGNbbmFtZV0obSkgOg0KICAgICAgICAgICAgbmV3IFRlbXBsYXRlKGNbbmFtZV0pLmV2YWx1YXRlKG0pKTsNCiAgICAgICAgICBlID0gZS5yZXBsYWNlKG1bMF0sICcnKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHRoaXMubWF0Y2hlci5wdXNoKCJyZXR1cm4gaC51bmlxdWUobik7XG59Iik7DQogICAgZXZhbCh0aGlzLm1hdGNoZXIuam9pbignXG4nKSk7DQogICAgU2VsZWN0b3IuX2NhY2hlW3RoaXMuZXhwcmVzc2lvbl0gPSB0aGlzLm1hdGNoZXI7DQogIH0sDQoNCiAgY29tcGlsZVhQYXRoTWF0Y2hlcjogZnVuY3Rpb24oKSB7DQogICAgdmFyIGUgPSB0aGlzLmV4cHJlc3Npb24sIHBzID0gU2VsZWN0b3IucGF0dGVybnMsDQogICAgICAgIHggPSBTZWxlY3Rvci54cGF0aCwgbGUsIG0sIGxlbiA9IHBzLmxlbmd0aCwgbmFtZTsNCg0KICAgIGlmIChTZWxlY3Rvci5fY2FjaGVbZV0pIHsNCiAgICAgIHRoaXMueHBhdGggPSBTZWxlY3Rvci5fY2FjaGVbZV07IHJldHVybjsNCiAgICB9DQoNCiAgICB0aGlzLm1hdGNoZXIgPSBbJy4vLyonXTsNCiAgICB3aGlsZSAoZSAmJiBsZSAhPSBlICYmICgvXFMvKS50ZXN0KGUpKSB7DQogICAgICBsZSA9IGU7DQogICAgICBmb3IgKHZhciBpID0gMDsgaTxsZW47IGkrKykgew0KICAgICAgICBuYW1lID0gcHNbaV0ubmFtZTsNCiAgICAgICAgaWYgKG0gPSBlLm1hdGNoKHBzW2ldLnJlKSkgew0KICAgICAgICAgIHRoaXMubWF0Y2hlci5wdXNoKE9iamVjdC5pc0Z1bmN0aW9uKHhbbmFtZV0pID8geFtuYW1lXShtKSA6DQogICAgICAgICAgICBuZXcgVGVtcGxhdGUoeFtuYW1lXSkuZXZhbHVhdGUobSkpOw0KICAgICAgICAgIGUgPSBlLnJlcGxhY2UobVswXSwgJycpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgdGhpcy54cGF0aCA9IHRoaXMubWF0Y2hlci5qb2luKCcnKTsNCiAgICBTZWxlY3Rvci5fY2FjaGVbdGhpcy5leHByZXNzaW9uXSA9IHRoaXMueHBhdGg7DQogIH0sDQoNCiAgZmluZEVsZW1lbnRzOiBmdW5jdGlvbihyb290KSB7DQogICAgcm9vdCA9IHJvb3QgfHwgZG9jdW1lbnQ7DQogICAgdmFyIGUgPSB0aGlzLmV4cHJlc3Npb24sIHJlc3VsdHM7DQoNCiAgICBzd2l0Y2ggKHRoaXMubW9kZSkgew0KICAgICAgY2FzZSAnc2VsZWN0b3JzQVBJJzoNCiAgICAgICAgaWYgKHJvb3QgIT09IGRvY3VtZW50KSB7DQogICAgICAgICAgdmFyIG9sZElkID0gcm9vdC5pZCwgaWQgPSAkKHJvb3QpLmlkZW50aWZ5KCk7DQogICAgICAgICAgaWQgPSBpZC5yZXBsYWNlKC8oW1wuOl0pL2csICJcXCQxIik7DQogICAgICAgICAgZSA9ICIjIiArIGlkICsgIiAiICsgZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJlc3VsdHMgPSAkQShyb290LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpLm1hcChFbGVtZW50LmV4dGVuZCk7DQogICAgICAgIHJvb3QuaWQgPSBvbGRJZDsNCg0KICAgICAgICByZXR1cm4gcmVzdWx0czsNCiAgICAgIGNhc2UgJ3hwYXRoJzoNCiAgICAgICAgcmV0dXJuIGRvY3VtZW50Ll9nZXRFbGVtZW50c0J5WFBhdGgodGhpcy54cGF0aCwgcm9vdCk7DQogICAgICBkZWZhdWx0Og0KICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXIocm9vdCk7DQogICAgfQ0KICB9LA0KDQogIG1hdGNoOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgdGhpcy50b2tlbnMgPSBbXTsNCg0KICAgIHZhciBlID0gdGhpcy5leHByZXNzaW9uLCBwcyA9IFNlbGVjdG9yLnBhdHRlcm5zLCBhcyA9IFNlbGVjdG9yLmFzc2VydGlvbnM7DQogICAgdmFyIGxlLCBwLCBtLCBsZW4gPSBwcy5sZW5ndGgsIG5hbWU7DQoNCiAgICB3aGlsZSAoZSAmJiBsZSAhPT0gZSAmJiAoL1xTLykudGVzdChlKSkgew0KICAgICAgbGUgPSBlOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGk8bGVuOyBpKyspIHsNCiAgICAgICAgcCA9IHBzW2ldLnJlOw0KICAgICAgICBuYW1lID0gcHNbaV0ubmFtZTsNCiAgICAgICAgaWYgKG0gPSBlLm1hdGNoKHApKSB7DQogICAgICAgICAgaWYgKGFzW25hbWVdKSB7DQogICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKFtuYW1lLCBPYmplY3QuY2xvbmUobSldKTsNCiAgICAgICAgICAgIGUgPSBlLnJlcGxhY2UobVswXSwgJycpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kRWxlbWVudHMoZG9jdW1lbnQpLmluY2x1ZGUoZWxlbWVudCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIG1hdGNoID0gdHJ1ZSwgbmFtZSwgbWF0Y2hlczsNCiAgICBmb3IgKHZhciBpID0gMCwgdG9rZW47IHRva2VuID0gdGhpcy50b2tlbnNbaV07IGkrKykgew0KICAgICAgbmFtZSA9IHRva2VuWzBdLCBtYXRjaGVzID0gdG9rZW5bMV07DQogICAgICBpZiAoIVNlbGVjdG9yLmFzc2VydGlvbnNbbmFtZV0oZWxlbWVudCwgbWF0Y2hlcykpIHsNCiAgICAgICAgbWF0Y2ggPSBmYWxzZTsgYnJlYWs7DQogICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG1hdGNoOw0KICB9LA0KDQogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uOw0KICB9LA0KDQogIGluc3BlY3Q6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiAiIzxTZWxlY3RvcjoiICsgdGhpcy5leHByZXNzaW9uLmluc3BlY3QoKSArICI+IjsNCiAgfQ0KfSk7DQoNCmlmIChQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLlNlbGVjdG9yc0FQSSAmJg0KIGRvY3VtZW50LmNvbXBhdE1vZGUgPT09ICdCYWNrQ29tcGF0Jykgew0KICBTZWxlY3Rvci5DQVNFX0lOU0VOU0lUSVZFX0NMQVNTX05BTUVTID0gKGZ1bmN0aW9uKCl7DQogICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLA0KICAgICBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KDQogICAgZGl2LmlkID0gInByb3RvdHlwZV90ZXN0X2lkIjsNCiAgICBzcGFuLmNsYXNzTmFtZSA9ICdUZXN0JzsNCiAgICBkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7DQogICAgdmFyIGlzSWdub3JlZCA9IChkaXYucXVlcnlTZWxlY3RvcignI3Byb3RvdHlwZV90ZXN0X2lkIC50ZXN0JykgIT09IG51bGwpOw0KICAgIGRpdiA9IHNwYW4gPSBudWxsOw0KICAgIHJldHVybiBpc0lnbm9yZWQ7DQogIH0pKCk7DQp9DQoNCk9iamVjdC5leHRlbmQoU2VsZWN0b3IsIHsNCiAgX2NhY2hlOiB7IH0sDQoNCiAgeHBhdGg6IHsNCiAgICBkZXNjZW5kYW50OiAgICIvLyoiLA0KICAgIGNoaWxkOiAgICAgICAgIi8qIiwNCiAgICBhZGphY2VudDogICAgICIvZm9sbG93aW5nLXNpYmxpbmc6OipbMV0iLA0KICAgIGxhdGVyU2libGluZzogJy9mb2xsb3dpbmctc2libGluZzo6KicsDQogICAgdGFnTmFtZTogICAgICBmdW5jdGlvbihtKSB7DQogICAgICBpZiAobVsxXSA9PSAnKicpIHJldHVybiAnJzsNCiAgICAgIHJldHVybiAiW2xvY2FsLW5hbWUoKT0nIiArIG1bMV0udG9Mb3dlckNhc2UoKSArDQogICAgICAgICAgICAgIicgb3IgbG9jYWwtbmFtZSgpPSciICsgbVsxXS50b1VwcGVyQ2FzZSgpICsgIiddIjsNCiAgICB9LA0KICAgIGNsYXNzTmFtZTogICAgIltjb250YWlucyhjb25jYXQoJyAnLCBAY2xhc3MsICcgJyksICcgI3sxfSAnKV0iLA0KICAgIGlkOiAgICAgICAgICAgIltAaWQ9JyN7MX0nXSIsDQogICAgYXR0clByZXNlbmNlOiBmdW5jdGlvbihtKSB7DQogICAgICBtWzFdID0gbVsxXS50b0xvd2VyQ2FzZSgpOw0KICAgICAgcmV0dXJuIG5ldyBUZW1wbGF0ZSgiW0AjezF9XSIpLmV2YWx1YXRlKG0pOw0KICAgIH0sDQogICAgYXR0cjogZnVuY3Rpb24obSkgew0KICAgICAgbVsxXSA9IG1bMV0udG9Mb3dlckNhc2UoKTsNCiAgICAgIG1bM10gPSBtWzVdIHx8IG1bNl07DQogICAgICByZXR1cm4gbmV3IFRlbXBsYXRlKFNlbGVjdG9yLnhwYXRoLm9wZXJhdG9yc1ttWzJdXSkuZXZhbHVhdGUobSk7DQogICAgfSwNCiAgICBwc2V1ZG86IGZ1bmN0aW9uKG0pIHsNCiAgICAgIHZhciBoID0gU2VsZWN0b3IueHBhdGgucHNldWRvc1ttWzFdXTsNCiAgICAgIGlmICghaCkgcmV0dXJuICcnOw0KICAgICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKGgpKSByZXR1cm4gaChtKTsNCiAgICAgIHJldHVybiBuZXcgVGVtcGxhdGUoU2VsZWN0b3IueHBhdGgucHNldWRvc1ttWzFdXSkuZXZhbHVhdGUobSk7DQogICAgfSwNCiAgICBvcGVyYXRvcnM6IHsNCiAgICAgICc9JzogICJbQCN7MX09JyN7M30nXSIsDQogICAgICAnIT0nOiAiW0AjezF9IT0nI3szfSddIiwNCiAgICAgICdePSc6ICJbc3RhcnRzLXdpdGgoQCN7MX0sICcjezN9JyldIiwNCiAgICAgICckPSc6ICJbc3Vic3RyaW5nKEAjezF9LCAoc3RyaW5nLWxlbmd0aChAI3sxfSkgLSBzdHJpbmctbGVuZ3RoKCcjezN9JykgKyAxKSk9JyN7M30nXSIsDQogICAgICAnKj0nOiAiW2NvbnRhaW5zKEAjezF9LCAnI3szfScpXSIsDQogICAgICAnfj0nOiAiW2NvbnRhaW5zKGNvbmNhdCgnICcsIEAjezF9LCAnICcpLCAnICN7M30gJyldIiwNCiAgICAgICd8PSc6ICJbY29udGFpbnMoY29uY2F0KCctJywgQCN7MX0sICctJyksICctI3szfS0nKV0iDQogICAgfSwNCiAgICBwc2V1ZG9zOiB7DQogICAgICAnZmlyc3QtY2hpbGQnOiAnW25vdChwcmVjZWRpbmctc2libGluZzo6KildJywNCiAgICAgICdsYXN0LWNoaWxkJzogICdbbm90KGZvbGxvd2luZy1zaWJsaW5nOjoqKV0nLA0KICAgICAgJ29ubHktY2hpbGQnOiAgJ1tub3QocHJlY2VkaW5nLXNpYmxpbmc6Oiogb3IgZm9sbG93aW5nLXNpYmxpbmc6OiopXScsDQogICAgICAnZW1wdHknOiAgICAgICAiW2NvdW50KCopID0gMCBhbmQgKGNvdW50KHRleHQoKSkgPSAwKV0iLA0KICAgICAgJ2NoZWNrZWQnOiAgICAgIltAY2hlY2tlZF0iLA0KICAgICAgJ2Rpc2FibGVkJzogICAgIlsoQGRpc2FibGVkKSBhbmQgKEB0eXBlIT0naGlkZGVuJyldIiwNCiAgICAgICdlbmFibGVkJzogICAgICJbbm90KEBkaXNhYmxlZCkgYW5kIChAdHlwZSE9J2hpZGRlbicpXSIsDQogICAgICAnbm90JzogZnVuY3Rpb24obSkgew0KICAgICAgICB2YXIgZSA9IG1bNl0sIHAgPSBTZWxlY3Rvci5wYXR0ZXJucywNCiAgICAgICAgICAgIHggPSBTZWxlY3Rvci54cGF0aCwgbGUsIHYsIGxlbiA9IHAubGVuZ3RoLCBuYW1lOw0KDQogICAgICAgIHZhciBleGNsdXNpb24gPSBbXTsNCiAgICAgICAgd2hpbGUgKGUgJiYgbGUgIT0gZSAmJiAoL1xTLykudGVzdChlKSkgew0KICAgICAgICAgIGxlID0gZTsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaTxsZW47IGkrKykgew0KICAgICAgICAgICAgbmFtZSA9IHBbaV0ubmFtZQ0KICAgICAgICAgICAgaWYgKG0gPSBlLm1hdGNoKHBbaV0ucmUpKSB7DQogICAgICAgICAgICAgIHYgPSBPYmplY3QuaXNGdW5jdGlvbih4W25hbWVdKSA/IHhbbmFtZV0obSkgOiBuZXcgVGVtcGxhdGUoeFtuYW1lXSkuZXZhbHVhdGUobSk7DQogICAgICAgICAgICAgIGV4Y2x1c2lvbi5wdXNoKCIoIiArIHYuc3Vic3RyaW5nKDEsIHYubGVuZ3RoIC0gMSkgKyAiKSIpOw0KICAgICAgICAgICAgICBlID0gZS5yZXBsYWNlKG1bMF0sICcnKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiAiW25vdCgiICsgZXhjbHVzaW9uLmpvaW4oIiBhbmQgIikgKyAiKV0iOw0KICAgICAgfSwNCiAgICAgICdudGgtY2hpbGQnOiAgICAgIGZ1bmN0aW9uKG0pIHsNCiAgICAgICAgcmV0dXJuIFNlbGVjdG9yLnhwYXRoLnBzZXVkb3MubnRoKCIoY291bnQoLi9wcmVjZWRpbmctc2libGluZzo6KikgKyAxKSAiLCBtKTsNCiAgICAgIH0sDQogICAgICAnbnRoLWxhc3QtY2hpbGQnOiBmdW5jdGlvbihtKSB7DQogICAgICAgIHJldHVybiBTZWxlY3Rvci54cGF0aC5wc2V1ZG9zLm50aCgiKGNvdW50KC4vZm9sbG93aW5nLXNpYmxpbmc6OiopICsgMSkgIiwgbSk7DQogICAgICB9LA0KICAgICAgJ250aC1vZi10eXBlJzogICAgZnVuY3Rpb24obSkgew0KICAgICAgICByZXR1cm4gU2VsZWN0b3IueHBhdGgucHNldWRvcy5udGgoInBvc2l0aW9uKCkgIiwgbSk7DQogICAgICB9LA0KICAgICAgJ250aC1sYXN0LW9mLXR5cGUnOiBmdW5jdGlvbihtKSB7DQogICAgICAgIHJldHVybiBTZWxlY3Rvci54cGF0aC5wc2V1ZG9zLm50aCgiKGxhc3QoKSArIDEgLSBwb3NpdGlvbigpKSAiLCBtKTsNCiAgICAgIH0sDQogICAgICAnZmlyc3Qtb2YtdHlwZSc6ICBmdW5jdGlvbihtKSB7DQogICAgICAgIG1bNl0gPSAiMSI7IHJldHVybiBTZWxlY3Rvci54cGF0aC5wc2V1ZG9zWydudGgtb2YtdHlwZSddKG0pOw0KICAgICAgfSwNCiAgICAgICdsYXN0LW9mLXR5cGUnOiAgIGZ1bmN0aW9uKG0pIHsNCiAgICAgICAgbVs2XSA9ICIxIjsgcmV0dXJuIFNlbGVjdG9yLnhwYXRoLnBzZXVkb3NbJ250aC1sYXN0LW9mLXR5cGUnXShtKTsNCiAgICAgIH0sDQogICAgICAnb25seS1vZi10eXBlJzogICBmdW5jdGlvbihtKSB7DQogICAgICAgIHZhciBwID0gU2VsZWN0b3IueHBhdGgucHNldWRvczsgcmV0dXJuIHBbJ2ZpcnN0LW9mLXR5cGUnXShtKSArIHBbJ2xhc3Qtb2YtdHlwZSddKG0pOw0KICAgICAgfSwNCiAgICAgIG50aDogZnVuY3Rpb24oZnJhZ21lbnQsIG0pIHsNCiAgICAgICAgdmFyIG1tLCBmb3JtdWxhID0gbVs2XSwgcHJlZGljYXRlOw0KICAgICAgICBpZiAoZm9ybXVsYSA9PSAnZXZlbicpIGZvcm11bGEgPSAnMm4rMCc7DQogICAgICAgIGlmIChmb3JtdWxhID09ICdvZGQnKSAgZm9ybXVsYSA9ICcybisxJzsNCiAgICAgICAgaWYgKG1tID0gZm9ybXVsYS5tYXRjaCgvXihcZCspJC8pKSAvLyBkaWdpdCBvbmx5DQogICAgICAgICAgcmV0dXJuICdbJyArIGZyYWdtZW50ICsgIj0gIiArIG1tWzFdICsgJ10nOw0KICAgICAgICBpZiAobW0gPSBmb3JtdWxhLm1hdGNoKC9eKC0/XGQqKT9uKChbKy1dKShcZCspKT8vKSkgeyAvLyBhbitiDQogICAgICAgICAgaWYgKG1tWzFdID09ICItIikgbW1bMV0gPSAtMTsNCiAgICAgICAgICB2YXIgYSA9IG1tWzFdID8gTnVtYmVyKG1tWzFdKSA6IDE7DQogICAgICAgICAgdmFyIGIgPSBtbVsyXSA/IE51bWJlcihtbVsyXSkgOiAwOw0KICAgICAgICAgIHByZWRpY2F0ZSA9ICJbKCgje2ZyYWdtZW50fSAtICN7Yn0pIG1vZCAje2F9ID0gMCkgYW5kICIgKw0KICAgICAgICAgICIoKCN7ZnJhZ21lbnR9IC0gI3tifSkgZGl2ICN7YX0gPj0gMCldIjsNCiAgICAgICAgICByZXR1cm4gbmV3IFRlbXBsYXRlKHByZWRpY2F0ZSkuZXZhbHVhdGUoew0KICAgICAgICAgICAgZnJhZ21lbnQ6IGZyYWdtZW50LCBhOiBhLCBiOiBiIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIGNyaXRlcmlhOiB7DQogICAgdGFnTmFtZTogICAgICAnbiA9IGgudGFnTmFtZShuLCByLCAiI3sxfSIsIGMpOyAgICAgIGMgPSBmYWxzZTsnLA0KICAgIGNsYXNzTmFtZTogICAgJ24gPSBoLmNsYXNzTmFtZShuLCByLCAiI3sxfSIsIGMpOyAgICBjID0gZmFsc2U7JywNCiAgICBpZDogICAgICAgICAgICduID0gaC5pZChuLCByLCAiI3sxfSIsIGMpOyAgICAgICAgICAgYyA9IGZhbHNlOycsDQogICAgYXR0clByZXNlbmNlOiAnbiA9IGguYXR0clByZXNlbmNlKG4sIHIsICIjezF9IiwgYyk7IGMgPSBmYWxzZTsnLA0KICAgIGF0dHI6IGZ1bmN0aW9uKG0pIHsNCiAgICAgIG1bM10gPSAobVs1XSB8fCBtWzZdKTsNCiAgICAgIHJldHVybiBuZXcgVGVtcGxhdGUoJ24gPSBoLmF0dHIobiwgciwgIiN7MX0iLCAiI3szfSIsICIjezJ9IiwgYyk7IGMgPSBmYWxzZTsnKS5ldmFsdWF0ZShtKTsNCiAgICB9LA0KICAgIHBzZXVkbzogZnVuY3Rpb24obSkgew0KICAgICAgaWYgKG1bNl0pIG1bNl0gPSBtWzZdLnJlcGxhY2UoLyIvZywgJ1xcIicpOw0KICAgICAgcmV0dXJuIG5ldyBUZW1wbGF0ZSgnbiA9IGgucHNldWRvKG4sICIjezF9IiwgIiN7Nn0iLCByLCBjKTsgYyA9IGZhbHNlOycpLmV2YWx1YXRlKG0pOw0KICAgIH0sDQogICAgZGVzY2VuZGFudDogICAnYyA9ICJkZXNjZW5kYW50IjsnLA0KICAgIGNoaWxkOiAgICAgICAgJ2MgPSAiY2hpbGQiOycsDQogICAgYWRqYWNlbnQ6ICAgICAnYyA9ICJhZGphY2VudCI7JywNCiAgICBsYXRlclNpYmxpbmc6ICdjID0gImxhdGVyU2libGluZyI7Jw0KICB9LA0KDQogIHBhdHRlcm5zOiBbDQogICAgeyBuYW1lOiAnbGF0ZXJTaWJsaW5nJywgcmU6IC9eXHMqflxzKi8gfSwNCiAgICB7IG5hbWU6ICdjaGlsZCcsICAgICAgICByZTogL15ccyo+XHMqLyB9LA0KICAgIHsgbmFtZTogJ2FkamFjZW50JywgICAgIHJlOiAvXlxzKlwrXHMqLyB9LA0KICAgIHsgbmFtZTogJ2Rlc2NlbmRhbnQnLCAgIHJlOiAvXlxzLyB9LA0KDQogICAgeyBuYW1lOiAndGFnTmFtZScsICAgICAgcmU6IC9eXHMqKFwqfFtcd1wtXSspKFxifCQpPy8gfSwNCiAgICB7IG5hbWU6ICdpZCcsICAgICAgICAgICByZTogL14jKFtcd1wtXCpdKykoXGJ8JCkvIH0sDQogICAgeyBuYW1lOiAnY2xhc3NOYW1lJywgICAgcmU6IC9eXC4oW1x3XC1cKl0rKShcYnwkKS8gfSwNCiAgICB7IG5hbWU6ICdwc2V1ZG8nLCAgICAgICByZTogL146KChmaXJzdHxsYXN0fG50aHxudGgtbGFzdHxvbmx5KSgtY2hpbGR8LW9mLXR5cGUpfGVtcHR5fGNoZWNrZWR8KGVufGRpcylhYmxlZHxub3QpKFwoKC4qPylcKSk/KFxifCR8KD89XHN8Wzorfj5dKSkvIH0sDQogICAgeyBuYW1lOiAnYXR0clByZXNlbmNlJywgcmU6IC9eXFsoKD86W1x3LV0rOik/W1x3LV0rKVxdLyB9LA0KICAgIHsgbmFtZTogJ2F0dHInLCAgICAgICAgIHJlOiAvXFsoKD86W1x3LV0qOik/W1x3LV0rKVxzKig/OihbIV4kKn58XT89KVxzKigoWyciXSkoW15cNF0qPylcNHwoW14nIl1bXlxdXSo/KSkpP1xdLyB9DQogIF0sDQoNCiAgYXNzZXJ0aW9uczogew0KICAgIHRhZ05hbWU6IGZ1bmN0aW9uKGVsZW1lbnQsIG1hdGNoZXMpIHsNCiAgICAgIHJldHVybiBtYXRjaGVzWzFdLnRvVXBwZXJDYXNlKCkgPT0gZWxlbWVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7DQogICAgfSwNCg0KICAgIGNsYXNzTmFtZTogZnVuY3Rpb24oZWxlbWVudCwgbWF0Y2hlcykgew0KICAgICAgcmV0dXJuIEVsZW1lbnQuaGFzQ2xhc3NOYW1lKGVsZW1lbnQsIG1hdGNoZXNbMV0pOw0KICAgIH0sDQoNCiAgICBpZDogZnVuY3Rpb24oZWxlbWVudCwgbWF0Y2hlcykgew0KICAgICAgcmV0dXJuIGVsZW1lbnQuaWQgPT09IG1hdGNoZXNbMV07DQogICAgfSwNCg0KICAgIGF0dHJQcmVzZW5jZTogZnVuY3Rpb24oZWxlbWVudCwgbWF0Y2hlcykgew0KICAgICAgcmV0dXJuIEVsZW1lbnQuaGFzQXR0cmlidXRlKGVsZW1lbnQsIG1hdGNoZXNbMV0pOw0KICAgIH0sDQoNCiAgICBhdHRyOiBmdW5jdGlvbihlbGVtZW50LCBtYXRjaGVzKSB7DQogICAgICB2YXIgbm9kZVZhbHVlID0gRWxlbWVudC5yZWFkQXR0cmlidXRlKGVsZW1lbnQsIG1hdGNoZXNbMV0pOw0KICAgICAgcmV0dXJuIG5vZGVWYWx1ZSAmJiBTZWxlY3Rvci5vcGVyYXRvcnNbbWF0Y2hlc1syXV0obm9kZVZhbHVlLCBtYXRjaGVzWzVdIHx8IG1hdGNoZXNbNl0pOw0KICAgIH0NCiAgfSwNCg0KICBoYW5kbGVyczogew0KICAgIGNvbmNhdDogZnVuY3Rpb24oYSwgYikgew0KICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBiW2ldOyBpKyspDQogICAgICAgIGEucHVzaChub2RlKTsNCiAgICAgIHJldHVybiBhOw0KICAgIH0sDQoNCiAgICBtYXJrOiBmdW5jdGlvbihub2Rlcykgew0KICAgICAgdmFyIF90cnVlID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247DQogICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspDQogICAgICAgIG5vZGUuX2NvdW50ZWRCeVByb3RvdHlwZSA9IF90cnVlOw0KICAgICAgcmV0dXJuIG5vZGVzOw0KICAgIH0sDQoNCiAgICB1bm1hcms6IChmdW5jdGlvbigpew0KDQogICAgICB2YXIgUFJPUEVSVElFU19BVFRSSUJVVEVTX01BUCA9IChmdW5jdGlvbigpew0KICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwNCiAgICAgICAgICAgIGlzQnVnZ3kgPSBmYWxzZSwNCiAgICAgICAgICAgIHByb3BOYW1lID0gJ19jb3VudGVkQnlQcm90b3R5cGUnLA0KICAgICAgICAgICAgdmFsdWUgPSAneCcNCiAgICAgICAgZWxbcHJvcE5hbWVdID0gdmFsdWU7DQogICAgICAgIGlzQnVnZ3kgPSAoZWwuZ2V0QXR0cmlidXRlKHByb3BOYW1lKSA9PT0gdmFsdWUpOw0KICAgICAgICBlbCA9IG51bGw7DQogICAgICAgIHJldHVybiBpc0J1Z2d5Ow0KICAgICAgfSkoKTsNCg0KICAgICAgcmV0dXJuIFBST1BFUlRJRVNfQVRUUklCVVRFU19NQVAgPw0KICAgICAgICBmdW5jdGlvbihub2Rlcykgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykNCiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdfY291bnRlZEJ5UHJvdG90eXBlJyk7DQogICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICB9IDoNCiAgICAgICAgZnVuY3Rpb24obm9kZXMpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspDQogICAgICAgICAgICBub2RlLl9jb3VudGVkQnlQcm90b3R5cGUgPSB2b2lkIDA7DQogICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICB9DQogICAgfSkoKSwNCg0KICAgIGluZGV4OiBmdW5jdGlvbihwYXJlbnROb2RlLCByZXZlcnNlLCBvZlR5cGUpIHsNCiAgICAgIHBhcmVudE5vZGUuX2NvdW50ZWRCeVByb3RvdHlwZSA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOw0KICAgICAgaWYgKHJldmVyc2UpIHsNCiAgICAgICAgZm9yICh2YXIgbm9kZXMgPSBwYXJlbnROb2RlLmNoaWxkTm9kZXMsIGkgPSBub2Rlcy5sZW5ndGggLSAxLCBqID0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldOw0KICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgKCFvZlR5cGUgfHwgbm9kZS5fY291bnRlZEJ5UHJvdG90eXBlKSkgbm9kZS5ub2RlSW5kZXggPSBqKys7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMSwgbm9kZXMgPSBwYXJlbnROb2RlLmNoaWxkTm9kZXM7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgKCFvZlR5cGUgfHwgbm9kZS5fY291bnRlZEJ5UHJvdG90eXBlKSkgbm9kZS5ub2RlSW5kZXggPSBqKys7DQogICAgICB9DQogICAgfSwNCg0KICAgIHVuaXF1ZTogZnVuY3Rpb24obm9kZXMpIHsNCiAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMCkgcmV0dXJuIG5vZGVzOw0KICAgICAgdmFyIHJlc3VsdHMgPSBbXSwgbjsNCiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKQ0KICAgICAgICBpZiAodHlwZW9mIChuID0gbm9kZXNbaV0pLl9jb3VudGVkQnlQcm90b3R5cGUgPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICBuLl9jb3VudGVkQnlQcm90b3R5cGUgPSBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbjsNCiAgICAgICAgICByZXN1bHRzLnB1c2goRWxlbWVudC5leHRlbmQobikpOw0KICAgICAgICB9DQogICAgICByZXR1cm4gU2VsZWN0b3IuaGFuZGxlcnMudW5tYXJrKHJlc3VsdHMpOw0KICAgIH0sDQoNCiAgICBkZXNjZW5kYW50OiBmdW5jdGlvbihub2Rlcykgew0KICAgICAgdmFyIGggPSBTZWxlY3Rvci5oYW5kbGVyczsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBoLmNvbmNhdChyZXN1bHRzLCBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpOw0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCg0KICAgIGNoaWxkOiBmdW5jdGlvbihub2Rlcykgew0KICAgICAgdmFyIGggPSBTZWxlY3Rvci5oYW5kbGVyczsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKSB7DQogICAgICAgIGZvciAodmFyIGogPSAwLCBjaGlsZDsgY2hpbGQgPSBub2RlLmNoaWxkTm9kZXNbal07IGorKykNCiAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMSAmJiBjaGlsZC50YWdOYW1lICE9ICchJykgcmVzdWx0cy5wdXNoKGNoaWxkKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHRzOw0KICAgIH0sDQoNCiAgICBhZGphY2VudDogZnVuY3Rpb24obm9kZXMpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKSB7DQogICAgICAgIHZhciBuZXh0ID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcobm9kZSk7DQogICAgICAgIGlmIChuZXh0KSByZXN1bHRzLnB1c2gobmV4dCk7DQogICAgICB9DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgbGF0ZXJTaWJsaW5nOiBmdW5jdGlvbihub2Rlcykgew0KICAgICAgdmFyIGggPSBTZWxlY3Rvci5oYW5kbGVyczsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBoLmNvbmNhdChyZXN1bHRzLCBFbGVtZW50Lm5leHRTaWJsaW5ncyhub2RlKSk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgbmV4dEVsZW1lbnRTaWJsaW5nOiBmdW5jdGlvbihub2RlKSB7DQogICAgICB3aGlsZSAobm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpDQogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHJldHVybiBub2RlOw0KICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIHByZXZpb3VzRWxlbWVudFNpYmxpbmc6IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgIHdoaWxlIChub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmcpDQogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHJldHVybiBub2RlOw0KICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIHRhZ05hbWU6IGZ1bmN0aW9uKG5vZGVzLCByb290LCB0YWdOYW1lLCBjb21iaW5hdG9yKSB7DQogICAgICB2YXIgdVRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7DQogICAgICB2YXIgcmVzdWx0cyA9IFtdLCBoID0gU2VsZWN0b3IuaGFuZGxlcnM7DQogICAgICBpZiAobm9kZXMpIHsNCiAgICAgICAgaWYgKGNvbWJpbmF0b3IpIHsNCiAgICAgICAgICBpZiAoY29tYmluYXRvciA9PSAiZGVzY2VuZGFudCIpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykNCiAgICAgICAgICAgICAgaC5jb25jYXQocmVzdWx0cywgbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0czsNCiAgICAgICAgICB9IGVsc2Ugbm9kZXMgPSB0aGlzW2NvbWJpbmF0b3JdKG5vZGVzKTsNCiAgICAgICAgICBpZiAodGFnTmFtZSA9PSAiKiIpIHJldHVybiBub2RlczsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspDQogICAgICAgICAgaWYgKG5vZGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSB1VGFnTmFtZSkgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgICByZXR1cm4gcmVzdWx0czsNCiAgICAgIH0gZWxzZSByZXR1cm4gcm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKTsNCiAgICB9LA0KDQogICAgaWQ6IGZ1bmN0aW9uKG5vZGVzLCByb290LCBpZCwgY29tYmluYXRvcikgew0KICAgICAgdmFyIHRhcmdldE5vZGUgPSAkKGlkKSwgaCA9IFNlbGVjdG9yLmhhbmRsZXJzOw0KDQogICAgICBpZiAocm9vdCA9PSBkb2N1bWVudCkgew0KICAgICAgICBpZiAoIXRhcmdldE5vZGUpIHJldHVybiBbXTsNCiAgICAgICAgaWYgKCFub2RlcykgcmV0dXJuIFt0YXJnZXROb2RlXTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghcm9vdC5zb3VyY2VJbmRleCB8fCByb290LnNvdXJjZUluZGV4IDwgMSkgew0KICAgICAgICAgIHZhciBub2RlcyA9IHJvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTsNCiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2pdOyBqKyspIHsNCiAgICAgICAgICAgIGlmIChub2RlLmlkID09PSBpZCkgcmV0dXJuIFtub2RlXTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKG5vZGVzKSB7DQogICAgICAgIGlmIChjb21iaW5hdG9yKSB7DQogICAgICAgICAgaWYgKGNvbWJpbmF0b3IgPT0gJ2NoaWxkJykgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZS5wYXJlbnROb2RlID09IG5vZGUpIHJldHVybiBbdGFyZ2V0Tm9kZV07DQogICAgICAgICAgfSBlbHNlIGlmIChjb21iaW5hdG9yID09ICdkZXNjZW5kYW50Jykgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICAgICAgICBpZiAoRWxlbWVudC5kZXNjZW5kYW50T2YodGFyZ2V0Tm9kZSwgbm9kZSkpIHJldHVybiBbdGFyZ2V0Tm9kZV07DQogICAgICAgICAgfSBlbHNlIGlmIChjb21iaW5hdG9yID09ICdhZGphY2VudCcpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykNCiAgICAgICAgICAgICAgaWYgKFNlbGVjdG9yLmhhbmRsZXJzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcodGFyZ2V0Tm9kZSkgPT0gbm9kZSkNCiAgICAgICAgICAgICAgICByZXR1cm4gW3RhcmdldE5vZGVdOw0KICAgICAgICAgIH0gZWxzZSBub2RlcyA9IGhbY29tYmluYXRvcl0obm9kZXMpOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykNCiAgICAgICAgICBpZiAobm9kZSA9PSB0YXJnZXROb2RlKSByZXR1cm4gW3RhcmdldE5vZGVdOw0KICAgICAgICByZXR1cm4gW107DQogICAgICB9DQogICAgICByZXR1cm4gKHRhcmdldE5vZGUgJiYgRWxlbWVudC5kZXNjZW5kYW50T2YodGFyZ2V0Tm9kZSwgcm9vdCkpID8gW3RhcmdldE5vZGVdIDogW107DQogICAgfSwNCg0KICAgIGNsYXNzTmFtZTogZnVuY3Rpb24obm9kZXMsIHJvb3QsIGNsYXNzTmFtZSwgY29tYmluYXRvcikgew0KICAgICAgaWYgKG5vZGVzICYmIGNvbWJpbmF0b3IpIG5vZGVzID0gdGhpc1tjb21iaW5hdG9yXShub2Rlcyk7DQogICAgICByZXR1cm4gU2VsZWN0b3IuaGFuZGxlcnMuYnlDbGFzc05hbWUobm9kZXMsIHJvb3QsIGNsYXNzTmFtZSk7DQogICAgfSwNCg0KICAgIGJ5Q2xhc3NOYW1lOiBmdW5jdGlvbihub2Rlcywgcm9vdCwgY2xhc3NOYW1lKSB7DQogICAgICBpZiAoIW5vZGVzKSBub2RlcyA9IFNlbGVjdG9yLmhhbmRsZXJzLmRlc2NlbmRhbnQoW3Jvb3RdKTsNCiAgICAgIHZhciBuZWVkbGUgPSAnICcgKyBjbGFzc05hbWUgKyAnICc7DQogICAgICBmb3IgKHZhciBpID0gMCwgcmVzdWx0cyA9IFtdLCBub2RlLCBub2RlQ2xhc3NOYW1lOyBub2RlID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgICBub2RlQ2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWU7DQogICAgICAgIGlmIChub2RlQ2xhc3NOYW1lLmxlbmd0aCA9PSAwKSBjb250aW51ZTsNCiAgICAgICAgaWYgKG5vZGVDbGFzc05hbWUgPT0gY2xhc3NOYW1lIHx8ICgnICcgKyBub2RlQ2xhc3NOYW1lICsgJyAnKS5pbmNsdWRlKG5lZWRsZSkpDQogICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCg0KICAgIGF0dHJQcmVzZW5jZTogZnVuY3Rpb24obm9kZXMsIHJvb3QsIGF0dHIsIGNvbWJpbmF0b3IpIHsNCiAgICAgIGlmICghbm9kZXMpIG5vZGVzID0gcm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOw0KICAgICAgaWYgKG5vZGVzICYmIGNvbWJpbmF0b3IpIG5vZGVzID0gdGhpc1tjb21iaW5hdG9yXShub2Rlcyk7DQogICAgICB2YXIgcmVzdWx0cyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBpZiAoRWxlbWVudC5oYXNBdHRyaWJ1dGUobm9kZSwgYXR0cikpIHJlc3VsdHMucHVzaChub2RlKTsNCiAgICAgIHJldHVybiByZXN1bHRzOw0KICAgIH0sDQoNCiAgICBhdHRyOiBmdW5jdGlvbihub2Rlcywgcm9vdCwgYXR0ciwgdmFsdWUsIG9wZXJhdG9yLCBjb21iaW5hdG9yKSB7DQogICAgICBpZiAoIW5vZGVzKSBub2RlcyA9IHJvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsNCiAgICAgIGlmIChub2RlcyAmJiBjb21iaW5hdG9yKSBub2RlcyA9IHRoaXNbY29tYmluYXRvcl0obm9kZXMpOw0KICAgICAgdmFyIGhhbmRsZXIgPSBTZWxlY3Rvci5vcGVyYXRvcnNbb3BlcmF0b3JdLCByZXN1bHRzID0gW107DQogICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspIHsNCiAgICAgICAgdmFyIG5vZGVWYWx1ZSA9IEVsZW1lbnQucmVhZEF0dHJpYnV0ZShub2RlLCBhdHRyKTsNCiAgICAgICAgaWYgKG5vZGVWYWx1ZSA9PT0gbnVsbCkgY29udGludWU7DQogICAgICAgIGlmIChoYW5kbGVyKG5vZGVWYWx1ZSwgdmFsdWUpKSByZXN1bHRzLnB1c2gobm9kZSk7DQogICAgICB9DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgcHNldWRvOiBmdW5jdGlvbihub2RlcywgbmFtZSwgdmFsdWUsIHJvb3QsIGNvbWJpbmF0b3IpIHsNCiAgICAgIGlmIChub2RlcyAmJiBjb21iaW5hdG9yKSBub2RlcyA9IHRoaXNbY29tYmluYXRvcl0obm9kZXMpOw0KICAgICAgaWYgKCFub2Rlcykgbm9kZXMgPSByb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7DQogICAgICByZXR1cm4gU2VsZWN0b3IucHNldWRvc1tuYW1lXShub2RlcywgdmFsdWUsIHJvb3QpOw0KICAgIH0NCiAgfSwNCg0KICBwc2V1ZG9zOiB7DQogICAgJ2ZpcnN0LWNoaWxkJzogZnVuY3Rpb24obm9kZXMsIHZhbHVlLCByb290KSB7DQogICAgICBmb3IgKHZhciBpID0gMCwgcmVzdWx0cyA9IFtdLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgICBpZiAoU2VsZWN0b3IuaGFuZGxlcnMucHJldmlvdXNFbGVtZW50U2libGluZyhub2RlKSkgY29udGludWU7DQogICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCiAgICAnbGFzdC1jaGlsZCc6IGZ1bmN0aW9uKG5vZGVzLCB2YWx1ZSwgcm9vdCkgew0KICAgICAgZm9yICh2YXIgaSA9IDAsIHJlc3VsdHMgPSBbXSwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspIHsNCiAgICAgICAgaWYgKFNlbGVjdG9yLmhhbmRsZXJzLm5leHRFbGVtZW50U2libGluZyhub2RlKSkgY29udGludWU7DQogICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCiAgICAnb25seS1jaGlsZCc6IGZ1bmN0aW9uKG5vZGVzLCB2YWx1ZSwgcm9vdCkgew0KICAgICAgdmFyIGggPSBTZWxlY3Rvci5oYW5kbGVyczsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBpZiAoIWgucHJldmlvdXNFbGVtZW50U2libGluZyhub2RlKSAmJiAhaC5uZXh0RWxlbWVudFNpYmxpbmcobm9kZSkpDQogICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCiAgICAnbnRoLWNoaWxkJzogICAgICAgIGZ1bmN0aW9uKG5vZGVzLCBmb3JtdWxhLCByb290KSB7DQogICAgICByZXR1cm4gU2VsZWN0b3IucHNldWRvcy5udGgobm9kZXMsIGZvcm11bGEsIHJvb3QpOw0KICAgIH0sDQogICAgJ250aC1sYXN0LWNoaWxkJzogICBmdW5jdGlvbihub2RlcywgZm9ybXVsYSwgcm9vdCkgew0KICAgICAgcmV0dXJuIFNlbGVjdG9yLnBzZXVkb3MubnRoKG5vZGVzLCBmb3JtdWxhLCByb290LCB0cnVlKTsNCiAgICB9LA0KICAgICdudGgtb2YtdHlwZSc6ICAgICAgZnVuY3Rpb24obm9kZXMsIGZvcm11bGEsIHJvb3QpIHsNCiAgICAgIHJldHVybiBTZWxlY3Rvci5wc2V1ZG9zLm50aChub2RlcywgZm9ybXVsYSwgcm9vdCwgZmFsc2UsIHRydWUpOw0KICAgIH0sDQogICAgJ250aC1sYXN0LW9mLXR5cGUnOiBmdW5jdGlvbihub2RlcywgZm9ybXVsYSwgcm9vdCkgew0KICAgICAgcmV0dXJuIFNlbGVjdG9yLnBzZXVkb3MubnRoKG5vZGVzLCBmb3JtdWxhLCByb290LCB0cnVlLCB0cnVlKTsNCiAgICB9LA0KICAgICdmaXJzdC1vZi10eXBlJzogICAgZnVuY3Rpb24obm9kZXMsIGZvcm11bGEsIHJvb3QpIHsNCiAgICAgIHJldHVybiBTZWxlY3Rvci5wc2V1ZG9zLm50aChub2RlcywgIjEiLCByb290LCBmYWxzZSwgdHJ1ZSk7DQogICAgfSwNCiAgICAnbGFzdC1vZi10eXBlJzogICAgIGZ1bmN0aW9uKG5vZGVzLCBmb3JtdWxhLCByb290KSB7DQogICAgICByZXR1cm4gU2VsZWN0b3IucHNldWRvcy5udGgobm9kZXMsICIxIiwgcm9vdCwgdHJ1ZSwgdHJ1ZSk7DQogICAgfSwNCiAgICAnb25seS1vZi10eXBlJzogICAgIGZ1bmN0aW9uKG5vZGVzLCBmb3JtdWxhLCByb290KSB7DQogICAgICB2YXIgcCA9IFNlbGVjdG9yLnBzZXVkb3M7DQogICAgICByZXR1cm4gcFsnbGFzdC1vZi10eXBlJ10ocFsnZmlyc3Qtb2YtdHlwZSddKG5vZGVzLCBmb3JtdWxhLCByb290KSwgZm9ybXVsYSwgcm9vdCk7DQogICAgfSwNCg0KICAgIGdldEluZGljZXM6IGZ1bmN0aW9uKGEsIGIsIHRvdGFsKSB7DQogICAgICBpZiAoYSA9PSAwKSByZXR1cm4gYiA+IDAgPyBbYl0gOiBbXTsNCiAgICAgIHJldHVybiAkUigxLCB0b3RhbCkuaW5qZWN0KFtdLCBmdW5jdGlvbihtZW1vLCBpKSB7DQogICAgICAgIGlmICgwID09IChpIC0gYikgJSBhICYmIChpIC0gYikgLyBhID49IDApIG1lbW8ucHVzaChpKTsNCiAgICAgICAgcmV0dXJuIG1lbW87DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgbnRoOiBmdW5jdGlvbihub2RlcywgZm9ybXVsYSwgcm9vdCwgcmV2ZXJzZSwgb2ZUeXBlKSB7DQogICAgICBpZiAobm9kZXMubGVuZ3RoID09IDApIHJldHVybiBbXTsNCiAgICAgIGlmIChmb3JtdWxhID09ICdldmVuJykgZm9ybXVsYSA9ICcybiswJzsNCiAgICAgIGlmIChmb3JtdWxhID09ICdvZGQnKSAgZm9ybXVsYSA9ICcybisxJzsNCiAgICAgIHZhciBoID0gU2VsZWN0b3IuaGFuZGxlcnMsIHJlc3VsdHMgPSBbXSwgaW5kZXhlZCA9IFtdLCBtOw0KICAgICAgaC5tYXJrKG5vZGVzKTsNCiAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgICBpZiAoIW5vZGUucGFyZW50Tm9kZS5fY291bnRlZEJ5UHJvdG90eXBlKSB7DQogICAgICAgICAgaC5pbmRleChub2RlLnBhcmVudE5vZGUsIHJldmVyc2UsIG9mVHlwZSk7DQogICAgICAgICAgaW5kZXhlZC5wdXNoKG5vZGUucGFyZW50Tm9kZSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChmb3JtdWxhLm1hdGNoKC9eXGQrJC8pKSB7IC8vIGp1c3QgYSBudW1iZXINCiAgICAgICAgZm9ybXVsYSA9IE51bWJlcihmb3JtdWxhKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICAgIGlmIChub2RlLm5vZGVJbmRleCA9PSBmb3JtdWxhKSByZXN1bHRzLnB1c2gobm9kZSk7DQogICAgICB9IGVsc2UgaWYgKG0gPSBmb3JtdWxhLm1hdGNoKC9eKC0/XGQqKT9uKChbKy1dKShcZCspKT8vKSkgeyAvLyBhbitiDQogICAgICAgIGlmIChtWzFdID09ICItIikgbVsxXSA9IC0xOw0KICAgICAgICB2YXIgYSA9IG1bMV0gPyBOdW1iZXIobVsxXSkgOiAxOw0KICAgICAgICB2YXIgYiA9IG1bMl0gPyBOdW1iZXIobVsyXSkgOiAwOw0KICAgICAgICB2YXIgaW5kaWNlcyA9IFNlbGVjdG9yLnBzZXVkb3MuZ2V0SW5kaWNlcyhhLCBiLCBub2Rlcy5sZW5ndGgpOw0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbm9kZSwgbCA9IGluZGljZXMubGVuZ3RoOyBub2RlID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbDsgaisrKQ0KICAgICAgICAgICAgaWYgKG5vZGUubm9kZUluZGV4ID09IGluZGljZXNbal0pIHJlc3VsdHMucHVzaChub2RlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaC51bm1hcmsobm9kZXMpOw0KICAgICAgaC51bm1hcmsoaW5kZXhlZCk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgJ2VtcHR5JzogZnVuY3Rpb24obm9kZXMsIHZhbHVlLCByb290KSB7DQogICAgICBmb3IgKHZhciBpID0gMCwgcmVzdWx0cyA9IFtdLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgICBpZiAobm9kZS50YWdOYW1lID09ICchJyB8fCBub2RlLmZpcnN0Q2hpbGQpIGNvbnRpbnVlOw0KICAgICAgICByZXN1bHRzLnB1c2gobm9kZSk7DQogICAgICB9DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgJ25vdCc6IGZ1bmN0aW9uKG5vZGVzLCBzZWxlY3Rvciwgcm9vdCkgew0KICAgICAgdmFyIGggPSBTZWxlY3Rvci5oYW5kbGVycywgc2VsZWN0b3JUeXBlLCBtOw0KICAgICAgdmFyIGV4Y2x1c2lvbnMgPSBuZXcgU2VsZWN0b3Ioc2VsZWN0b3IpLmZpbmRFbGVtZW50cyhyb290KTsNCiAgICAgIGgubWFyayhleGNsdXNpb25zKTsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBpZiAoIW5vZGUuX2NvdW50ZWRCeVByb3RvdHlwZSkgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgaC51bm1hcmsoZXhjbHVzaW9ucyk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgJ2VuYWJsZWQnOiBmdW5jdGlvbihub2RlcywgdmFsdWUsIHJvb3QpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBpZiAoIW5vZGUuZGlzYWJsZWQgJiYgKCFub2RlLnR5cGUgfHwgbm9kZS50eXBlICE9PSAnaGlkZGVuJykpDQogICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGUpOw0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSwNCg0KICAgICdkaXNhYmxlZCc6IGZ1bmN0aW9uKG5vZGVzLCB2YWx1ZSwgcm9vdCkgew0KICAgICAgZm9yICh2YXIgaSA9IDAsIHJlc3VsdHMgPSBbXSwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspDQogICAgICAgIGlmIChub2RlLmRpc2FibGVkKSByZXN1bHRzLnB1c2gobm9kZSk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9LA0KDQogICAgJ2NoZWNrZWQnOiBmdW5jdGlvbihub2RlcywgdmFsdWUsIHJvb3QpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwLCByZXN1bHRzID0gW10sIG5vZGU7IG5vZGUgPSBub2Rlc1tpXTsgaSsrKQ0KICAgICAgICBpZiAobm9kZS5jaGVja2VkKSByZXN1bHRzLnB1c2gobm9kZSk7DQogICAgICByZXR1cm4gcmVzdWx0czsNCiAgICB9DQogIH0sDQoNCiAgb3BlcmF0b3JzOiB7DQogICAgJz0nOiAgZnVuY3Rpb24obnYsIHYpIHsgcmV0dXJuIG52ID09IHY7IH0sDQogICAgJyE9JzogZnVuY3Rpb24obnYsIHYpIHsgcmV0dXJuIG52ICE9IHY7IH0sDQogICAgJ149JzogZnVuY3Rpb24obnYsIHYpIHsgcmV0dXJuIG52ID09IHYgfHwgbnYgJiYgbnYuc3RhcnRzV2l0aCh2KTsgfSwNCiAgICAnJD0nOiBmdW5jdGlvbihudiwgdikgeyByZXR1cm4gbnYgPT0gdiB8fCBudiAmJiBudi5lbmRzV2l0aCh2KTsgfSwNCiAgICAnKj0nOiBmdW5jdGlvbihudiwgdikgeyByZXR1cm4gbnYgPT0gdiB8fCBudiAmJiBudi5pbmNsdWRlKHYpOyB9LA0KICAgICd+PSc6IGZ1bmN0aW9uKG52LCB2KSB7IHJldHVybiAoJyAnICsgbnYgKyAnICcpLmluY2x1ZGUoJyAnICsgdiArICcgJyk7IH0sDQogICAgJ3w9JzogZnVuY3Rpb24obnYsIHYpIHsgcmV0dXJuICgnLScgKyAobnYgfHwgIiIpLnRvVXBwZXJDYXNlKCkgKw0KICAgICAnLScpLmluY2x1ZGUoJy0nICsgKHYgfHwgIiIpLnRvVXBwZXJDYXNlKCkgKyAnLScpOyB9DQogIH0sDQoNCiAgc3BsaXQ6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHsNCiAgICB2YXIgZXhwcmVzc2lvbnMgPSBbXTsNCiAgICBleHByZXNzaW9uLnNjYW4oLygoW1x3Izoufj4rKClccy1dK3xcKnxcWy4qP1xdKSspXHMqKCx8JCkvLCBmdW5jdGlvbihtKSB7DQogICAgICBleHByZXNzaW9ucy5wdXNoKG1bMV0uc3RyaXAoKSk7DQogICAgfSk7DQogICAgcmV0dXJuIGV4cHJlc3Npb25zOw0KICB9LA0KDQogIG1hdGNoRWxlbWVudHM6IGZ1bmN0aW9uKGVsZW1lbnRzLCBleHByZXNzaW9uKSB7DQogICAgdmFyIG1hdGNoZXMgPSAkJChleHByZXNzaW9uKSwgaCA9IFNlbGVjdG9yLmhhbmRsZXJzOw0KICAgIGgubWFyayhtYXRjaGVzKTsNCiAgICBmb3IgKHZhciBpID0gMCwgcmVzdWx0cyA9IFtdLCBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudHNbaV07IGkrKykNCiAgICAgIGlmIChlbGVtZW50Ll9jb3VudGVkQnlQcm90b3R5cGUpIHJlc3VsdHMucHVzaChlbGVtZW50KTsNCiAgICBoLnVubWFyayhtYXRjaGVzKTsNCiAgICByZXR1cm4gcmVzdWx0czsNCiAgfSwNCg0KICBmaW5kRWxlbWVudDogZnVuY3Rpb24oZWxlbWVudHMsIGV4cHJlc3Npb24sIGluZGV4KSB7DQogICAgaWYgKE9iamVjdC5pc051bWJlcihleHByZXNzaW9uKSkgew0KICAgICAgaW5kZXggPSBleHByZXNzaW9uOyBleHByZXNzaW9uID0gZmFsc2U7DQogICAgfQ0KICAgIHJldHVybiBTZWxlY3Rvci5tYXRjaEVsZW1lbnRzKGVsZW1lbnRzLCBleHByZXNzaW9uIHx8ICcqJylbaW5kZXggfHwgMF07DQogIH0sDQoNCiAgZmluZENoaWxkRWxlbWVudHM6IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb25zKSB7DQogICAgZXhwcmVzc2lvbnMgPSBTZWxlY3Rvci5zcGxpdChleHByZXNzaW9ucy5qb2luKCcsJykpOw0KICAgIHZhciByZXN1bHRzID0gW10sIGggPSBTZWxlY3Rvci5oYW5kbGVyczsNCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGV4cHJlc3Npb25zLmxlbmd0aCwgc2VsZWN0b3I7IGkgPCBsOyBpKyspIHsNCiAgICAgIHNlbGVjdG9yID0gbmV3IFNlbGVjdG9yKGV4cHJlc3Npb25zW2ldLnN0cmlwKCkpOw0KICAgICAgaC5jb25jYXQocmVzdWx0cywgc2VsZWN0b3IuZmluZEVsZW1lbnRzKGVsZW1lbnQpKTsNCiAgICB9DQogICAgcmV0dXJuIChsID4gMSkgPyBoLnVuaXF1ZShyZXN1bHRzKSA6IHJlc3VsdHM7DQogIH0NCn0pOw0KDQppZiAoUHJvdG90eXBlLkJyb3dzZXIuSUUpIHsNCiAgT2JqZWN0LmV4dGVuZChTZWxlY3Rvci5oYW5kbGVycywgew0KICAgIGNvbmNhdDogZnVuY3Rpb24oYSwgYikgew0KICAgICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBiW2ldOyBpKyspDQogICAgICAgIGlmIChub2RlLnRhZ05hbWUgIT09ICIhIikgYS5wdXNoKG5vZGUpOw0KICAgICAgcmV0dXJuIGE7DQogICAgfQ0KICB9KTsNCn0NCg0KZnVuY3Rpb24gJCQoKSB7DQogIHJldHVybiBTZWxlY3Rvci5maW5kQ2hpbGRFbGVtZW50cyhkb2N1bWVudCwgJEEoYXJndW1lbnRzKSk7DQp9DQoNCnZhciBGb3JtID0gew0KICByZXNldDogZnVuY3Rpb24oZm9ybSkgew0KICAgIGZvcm0gPSAkKGZvcm0pOw0KICAgIGZvcm0ucmVzZXQoKTsNCiAgICByZXR1cm4gZm9ybTsNCiAgfSwNCg0KICBzZXJpYWxpemVFbGVtZW50czogZnVuY3Rpb24oZWxlbWVudHMsIG9wdGlvbnMpIHsNCiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT0gJ29iamVjdCcpIG9wdGlvbnMgPSB7IGhhc2g6ICEhb3B0aW9ucyB9Ow0KICAgIGVsc2UgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChvcHRpb25zLmhhc2gpKSBvcHRpb25zLmhhc2ggPSB0cnVlOw0KICAgIHZhciBrZXksIHZhbHVlLCBzdWJtaXR0ZWQgPSBmYWxzZSwgc3VibWl0ID0gb3B0aW9ucy5zdWJtaXQ7DQoNCiAgICB2YXIgZGF0YSA9IGVsZW1lbnRzLmluamVjdCh7IH0sIGZ1bmN0aW9uKHJlc3VsdCwgZWxlbWVudCkgew0KICAgICAgaWYgKCFlbGVtZW50LmRpc2FibGVkICYmIGVsZW1lbnQubmFtZSkgew0KICAgICAgICBrZXkgPSBlbGVtZW50Lm5hbWU7IHZhbHVlID0gJChlbGVtZW50KS5nZXRWYWx1ZSgpOw0KICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBlbGVtZW50LnR5cGUgIT0gJ2ZpbGUnICYmIChlbGVtZW50LnR5cGUgIT0gJ3N1Ym1pdCcgfHwgKCFzdWJtaXR0ZWQgJiYNCiAgICAgICAgICAgIHN1Ym1pdCAhPT0gZmFsc2UgJiYgKCFzdWJtaXQgfHwga2V5ID09IHN1Ym1pdCkgJiYgKHN1Ym1pdHRlZCA9IHRydWUpKSkpIHsNCiAgICAgICAgICBpZiAoa2V5IGluIHJlc3VsdCkgew0KICAgICAgICAgICAgaWYgKCFPYmplY3QuaXNBcnJheShyZXN1bHRba2V5XSkpIHJlc3VsdFtrZXldID0gW3Jlc3VsdFtrZXldXTsNCiAgICAgICAgICAgIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHJlc3VsdFtrZXldID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfSk7DQoNCiAgICByZXR1cm4gb3B0aW9ucy5oYXNoID8gZGF0YSA6IE9iamVjdC50b1F1ZXJ5U3RyaW5nKGRhdGEpOw0KICB9DQp9Ow0KDQpGb3JtLk1ldGhvZHMgPSB7DQogIHNlcmlhbGl6ZTogZnVuY3Rpb24oZm9ybSwgb3B0aW9ucykgew0KICAgIHJldHVybiBGb3JtLnNlcmlhbGl6ZUVsZW1lbnRzKEZvcm0uZ2V0RWxlbWVudHMoZm9ybSksIG9wdGlvbnMpOw0KICB9LA0KDQogIGdldEVsZW1lbnRzOiBmdW5jdGlvbihmb3JtKSB7DQogICAgdmFyIGVsZW1lbnRzID0gJChmb3JtKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpLA0KICAgICAgICBlbGVtZW50LA0KICAgICAgICBhcnIgPSBbIF0sDQogICAgICAgIHNlcmlhbGl6ZXJzID0gRm9ybS5FbGVtZW50LlNlcmlhbGl6ZXJzOw0KICAgIGZvciAodmFyIGkgPSAwOyBlbGVtZW50ID0gZWxlbWVudHNbaV07IGkrKykgew0KICAgICAgYXJyLnB1c2goZWxlbWVudCk7DQogICAgfQ0KICAgIHJldHVybiBhcnIuaW5qZWN0KFtdLCBmdW5jdGlvbihlbGVtZW50cywgY2hpbGQpIHsNCiAgICAgIGlmIChzZXJpYWxpemVyc1tjaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCldKQ0KICAgICAgICBlbGVtZW50cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGNoaWxkKSk7DQogICAgICByZXR1cm4gZWxlbWVudHM7DQogICAgfSkNCiAgfSwNCg0KICBnZXRJbnB1dHM6IGZ1bmN0aW9uKGZvcm0sIHR5cGVOYW1lLCBuYW1lKSB7DQogICAgZm9ybSA9ICQoZm9ybSk7DQogICAgdmFyIGlucHV0cyA9IGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7DQoNCiAgICBpZiAoIXR5cGVOYW1lICYmICFuYW1lKSByZXR1cm4gJEEoaW5wdXRzKS5tYXAoRWxlbWVudC5leHRlbmQpOw0KDQogICAgZm9yICh2YXIgaSA9IDAsIG1hdGNoaW5nSW5wdXRzID0gW10sIGxlbmd0aCA9IGlucHV0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGlucHV0ID0gaW5wdXRzW2ldOw0KICAgICAgaWYgKCh0eXBlTmFtZSAmJiBpbnB1dC50eXBlICE9IHR5cGVOYW1lKSB8fCAobmFtZSAmJiBpbnB1dC5uYW1lICE9IG5hbWUpKQ0KICAgICAgICBjb250aW51ZTsNCiAgICAgIG1hdGNoaW5nSW5wdXRzLnB1c2goRWxlbWVudC5leHRlbmQoaW5wdXQpKTsNCiAgICB9DQoNCiAgICByZXR1cm4gbWF0Y2hpbmdJbnB1dHM7DQogIH0sDQoNCiAgZGlzYWJsZTogZnVuY3Rpb24oZm9ybSkgew0KICAgIGZvcm0gPSAkKGZvcm0pOw0KICAgIEZvcm0uZ2V0RWxlbWVudHMoZm9ybSkuaW52b2tlKCdkaXNhYmxlJyk7DQogICAgcmV0dXJuIGZvcm07DQogIH0sDQoNCiAgZW5hYmxlOiBmdW5jdGlvbihmb3JtKSB7DQogICAgZm9ybSA9ICQoZm9ybSk7DQogICAgRm9ybS5nZXRFbGVtZW50cyhmb3JtKS5pbnZva2UoJ2VuYWJsZScpOw0KICAgIHJldHVybiBmb3JtOw0KICB9LA0KDQogIGZpbmRGaXJzdEVsZW1lbnQ6IGZ1bmN0aW9uKGZvcm0pIHsNCiAgICB2YXIgZWxlbWVudHMgPSAkKGZvcm0pLmdldEVsZW1lbnRzKCkuZmluZEFsbChmdW5jdGlvbihlbGVtZW50KSB7DQogICAgICByZXR1cm4gJ2hpZGRlbicgIT0gZWxlbWVudC50eXBlICYmICFlbGVtZW50LmRpc2FibGVkOw0KICAgIH0pOw0KICAgIHZhciBmaXJzdEJ5SW5kZXggPSBlbGVtZW50cy5maW5kQWxsKGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgndGFiSW5kZXgnKSAmJiBlbGVtZW50LnRhYkluZGV4ID49IDA7DQogICAgfSkuc29ydEJ5KGZ1bmN0aW9uKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQudGFiSW5kZXggfSkuZmlyc3QoKTsNCg0KICAgIHJldHVybiBmaXJzdEJ5SW5kZXggPyBmaXJzdEJ5SW5kZXggOiBlbGVtZW50cy5maW5kKGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgIHJldHVybiAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdChlbGVtZW50LnRhZ05hbWUpOw0KICAgIH0pOw0KICB9LA0KDQogIGZvY3VzRmlyc3RFbGVtZW50OiBmdW5jdGlvbihmb3JtKSB7DQogICAgZm9ybSA9ICQoZm9ybSk7DQogICAgZm9ybS5maW5kRmlyc3RFbGVtZW50KCkuYWN0aXZhdGUoKTsNCiAgICByZXR1cm4gZm9ybTsNCiAgfSwNCg0KICByZXF1ZXN0OiBmdW5jdGlvbihmb3JtLCBvcHRpb25zKSB7DQogICAgZm9ybSA9ICQoZm9ybSksIG9wdGlvbnMgPSBPYmplY3QuY2xvbmUob3B0aW9ucyB8fCB7IH0pOw0KDQogICAgdmFyIHBhcmFtcyA9IG9wdGlvbnMucGFyYW1ldGVycywgYWN0aW9uID0gZm9ybS5yZWFkQXR0cmlidXRlKCdhY3Rpb24nKSB8fCAnJzsNCiAgICBpZiAoYWN0aW9uLmJsYW5rKCkpIGFjdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOw0KICAgIG9wdGlvbnMucGFyYW1ldGVycyA9IGZvcm0uc2VyaWFsaXplKHRydWUpOw0KDQogICAgaWYgKHBhcmFtcykgew0KICAgICAgaWYgKE9iamVjdC5pc1N0cmluZyhwYXJhbXMpKSBwYXJhbXMgPSBwYXJhbXMudG9RdWVyeVBhcmFtcygpOw0KICAgICAgT2JqZWN0LmV4dGVuZChvcHRpb25zLnBhcmFtZXRlcnMsIHBhcmFtcyk7DQogICAgfQ0KDQogICAgaWYgKGZvcm0uaGFzQXR0cmlidXRlKCdtZXRob2QnKSAmJiAhb3B0aW9ucy5tZXRob2QpDQogICAgICBvcHRpb25zLm1ldGhvZCA9IGZvcm0ubWV0aG9kOw0KDQogICAgcmV0dXJuIG5ldyBBamF4LlJlcXVlc3QoYWN0aW9uLCBvcHRpb25zKTsNCiAgfQ0KfTsNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCg0KRm9ybS5FbGVtZW50ID0gew0KICBmb2N1czogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgICQoZWxlbWVudCkuZm9jdXMoKTsNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICBzZWxlY3Q6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAkKGVsZW1lbnQpLnNlbGVjdCgpOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9DQp9Ow0KDQpGb3JtLkVsZW1lbnQuTWV0aG9kcyA9IHsNCg0KICBzZXJpYWxpemU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICBpZiAoIWVsZW1lbnQuZGlzYWJsZWQgJiYgZWxlbWVudC5uYW1lKSB7DQogICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LmdldFZhbHVlKCk7DQogICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHZhciBwYWlyID0geyB9Ow0KICAgICAgICBwYWlyW2VsZW1lbnQubmFtZV0gPSB2YWx1ZTsNCiAgICAgICAgcmV0dXJuIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHBhaXIpOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gJyc7DQogIH0sDQoNCiAgZ2V0VmFsdWU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCiAgICB2YXIgbWV0aG9kID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgcmV0dXJuIEZvcm0uRWxlbWVudC5TZXJpYWxpemVyc1ttZXRob2RdKGVsZW1lbnQpOw0KICB9LA0KDQogIHNldFZhbHVlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KICAgIHZhciBtZXRob2QgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTsNCiAgICBGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnNbbWV0aG9kXShlbGVtZW50LCB2YWx1ZSk7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgY2xlYXI6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAkKGVsZW1lbnQpLnZhbHVlID0gJyc7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgcHJlc2VudDogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIHJldHVybiAkKGVsZW1lbnQpLnZhbHVlICE9ICcnOw0KICB9LA0KDQogIGFjdGl2YXRlOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgdHJ5IHsNCiAgICAgIGVsZW1lbnQuZm9jdXMoKTsNCiAgICAgIGlmIChlbGVtZW50LnNlbGVjdCAmJiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gJ2lucHV0JyB8fA0KICAgICAgICAgICEoL14oPzpidXR0b258cmVzZXR8c3VibWl0KSQvaS50ZXN0KGVsZW1lbnQudHlwZSkpKSkNCiAgICAgICAgZWxlbWVudC5zZWxlY3QoKTsNCiAgICB9IGNhdGNoIChlKSB7IH0NCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfSwNCg0KICBkaXNhYmxlOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7DQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0sDQoNCiAgZW5hYmxlOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7DQogICAgZWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgIHJldHVybiBlbGVtZW50Ow0KICB9DQp9Ow0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KdmFyIEZpZWxkID0gRm9ybS5FbGVtZW50Ow0KDQp2YXIgJEYgPSBGb3JtLkVsZW1lbnQuTWV0aG9kcy5nZXRWYWx1ZTsNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCkZvcm0uRWxlbWVudC5TZXJpYWxpemVycyA9IHsNCiAgaW5wdXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgc3dpdGNoIChlbGVtZW50LnR5cGUudG9Mb3dlckNhc2UoKSkgew0KICAgICAgY2FzZSAnY2hlY2tib3gnOg0KICAgICAgY2FzZSAncmFkaW8nOg0KICAgICAgICByZXR1cm4gRm9ybS5FbGVtZW50LlNlcmlhbGl6ZXJzLmlucHV0U2VsZWN0b3IoZWxlbWVudCwgdmFsdWUpOw0KICAgICAgZGVmYXVsdDoNCiAgICAgICAgcmV0dXJuIEZvcm0uRWxlbWVudC5TZXJpYWxpemVycy50ZXh0YXJlYShlbGVtZW50LCB2YWx1ZSk7DQogICAgfQ0KICB9LA0KDQogIGlucHV0U2VsZWN0b3I6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybiBlbGVtZW50LmNoZWNrZWQgPyBlbGVtZW50LnZhbHVlIDogbnVsbDsNCiAgICBlbHNlIGVsZW1lbnQuY2hlY2tlZCA9ICEhdmFsdWU7DQogIH0sDQoNCiAgdGV4dGFyZWE6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7DQogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybiBlbGVtZW50LnZhbHVlOw0KICAgIGVsc2UgZWxlbWVudC52YWx1ZSA9IHZhbHVlOw0KICB9LA0KDQogIHNlbGVjdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHsNCiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkNCiAgICAgIHJldHVybiB0aGlzW2VsZW1lbnQudHlwZSA9PSAnc2VsZWN0LW9uZScgPw0KICAgICAgICAnc2VsZWN0T25lJyA6ICdzZWxlY3RNYW55J10oZWxlbWVudCk7DQogICAgZWxzZSB7DQogICAgICB2YXIgb3B0LCBjdXJyZW50VmFsdWUsIHNpbmdsZSA9ICFPYmplY3QuaXNBcnJheSh2YWx1ZSk7DQogICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgICBvcHQgPSBlbGVtZW50Lm9wdGlvbnNbaV07DQogICAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMub3B0aW9uVmFsdWUob3B0KTsNCiAgICAgICAgaWYgKHNpbmdsZSkgew0KICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT0gdmFsdWUpIHsNCiAgICAgICAgICAgIG9wdC5zZWxlY3RlZCA9IHRydWU7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugb3B0LnNlbGVjdGVkID0gdmFsdWUuaW5jbHVkZShjdXJyZW50VmFsdWUpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KICBzZWxlY3RPbmU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICB2YXIgaW5kZXggPSBlbGVtZW50LnNlbGVjdGVkSW5kZXg7DQogICAgcmV0dXJuIGluZGV4ID49IDAgPyB0aGlzLm9wdGlvblZhbHVlKGVsZW1lbnQub3B0aW9uc1tpbmRleF0pIDogbnVsbDsNCiAgfSwNCg0KICBzZWxlY3RNYW55OiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgdmFyIHZhbHVlcywgbGVuZ3RoID0gZWxlbWVudC5sZW5ndGg7DQogICAgaWYgKCFsZW5ndGgpIHJldHVybiBudWxsOw0KDQogICAgZm9yICh2YXIgaSA9IDAsIHZhbHVlcyA9IFtdOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBvcHQgPSBlbGVtZW50Lm9wdGlvbnNbaV07DQogICAgICBpZiAob3B0LnNlbGVjdGVkKSB2YWx1ZXMucHVzaCh0aGlzLm9wdGlvblZhbHVlKG9wdCkpOw0KICAgIH0NCiAgICByZXR1cm4gdmFsdWVzOw0KICB9LA0KDQogIG9wdGlvblZhbHVlOiBmdW5jdGlvbihvcHQpIHsNCiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQob3B0KS5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgPyBvcHQudmFsdWUgOiBvcHQudGV4dDsNCiAgfQ0KfTsNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCg0KQWJzdHJhY3QuVGltZWRPYnNlcnZlciA9IENsYXNzLmNyZWF0ZShQZXJpb2RpY2FsRXhlY3V0ZXIsIHsNCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oJHN1cGVyLCBlbGVtZW50LCBmcmVxdWVuY3ksIGNhbGxiYWNrKSB7DQogICAgJHN1cGVyKGNhbGxiYWNrLCBmcmVxdWVuY3kpOw0KICAgIHRoaXMuZWxlbWVudCAgID0gJChlbGVtZW50KTsNCiAgICB0aGlzLmxhc3RWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTsNCiAgfSwNCg0KICBleGVjdXRlOiBmdW5jdGlvbigpIHsNCiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7DQogICAgaWYgKE9iamVjdC5pc1N0cmluZyh0aGlzLmxhc3RWYWx1ZSkgJiYgT2JqZWN0LmlzU3RyaW5nKHZhbHVlKSA/DQogICAgICAgIHRoaXMubGFzdFZhbHVlICE9IHZhbHVlIDogU3RyaW5nKHRoaXMubGFzdFZhbHVlKSAhPSBTdHJpbmcodmFsdWUpKSB7DQogICAgICB0aGlzLmNhbGxiYWNrKHRoaXMuZWxlbWVudCwgdmFsdWUpOw0KICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTsNCiAgICB9DQogIH0NCn0pOw0KDQpGb3JtLkVsZW1lbnQuT2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoQWJzdHJhY3QuVGltZWRPYnNlcnZlciwgew0KICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIEZvcm0uRWxlbWVudC5nZXRWYWx1ZSh0aGlzLmVsZW1lbnQpOw0KICB9DQp9KTsNCg0KRm9ybS5PYnNlcnZlciA9IENsYXNzLmNyZWF0ZShBYnN0cmFjdC5UaW1lZE9ic2VydmVyLCB7DQogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gRm9ybS5zZXJpYWxpemUodGhpcy5lbGVtZW50KTsNCiAgfQ0KfSk7DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQpBYnN0cmFjdC5FdmVudE9ic2VydmVyID0gQ2xhc3MuY3JlYXRlKHsNCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHsNCiAgICB0aGlzLmVsZW1lbnQgID0gJChlbGVtZW50KTsNCiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7DQoNCiAgICB0aGlzLmxhc3RWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTsNCiAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSAnZm9ybScpDQogICAgICB0aGlzLnJlZ2lzdGVyRm9ybUNhbGxiYWNrcygpOw0KICAgIGVsc2UNCiAgICAgIHRoaXMucmVnaXN0ZXJDYWxsYmFjayh0aGlzLmVsZW1lbnQpOw0KICB9LA0KDQogIG9uRWxlbWVudEV2ZW50OiBmdW5jdGlvbigpIHsNCiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7DQogICAgaWYgKHRoaXMubGFzdFZhbHVlICE9IHZhbHVlKSB7DQogICAgICB0aGlzLmNhbGxiYWNrKHRoaXMuZWxlbWVudCwgdmFsdWUpOw0KICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTsNCiAgICB9DQogIH0sDQoNCiAgcmVnaXN0ZXJGb3JtQ2FsbGJhY2tzOiBmdW5jdGlvbigpIHsNCiAgICBGb3JtLmdldEVsZW1lbnRzKHRoaXMuZWxlbWVudCkuZWFjaCh0aGlzLnJlZ2lzdGVyQ2FsbGJhY2ssIHRoaXMpOw0KICB9LA0KDQogIHJlZ2lzdGVyQ2FsbGJhY2s6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICBpZiAoZWxlbWVudC50eXBlKSB7DQogICAgICBzd2l0Y2ggKGVsZW1lbnQudHlwZS50b0xvd2VyQ2FzZSgpKSB7DQogICAgICAgIGNhc2UgJ2NoZWNrYm94JzoNCiAgICAgICAgY2FzZSAncmFkaW8nOg0KICAgICAgICAgIEV2ZW50Lm9ic2VydmUoZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5vbkVsZW1lbnRFdmVudC5iaW5kKHRoaXMpKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBFdmVudC5vYnNlcnZlKGVsZW1lbnQsICdjaGFuZ2UnLCB0aGlzLm9uRWxlbWVudEV2ZW50LmJpbmQodGhpcykpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfSk7DQoNCkZvcm0uRWxlbWVudC5FdmVudE9ic2VydmVyID0gQ2xhc3MuY3JlYXRlKEFic3RyYWN0LkV2ZW50T2JzZXJ2ZXIsIHsNCiAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiBGb3JtLkVsZW1lbnQuZ2V0VmFsdWUodGhpcy5lbGVtZW50KTsNCiAgfQ0KfSk7DQoNCkZvcm0uRXZlbnRPYnNlcnZlciA9IENsYXNzLmNyZWF0ZShBYnN0cmFjdC5FdmVudE9ic2VydmVyLCB7DQogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gRm9ybS5zZXJpYWxpemUodGhpcy5lbGVtZW50KTsNCiAgfQ0KfSk7DQooZnVuY3Rpb24oKSB7DQoNCiAgdmFyIEV2ZW50ID0gew0KICAgIEtFWV9CQUNLU1BBQ0U6IDgsDQogICAgS0VZX1RBQjogICAgICAgOSwNCiAgICBLRVlfUkVUVVJOOiAgIDEzLA0KICAgIEtFWV9FU0M6ICAgICAgMjcsDQogICAgS0VZX0xFRlQ6ICAgICAzNywNCiAgICBLRVlfVVA6ICAgICAgIDM4LA0KICAgIEtFWV9SSUdIVDogICAgMzksDQogICAgS0VZX0RPV046ICAgICA0MCwNCiAgICBLRVlfREVMRVRFOiAgIDQ2LA0KICAgIEtFWV9IT01FOiAgICAgMzYsDQogICAgS0VZX0VORDogICAgICAzNSwNCiAgICBLRVlfUEFHRVVQOiAgIDMzLA0KICAgIEtFWV9QQUdFRE9XTjogMzQsDQogICAgS0VZX0lOU0VSVDogICA0NSwNCg0KICAgIGNhY2hlOiB7fQ0KICB9Ow0KDQogIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCiAgdmFyIE1PVVNFRU5URVJfTU9VU0VMRUFWRV9FVkVOVFNfU1VQUE9SVEVEID0gJ29ubW91c2VlbnRlcicgaW4gZG9jRWwNCiAgICAmJiAnb25tb3VzZWxlYXZlJyBpbiBkb2NFbDsNCg0KICB2YXIgX2lzQnV0dG9uOw0KICBpZiAoUHJvdG90eXBlLkJyb3dzZXIuSUUpIHsNCiAgICB2YXIgYnV0dG9uTWFwID0geyAwOiAxLCAxOiA0LCAyOiAyIH07DQogICAgX2lzQnV0dG9uID0gZnVuY3Rpb24oZXZlbnQsIGNvZGUpIHsNCiAgICAgIHJldHVybiBldmVudC5idXR0b24gPT09IGJ1dHRvbk1hcFtjb2RlXTsNCiAgICB9Ow0KICB9IGVsc2UgaWYgKFByb3RvdHlwZS5Ccm93c2VyLldlYktpdCkgew0KICAgIF9pc0J1dHRvbiA9IGZ1bmN0aW9uKGV2ZW50LCBjb2RlKSB7DQogICAgICBzd2l0Y2ggKGNvZGUpIHsNCiAgICAgICAgY2FzZSAwOiByZXR1cm4gZXZlbnQud2hpY2ggPT0gMSAmJiAhZXZlbnQubWV0YUtleTsNCiAgICAgICAgY2FzZSAxOiByZXR1cm4gZXZlbnQud2hpY2ggPT0gMSAmJiBldmVudC5tZXRhS2V5Ow0KICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgfTsNCiAgfSBlbHNlIHsNCiAgICBfaXNCdXR0b24gPSBmdW5jdGlvbihldmVudCwgY29kZSkgew0KICAgICAgcmV0dXJuIGV2ZW50LndoaWNoID8gKGV2ZW50LndoaWNoID09PSBjb2RlICsgMSkgOiAoZXZlbnQuYnV0dG9uID09PSBjb2RlKTsNCiAgICB9Ow0KICB9DQoNCiAgZnVuY3Rpb24gaXNMZWZ0Q2xpY2soZXZlbnQpICAgeyByZXR1cm4gX2lzQnV0dG9uKGV2ZW50LCAwKSB9DQoNCiAgZnVuY3Rpb24gaXNNaWRkbGVDbGljayhldmVudCkgeyByZXR1cm4gX2lzQnV0dG9uKGV2ZW50LCAxKSB9DQoNCiAgZnVuY3Rpb24gaXNSaWdodENsaWNrKGV2ZW50KSAgeyByZXR1cm4gX2lzQnV0dG9uKGV2ZW50LCAyKSB9DQoNCiAgZnVuY3Rpb24gZWxlbWVudChldmVudCkgew0KICAgIGV2ZW50ID0gRXZlbnQuZXh0ZW5kKGV2ZW50KTsNCg0KICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0LCB0eXBlID0gZXZlbnQudHlwZSwNCiAgICAgY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7DQoNCiAgICBpZiAoY3VycmVudFRhcmdldCAmJiBjdXJyZW50VGFyZ2V0LnRhZ05hbWUpIHsNCiAgICAgIGlmICh0eXBlID09PSAnbG9hZCcgfHwgdHlwZSA9PT0gJ2Vycm9yJyB8fA0KICAgICAgICAodHlwZSA9PT0gJ2NsaWNrJyAmJiBjdXJyZW50VGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jw0KICAgICAgICAgICYmIGN1cnJlbnRUYXJnZXQudHlwZSA9PT0gJ3JhZGlvJykpDQogICAgICAgICAgICBub2RlID0gY3VycmVudFRhcmdldDsNCiAgICB9DQoNCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSBOb2RlLlRFWFRfTk9ERSkNCiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7DQoNCiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQobm9kZSk7DQogIH0NCg0KICBmdW5jdGlvbiBmaW5kRWxlbWVudChldmVudCwgZXhwcmVzc2lvbikgew0KICAgIHZhciBlbGVtZW50ID0gRXZlbnQuZWxlbWVudChldmVudCk7DQogICAgaWYgKCFleHByZXNzaW9uKSByZXR1cm4gZWxlbWVudDsNCiAgICB2YXIgZWxlbWVudHMgPSBbZWxlbWVudF0uY29uY2F0KGVsZW1lbnQuYW5jZXN0b3JzKCkpOw0KICAgIHJldHVybiBTZWxlY3Rvci5maW5kRWxlbWVudChlbGVtZW50cywgZXhwcmVzc2lvbiwgMCk7DQogIH0NCg0KICBmdW5jdGlvbiBwb2ludGVyKGV2ZW50KSB7DQogICAgcmV0dXJuIHsgeDogcG9pbnRlclgoZXZlbnQpLCB5OiBwb2ludGVyWShldmVudCkgfTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHBvaW50ZXJYKGV2ZW50KSB7DQogICAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsDQogICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IHsgc2Nyb2xsTGVmdDogMCB9Ow0KDQogICAgcmV0dXJuIGV2ZW50LnBhZ2VYIHx8IChldmVudC5jbGllbnRYICsNCiAgICAgIChkb2NFbGVtZW50LnNjcm9sbExlZnQgfHwgYm9keS5zY3JvbGxMZWZ0KSAtDQogICAgICAoZG9jRWxlbWVudC5jbGllbnRMZWZ0IHx8IDApKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHBvaW50ZXJZKGV2ZW50KSB7DQogICAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsDQogICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IHsgc2Nyb2xsVG9wOiAwIH07DQoNCiAgICByZXR1cm4gIGV2ZW50LnBhZ2VZIHx8IChldmVudC5jbGllbnRZICsNCiAgICAgICAoZG9jRWxlbWVudC5zY3JvbGxUb3AgfHwgYm9keS5zY3JvbGxUb3ApIC0NCiAgICAgICAoZG9jRWxlbWVudC5jbGllbnRUb3AgfHwgMCkpOw0KICB9DQoNCg0KICBmdW5jdGlvbiBzdG9wKGV2ZW50KSB7DQogICAgRXZlbnQuZXh0ZW5kKGV2ZW50KTsNCiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KDQogICAgZXZlbnQuc3RvcHBlZCA9IHRydWU7DQogIH0NCg0KICBFdmVudC5NZXRob2RzID0gew0KICAgIGlzTGVmdENsaWNrOiBpc0xlZnRDbGljaywNCiAgICBpc01pZGRsZUNsaWNrOiBpc01pZGRsZUNsaWNrLA0KICAgIGlzUmlnaHRDbGljazogaXNSaWdodENsaWNrLA0KDQogICAgZWxlbWVudDogZWxlbWVudCwNCiAgICBmaW5kRWxlbWVudDogZmluZEVsZW1lbnQsDQoNCiAgICBwb2ludGVyOiBwb2ludGVyLA0KICAgIHBvaW50ZXJYOiBwb2ludGVyWCwNCiAgICBwb2ludGVyWTogcG9pbnRlclksDQoNCiAgICBzdG9wOiBzdG9wDQogIH07DQoNCg0KICB2YXIgbWV0aG9kcyA9IE9iamVjdC5rZXlzKEV2ZW50Lk1ldGhvZHMpLmluamVjdCh7IH0sIGZ1bmN0aW9uKG0sIG5hbWUpIHsNCiAgICBtW25hbWVdID0gRXZlbnQuTWV0aG9kc1tuYW1lXS5tZXRob2RpemUoKTsNCiAgICByZXR1cm4gbTsNCiAgfSk7DQoNCiAgaWYgKFByb3RvdHlwZS5Ccm93c2VyLklFKSB7DQogICAgZnVuY3Rpb24gX3JlbGF0ZWRUYXJnZXQoZXZlbnQpIHsNCiAgICAgIHZhciBlbGVtZW50Ow0KICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7DQogICAgICAgIGNhc2UgJ21vdXNlb3Zlcic6IGVsZW1lbnQgPSBldmVudC5mcm9tRWxlbWVudDsgYnJlYWs7DQogICAgICAgIGNhc2UgJ21vdXNlb3V0JzogIGVsZW1lbnQgPSBldmVudC50b0VsZW1lbnQ7ICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnQpOw0KICAgIH0NCg0KICAgIE9iamVjdC5leHRlbmQobWV0aG9kcywgew0KICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsgdGhpcy5jYW5jZWxCdWJibGUgPSB0cnVlIH0sDQogICAgICBwcmV2ZW50RGVmYXVsdDogIGZ1bmN0aW9uKCkgeyB0aGlzLnJldHVyblZhbHVlID0gZmFsc2UgfSwNCiAgICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkgeyByZXR1cm4gJ1tvYmplY3QgRXZlbnRdJyB9DQogICAgfSk7DQoNCiAgICBFdmVudC5leHRlbmQgPSBmdW5jdGlvbihldmVudCwgZWxlbWVudCkgew0KICAgICAgaWYgKCFldmVudCkgcmV0dXJuIGZhbHNlOw0KICAgICAgaWYgKGV2ZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlKSByZXR1cm4gZXZlbnQ7DQoNCiAgICAgIGV2ZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247DQogICAgICB2YXIgcG9pbnRlciA9IEV2ZW50LnBvaW50ZXIoZXZlbnQpOw0KDQogICAgICBPYmplY3QuZXh0ZW5kKGV2ZW50LCB7DQogICAgICAgIHRhcmdldDogZXZlbnQuc3JjRWxlbWVudCB8fCBlbGVtZW50LA0KICAgICAgICByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldChldmVudCksDQogICAgICAgIHBhZ2VYOiAgcG9pbnRlci54LA0KICAgICAgICBwYWdlWTogIHBvaW50ZXIueQ0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiBPYmplY3QuZXh0ZW5kKGV2ZW50LCBtZXRob2RzKTsNCiAgICB9Ow0KICB9IGVsc2Ugew0KICAgIEV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGUgfHwgZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKS5fX3Byb3RvX187DQogICAgT2JqZWN0LmV4dGVuZChFdmVudC5wcm90b3R5cGUsIG1ldGhvZHMpOw0KICAgIEV2ZW50LmV4dGVuZCA9IFByb3RvdHlwZS5LOw0KICB9DQoNCiAgZnVuY3Rpb24gX2NyZWF0ZVJlc3BvbmRlcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsNCiAgICB2YXIgcmVnaXN0cnkgPSBFbGVtZW50LnJldHJpZXZlKGVsZW1lbnQsICdwcm90b3R5cGVfZXZlbnRfcmVnaXN0cnknKTsNCg0KICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQocmVnaXN0cnkpKSB7DQogICAgICBDQUNIRS5wdXNoKGVsZW1lbnQpOw0KICAgICAgcmVnaXN0cnkgPSBFbGVtZW50LnJldHJpZXZlKGVsZW1lbnQsICdwcm90b3R5cGVfZXZlbnRfcmVnaXN0cnknLCAkSCgpKTsNCiAgICB9DQoNCiAgICB2YXIgcmVzcG9uZGVyc0ZvckV2ZW50ID0gcmVnaXN0cnkuZ2V0KGV2ZW50TmFtZSk7DQogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChyZXNwb25kZXJzRm9yRXZlbnQpKSB7DQogICAgICByZXNwb25kZXJzRm9yRXZlbnQgPSBbXTsNCiAgICAgIHJlZ2lzdHJ5LnNldChldmVudE5hbWUsIHJlc3BvbmRlcnNGb3JFdmVudCk7DQogICAgfQ0KDQogICAgaWYgKHJlc3BvbmRlcnNGb3JFdmVudC5wbHVjaygnaGFuZGxlcicpLmluY2x1ZGUoaGFuZGxlcikpIHJldHVybiBmYWxzZTsNCg0KICAgIHZhciByZXNwb25kZXI7DQogICAgaWYgKGV2ZW50TmFtZS5pbmNsdWRlKCI6IikpIHsNCiAgICAgIHJlc3BvbmRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQoZXZlbnQuZXZlbnROYW1lKSkNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgaWYgKGV2ZW50LmV2ZW50TmFtZSAhPT0gZXZlbnROYW1lKQ0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgICAgICBFdmVudC5leHRlbmQoZXZlbnQsIGVsZW1lbnQpOw0KICAgICAgICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZlbnQpOw0KICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKCFNT1VTRUVOVEVSX01PVVNFTEVBVkVfRVZFTlRTX1NVUFBPUlRFRCAmJg0KICAgICAgIChldmVudE5hbWUgPT09ICJtb3VzZWVudGVyIiB8fCBldmVudE5hbWUgPT09ICJtb3VzZWxlYXZlIikpIHsNCiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gIm1vdXNlZW50ZXIiIHx8IGV2ZW50TmFtZSA9PT0gIm1vdXNlbGVhdmUiKSB7DQogICAgICAgICAgcmVzcG9uZGVyID0gZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgIEV2ZW50LmV4dGVuZChldmVudCwgZWxlbWVudCk7DQoNCiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBldmVudC5yZWxhdGVkVGFyZ2V0Ow0KICAgICAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQgIT09IGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgdHJ5IHsgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7IH0NCiAgICAgICAgICAgICAgY2F0Y2goZSkgeyBwYXJlbnQgPSBlbGVtZW50OyB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IGVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXNwb25kZXIgPSBmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgIEV2ZW50LmV4dGVuZChldmVudCwgZWxlbWVudCk7DQogICAgICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTsNCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXNwb25kZXIuaGFuZGxlciA9IGhhbmRsZXI7DQogICAgcmVzcG9uZGVyc0ZvckV2ZW50LnB1c2gocmVzcG9uZGVyKTsNCiAgICByZXR1cm4gcmVzcG9uZGVyOw0KICB9DQoNCiAgZnVuY3Rpb24gX2Rlc3Ryb3lDYWNoZSgpIHsNCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gQ0FDSEUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgIEV2ZW50LnN0b3BPYnNlcnZpbmcoQ0FDSEVbaV0pOw0KICAgICAgQ0FDSEVbaV0gPSBudWxsOw0KICAgIH0NCiAgfQ0KDQogIHZhciBDQUNIRSA9IFtdOw0KDQogIGlmIChQcm90b3R5cGUuQnJvd3Nlci5JRSkNCiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29udW5sb2FkJywgX2Rlc3Ryb3lDYWNoZSk7DQoNCiAgaWYgKFByb3RvdHlwZS5Ccm93c2VyLldlYktpdCkNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgUHJvdG90eXBlLmVtcHR5RnVuY3Rpb24sIGZhbHNlKTsNCg0KDQogIHZhciBfZ2V0RE9NRXZlbnROYW1lID0gUHJvdG90eXBlLks7DQoNCiAgaWYgKCFNT1VTRUVOVEVSX01PVVNFTEVBVkVfRVZFTlRTX1NVUFBPUlRFRCkgew0KICAgIF9nZXRET01FdmVudE5hbWUgPSBmdW5jdGlvbihldmVudE5hbWUpIHsNCiAgICAgIHZhciB0cmFuc2xhdGlvbnMgPSB7IG1vdXNlZW50ZXI6ICJtb3VzZW92ZXIiLCBtb3VzZWxlYXZlOiAibW91c2VvdXQiIH07DQogICAgICByZXR1cm4gZXZlbnROYW1lIGluIHRyYW5zbGF0aW9ucyA/IHRyYW5zbGF0aW9uc1tldmVudE5hbWVdIDogZXZlbnROYW1lOw0KICAgIH07DQogIH0NCg0KICBmdW5jdGlvbiBvYnNlcnZlKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KDQogICAgdmFyIHJlc3BvbmRlciA9IF9jcmVhdGVSZXNwb25kZXIoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKTsNCg0KICAgIGlmICghcmVzcG9uZGVyKSByZXR1cm4gZWxlbWVudDsNCg0KICAgIGlmIChldmVudE5hbWUuaW5jbHVkZSgnOicpKSB7DQogICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKQ0KICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImRhdGFhdmFpbGFibGUiLCByZXNwb25kZXIsIGZhbHNlKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbmRhdGFhdmFpbGFibGUiLCByZXNwb25kZXIpOw0KICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbmZpbHRlcmNoYW5nZSIsIHJlc3BvbmRlcik7DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBhY3R1YWxFdmVudE5hbWUgPSBfZ2V0RE9NRXZlbnROYW1lKGV2ZW50TmFtZSk7DQoNCiAgICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpDQogICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihhY3R1YWxFdmVudE5hbWUsIHJlc3BvbmRlciwgZmFsc2UpOw0KICAgICAgZWxzZQ0KICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIgKyBhY3R1YWxFdmVudE5hbWUsIHJlc3BvbmRlcik7DQogICAgfQ0KDQogICAgcmV0dXJuIGVsZW1lbnQ7DQogIH0NCg0KICBmdW5jdGlvbiBzdG9wT2JzZXJ2aW5nKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgew0KICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOw0KDQogICAgdmFyIHJlZ2lzdHJ5ID0gRWxlbWVudC5yZXRyaWV2ZShlbGVtZW50LCAncHJvdG90eXBlX2V2ZW50X3JlZ2lzdHJ5Jyk7DQoNCiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHJlZ2lzdHJ5KSkgcmV0dXJuIGVsZW1lbnQ7DQoNCiAgICBpZiAoZXZlbnROYW1lICYmICFoYW5kbGVyKSB7DQogICAgICB2YXIgcmVzcG9uZGVycyA9IHJlZ2lzdHJ5LmdldChldmVudE5hbWUpOw0KDQogICAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHJlc3BvbmRlcnMpKSByZXR1cm4gZWxlbWVudDsNCg0KICAgICAgcmVzcG9uZGVycy5lYWNoKCBmdW5jdGlvbihyKSB7DQogICAgICAgIEVsZW1lbnQuc3RvcE9ic2VydmluZyhlbGVtZW50LCBldmVudE5hbWUsIHIuaGFuZGxlcik7DQogICAgICB9KTsNCiAgICAgIHJldHVybiBlbGVtZW50Ow0KICAgIH0gZWxzZSBpZiAoIWV2ZW50TmFtZSkgew0KICAgICAgcmVnaXN0cnkuZWFjaCggZnVuY3Rpb24ocGFpcikgew0KICAgICAgICB2YXIgZXZlbnROYW1lID0gcGFpci5rZXksIHJlc3BvbmRlcnMgPSBwYWlyLnZhbHVlOw0KDQogICAgICAgIHJlc3BvbmRlcnMuZWFjaCggZnVuY3Rpb24ocikgew0KICAgICAgICAgIEVsZW1lbnQuc3RvcE9ic2VydmluZyhlbGVtZW50LCBldmVudE5hbWUsIHIuaGFuZGxlcik7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgICByZXR1cm4gZWxlbWVudDsNCiAgICB9DQoNCiAgICB2YXIgcmVzcG9uZGVycyA9IHJlZ2lzdHJ5LmdldChldmVudE5hbWUpOw0KDQogICAgaWYgKCFyZXNwb25kZXJzKSByZXR1cm47DQoNCiAgICB2YXIgcmVzcG9uZGVyID0gcmVzcG9uZGVycy5maW5kKCBmdW5jdGlvbihyKSB7IHJldHVybiByLmhhbmRsZXIgPT09IGhhbmRsZXI7IH0pOw0KICAgIGlmICghcmVzcG9uZGVyKSByZXR1cm4gZWxlbWVudDsNCg0KICAgIHZhciBhY3R1YWxFdmVudE5hbWUgPSBfZ2V0RE9NRXZlbnROYW1lKGV2ZW50TmFtZSk7DQoNCiAgICBpZiAoZXZlbnROYW1lLmluY2x1ZGUoJzonKSkgew0KICAgICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikNCiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJkYXRhYXZhaWxhYmxlIiwgcmVzcG9uZGVyLCBmYWxzZSk7DQogICAgICBlbHNlIHsNCiAgICAgICAgZWxlbWVudC5kZXRhY2hFdmVudCgib25kYXRhYXZhaWxhYmxlIiwgcmVzcG9uZGVyKTsNCiAgICAgICAgZWxlbWVudC5kZXRhY2hFdmVudCgib25maWx0ZXJjaGFuZ2UiLCAgcmVzcG9uZGVyKTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikNCiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyLCBmYWxzZSk7DQogICAgICBlbHNlDQogICAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyKTsNCiAgICB9DQoNCiAgICByZWdpc3RyeS5zZXQoZXZlbnROYW1lLCByZXNwb25kZXJzLndpdGhvdXQocmVzcG9uZGVyKSk7DQoNCiAgICByZXR1cm4gZWxlbWVudDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGZpcmUoZWxlbWVudCwgZXZlbnROYW1lLCBtZW1vLCBidWJibGUpIHsNCiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsNCg0KICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQoYnViYmxlKSkNCiAgICAgIGJ1YmJsZSA9IHRydWU7DQoNCiAgICBpZiAoZWxlbWVudCA9PSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFdmVudCAmJiAhZWxlbWVudC5kaXNwYXRjaEV2ZW50KQ0KICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCg0KICAgIHZhciBldmVudDsNCiAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHsNCiAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTsNCiAgICAgIGV2ZW50LmluaXRFdmVudCgnZGF0YWF2YWlsYWJsZScsIHRydWUsIHRydWUpOw0KICAgIH0gZWxzZSB7DQogICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7DQogICAgICBldmVudC5ldmVudFR5cGUgPSBidWJibGUgPyAnb25kYXRhYXZhaWxhYmxlJyA6ICdvbmZpbHRlcmNoYW5nZSc7DQogICAgfQ0KDQogICAgZXZlbnQuZXZlbnROYW1lID0gZXZlbnROYW1lOw0KICAgIGV2ZW50Lm1lbW8gPSBtZW1vIHx8IHsgfTsNCg0KICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkNCiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7DQogICAgZWxzZQ0KICAgICAgZWxlbWVudC5maXJlRXZlbnQoZXZlbnQuZXZlbnRUeXBlLCBldmVudCk7DQoNCiAgICByZXR1cm4gRXZlbnQuZXh0ZW5kKGV2ZW50KTsNCiAgfQ0KDQoNCiAgT2JqZWN0LmV4dGVuZChFdmVudCwgRXZlbnQuTWV0aG9kcyk7DQoNCiAgT2JqZWN0LmV4dGVuZChFdmVudCwgew0KICAgIGZpcmU6ICAgICAgICAgIGZpcmUsDQogICAgb2JzZXJ2ZTogICAgICAgb2JzZXJ2ZSwNCiAgICBzdG9wT2JzZXJ2aW5nOiBzdG9wT2JzZXJ2aW5nDQogIH0pOw0KDQogIEVsZW1lbnQuYWRkTWV0aG9kcyh7DQogICAgZmlyZTogICAgICAgICAgZmlyZSwNCg0KICAgIG9ic2VydmU6ICAgICAgIG9ic2VydmUsDQoNCiAgICBzdG9wT2JzZXJ2aW5nOiBzdG9wT2JzZXJ2aW5nDQogIH0pOw0KDQogIE9iamVjdC5leHRlbmQoZG9jdW1lbnQsIHsNCiAgICBmaXJlOiAgICAgICAgICBmaXJlLm1ldGhvZGl6ZSgpLA0KDQogICAgb2JzZXJ2ZTogICAgICAgb2JzZXJ2ZS5tZXRob2RpemUoKSwNCg0KICAgIHN0b3BPYnNlcnZpbmc6IHN0b3BPYnNlcnZpbmcubWV0aG9kaXplKCksDQoNCiAgICBsb2FkZWQ6ICAgICAgICBmYWxzZQ0KICB9KTsNCg0KICBpZiAod2luZG93LkV2ZW50KSBPYmplY3QuZXh0ZW5kKHdpbmRvdy5FdmVudCwgRXZlbnQpOw0KICBlbHNlIHdpbmRvdy5FdmVudCA9IEV2ZW50Ow0KfSkoKTsNCg0KKGZ1bmN0aW9uKCkgew0KICAvKiBTdXBwb3J0IGZvciB0aGUgRE9NQ29udGVudExvYWRlZCBldmVudCBpcyBiYXNlZCBvbiB3b3JrIGJ5IERhbiBXZWJiLA0KICAgICBNYXR0aGlhcyBNaWxsZXIsIERlYW4gRWR3YXJkcywgSm9obiBSZXNpZywgYW5kIERpZWdvIFBlcmluaS4gKi8NCg0KICB2YXIgdGltZXI7DQoNCiAgZnVuY3Rpb24gZmlyZUNvbnRlbnRMb2FkZWRFdmVudCgpIHsNCiAgICBpZiAoZG9jdW1lbnQubG9hZGVkKSByZXR1cm47DQogICAgaWYgKHRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTsNCiAgICBkb2N1bWVudC5sb2FkZWQgPSB0cnVlOw0KICAgIGRvY3VtZW50LmZpcmUoJ2RvbTpsb2FkZWQnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNoZWNrUmVhZHlTdGF0ZSgpIHsNCiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykgew0KICAgICAgZG9jdW1lbnQuc3RvcE9ic2VydmluZygncmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrUmVhZHlTdGF0ZSk7DQogICAgICBmaXJlQ29udGVudExvYWRlZEV2ZW50KCk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gcG9sbERvU2Nyb2xsKCkgew0KICAgIHRyeSB7IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpOyB9DQogICAgY2F0Y2goZSkgew0KICAgICAgdGltZXIgPSBwb2xsRG9TY3JvbGwuZGVmZXIoKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCgpOw0KICB9DQoNCiAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCwgZmFsc2UpOw0KICB9IGVsc2Ugew0KICAgIGRvY3VtZW50Lm9ic2VydmUoJ3JlYWR5c3RhdGVjaGFuZ2UnLCBjaGVja1JlYWR5U3RhdGUpOw0KICAgIGlmICh3aW5kb3cgPT0gdG9wKQ0KICAgICAgdGltZXIgPSBwb2xsRG9TY3JvbGwuZGVmZXIoKTsNCiAgfQ0KDQogIEV2ZW50Lm9ic2VydmUod2luZG93LCAnbG9hZCcsIGZpcmVDb250ZW50TG9hZGVkRXZlbnQpOw0KfSkoKTsNCg0KRWxlbWVudC5hZGRNZXRob2RzKCk7DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBERVBSRUNBVEVEIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQpIYXNoLnRvUXVlcnlTdHJpbmcgPSBPYmplY3QudG9RdWVyeVN0cmluZzsNCg0KdmFyIFRvZ2dsZSA9IHsgZGlzcGxheTogRWxlbWVudC50b2dnbGUgfTsNCg0KRWxlbWVudC5NZXRob2RzLmNoaWxkT2YgPSBFbGVtZW50Lk1ldGhvZHMuZGVzY2VuZGFudE9mOw0KDQp2YXIgSW5zZXJ0aW9uID0gew0KICBCZWZvcmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbnRlbnQpIHsNCiAgICByZXR1cm4gRWxlbWVudC5pbnNlcnQoZWxlbWVudCwge2JlZm9yZTpjb250ZW50fSk7DQogIH0sDQoNCiAgVG9wOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7DQogICAgcmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGVsZW1lbnQsIHt0b3A6Y29udGVudH0pOw0KICB9LA0KDQogIEJvdHRvbTogZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkgew0KICAgIHJldHVybiBFbGVtZW50Lmluc2VydChlbGVtZW50LCB7Ym90dG9tOmNvbnRlbnR9KTsNCiAgfSwNCg0KICBBZnRlcjogZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkgew0KICAgIHJldHVybiBFbGVtZW50Lmluc2VydChlbGVtZW50LCB7YWZ0ZXI6Y29udGVudH0pOw0KICB9DQp9Ow0KDQp2YXIgJGNvbnRpbnVlID0gbmV3IEVycm9yKCcidGhyb3cgJGNvbnRpbnVlIiBpcyBkZXByZWNhdGVkLCB1c2UgInJldHVybiIgaW5zdGVhZCcpOw0KDQp2YXIgUG9zaXRpb24gPSB7DQogIGluY2x1ZGVTY3JvbGxPZmZzZXRzOiBmYWxzZSwNCg0KICBwcmVwYXJlOiBmdW5jdGlvbigpIHsNCiAgICB0aGlzLmRlbHRhWCA9ICB3aW5kb3cucGFnZVhPZmZzZXQNCiAgICAgICAgICAgICAgICB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdA0KICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdA0KICAgICAgICAgICAgICAgIHx8IDA7DQogICAgdGhpcy5kZWx0YVkgPSAgd2luZG93LnBhZ2VZT2Zmc2V0DQogICAgICAgICAgICAgICAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcA0KICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wDQogICAgICAgICAgICAgICAgfHwgMDsNCiAgfSwNCg0KICB3aXRoaW46IGZ1bmN0aW9uKGVsZW1lbnQsIHgsIHkpIHsNCiAgICBpZiAodGhpcy5pbmNsdWRlU2Nyb2xsT2Zmc2V0cykNCiAgICAgIHJldHVybiB0aGlzLndpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHMoZWxlbWVudCwgeCwgeSk7DQogICAgdGhpcy54Y29tcCA9IHg7DQogICAgdGhpcy55Y29tcCA9IHk7DQogICAgdGhpcy5vZmZzZXQgPSBFbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCk7DQoNCiAgICByZXR1cm4gKHkgPj0gdGhpcy5vZmZzZXRbMV0gJiYNCiAgICAgICAgICAgIHkgPCAgdGhpcy5vZmZzZXRbMV0gKyBlbGVtZW50Lm9mZnNldEhlaWdodCAmJg0KICAgICAgICAgICAgeCA+PSB0aGlzLm9mZnNldFswXSAmJg0KICAgICAgICAgICAgeCA8ICB0aGlzLm9mZnNldFswXSArIGVsZW1lbnQub2Zmc2V0V2lkdGgpOw0KICB9LA0KDQogIHdpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHM6IGZ1bmN0aW9uKGVsZW1lbnQsIHgsIHkpIHsNCiAgICB2YXIgb2Zmc2V0Y2FjaGUgPSBFbGVtZW50LmN1bXVsYXRpdmVTY3JvbGxPZmZzZXQoZWxlbWVudCk7DQoNCiAgICB0aGlzLnhjb21wID0geCArIG9mZnNldGNhY2hlWzBdIC0gdGhpcy5kZWx0YVg7DQogICAgdGhpcy55Y29tcCA9IHkgKyBvZmZzZXRjYWNoZVsxXSAtIHRoaXMuZGVsdGFZOw0KICAgIHRoaXMub2Zmc2V0ID0gRWxlbWVudC5jdW11bGF0aXZlT2Zmc2V0KGVsZW1lbnQpOw0KDQogICAgcmV0dXJuICh0aGlzLnljb21wID49IHRoaXMub2Zmc2V0WzFdICYmDQogICAgICAgICAgICB0aGlzLnljb21wIDwgIHRoaXMub2Zmc2V0WzFdICsgZWxlbWVudC5vZmZzZXRIZWlnaHQgJiYNCiAgICAgICAgICAgIHRoaXMueGNvbXAgPj0gdGhpcy5vZmZzZXRbMF0gJiYNCiAgICAgICAgICAgIHRoaXMueGNvbXAgPCAgdGhpcy5vZmZzZXRbMF0gKyBlbGVtZW50Lm9mZnNldFdpZHRoKTsNCiAgfSwNCg0KICBvdmVybGFwOiBmdW5jdGlvbihtb2RlLCBlbGVtZW50KSB7DQogICAgaWYgKCFtb2RlKSByZXR1cm4gMDsNCiAgICBpZiAobW9kZSA9PSAndmVydGljYWwnKQ0KICAgICAgcmV0dXJuICgodGhpcy5vZmZzZXRbMV0gKyBlbGVtZW50Lm9mZnNldEhlaWdodCkgLSB0aGlzLnljb21wKSAvDQogICAgICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0Ow0KICAgIGlmIChtb2RlID09ICdob3Jpem9udGFsJykNCiAgICAgIHJldHVybiAoKHRoaXMub2Zmc2V0WzBdICsgZWxlbWVudC5vZmZzZXRXaWR0aCkgLSB0aGlzLnhjb21wKSAvDQogICAgICAgIGVsZW1lbnQub2Zmc2V0V2lkdGg7DQogIH0sDQoNCg0KICBjdW11bGF0aXZlT2Zmc2V0OiBFbGVtZW50Lk1ldGhvZHMuY3VtdWxhdGl2ZU9mZnNldCwNCg0KICBwb3NpdGlvbmVkT2Zmc2V0OiBFbGVtZW50Lk1ldGhvZHMucG9zaXRpb25lZE9mZnNldCwNCg0KICBhYnNvbHV0aXplOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgUG9zaXRpb24ucHJlcGFyZSgpOw0KICAgIHJldHVybiBFbGVtZW50LmFic29sdXRpemUoZWxlbWVudCk7DQogIH0sDQoNCiAgcmVsYXRpdml6ZTogZnVuY3Rpb24oZWxlbWVudCkgew0KICAgIFBvc2l0aW9uLnByZXBhcmUoKTsNCiAgICByZXR1cm4gRWxlbWVudC5yZWxhdGl2aXplKGVsZW1lbnQpOw0KICB9LA0KDQogIHJlYWxPZmZzZXQ6IEVsZW1lbnQuTWV0aG9kcy5jdW11bGF0aXZlU2Nyb2xsT2Zmc2V0LA0KDQogIG9mZnNldFBhcmVudDogRWxlbWVudC5NZXRob2RzLmdldE9mZnNldFBhcmVudCwNCg0KICBwYWdlOiBFbGVtZW50Lk1ldGhvZHMudmlld3BvcnRPZmZzZXQsDQoNCiAgY2xvbmU6IGZ1bmN0aW9uKHNvdXJjZSwgdGFyZ2V0LCBvcHRpb25zKSB7DQogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyB9Ow0KICAgIHJldHVybiBFbGVtZW50LmNsb25lUG9zaXRpb24odGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpOw0KICB9DQp9Ow0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24oaW5zdGFuY2VNZXRob2RzKXsNCiAgZnVuY3Rpb24gaXRlcihuYW1lKSB7DQogICAgcmV0dXJuIG5hbWUuYmxhbmsoKSA/IG51bGwgOiAiW2NvbnRhaW5zKGNvbmNhdCgnICcsIEBjbGFzcywgJyAnKSwgJyAiICsgbmFtZSArICIgJyldIjsNCiAgfQ0KDQogIGluc3RhbmNlTWV0aG9kcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5YUGF0aCA/DQogIGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkgew0KICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS50b1N0cmluZygpLnN0cmlwKCk7DQogICAgdmFyIGNvbmQgPSAvXHMvLnRlc3QoY2xhc3NOYW1lKSA/ICR3KGNsYXNzTmFtZSkubWFwKGl0ZXIpLmpvaW4oJycpIDogaXRlcihjbGFzc05hbWUpOw0KICAgIHJldHVybiBjb25kID8gZG9jdW1lbnQuX2dldEVsZW1lbnRzQnlYUGF0aCgnLi8vKicgKyBjb25kLCBlbGVtZW50KSA6IFtdOw0KICB9IDogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lKSB7DQogICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvU3RyaW5nKCkuc3RyaXAoKTsNCiAgICB2YXIgZWxlbWVudHMgPSBbXSwgY2xhc3NOYW1lcyA9ICgvXHMvLnRlc3QoY2xhc3NOYW1lKSA/ICR3KGNsYXNzTmFtZSkgOiBudWxsKTsNCiAgICBpZiAoIWNsYXNzTmFtZXMgJiYgIWNsYXNzTmFtZSkgcmV0dXJuIGVsZW1lbnRzOw0KDQogICAgdmFyIG5vZGVzID0gJChlbGVtZW50KS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpOw0KICAgIGNsYXNzTmFtZSA9ICcgJyArIGNsYXNzTmFtZSArICcgJzsNCg0KICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZCwgY247IGNoaWxkID0gbm9kZXNbaV07IGkrKykgew0KICAgICAgaWYgKGNoaWxkLmNsYXNzTmFtZSAmJiAoY24gPSAnICcgKyBjaGlsZC5jbGFzc05hbWUgKyAnICcpICYmIChjbi5pbmNsdWRlKGNsYXNzTmFtZSkgfHwNCiAgICAgICAgICAoY2xhc3NOYW1lcyAmJiBjbGFzc05hbWVzLmFsbChmdW5jdGlvbihuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gIW5hbWUudG9TdHJpbmcoKS5ibGFuaygpICYmIGNuLmluY2x1ZGUoJyAnICsgbmFtZSArICcgJyk7DQogICAgICAgICAgfSkpKSkNCiAgICAgICAgZWxlbWVudHMucHVzaChFbGVtZW50LmV4dGVuZChjaGlsZCkpOw0KICAgIH0NCiAgICByZXR1cm4gZWxlbWVudHM7DQogIH07DQoNCiAgcmV0dXJuIGZ1bmN0aW9uKGNsYXNzTmFtZSwgcGFyZW50RWxlbWVudCkgew0KICAgIHJldHVybiAkKHBhcmVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpOw0KICB9Ow0KfShFbGVtZW50Lk1ldGhvZHMpOw0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KRWxlbWVudC5DbGFzc05hbWVzID0gQ2xhc3MuY3JlYXRlKCk7DQpFbGVtZW50LkNsYXNzTmFtZXMucHJvdG90eXBlID0gew0KICBpbml0aWFsaXplOiBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTsNCiAgfSwNCg0KICBfZWFjaDogZnVuY3Rpb24oaXRlcmF0b3IpIHsNCiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KC9ccysvKS5zZWxlY3QoZnVuY3Rpb24obmFtZSkgew0KICAgICAgcmV0dXJuIG5hbWUubGVuZ3RoID4gMDsNCiAgICB9KS5fZWFjaChpdGVyYXRvcik7DQogIH0sDQoNCiAgc2V0OiBmdW5jdGlvbihjbGFzc05hbWUpIHsNCiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lOw0KICB9LA0KDQogIGFkZDogZnVuY3Rpb24oY2xhc3NOYW1lVG9BZGQpIHsNCiAgICBpZiAodGhpcy5pbmNsdWRlKGNsYXNzTmFtZVRvQWRkKSkgcmV0dXJuOw0KICAgIHRoaXMuc2V0KCRBKHRoaXMpLmNvbmNhdChjbGFzc05hbWVUb0FkZCkuam9pbignICcpKTsNCiAgfSwNCg0KICByZW1vdmU6IGZ1bmN0aW9uKGNsYXNzTmFtZVRvUmVtb3ZlKSB7DQogICAgaWYgKCF0aGlzLmluY2x1ZGUoY2xhc3NOYW1lVG9SZW1vdmUpKSByZXR1cm47DQogICAgdGhpcy5zZXQoJEEodGhpcykud2l0aG91dChjbGFzc05hbWVUb1JlbW92ZSkuam9pbignICcpKTsNCiAgfSwNCg0KICB0b1N0cmluZzogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuICRBKHRoaXMpLmpvaW4oJyAnKTsNCiAgfQ0KfTsNCg0KT2JqZWN0LmV4dGVuZChFbGVtZW50LkNsYXNzTmFtZXMucHJvdG90eXBlLCBFbnVtZXJhYmxlKTsNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="22" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jquery-1.10.2.min.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jquery-1.10.2.min.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="8" startDateTime="2024-11-07T09:35:45.911+00:00" startTime="2221" endTime="2238" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="12" waitTime="0" receiveTime="4" sslNegotiateTime="-1" responseBodySize="93375">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qcXVlcnktMS4xMC4yLm1pbi5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXMNClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYjsgY3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>93113</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTMxMTM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogOTMxMTMNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyohIGpRdWVyeSB2MS4xMC4yIHwgKGMpIDIwMDUsIDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UNCi8vQCBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS0xLjEwLjIubWluLm1hcA0KKi8NCihmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10eXBlb2YgdCxvPWUubG9jYXRpb24sYT1lLmRvY3VtZW50LHM9YS5kb2N1bWVudEVsZW1lbnQsbD1lLmpRdWVyeSx1PWUuJCxjPXt9LHA9W10sZj0iMS4xMC4yIixkPXAuY29uY2F0LGg9cC5wdXNoLGc9cC5zbGljZSxtPXAuaW5kZXhPZix5PWMudG9TdHJpbmcsdj1jLmhhc093blByb3BlcnR5LGI9Zi50cmltLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHguZm4uaW5pdChlLHQscil9LHc9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsVD0vXFMrL2csQz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csTj0vXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLGs9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyxFPS9eW1xdLDp7fVxzXSokLyxTPS8oPzpefDp8LCkoPzpccypcWykrL2csQT0vXFwoPzpbIlxcXC9iZm5ydF18dVtcZGEtZkEtRl17NH0pL2csaj0vIlteIlxcXHJcbl0qInx0cnVlfGZhbHNlfG51bGx8LT8oPzpcZCtcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvZyxEPS9eLW1zLS8sTD0vLShbXGRhLXpdKS9naSxIPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0scT1mdW5jdGlvbihlKXsoYS5hZGRFdmVudExpc3RlbmVyfHwibG9hZCI9PT1lLnR5cGV8fCJjb21wbGV0ZSI9PT1hLnJlYWR5U3RhdGUpJiYoXygpLHgucmVhZHkoKSl9LF89ZnVuY3Rpb24oKXthLmFkZEV2ZW50TGlzdGVuZXI/KGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIscSwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixxLCExKSk6KGEuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIscSksZS5kZXRhY2hFdmVudCgib25sb2FkIixxKSl9O3guZm49eC5wcm90b3R5cGU9e2pxdWVyeTpmLGNvbnN0cnVjdG9yOngsaW5pdDpmdW5jdGlvbihlLG4scil7dmFyIGksbztpZighZSlyZXR1cm4gdGhpcztpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKGk9IjwiPT09ZS5jaGFyQXQoMCkmJiI+Ij09PWUuY2hhckF0KGUubGVuZ3RoLTEpJiZlLmxlbmd0aD49Mz9bbnVsbCxlLG51bGxdOk4uZXhlYyhlKSwhaXx8IWlbMV0mJm4pcmV0dXJuIW58fG4uanF1ZXJ5PyhufHxyKS5maW5kKGUpOnRoaXMuY29uc3RydWN0b3IobikuZmluZChlKTtpZihpWzFdKXtpZihuPW4gaW5zdGFuY2VvZiB4P25bMF06bix4Lm1lcmdlKHRoaXMseC5wYXJzZUhUTUwoaVsxXSxuJiZuLm5vZGVUeXBlP24ub3duZXJEb2N1bWVudHx8bjphLCEwKSksay50ZXN0KGlbMV0pJiZ4LmlzUGxhaW5PYmplY3QobikpZm9yKGkgaW4gbil4LmlzRnVuY3Rpb24odGhpc1tpXSk/dGhpc1tpXShuW2ldKTp0aGlzLmF0dHIoaSxuW2ldKTtyZXR1cm4gdGhpc31pZihvPWEuZ2V0RWxlbWVudEJ5SWQoaVsyXSksbyYmby5wYXJlbnROb2RlKXtpZihvLmlkIT09aVsyXSlyZXR1cm4gci5maW5kKGUpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1vfXJldHVybiB0aGlzLmNvbnRleHQ9YSx0aGlzLnNlbGVjdG9yPWUsdGhpc31yZXR1cm4gZS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOnguaXNGdW5jdGlvbihlKT9yLnJlYWR5KGUpOihlLnNlbGVjdG9yIT09dCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBnLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhnLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbyxhLHM9YXJndW1lbnRzWzBdfHx7fSxsPTEsdT1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihjPXMscz1hcmd1bWVudHNbMV18fHt9LGw9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09bCYmKHM9dGhpcywtLWwpO3U+bDtsKyspaWYobnVsbCE9KG89YXJndW1lbnRzW2xdKSlmb3IoaSBpbiBvKWU9c1tpXSxyPW9baV0scyE9PXImJihjJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwobj14LmlzQXJyYXkocikpKT8obj8obj0hMSxhPWUmJnguaXNBcnJheShlKT9lOltdKTphPWUmJnguaXNQbGFpbk9iamVjdChlKT9lOnt9LHNbaV09eC5leHRlbmQoYyxhLHIpKTpyIT09dCYmKHNbaV09cikpO3JldHVybiBzfSx4LmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisoZitNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxub0NvbmZsaWN0OmZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT14JiYoZS4kPXUpLHQmJmUualF1ZXJ5PT09eCYmKGUualF1ZXJ5PWwpLHh9LGlzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGUpe2U/eC5yZWFkeVdhaXQrKzp4LnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oZSl7aWYoZT09PSEwPyEtLXgucmVhZHlXYWl0OiF4LmlzUmVhZHkpe2lmKCFhLmJvZHkpcmV0dXJuIHNldFRpbWVvdXQoeC5yZWFkeSk7eC5pc1JlYWR5PSEwLGUhPT0hMCYmLS14LnJlYWR5V2FpdD4wfHwobi5yZXNvbHZlV2l0aChhLFt4XSkseC5mbi50cmlnZ2VyJiZ4KGEpLnRyaWdnZXIoInJlYWR5Iikub2ZmKCJyZWFkeSIpKX19LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuImZ1bmN0aW9uIj09PXgudHlwZShlKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iYXJyYXkiPT09eC50eXBlKGUpfSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09ZS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihlKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChlKSkmJmlzRmluaXRlKGUpfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9jW3kuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciBuO2lmKCFlfHwib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXYuY2FsbChlLCJjb25zdHJ1Y3RvciIpJiYhdi5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuITF9Y2F0Y2gocil7cmV0dXJuITF9aWYoeC5zdXBwb3J0Lm93bkxhc3QpZm9yKG4gaW4gZSlyZXR1cm4gdi5jYWxsKGUsbik7Zm9yKG4gaW4gZSk7cmV0dXJuIG49PT10fHx2LmNhbGwoZSxuKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdD10fHxhO3ZhciByPWsuZXhlYyhlKSxpPSFuJiZbXTtyZXR1cm4gcj9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj14LmJ1aWxkRnJhZ21lbnQoW2VdLHQsaSksaSYmeChpKS5yZW1vdmUoKSx4Lm1lcmdlKFtdLHIuY2hpbGROb2RlcykpfSxwYXJzZUpTT046ZnVuY3Rpb24obil7cmV0dXJuIGUuSlNPTiYmZS5KU09OLnBhcnNlP2UuSlNPTi5wYXJzZShuKTpudWxsPT09bj9uOiJzdHJpbmciPT10eXBlb2YgbiYmKG49eC50cmltKG4pLG4mJkUudGVzdChuLnJlcGxhY2UoQSwiQCIpLnJlcGxhY2UoaiwiXSIpLnJlcGxhY2UoUywiIikpKT9GdW5jdGlvbigicmV0dXJuICIrbikoKTooeC5lcnJvcigiSW52YWxpZCBKU09OOiAiK24pLHQpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHwic3RyaW5nIiE9dHlwZW9mIG4pcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLCJ0ZXh0L3htbCIpKToocj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLHIuYXN5bmM9ImZhbHNlIixyLmxvYWRYTUwobikpfWNhdGNoKG8pe3I9dH1yZXR1cm4gciYmci5kb2N1bWVudEVsZW1lbnQmJiFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8eC5lcnJvcigiSW52YWxpZCBYTUw6ICIrbikscn0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbih0KXt0JiZ4LnRyaW0odCkmJihlLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKHQpe2UuZXZhbC5jYWxsKGUsdCl9KSh0KX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoRCwibXMtIikucmVwbGFjZShMLEgpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKTtpZihuKXtpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpiJiYhYi5jYWxsKCJcdWZlZmZcdTAwYTAiKT9mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjpiLmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKEMsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKE0oT2JqZWN0KGUpKT94Lm1lcmdlKG4sInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKTpoLmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYodCl7aWYobSlyZXR1cm4gbS5jYWxsKHQsZSxuKTtmb3Iocj10Lmxlbmd0aCxuPW4/MD5uP01hdGgubWF4KDAscituKTpuOjA7cj5uO24rKylpZihuIGluIHQmJnRbbl09PT1lKXJldHVybiBufXJldHVybi0xfSxtZXJnZTpmdW5jdGlvbihlLG4pe3ZhciByPW4ubGVuZ3RoLGk9ZS5sZW5ndGgsbz0wO2lmKCJudW1iZXIiPT10eXBlb2Ygcilmb3IoO3I+bztvKyspZVtpKytdPW5bb107ZWxzZSB3aGlsZShuW29dIT09dCllW2krK109bltvKytdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGg7Zm9yKG49ISFuO2E+bztvKyspcj0hIXQoZVtvXSxvKSxuIT09ciYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKSxzPVtdO2lmKGEpZm9yKDtvPmk7aSsrKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKHNbcy5sZW5ndGhdPXIpO2Vsc2UgZm9yKGkgaW4gZSlyPXQoZVtpXSxpLG4pLG51bGwhPXImJihzW3MubGVuZ3RoXT1yKTtyZXR1cm4gZC5hcHBseShbXSxzKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvO3JldHVybiJzdHJpbmciPT10eXBlb2YgbiYmKG89ZVtuXSxuPWUsZT1vKSx4LmlzRnVuY3Rpb24oZSk/KHI9Zy5jYWxsKGFyZ3VtZW50cywyKSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobnx8dGhpcyxyLmNvbmNhdChnLmNhbGwoYXJndW1lbnRzKSkpfSxpLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8eC5ndWlkKyssaSk6dH0sYWNjZXNzOmZ1bmN0aW9uKGUsbixyLGksbyxhLHMpe3ZhciBsPTAsdT1lLmxlbmd0aCxjPW51bGw9PXI7aWYoIm9iamVjdCI9PT14LnR5cGUocikpe289ITA7Zm9yKGwgaW4gcil4LmFjY2VzcyhlLG4sbCxyW2xdLCEwLGEscyl9ZWxzZSBpZihpIT09dCYmKG89ITAseC5pc0Z1bmN0aW9uKGkpfHwocz0hMCksYyYmKHM/KG4uY2FsbChlLGkpLG49bnVsbCk6KGM9bixuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYy5jYWxsKHgoZSksbil9KSksbikpZm9yKDt1Pmw7bCsrKW4oZVtsXSxyLHM/aTppLmNhbGwoZVtsXSxsLG4oZVtsXSxyKSkpO3JldHVybiBvP2U6Yz9uLmNhbGwoZSk6dT9uKGVbMF0scik6YX0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhPXt9O2ZvcihvIGluIHQpYVtvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPWFbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe2lmKCFuKWlmKG49eC5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1hLnJlYWR5U3RhdGUpc2V0VGltZW91dCh4LnJlYWR5KTtlbHNlIGlmKGEuYWRkRXZlbnRMaXN0ZW5lcilhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHEsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIscSwhMSk7ZWxzZXthLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLHEpLGUuYXR0YWNoRXZlbnQoIm9ubG9hZCIscSk7dmFyIHI9ITE7dHJ5e3I9bnVsbD09ZS5mcmFtZUVsZW1lbnQmJmEuZG9jdW1lbnRFbGVtZW50fWNhdGNoKGkpe31yJiZyLmRvU2Nyb2xsJiZmdW5jdGlvbiBvKCl7aWYoIXguaXNSZWFkeSl7dHJ5e3IuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChlKXtyZXR1cm4gc2V0VGltZW91dChvLDUwKX1fKCkseC5yZWFkeSgpfX0oKX1yZXR1cm4gbi5wcm9taXNlKHQpfSx4LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXtjWyJbb2JqZWN0ICIrdCsiXSJdPXQudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIE0oZSl7dmFyIHQ9ZS5sZW5ndGgsbj14LnR5cGUoZSk7cmV0dXJuIHguaXNXaW5kb3coZSk/ITE6MT09PWUubm9kZVR5cGUmJnQ/ITA6ImFycmF5Ij09PW58fCJmdW5jdGlvbiIhPT1uJiYoMD09PXR8fCJudW1iZXIiPT10eXBlb2YgdCYmdD4wJiZ0LTEgaW4gZSl9cj14KGEpLGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzLGwsdSxjLHAsZixkLGgsZyxtLHksdixiPSJzaXp6bGUiKy1uZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD0wLEM9MCxOPXN0KCksaz1zdCgpLEU9c3QoKSxTPSExLEE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/KFM9ITAsMCk6MH0saj10eXBlb2YgdCxEPTE8PDMxLEw9e30uaGFzT3duUHJvcGVydHksSD1bXSxxPUgucG9wLF89SC5wdXNoLE09SC5wdXNoLE89SC5zbGljZSxGPUguaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sQj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLFA9IltcXHgyMFxcdFxcclxcblxcZl0iLFI9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixXPVIucmVwbGFjZSgidyIsIncjIiksJD0iXFxbIitQKyIqKCIrUisiKSIrUCsiKig/OihbKl4kfCF+XT89KSIrUCsiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrVysiKXwpfCkiK1ArIipcXF0iLEk9IjooIitSKyIpKD86XFwoKChbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IiskLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix6PVJlZ0V4cCgiXiIrUCsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitQKyIrJCIsImciKSxYPVJlZ0V4cCgiXiIrUCsiKiwiK1ArIioiKSxVPVJlZ0V4cCgiXiIrUCsiKihbPit+XXwiK1ArIikiK1ArIioiKSxWPVJlZ0V4cChQKyIqWyt+XSIpLFk9UmVnRXhwKCI9IitQKyIqKFteXFxdJ1wiXSopIitQKyIqXFxdIiwiZyIpLEo9UmVnRXhwKEkpLEc9UmVnRXhwKCJeIitXKyIkIiksUT17SUQ6UmVnRXhwKCJeIygiK1IrIikiKSxDTEFTUzpSZWdFeHAoIl5cXC4oIitSKyIpIiksVEFHOlJlZ0V4cCgiXigiK1IucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOlJlZ0V4cCgiXiIrJCksUFNFVURPOlJlZ0V4cCgiXiIrSSksQ0hJTEQ6UmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK1ArIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK1ArIiooPzooWystXXwpIitQKyIqKFxcZCspfCkpIitQKyIqXFwpfCkiLCJpIiksYm9vbDpSZWdFeHAoIl4oPzoiK0IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK1ArIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrUCsiKigoPzotXFxkKT9cXGQqKSIrUCsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGV0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksdHQ9L15oXGQkL2ksbnQ9Lyd8XFwvZyxydD1SZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrUCsiP3woIitQKyIpfC4pIiwiaWciKSxpdD1mdW5jdGlvbihlLHQsbil7dmFyIHI9IjB4Iit0LTY1NTM2O3JldHVybiByIT09cnx8bj90OjA+cj9TdHJpbmcuZnJvbUNoYXJDb2RlKHIrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8cj4+MTAsNTYzMjB8MTAyMyZyKX07dHJ5e00uYXBwbHkoSD1PLmNhbGwody5jaGlsZE5vZGVzKSx3LmNoaWxkTm9kZXMpLEhbdy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2gob3Qpe009e2FwcGx5OkgubGVuZ3RoP2Z1bmN0aW9uKGUsdCl7Xy5hcHBseShlLE8uY2FsbCh0KSl9OmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO3doaWxlKGVbbisrXT10W3IrK10pO2UubGVuZ3RoPW4tMX19fWZ1bmN0aW9uIGF0KGUsdCxuLGkpe3ZhciBvLGEscyxsLHUsYyxkLG0seSx4O2lmKCh0P3Qub3duZXJEb2N1bWVudHx8dDp3KSE9PWYmJnAodCksdD10fHxmLG49bnx8W10sIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbjtpZigxIT09KGw9dC5ub2RlVHlwZSkmJjkhPT1sKXJldHVybltdO2lmKGgmJiFpKXtpZihvPVouZXhlYyhlKSlpZihzPW9bMV0pe2lmKDk9PT1sKXtpZihhPXQuZ2V0RWxlbWVudEJ5SWQocyksIWF8fCFhLnBhcmVudE5vZGUpcmV0dXJuIG47aWYoYS5pZD09PXMpcmV0dXJuIG4ucHVzaChhKSxufWVsc2UgaWYodC5vd25lckRvY3VtZW50JiYoYT10Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocykpJiZ2KHQsYSkmJmEuaWQ9PT1zKXJldHVybiBuLnB1c2goYSksbn1lbHNle2lmKG9bMl0pcmV0dXJuIE0uYXBwbHkobix0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpKSxuO2lmKChzPW9bM10pJiZyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gTS5hcHBseShuLHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShzKSksbn1pZihyLnFzYSYmKCFnfHwhZy50ZXN0KGUpKSl7aWYobT1kPWIseT10LHg9OT09PWwmJmUsMT09PWwmJiJvYmplY3QiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjPW10KGUpLChkPXQuZ2V0QXR0cmlidXRlKCJpZCIpKT9tPWQucmVwbGFjZShudCwiXFwkJiIpOnQuc2V0QXR0cmlidXRlKCJpZCIsbSksbT0iW2lkPSciK20rIiddICIsdT1jLmxlbmd0aDt3aGlsZSh1LS0pY1t1XT1tK3l0KGNbdV0pO3k9Vi50ZXN0KGUpJiZ0LnBhcmVudE5vZGV8fHQseD1jLmpvaW4oIiwiKX1pZih4KXRyeXtyZXR1cm4gTS5hcHBseShuLHkucXVlcnlTZWxlY3RvckFsbCh4KSksbn1jYXRjaChUKXt9ZmluYWxseXtkfHx0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBrdChlLnJlcGxhY2UoeiwiJDEiKSx0LG4saSl9ZnVuY3Rpb24gc3QoKXt2YXIgZT1bXTtmdW5jdGlvbiB0KG4scil7cmV0dXJuIGUucHVzaChuKz0iICIpPm8uY2FjaGVMZW5ndGgmJmRlbGV0ZSB0W2Uuc2hpZnQoKV0sdFtuXT1yfXJldHVybiB0fWZ1bmN0aW9uIGx0KGUpe3JldHVybiBlW2JdPSEwLGV9ZnVuY3Rpb24gdXQoZSl7dmFyIHQ9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBjdChlLHQpe3ZhciBuPWUuc3BsaXQoInwiKSxyPWUubGVuZ3RoO3doaWxlKHItLSlvLmF0dHJIYW5kbGVbbltyXV09dH1mdW5jdGlvbiBwdChlLHQpe3ZhciBuPXQmJmUscj1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJih+dC5zb3VyY2VJbmRleHx8RCktKH5lLnNvdXJjZUluZGV4fHxEKTtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09biYmdC50eXBlPT09ZX19ZnVuY3Rpb24gZHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PW58fCJidXR0b24iPT09bikmJnQudHlwZT09PWV9fWZ1bmN0aW9uIGh0KGUpe3JldHVybiBsdChmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxsdChmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfXM9YXQuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiB0PyJIVE1MIiE9PXQubm9kZU5hbWU6ITF9LHI9YXQuc3VwcG9ydD17fSxwPWF0LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciBuPWU/ZS5vd25lckRvY3VtZW50fHxlOncsaT1uLmRlZmF1bHRWaWV3O3JldHVybiBuIT09ZiYmOT09PW4ubm9kZVR5cGUmJm4uZG9jdW1lbnRFbGVtZW50PyhmPW4sZD1uLmRvY3VtZW50RWxlbWVudCxoPSFzKG4pLGkmJmkuYXR0YWNoRXZlbnQmJmkhPT1pLnRvcCYmaS5hdHRhY2hFdmVudCgib25iZWZvcmV1bmxvYWQiLGZ1bmN0aW9uKCl7cCgpfSksci5hdHRyaWJ1dGVzPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmNsYXNzTmFtZT0iaSIsIWUuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pLHIuZ2V0RWxlbWVudHNCeVRhZ05hbWU9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KCIiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxyLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiIsZS5maXJzdENoaWxkLmNsYXNzTmFtZT0iaSIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaSIpLmxlbmd0aH0pLHIuZ2V0QnlJZD11dChmdW5jdGlvbihlKXtyZXR1cm4gZC5hcHBlbmRDaGlsZChlKS5pZD1iLCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZShiKS5sZW5ndGh9KSxyLmdldEJ5SWQ/KG8uZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkIT09aiYmaCl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbiYmbi5wYXJlbnROb2RlP1tuXTpbXX19LG8uZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShydCxpdCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSk6KGRlbGV0ZSBvLmZpbmQuSUQsby5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKHJ0LGl0KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSE9PWomJmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSksby5maW5kLlRBRz1yLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09aj9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOnR9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LG8uZmluZC5DTEFTUz1yLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1qJiZoP24uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKTp0fSxtPVtdLGc9W10sKHIucXNhPUsudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKHV0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGcucHVzaCgiXFxbIitQKyIqKD86dmFsdWV8IitCKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8Zy5wdXNoKCI6Y2hlY2tlZCIpfSksdXQoZnVuY3Rpb24oZSl7dmFyIHQ9bi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoInQiLCIiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgmJmcucHVzaCgiWypeJF09IitQKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxnLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksZy5wdXNoKCIsLio6Iil9KSksKHIubWF0Y2hlc1NlbGVjdG9yPUsudGVzdCh5PWQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxkLm1vek1hdGNoZXNTZWxlY3Rvcnx8ZC5vTWF0Y2hlc1NlbGVjdG9yfHxkLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnV0KGZ1bmN0aW9uKGUpe3IuZGlzY29ubmVjdGVkTWF0Y2g9eS5jYWxsKGUsImRpdiIpLHkuY2FsbChlLCJbcyE9JyddOngiKSxtLnB1c2goIiE9IixJKX0pLGc9Zy5sZW5ndGgmJlJlZ0V4cChnLmpvaW4oInwiKSksbT1tLmxlbmd0aCYmUmVnRXhwKG0uam9pbigifCIpKSx2PUsudGVzdChkLmNvbnRhaW5zKXx8ZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LEE9ZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBTPSEwLDA7dmFyIGk9dC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KTtyZXR1cm4gaT8xJml8fCFyLnNvcnREZXRhY2hlZCYmdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PWk/ZT09PW58fHYodyxlKT8tMTp0PT09bnx8dih3LHQpPzE6Yz9GLmNhbGwoYyxlKS1GLmNhbGwoYyx0KTowOjQmaT8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSx0KXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUsYT10LnBhcmVudE5vZGUscz1bZV0sbD1bdF07aWYoZT09PXQpcmV0dXJuIFM9ITAsMDtpZighb3x8IWEpcmV0dXJuIGU9PT1uPy0xOnQ9PT1uPzE6bz8tMTphPzE6Yz9GLmNhbGwoYyxlKS1GLmNhbGwoYyx0KTowO2lmKG89PT1hKXJldHVybiBwdChlLHQpO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlzLnVuc2hpZnQocik7cj10O3doaWxlKHI9ci5wYXJlbnROb2RlKWwudW5zaGlmdChyKTt3aGlsZShzW2ldPT09bFtpXSlpKys7cmV0dXJuIGk/cHQoc1tpXSxsW2ldKTpzW2ldPT09dz8tMTpsW2ldPT09dz8xOjB9LG4pOmZ9LGF0Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXQoZSxudWxsLG51bGwsdCl9LGF0Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09ZiYmcChlKSx0PXQucmVwbGFjZShZLCI9JyQxJ10iKSwhKCFyLm1hdGNoZXNTZWxlY3Rvcnx8IWh8fG0mJm0udGVzdCh0KXx8ZyYmZy50ZXN0KHQpKSl0cnl7dmFyIG49eS5jYWxsKGUsdCk7aWYobnx8ci5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBufWNhdGNoKGkpe31yZXR1cm4gYXQodCxmLG51bGwsW2VdKS5sZW5ndGg+MH0sYXQuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PWYmJnAoZSksdihlLHQpfSxhdC5hdHRyPWZ1bmN0aW9uKGUsbil7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1mJiZwKGUpO3ZhciBpPW8uYXR0ckhhbmRsZVtuLnRvTG93ZXJDYXNlKCldLGE9aSYmTC5jYWxsKG8uYXR0ckhhbmRsZSxuLnRvTG93ZXJDYXNlKCkpP2koZSxuLCFoKTp0O3JldHVybiBhPT09dD9yLmF0dHJpYnV0ZXN8fCFoP2UuZ2V0QXR0cmlidXRlKG4pOihhPWUuZ2V0QXR0cmlidXRlTm9kZShuKSkmJmEuc3BlY2lmaWVkP2EudmFsdWU6bnVsbDphfSxhdC5lcnJvcj1mdW5jdGlvbihlKXt0aHJvdyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sYXQudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLGk9MCxvPTA7aWYoUz0hci5kZXRlY3REdXBsaWNhdGVzLGM9IXIuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoQSksUyl7d2hpbGUodD1lW28rK10pdD09PWVbb10mJihpPW4ucHVzaChvKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9LGE9YXQuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPSIiLHI9MCxpPWUubm9kZVR5cGU7aWYoaSl7aWYoMT09PWl8fDk9PT1pfHwxMT09PWkpe2lmKCJzdHJpbmciPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9YShlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSBmb3IoO3Q9ZVtyXTtyKyspbis9YSh0KTtyZXR1cm4gbn0sbz1hdC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpsdCxtYXRjaDpRLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UocnQsaXQpLGVbM109KGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKHJ0LGl0KSwifj0iPT09ZVsyXSYmKGVbM109IiAiK2VbM10rIiAiKSxlLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8YXQuZXJyb3IoZVswXSksZVs0XT0rKGVbNF0/ZVs1XSsoZVs2XXx8MSk6MiooImV2ZW4iPT09ZVszXXx8Im9kZCI9PT1lWzNdKSksZVs1XT0rKGVbN10rZVs4XXx8Im9kZCI9PT1lWzNdKSk6ZVszXSYmYXQuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciBuLHI9IWVbNV0mJmVbMl07cmV0dXJuIFEuQ0hJTEQudGVzdChlWzBdKT9udWxsOihlWzNdJiZlWzRdIT09dD9lWzJdPWVbNF06ciYmSi50ZXN0KHIpJiYobj1tdChyLCEwKSkmJihuPXIuaW5kZXhPZigiKSIsci5sZW5ndGgtbiktci5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsbiksZVsyXT1yLnNsaWNlKDAsbikpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UocnQsaXQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PU5bZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrUCsiKSIrZSsiKCIrUCsifCQpIikpJiZOKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9YXQuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLGE9Imxhc3QiIT09ZS5zbGljZSgtNCkscz0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbixsKXt2YXIgdSxjLHAsZixkLGgsZz1vIT09YT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHk9cyYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHY9IWwmJiFzO2lmKG0pe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2g9Zz0ib25seSI9PT1lJiYhaCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihoPVthP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0sYSYmdil7Yz1tW2JdfHwobVtiXT17fSksdT1jW2VdfHxbXSxkPXVbMF09PT1UJiZ1WzFdLGY9dVswXT09PVQmJnVbMl0scD1kJiZtLmNoaWxkTm9kZXNbZF07d2hpbGUocD0rK2QmJnAmJnBbZ118fChmPWQ9MCl8fGgucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W1QsZCxmXTticmVha319ZWxzZSBpZih2JiYodT0odFtiXXx8KHRbYl09e30pKVtlXSkmJnVbMF09PT1UKWY9dVsxXTtlbHNlIHdoaWxlKHA9KytkJiZwJiZwW2ddfHwoZj1kPTApfHxoLnBvcCgpKWlmKChzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih2JiYoKHBbYl18fChwW2JdPXt9KSlbZV09W1QsZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9by5wc2V1ZG9zW2VdfHxvLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8YXQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gcltiXT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxvLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9sdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLGE9by5sZW5ndGg7d2hpbGUoYS0tKWk9Ri5jYWxsKGUsb1thXSksZVtpXT0hKG5baV09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90Omx0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1sKGUucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gcltiXT9sdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhPXIoZSxudWxsLGksW10pLHM9ZS5sZW5ndGg7d2hpbGUocy0tKShvPWFbc10pJiYoZVtzXT0hKHRbc109bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6bHQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBhdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmx0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fGEodCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzpsdChmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGV8fCIiKXx8YXQuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UocnQsaXQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1oP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWR9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Zi5hY3RpdmVFbGVtZW50JiYoIWYuaGFzRm9jdXN8fGYuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFvLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdHQudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGV0LnRlc3QoZS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiJidXR0b24iPT09ZS50eXBlfHwiYnV0dG9uIj09PXR9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuImlucHV0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fHQudG9Mb3dlckNhc2UoKT09PWUudHlwZSl9LGZpcnN0Omh0KGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpodChmdW5jdGlvbihlLHQpe3JldHVyblt0LTFdfSksZXE6aHQoZnVuY3Rpb24oZSx0LG4pe3JldHVyblswPm4/bit0Om5dfSksZXZlbjpodChmdW5jdGlvbihlLHQpe3ZhciBuPTA7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6aHQoZnVuY3Rpb24oZSx0KXt2YXIgbj0xO2Zvcig7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6aHQoZnVuY3Rpb24oZSx0LG4pe3ZhciByPTA+bj9uK3Q6bjtmb3IoOy0tcj49MDspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6aHQoZnVuY3Rpb24oZSx0LG4pe3ZhciByPTA+bj9uK3Q6bjtmb3IoO3Q+KytyOyllLnB1c2gocik7cmV0dXJuIGV9KX19LG8ucHNldWRvcy5udGg9by5wc2V1ZG9zLmVxO2ZvcihuIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KW8ucHNldWRvc1tuXT1mdChuKTtmb3IobiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KW8ucHNldWRvc1tuXT1kdChuKTtmdW5jdGlvbiBndCgpe31ndC5wcm90b3R5cGU9by5maWx0ZXJzPW8ucHNldWRvcyxvLnNldEZpbHRlcnM9bmV3IGd0O2Z1bmN0aW9uIG10KGUsdCl7dmFyIG4scixpLGEscyxsLHUsYz1rW2UrIiAiXTtpZihjKXJldHVybiB0PzA6Yy5zbGljZSgwKTtzPWUsbD1bXSx1PW8ucHJlRmlsdGVyO3doaWxlKHMpeyghbnx8KHI9WC5leGVjKHMpKSkmJihyJiYocz1zLnNsaWNlKHJbMF0ubGVuZ3RoKXx8cyksbC5wdXNoKGk9W10pKSxuPSExLChyPVUuZXhlYyhzKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoeiwiICIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4gby5maWx0ZXIpIShyPVFbYV0uZXhlYyhzKSl8fHVbYV0mJiEocj11W2FdKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczpyfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9hdC5lcnJvcihlKTprKGUsbCkuc2xpY2UoMCl9ZnVuY3Rpb24geXQoZSl7dmFyIHQ9MCxuPWUubGVuZ3RoLHI9IiI7Zm9yKDtuPnQ7dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gdnQoZSx0LG4pe3ZhciByPXQuZGlyLG89biYmInBhcmVudE5vZGUiPT09cixhPUMrKztyZXR1cm4gdC5maXJzdD9mdW5jdGlvbih0LG4saSl7d2hpbGUodD10W3JdKWlmKDE9PT10Lm5vZGVUeXBlfHxvKXJldHVybiBlKHQsbixpKX06ZnVuY3Rpb24odCxuLHMpe3ZhciBsLHUsYyxwPVQrIiAiK2E7aWYocyl7d2hpbGUodD10W3JdKWlmKCgxPT09dC5ub2RlVHlwZXx8bykmJmUodCxuLHMpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W3JdKWlmKDE9PT10Lm5vZGVUeXBlfHxvKWlmKGM9dFtiXXx8KHRbYl09e30pLCh1PWNbcl0pJiZ1WzBdPT09cCl7aWYoKGw9dVsxXSk9PT0hMHx8bD09PWkpcmV0dXJuIGw9PT0hMH1lbHNlIGlmKHU9Y1tyXT1bcF0sdVsxXT1lKHQsbixzKXx8aSx1WzFdPT09ITApcmV0dXJuITB9fWZ1bmN0aW9uIGJ0KGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXt2YXIgaT1lLmxlbmd0aDt3aGlsZShpLS0paWYoIWVbaV0odCxuLHIpKXJldHVybiExO3JldHVybiEwfTplWzBdfWZ1bmN0aW9uIHh0KGUsdCxuLHIsaSl7dmFyIG8sYT1bXSxzPTAsbD1lLmxlbmd0aCx1PW51bGwhPXQ7Zm9yKDtsPnM7cysrKShvPWVbc10pJiYoIW58fG4obyxyLGkpKSYmKGEucHVzaChvKSx1JiZ0LnB1c2gocykpO3JldHVybiBhfWZ1bmN0aW9uIHd0KGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbYl0mJihyPXd0KHIpKSxpJiYhaVtiXSYmKGk9d3QoaSxvKSksbHQoZnVuY3Rpb24obyxhLHMsbCl7dmFyIHUsYyxwLGY9W10sZD1bXSxoPWEubGVuZ3RoLGc9b3x8TnQodHx8IioiLHMubm9kZVR5cGU/W3NdOnMsW10pLG09IWV8fCFvJiZ0P2c6eHQoZyxmLGUscyxsKSx5PW4/aXx8KG8/ZTpofHxyKT9bXTphOm07aWYobiYmbihtLHkscyxsKSxyKXt1PXh0KHksZCkscih1LFtdLHMsbCksYz11Lmxlbmd0aDt3aGlsZShjLS0pKHA9dVtjXSkmJih5W2RbY11dPSEobVtkW2NdXT1wKSl9aWYobyl7aWYoaXx8ZSl7aWYoaSl7dT1bXSxjPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmdS5wdXNoKG1bY109cCk7aShudWxsLHk9W10sdSxsKX1jPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmKHU9aT9GLmNhbGwobyxwKTpmW2NdKT4tMSYmKG9bdV09IShhW3VdPXApKX19ZWxzZSB5PXh0KHk9PT1hP3kuc3BsaWNlKGgseS5sZW5ndGgpOnkpLGk/aShudWxsLGEseSxsKTpNLmFwcGx5KGEseSl9KX1mdW5jdGlvbiBUdChlKXt2YXIgdCxuLHIsaT1lLmxlbmd0aCxhPW8ucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fG8ucmVsYXRpdmVbIiAiXSxsPWE/MTowLGM9dnQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxwPXZ0KGZ1bmN0aW9uKGUpe3JldHVybiBGLmNhbGwodCxlKT4tMX0scywhMCksZj1bZnVuY3Rpb24oZSxuLHIpe3JldHVybiFhJiYocnx8biE9PXUpfHwoKHQ9bikubm9kZVR5cGU/YyhlLG4scik6cChlLG4scikpfV07Zm9yKDtpPmw7bCsrKWlmKG49by5yZWxhdGl2ZVtlW2xdLnR5cGVdKWY9W3Z0KGJ0KGYpLG4pXTtlbHNle2lmKG49by5maWx0ZXJbZVtsXS50eXBlXS5hcHBseShudWxsLGVbbF0ubWF0Y2hlcyksbltiXSl7Zm9yKHI9KytsO2k+cjtyKyspaWYoby5yZWxhdGl2ZVtlW3JdLnR5cGVdKWJyZWFrO3JldHVybiB3dChsPjEmJmJ0KGYpLGw+MSYmeXQoZS5zbGljZSgwLGwtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW2wtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSh6LCIkMSIpLG4scj5sJiZUdChlLnNsaWNlKGwscikpLGk+ciYmVHQoZT1lLnNsaWNlKHIpKSxpPnImJnl0KGUpKX1mLnB1c2gobil9cmV0dXJuIGJ0KGYpfWZ1bmN0aW9uIEN0KGUsdCl7dmFyIG49MCxyPXQubGVuZ3RoPjAsYT1lLmxlbmd0aD4wLHM9ZnVuY3Rpb24ocyxsLGMscCxkKXt2YXIgaCxnLG0seT1bXSx2PTAsYj0iMCIseD1zJiZbXSx3PW51bGwhPWQsQz11LE49c3x8YSYmby5maW5kLlRBRygiKiIsZCYmbC5wYXJlbnROb2RlfHxsKSxrPVQrPW51bGw9PUM/MTpNYXRoLnJhbmRvbSgpfHwuMTtmb3IodyYmKHU9bCE9PWYmJmwsaT1uKTtudWxsIT0oaD1OW2JdKTtiKyspe2lmKGEmJmgpe2c9MDt3aGlsZShtPWVbZysrXSlpZihtKGgsbCxjKSl7cC5wdXNoKGgpO2JyZWFrfXcmJihUPWssaT0rK24pfXImJigoaD0hbSYmaCkmJnYtLSxzJiZ4LnB1c2goaCkpfWlmKHYrPWIsciYmYiE9PXYpe2c9MDt3aGlsZShtPXRbZysrXSltKHgseSxsLGMpO2lmKHMpe2lmKHY+MCl3aGlsZShiLS0peFtiXXx8eVtiXXx8KHlbYl09cS5jYWxsKHApKTt5PXh0KHkpfU0uYXBwbHkocCx5KSx3JiYhcyYmeS5sZW5ndGg+MCYmdit0Lmxlbmd0aD4xJiZhdC51bmlxdWVTb3J0KHApfXJldHVybiB3JiYoVD1rLHU9QykseH07cmV0dXJuIHI/bHQocyk6c31sPWF0LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10sbz1FW2UrIiAiXTtpZighbyl7dHx8KHQ9bXQoZSkpLG49dC5sZW5ndGg7d2hpbGUobi0tKW89VHQodFtuXSksb1tiXT9yLnB1c2gobyk6aS5wdXNoKG8pO289RShlLEN0KGkscikpfXJldHVybiBvfTtmdW5jdGlvbiBOdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7aT5yO3IrKylhdChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24ga3QoZSx0LG4saSl7dmFyIGEscyx1LGMscCxmPW10KGUpO2lmKCFpJiYxPT09Zi5sZW5ndGgpe2lmKHM9ZlswXT1mWzBdLnNsaWNlKDApLHMubGVuZ3RoPjImJiJJRCI9PT0odT1zWzBdKS50eXBlJiZyLmdldEJ5SWQmJjk9PT10Lm5vZGVUeXBlJiZoJiZvLnJlbGF0aXZlW3NbMV0udHlwZV0pe2lmKHQ9KG8uZmluZC5JRCh1Lm1hdGNoZXNbMF0ucmVwbGFjZShydCxpdCksdCl8fFtdKVswXSwhdClyZXR1cm4gbjtlPWUuc2xpY2Uocy5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9YT1RLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6cy5sZW5ndGg7d2hpbGUoYS0tKXtpZih1PXNbYV0sby5yZWxhdGl2ZVtjPXUudHlwZV0pYnJlYWs7aWYoKHA9by5maW5kW2NdKSYmKGk9cCh1Lm1hdGNoZXNbMF0ucmVwbGFjZShydCxpdCksVi50ZXN0KHNbMF0udHlwZSkmJnQucGFyZW50Tm9kZXx8dCkpKXtpZihzLnNwbGljZShhLDEpLGU9aS5sZW5ndGgmJnl0KHMpLCFlKXJldHVybiBNLmFwcGx5KG4saSksbjticmVha319fXJldHVybiBsKGUsZikoaSx0LCFoLG4sVi50ZXN0KGUpKSxufXIuc29ydFN0YWJsZT1iLnNwbGl0KCIiKS5zb3J0KEEpLmpvaW4oIiIpPT09YixyLmRldGVjdER1cGxpY2F0ZXM9UyxwKCksci5zb3J0RGV0YWNoZWQ9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIDEmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihmLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLHV0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGN0KCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLG4scil7cmV0dXJuIHI/dDplLmdldEF0dHJpYnV0ZShuLCJ0eXBlIj09PW4udG9Mb3dlckNhc2UoKT8xOjIpfSksci5hdHRyaWJ1dGVzJiZ1dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxpbnB1dC8+IixlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxjdCgidmFsdWUiLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gcnx8ImlucHV0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT90OmUuZGVmYXVsdFZhbHVlfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGN0KEIsZnVuY3Rpb24oZSxuLHIpe3ZhciBpO3JldHVybiByP3Q6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pKSYmaS5zcGVjaWZpZWQ/aS52YWx1ZTplW25dPT09ITA/bi50b0xvd2VyQ2FzZSgpOm51bGx9KSx4LmZpbmQ9YXQseC5leHByPWF0LnNlbGVjdG9ycyx4LmV4cHJbIjoiXT14LmV4cHIucHNldWRvcyx4LnVuaXF1ZT1hdC51bmlxdWVTb3J0LHgudGV4dD1hdC5nZXRUZXh0LHguaXNYTUxEb2M9YXQuaXNYTUwseC5jb250YWlucz1hdC5jb250YWluc30oZSk7dmFyIE89e307ZnVuY3Rpb24gRihlKXt2YXIgdD1PW2VdPXt9O3JldHVybiB4LmVhY2goZS5tYXRjaChUKXx8W10sZnVuY3Rpb24oZSxuKXt0W25dPSEwfSksdH14LkNhbGxiYWNrcz1mdW5jdGlvbihlKXtlPSJzdHJpbmciPT10eXBlb2YgZT9PW2VdfHxGKGUpOnguZXh0ZW5kKHt9LGUpO3ZhciBuLHIsaSxvLGEscyxsPVtdLHU9IWUub25jZSYmW10sYz1mdW5jdGlvbih0KXtmb3Iocj1lLm1lbW9yeSYmdCxpPSEwLGE9c3x8MCxzPTAsbz1sLmxlbmd0aCxuPSEwO2wmJm8+YTthKyspaWYobFthXS5hcHBseSh0WzBdLHRbMV0pPT09ITEmJmUuc3RvcE9uRmFsc2Upe3I9ITE7YnJlYWt9bj0hMSxsJiYodT91Lmxlbmd0aCYmYyh1LnNoaWZ0KCkpOnI/bD1bXTpwLmRpc2FibGUoKSl9LHA9e2FkZDpmdW5jdGlvbigpe2lmKGwpe3ZhciB0PWwubGVuZ3RoOyhmdW5jdGlvbiBpKHQpe3guZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9eC50eXBlKG4pOyJmdW5jdGlvbiI9PT1yP2UudW5pcXVlJiZwLmhhcyhuKXx8bC5wdXNoKG4pOm4mJm4ubGVuZ3RoJiYic3RyaW5nIiE9PXImJmkobil9KX0pKGFyZ3VtZW50cyksbj9vPWwubGVuZ3RoOnImJihzPXQsYyhyKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBsJiZ4LmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGUsdCl7dmFyIHI7d2hpbGUoKHI9eC5pbkFycmF5KHQsbCxyKSk+LTEpbC5zcGxpY2UociwxKSxuJiYobz49ciYmby0tLGE+PXImJmEtLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/eC5pbkFycmF5KGUsbCk+LTE6ISghbHx8IWwubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gbD1bXSxvPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBsPXU9cj10LHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWx9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdT10LHJ8fHAuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiF1fSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFsfHxpJiYhdXx8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxuP3UucHVzaCh0KTpjKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIHAuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFpfX07cmV0dXJuIHB9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgYT1vWzBdLHM9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1zJiZzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bYSsiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMscz9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgYT1vWzJdLHM9b1szXTtyW29bMV1dPWEuYWRkLHMmJmEuYWRkKGZ1bmN0aW9uKCl7bj1zfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09YS5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1nLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLGE9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/Zy5jYWxsKGFyZ3VtZW50cyk6cixuPT09cz9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LHMsbCx1O2lmKHI+MSlmb3Iocz1BcnJheShyKSxsPUFycmF5KHIpLHU9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKGEodCx1LG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhhKHQsbCxzKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKHUsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxzLGwsdSxjLHAsZixkPWEuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoZC5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxkLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixuPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKXx8W10scj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF0sIXJ8fCFyLnN0eWxlfHwhbi5sZW5ndGgpcmV0dXJuIHQ7cz1hLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLHU9cy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxvPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0sci5zdHlsZS5jc3NUZXh0PSJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNSIsdC5nZXRTZXRBdHRyaWJ1dGU9InQiIT09ZC5jbGFzc05hbWUsdC5sZWFkaW5nV2hpdGVzcGFjZT0zPT09ZC5maXJzdENoaWxkLm5vZGVUeXBlLHQudGJvZHk9IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IikubGVuZ3RoLHQuaHRtbFNlcmlhbGl6ZT0hIWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsdC5zdHlsZT0vdG9wLy50ZXN0KHIuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSx0LmhyZWZOb3JtYWxpemVkPSIvYSI9PT1yLmdldEF0dHJpYnV0ZSgiaHJlZiIpLHQub3BhY2l0eT0vXjAuNS8udGVzdChyLnN0eWxlLm9wYWNpdHkpLHQuY3NzRmxvYXQ9ISFyLnN0eWxlLmNzc0Zsb2F0LHQuY2hlY2tPbj0hIW8udmFsdWUsdC5vcHRTZWxlY3RlZD11LnNlbGVjdGVkLHQuZW5jdHlwZT0hIWEuY3JlYXRlRWxlbWVudCgiZm9ybSIpLmVuY3R5cGUsdC5odG1sNUNsb25lPSI8Om5hdj48LzpuYXY+IiE9PWEuY3JlYXRlRWxlbWVudCgibmF2IikuY2xvbmVOb2RlKCEwKS5vdXRlckhUTUwsdC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PSExLHQuc2hyaW5rV3JhcEJsb2Nrcz0hMSx0LnBpeGVsUG9zaXRpb249ITEsdC5kZWxldGVFeHBhbmRvPSEwLHQubm9DbG9uZUV2ZW50PSEwLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLG8uY2hlY2tlZD0hMCx0Lm5vQ2xvbmVDaGVja2VkPW8uY2xvbmVOb2RlKCEwKS5jaGVja2VkLHMuZGlzYWJsZWQ9ITAsdC5vcHREaXNhYmxlZD0hdS5kaXNhYmxlZDt0cnl7ZGVsZXRlIGQudGVzdH1jYXRjaChoKXt0LmRlbGV0ZUV4cGFuZG89ITF9bz1hLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksby5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksdC5pbnB1dD0iIj09PW8uZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpLG8udmFsdWU9InQiLG8uc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSx0LnJhZGlvVmFsdWU9InQiPT09by52YWx1ZSxvLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsInQiKSxvLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxsPWEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGwuYXBwZW5kQ2hpbGQobyksdC5hcHBlbmRDaGVja2VkPW8uY2hlY2tlZCx0LmNoZWNrQ2xvbmU9bC5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsZC5hdHRhY2hFdmVudCYmKGQuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uKCl7dC5ub0Nsb25lRXZlbnQ9ITF9KSxkLmNsb25lTm9kZSghMCkuY2xpY2soKSk7Zm9yKGYgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSlkLnNldEF0dHJpYnV0ZShjPSJvbiIrZiwidCIpLHRbZisiQnViYmxlcyJdPWMgaW4gZXx8ZC5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMTtkLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsZC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLHQuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1kLnN0eWxlLmJhY2tncm91bmRDbGlwO2ZvcihmIGluIHgodCkpYnJlYWs7cmV0dXJuIHQub3duTGFzdD0iMCIhPT1mLHgoZnVuY3Rpb24oKXt2YXIgbixyLG8scz0icGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIsbD1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07bCYmKG49YS5jcmVhdGVFbGVtZW50KCJkaXYiKSxuLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4IixsLmFwcGVuZENoaWxkKG4pLmFwcGVuZENoaWxkKGQpLGQuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+IixvPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIiksb1swXS5zdHlsZS5jc3NUZXh0PSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpub25lIixwPTA9PT1vWzBdLm9mZnNldEhlaWdodCxvWzBdLnN0eWxlLmRpc3BsYXk9IiIsb1sxXS5zdHlsZS5kaXNwbGF5PSJub25lIix0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cz1wJiYwPT09b1swXS5vZmZzZXRIZWlnaHQsZC5pbm5lckhUTUw9IiIsZC5zdHlsZS5jc3NUZXh0PSJib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxcHg7Ym9yZGVyOjFweDtkaXNwbGF5OmJsb2NrO3dpZHRoOjRweDttYXJnaW4tdG9wOjElO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxJTsiLHguc3dhcChsLG51bGwhPWwuc3R5bGUuem9vbT97em9vbToxfTp7fSxmdW5jdGlvbigpe3QuYm94U2l6aW5nPTQ9PT1kLm9mZnNldFdpZHRofSksZS5nZXRDb21wdXRlZFN0eWxlJiYodC5waXhlbFBvc2l0aW9uPSIxJSIhPT0oZS5nZXRDb21wdXRlZFN0eWxlKGQsbnVsbCl8fHt9KS50b3AsdC5ib3hTaXppbmdSZWxpYWJsZT0iNHB4Ij09PShlLmdldENvbXB1dGVkU3R5bGUoZCxudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGgscj1kLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgiZGl2IikpLHIuc3R5bGUuY3NzVGV4dD1kLnN0eWxlLmNzc1RleHQ9cyxyLnN0eWxlLm1hcmdpblJpZ2h0PXIuc3R5bGUud2lkdGg9IjAiLGQuc3R5bGUud2lkdGg9IjFweCIsdC5yZWxpYWJsZU1hcmdpblJpZ2h0PSFwYXJzZUZsb2F0KChlLmdldENvbXB1dGVkU3R5bGUocixudWxsKXx8e30pLm1hcmdpblJpZ2h0KSksdHlwZW9mIGQuc3R5bGUuem9vbSE9PWkmJihkLmlubmVySFRNTD0iIixkLnN0eWxlLmNzc1RleHQ9cysid2lkdGg6MXB4O3BhZGRpbmc6MXB4O2Rpc3BsYXk6aW5saW5lO3pvb206MSIsdC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PTM9PT1kLm9mZnNldFdpZHRoLGQuc3R5bGUuZGlzcGxheT0iYmxvY2siLGQuaW5uZXJIVE1MPSI8ZGl2PjwvZGl2PiIsZC5maXJzdENoaWxkLnN0eWxlLndpZHRoPSI1cHgiLHQuc2hyaW5rV3JhcEJsb2Nrcz0zIT09ZC5vZmZzZXRXaWR0aCx0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJihsLnN0eWxlLnpvb209MSkpLGwucmVtb3ZlQ2hpbGQobiksbj1kPW89cj1udWxsKX0pLG49cz1sPXU9cj1vPW51bGwsdA0KfSh7fSk7dmFyIEI9Lyg/Olx7W1xzXFNdKlx9fFxbW1xzXFNdKlxdKSQvLFA9LyhbQS1aXSkvZztmdW5jdGlvbiBSKGUsbixyLGkpe2lmKHguYWNjZXB0RGF0YShlKSl7dmFyIG8sYSxzPXguZXhwYW5kbyxsPWUubm9kZVR5cGUsdT1sP3guY2FjaGU6ZSxjPWw/ZVtzXTplW3NdJiZzO2lmKGMmJnVbY10mJihpfHx1W2NdLmRhdGEpfHxyIT09dHx8InN0cmluZyIhPXR5cGVvZiBuKXJldHVybiBjfHwoYz1sP2Vbc109cC5wb3AoKXx8eC5ndWlkKys6cyksdVtjXXx8KHVbY109bD97fTp7dG9KU09OOngubm9vcH0pLCgib2JqZWN0Ij09dHlwZW9mIG58fCJmdW5jdGlvbiI9PXR5cGVvZiBuKSYmKGk/dVtjXT14LmV4dGVuZCh1W2NdLG4pOnVbY10uZGF0YT14LmV4dGVuZCh1W2NdLmRhdGEsbikpLGE9dVtjXSxpfHwoYS5kYXRhfHwoYS5kYXRhPXt9KSxhPWEuZGF0YSksciE9PXQmJihhW3guY2FtZWxDYXNlKG4pXT1yKSwic3RyaW5nIj09dHlwZW9mIG4/KG89YVtuXSxudWxsPT1vJiYobz1hW3guY2FtZWxDYXNlKG4pXSkpOm89YSxvfX1mdW5jdGlvbiBXKGUsdCxuKXtpZih4LmFjY2VwdERhdGEoZSkpe3ZhciByLGksbz1lLm5vZGVUeXBlLGE9bz94LmNhY2hlOmUscz1vP2VbeC5leHBhbmRvXTp4LmV4cGFuZG87aWYoYVtzXSl7aWYodCYmKHI9bj9hW3NdOmFbc10uZGF0YSkpe3guaXNBcnJheSh0KT90PXQuY29uY2F0KHgubWFwKHQseC5jYW1lbENhc2UpKTp0IGluIHI/dD1bdF06KHQ9eC5jYW1lbENhc2UodCksdD10IGluIHI/W3RdOnQuc3BsaXQoIiAiKSksaT10Lmxlbmd0aDt3aGlsZShpLS0pZGVsZXRlIHJbdFtpXV07aWYobj8hSShyKToheC5pc0VtcHR5T2JqZWN0KHIpKXJldHVybn0obnx8KGRlbGV0ZSBhW3NdLmRhdGEsSShhW3NdKSkpJiYobz94LmNsZWFuRGF0YShbZV0sITApOnguc3VwcG9ydC5kZWxldGVFeHBhbmRvfHxhIT1hLndpbmRvdz9kZWxldGUgYVtzXTphW3NdPW51bGwpfX19eC5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7YXBwbGV0OiEwLGVtYmVkOiEwLG9iamVjdDoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLm5vZGVUeXBlP3guY2FjaGVbZVt4LmV4cGFuZG9dXTplW3guZXhwYW5kb10sISFlJiYhSShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFIoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFcoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBSKGUsdCxuLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gVyhlLHQsITApfSxhY2NlcHREYXRhOmZ1bmN0aW9uKGUpe2lmKGUubm9kZVR5cGUmJjEhPT1lLm5vZGVUeXBlJiY5IT09ZS5ub2RlVHlwZSlyZXR1cm4hMTt2YXIgdD1lLm5vZGVOYW1lJiZ4Lm5vRGF0YVtlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiF0fHx0IT09ITAmJmUuZ2V0QXR0cmlidXRlKCJjbGFzc2lkIik9PT10fX0pLHguZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvPW51bGwsYT0wLHM9dGhpc1swXTtpZihlPT09dCl7aWYodGhpcy5sZW5ndGgmJihvPXguZGF0YShzKSwxPT09cy5ub2RlVHlwZSYmIXguX2RhdGEocywicGFyc2VkQXR0cnMiKSkpe2ZvcihyPXMuYXR0cmlidXRlcztyLmxlbmd0aD5hO2ErKylpPXJbYV0ubmFtZSwwPT09aS5pbmRleE9mKCJkYXRhLSIpJiYoaT14LmNhbWVsQ2FzZShpLnNsaWNlKDUpKSwkKHMsaSxvW2ldKSk7eC5fZGF0YShzLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBvfXJldHVybiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXt4LmRhdGEodGhpcyxlKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXt4LmRhdGEodGhpcyxlLG4pfSk6cz8kKHMsZSx4LmRhdGEocyxlKSk6bnVsbH0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5yZW1vdmVEYXRhKHRoaXMsZSl9KX19KTtmdW5jdGlvbiAkKGUsbixyKXtpZihyPT09dCYmMT09PWUubm9kZVR5cGUpe3ZhciBpPSJkYXRhLSIrbi5yZXBsYWNlKFAsIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYocj1lLmdldEF0dHJpYnV0ZShpKSwic3RyaW5nIj09dHlwZW9mIHIpe3RyeXtyPSJ0cnVlIj09PXI/ITA6ImZhbHNlIj09PXI/ITE6Im51bGwiPT09cj9udWxsOityKyIiPT09cj8rcjpCLnRlc3Qocik/eC5wYXJzZUpTT04ocik6cn1jYXRjaChvKXt9eC5kYXRhKGUsbixyKX1lbHNlIHI9dH1yZXR1cm4gcn1mdW5jdGlvbiBJKGUpe3ZhciB0O2Zvcih0IGluIGUpaWYoKCJkYXRhIiE9PXR8fCF4LmlzRW1wdHlPYmplY3QoZVt0XSkpJiYidG9KU09OIiE9PXQpcmV0dXJuITE7cmV0dXJuITB9eC5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsbixyKXt2YXIgaTtyZXR1cm4gZT8obj0obnx8ImZ4IikrInF1ZXVlIixpPXguX2RhdGEoZSxuKSxyJiYoIWl8fHguaXNBcnJheShyKT9pPXguX2RhdGEoZSxuLHgubWFrZUFycmF5KHIpKTppLnB1c2gocikpLGl8fFtdKTp0fSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPXgucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89eC5fcXVldWVIb29rcyhlLHQpLGE9ZnVuY3Rpb24oKXt4LmRlcXVldWUoZSx0KX07ImlucHJvZ3Jlc3MiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksaSYmKCJmeCI9PT10JiZuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLGEsbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4geC5fZGF0YShlLG4pfHx4Ll9kYXRhKGUsbix7ZW1wdHk6eC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7eC5fcmVtb3ZlRGF0YShlLHQrInF1ZXVlIikseC5fcmVtb3ZlRGF0YShlLG4pfSl9KX19KSx4LmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSxuKXt2YXIgcj0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49ZSxlPSJmeCIsci0tKSxyPmFyZ3VtZW50cy5sZW5ndGg/eC5xdWV1ZSh0aGlzWzBdLGUpOm49PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9eC5xdWV1ZSh0aGlzLGUsbik7eC5fcXVldWVIb29rcyh0aGlzLGUpLCJmeCI9PT1lJiYiaW5wcm9ncmVzcyIhPT10WzBdJiZ4LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmRlcXVldWUodGhpcyxlKX0pfSxkZWxheTpmdW5jdGlvbihlLHQpe3JldHVybiBlPXguZng/eC5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fCJmeCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9c2V0VGltZW91dCh0LGUpO24uc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyKX19KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLG4pe3ZhciByLGk9MSxvPXguRGVmZXJyZWQoKSxhPXRoaXMscz10aGlzLmxlbmd0aCxsPWZ1bmN0aW9uKCl7LS1pfHxvLnJlc29sdmVXaXRoKGEsW2FdKX07InN0cmluZyIhPXR5cGVvZiBlJiYobj1lLGU9dCksZT1lfHwiZngiO3doaWxlKHMtLSlyPXguX2RhdGEoYVtzXSxlKyJxdWV1ZUhvb2tzIiksciYmci5lbXB0eSYmKGkrKyxyLmVtcHR5LmFkZChsKSk7cmV0dXJuIGwoKSxvLnByb21pc2Uobil9fSk7dmFyIHosWCxVPS9bXHRcclxuXGZdL2csVj0vXHIvZyxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC9pLEo9L14oPzphfGFyZWEpJC9pLEc9L14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxRPXguc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsSz14LnN1cHBvcnQuaW5wdXQ7eC5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5hY2Nlc3ModGhpcyx4LmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3gucmVtb3ZlQXR0cih0aGlzLGUpfSl9LHByb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5hY2Nlc3ModGhpcyx4LnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9eC5wcm9wRml4W2VdfHxlLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2VdPXQsZGVsZXRlIHRoaXNbZV19Y2F0Y2gobil7fX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGE9MCxzPXRoaXMubGVuZ3RoLGw9InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYobClmb3IodD0oZXx8IiIpLm1hdGNoKFQpfHxbXTtzPmE7YSsrKWlmKG49dGhpc1thXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVSwiICIpOiIgIikpe289MDt3aGlsZShpPXRbbysrXSkwPnIuaW5kZXhPZigiICIraSsiICIpJiYocis9aSsiICIpO24uY2xhc3NOYW1lPXgudHJpbShyKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCxsPTA9PT1hcmd1bWVudHMubGVuZ3RofHwic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZihsKWZvcih0PShlfHwiIikubWF0Y2goVCl8fFtdO3M+YTthKyspaWYobj10aGlzW2FdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShVLCIgIik6IiIpKXtvPTA7d2hpbGUoaT10W28rK10pd2hpbGUoci5pbmRleE9mKCIgIitpKyIgIik+PTApcj1yLnJlcGxhY2UoIiAiK2krIiAiLCIgIik7bi5jbGFzc05hbWU9ZT94LnRyaW0ocik6IiJ9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGU7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmInN0cmluZyI9PT1uP3Q/dGhpcy5hZGRDbGFzcyhlKTp0aGlzLnJlbW92ZUNsYXNzKGUpOnguaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xhc3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1uKXt2YXIgdCxyPTAsbz14KHRoaXMpLGE9ZS5tYXRjaChUKXx8W107d2hpbGUodD1hW3IrK10pby5oYXNDbGFzcyh0KT9vLnJlbW92ZUNsYXNzKHQpOm8uYWRkQ2xhc3ModCl9ZWxzZShuPT09aXx8ImJvb2xlYW4iPT09bikmJih0aGlzLmNsYXNzTmFtZSYmeC5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjp4Ll9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PSIgIitlKyIgIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO3I+bjtuKyspaWYoMT09PXRoaXNbbl0ubm9kZVR5cGUmJigiICIrdGhpc1tuXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFUsIiAiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLG89dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaT14LmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciBvOzE9PT10aGlzLm5vZGVUeXBlJiYobz1pP2UuY2FsbCh0aGlzLG4seCh0aGlzKS52YWwoKSk6ZSxudWxsPT1vP289IiI6Im51bWJlciI9PXR5cGVvZiBvP28rPSIiOnguaXNBcnJheShvKSYmKG89eC5tYXAobyxmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjplKyIifSkpLHI9eC52YWxIb29rc1t0aGlzLnR5cGVdfHx4LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sciYmInNldCJpbiByJiZyLnNldCh0aGlzLG8sInZhbHVlIikhPT10fHwodGhpcy52YWx1ZT1vKSl9KTtpZihvKXJldHVybiByPXgudmFsSG9va3Nbby50eXBlXXx8eC52YWxIb29rc1tvLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHImJiJnZXQiaW4gciYmKG49ci5nZXQobywidmFsdWUiKSkhPT10P246KG49by52YWx1ZSwic3RyaW5nIj09dHlwZW9mIG4/bi5yZXBsYWNlKFYsIiIpOm51bGw9PW4/IiI6bil9fX0pLHguZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgsbz0ic2VsZWN0LW9uZSI9PT1lLnR5cGV8fDA+aSxhPW8/bnVsbDpbXSxzPW8/aSsxOnIubGVuZ3RoLGw9MD5pP3M6bz9pOjA7Zm9yKDtzPmw7bCsrKWlmKG49cltsXSwhKCFuLnNlbGVjdGVkJiZsIT09aXx8KHguc3VwcG9ydC5vcHREaXNhYmxlZD9uLmRpc2FibGVkOm51bGwhPT1uLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fG4ucGFyZW50Tm9kZS5kaXNhYmxlZCYmeC5ub2RlTmFtZShuLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZih0PXgobikudmFsKCksbylyZXR1cm4gdDthLnB1c2godCl9cmV0dXJuIGF9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz14Lm1ha2VBcnJheSh0KSxhPWkubGVuZ3RoO3doaWxlKGEtLSlyPWlbYV0sKHIuc2VsZWN0ZWQ9eC5pbkFycmF5KHgocikudmFsKCksbyk+PTApJiYobj0hMCk7cmV0dXJuIG58fChlLnNlbGVjdGVkSW5kZXg9LTEpLG99fX0sYXR0cjpmdW5jdGlvbihlLG4scil7dmFyIG8sYSxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09aT94LnByb3AoZSxuLHIpOigxPT09cyYmeC5pc1hNTERvYyhlKXx8KG49bi50b0xvd2VyQ2FzZSgpLG89eC5hdHRySG9va3Nbbl18fCh4LmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pP1g6eikpLHI9PT10P28mJiJnZXQiaW4gbyYmbnVsbCE9PShhPW8uZ2V0KGUsbikpP2E6KGE9eC5maW5kLmF0dHIoZSxuKSxudWxsPT1hP3Q6YSk6bnVsbCE9PXI/byYmInNldCJpbiBvJiYoYT1vLnNldChlLHIsbikpIT09dD9hOihlLnNldEF0dHJpYnV0ZShuLHIrIiIpLHIpOih4LnJlbW92ZUF0dHIoZSxuKSx0KSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9MCxvPXQmJnQubWF0Y2goVCk7aWYobyYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1vW2krK10pcj14LnByb3BGaXhbbl18fG4seC5leHByLm1hdGNoLmJvb2wudGVzdChuKT9LJiZRfHwhRy50ZXN0KG4pP2Vbcl09ITE6ZVt4LmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT1lW3JdPSExOnguYXR0cihlLG4sIiIpLGUucmVtb3ZlQXR0cmlidXRlKFE/bjpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheC5zdXBwb3J0LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZ4Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBhPTEhPT1zfHwheC5pc1hNTERvYyhlKSxhJiYobj14LnByb3BGaXhbbl18fG4sbz14LnByb3BIb29rc1tuXSksciE9PXQ/byYmInNldCJpbiBvJiYoaT1vLnNldChlLHIsbikpIT09dD9pOmVbbl09cjpvJiYiZ2V0ImluIG8mJm51bGwhPT0oaT1vLmdldChlLG4pKT9pOmVbbl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgdD14LmZpbmQuYXR0cihlLCJ0YWJpbmRleCIpO3JldHVybiB0P3BhcnNlSW50KHQsMTApOlkudGVzdChlLm5vZGVOYW1lKXx8Si50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fX0pLFg9e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT0hMT94LnJlbW92ZUF0dHIoZSxuKTpLJiZRfHwhRy50ZXN0KG4pP2Uuc2V0QXR0cmlidXRlKCFRJiZ4LnByb3BGaXhbbl18fG4sbik6ZVt4LmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT1lW25dPSEwLG59fSx4LmVhY2goeC5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSxuKXt2YXIgcj14LmV4cHIuYXR0ckhhbmRsZVtuXXx8eC5maW5kLmF0dHI7eC5leHByLmF0dHJIYW5kbGVbbl09SyYmUXx8IUcudGVzdChuKT9mdW5jdGlvbihlLG4saSl7dmFyIG89eC5leHByLmF0dHJIYW5kbGVbbl0sYT1pP3Q6KHguZXhwci5hdHRySGFuZGxlW25dPXQpIT1yKGUsbixpKT9uLnRvTG93ZXJDYXNlKCk6bnVsbDtyZXR1cm4geC5leHByLmF0dHJIYW5kbGVbbl09byxhfTpmdW5jdGlvbihlLG4scil7cmV0dXJuIHI/dDplW3guY2FtZWxDYXNlKCJkZWZhdWx0LSIrbildP24udG9Mb3dlckNhc2UoKTpudWxsfX0pLEsmJlF8fCh4LmF0dHJIb29rcy52YWx1ZT17c2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4geC5ub2RlTmFtZShlLCJpbnB1dCIpPyhlLmRlZmF1bHRWYWx1ZT1uLHQpOnomJnouc2V0KGUsbixyKX19KSxRfHwoej17c2V0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1lLmdldEF0dHJpYnV0ZU5vZGUocik7cmV0dXJuIGl8fGUuc2V0QXR0cmlidXRlTm9kZShpPWUub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUocikpLGkudmFsdWU9bis9IiIsInZhbHVlIj09PXJ8fG49PT1lLmdldEF0dHJpYnV0ZShyKT9uOnR9fSx4LmV4cHIuYXR0ckhhbmRsZS5pZD14LmV4cHIuYXR0ckhhbmRsZS5uYW1lPXguZXhwci5hdHRySGFuZGxlLmNvb3Jkcz1mdW5jdGlvbihlLG4scil7dmFyIGk7cmV0dXJuIHI/dDooaT1lLmdldEF0dHJpYnV0ZU5vZGUobikpJiYiIiE9PWkudmFsdWU/aS52YWx1ZTpudWxsfSx4LnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pO3JldHVybiByJiZyLnNwZWNpZmllZD9yLnZhbHVlOnR9LHNldDp6LnNldH0seC5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ouc2V0KGUsIiI9PT10PyExOnQsbil9fSx4LmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGUsbil7eC5hdHRySG9va3Nbbl09e3NldDpmdW5jdGlvbihlLHIpe3JldHVybiIiPT09cj8oZS5zZXRBdHRyaWJ1dGUobiwiYXV0byIpLHIpOnR9fX0pKSx4LnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWR8fHguZWFjaChbImhyZWYiLCJzcmMiXSxmdW5jdGlvbihlLHQpe3gucHJvcEhvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsNCl9fX0pLHguc3VwcG9ydC5zdHlsZXx8KHguYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dHx8dH0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD10KyIifX0pLHguc3VwcG9ydC5vcHRTZWxlY3RlZHx8KHgucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpLG51bGx9fSkseC5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXt4LnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSkseC5zdXBwb3J0LmVuY3R5cGV8fCh4LnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKSx4LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXt4LnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4geC5pc0FycmF5KG4pP2UuY2hlY2tlZD14LmluQXJyYXkoeChlKS52YWwoKSxuKT49MDp0fX0seC5zdXBwb3J0LmNoZWNrT258fCh4LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6ZS52YWx1ZX0pfSk7dmFyIFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLGV0PS9ea2V5Lyx0dD0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sbnQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLHJ0PS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gaXQoKXtyZXR1cm4hMH1mdW5jdGlvbiBvdCgpe3JldHVybiExfWZ1bmN0aW9uIGF0KCl7dHJ5e3JldHVybiBhLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX14LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsbixyLG8sYSl7dmFyIHMsbCx1LGMscCxmLGQsaCxnLG0seSx2PXguX2RhdGEoZSk7aWYodil7ci5oYW5kbGVyJiYoYz1yLHI9Yy5oYW5kbGVyLGE9Yy5zZWxlY3Rvciksci5ndWlkfHwoci5ndWlkPXguZ3VpZCsrKSwobD12LmV2ZW50cyl8fChsPXYuZXZlbnRzPXt9KSwoZj12LmhhbmRsZSl8fChmPXYuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgeD09PWl8fGUmJnguZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBlP3Q6eC5ldmVudC5kaXNwYXRjaC5hcHBseShmLmVsZW0sYXJndW1lbnRzKX0sZi5lbGVtPWUpLG49KG58fCIiKS5tYXRjaChUKXx8WyIiXSx1PW4ubGVuZ3RoO3doaWxlKHUtLSlzPXJ0LmV4ZWMoblt1XSl8fFtdLGc9eT1zWzFdLG09KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxnJiYocD14LmV2ZW50LnNwZWNpYWxbZ118fHt9LGc9KGE/cC5kZWxlZ2F0ZVR5cGU6cC5iaW5kVHlwZSl8fGcscD14LmV2ZW50LnNwZWNpYWxbZ118fHt9LGQ9eC5leHRlbmQoe3R5cGU6ZyxvcmlnVHlwZTp5LGRhdGE6byxoYW5kbGVyOnIsZ3VpZDpyLmd1aWQsc2VsZWN0b3I6YSxuZWVkc0NvbnRleHQ6YSYmeC5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGEpLG5hbWVzcGFjZTptLmpvaW4oIi4iKX0sYyksKGg9bFtnXSl8fChoPWxbZ109W10saC5kZWxlZ2F0ZUNvdW50PTAscC5zZXR1cCYmcC5zZXR1cC5jYWxsKGUsbyxtLGYpIT09ITF8fChlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKGcsZiwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudCgib24iK2csZikpKSxwLmFkZCYmKHAuYWRkLmNhbGwoZSxkKSxkLmhhbmRsZXIuZ3VpZHx8KGQuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLGE/aC5zcGxpY2UoaC5kZWxlZ2F0ZUNvdW50KyssMCxkKTpoLnB1c2goZCkseC5ldmVudC5nbG9iYWxbZ109ITApO2U9bnVsbH19LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyxsLHUsYyxwLGYsZCxoLGcsbT14Lmhhc0RhdGEoZSkmJnguX2RhdGEoZSk7aWYobSYmKGM9bS5ldmVudHMpKXt0PSh0fHwiIikubWF0Y2goVCl8fFsiIl0sdT10Lmxlbmd0aDt3aGlsZSh1LS0paWYocz1ydC5leGVjKHRbdV0pfHxbXSxkPWc9c1sxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCl7cD14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KHI/cC5kZWxlZ2F0ZVR5cGU6cC5iaW5kVHlwZSl8fGQsZj1jW2RdfHxbXSxzPXNbMl0mJlJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxsPW89Zi5sZW5ndGg7d2hpbGUoby0tKWE9ZltvXSwhaSYmZyE9PWEub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWEuZ3VpZHx8cyYmIXMudGVzdChhLm5hbWVzcGFjZSl8fHImJnIhPT1hLnNlbGVjdG9yJiYoIioqIiE9PXJ8fCFhLnNlbGVjdG9yKXx8KGYuc3BsaWNlKG8sMSksYS5zZWxlY3RvciYmZi5kZWxlZ2F0ZUNvdW50LS0scC5yZW1vdmUmJnAucmVtb3ZlLmNhbGwoZSxhKSk7bCYmIWYubGVuZ3RoJiYocC50ZWFyZG93biYmcC50ZWFyZG93bi5jYWxsKGUsaCxtLmhhbmRsZSkhPT0hMXx8eC5yZW1vdmVFdmVudChlLGQsbS5oYW5kbGUpLGRlbGV0ZSBjW2RdKX1lbHNlIGZvcihkIGluIGMpeC5ldmVudC5yZW1vdmUoZSxkK3RbdV0sbixyLCEwKTt4LmlzRW1wdHlPYmplY3QoYykmJihkZWxldGUgbS5oYW5kbGUseC5fcmVtb3ZlRGF0YShlLCJldmVudHMiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixpLG8pe3ZhciBzLGwsdSxjLHAsZixkLGg9W2l8fGFdLGc9di5jYWxsKG4sInR5cGUiKT9uLnR5cGU6bixtPXYuY2FsbChuLCJuYW1lc3BhY2UiKT9uLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKHU9Zj1pPWl8fGEsMyE9PWkubm9kZVR5cGUmJjghPT1pLm5vZGVUeXBlJiYhbnQudGVzdChnK3guZXZlbnQudHJpZ2dlcmVkKSYmKGcuaW5kZXhPZigiLiIpPj0wJiYobT1nLnNwbGl0KCIuIiksZz1tLnNoaWZ0KCksbS5zb3J0KCkpLGw9MD5nLmluZGV4T2YoIjoiKSYmIm9uIitnLG49blt4LmV4cGFuZG9dP246bmV3IHguRXZlbnQoZywib2JqZWN0Ij09dHlwZW9mIG4mJm4pLG4uaXNUcmlnZ2VyPW8/MjozLG4ubmFtZXNwYWNlPW0uam9pbigiLiIpLG4ubmFtZXNwYWNlX3JlPW4ubmFtZXNwYWNlP1JlZ0V4cCgiKF58XFwuKSIrbS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLG4ucmVzdWx0PXQsbi50YXJnZXR8fChuLnRhcmdldD1pKSxyPW51bGw9PXI/W25dOngubWFrZUFycmF5KHIsW25dKSxwPXguZXZlbnQuc3BlY2lhbFtnXXx8e30sb3x8IXAudHJpZ2dlcnx8cC50cmlnZ2VyLmFwcGx5KGkscikhPT0hMSkpe2lmKCFvJiYhcC5ub0J1YmJsZSYmIXguaXNXaW5kb3coaSkpe2ZvcihjPXAuZGVsZWdhdGVUeXBlfHxnLG50LnRlc3QoYytnKXx8KHU9dS5wYXJlbnROb2RlKTt1O3U9dS5wYXJlbnROb2RlKWgucHVzaCh1KSxmPXU7Zj09PShpLm93bmVyRG9jdW1lbnR8fGEpJiZoLnB1c2goZi5kZWZhdWx0Vmlld3x8Zi5wYXJlbnRXaW5kb3d8fGUpfWQ9MDt3aGlsZSgodT1oW2QrK10pJiYhbi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKW4udHlwZT1kPjE/YzpwLmJpbmRUeXBlfHxnLHM9KHguX2RhdGEodSwiZXZlbnRzIil8fHt9KVtuLnR5cGVdJiZ4Ll9kYXRhKHUsImhhbmRsZSIpLHMmJnMuYXBwbHkodSxyKSxzPWwmJnVbbF0scyYmeC5hY2NlcHREYXRhKHUpJiZzLmFwcGx5JiZzLmFwcGx5KHUscik9PT0hMSYmbi5wcmV2ZW50RGVmYXVsdCgpO2lmKG4udHlwZT1nLCFvJiYhbi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFwLl9kZWZhdWx0fHxwLl9kZWZhdWx0LmFwcGx5KGgucG9wKCkscik9PT0hMSkmJnguYWNjZXB0RGF0YShpKSYmbCYmaVtnXSYmIXguaXNXaW5kb3coaSkpe2Y9aVtsXSxmJiYoaVtsXT1udWxsKSx4LmV2ZW50LnRyaWdnZXJlZD1nO3RyeXtpW2ddKCl9Y2F0Y2goeSl7fXguZXZlbnQudHJpZ2dlcmVkPXQsZiYmKGlbbF09Zil9cmV0dXJuIG4ucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZT14LmV2ZW50LmZpeChlKTt2YXIgbixyLGksbyxhLHM9W10sbD1nLmNhbGwoYXJndW1lbnRzKSx1PSh4Ll9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbZS50eXBlXXx8W10sYz14LmV2ZW50LnNwZWNpYWxbZS50eXBlXXx8e307aWYobFswXT1lLGUuZGVsZWdhdGVUYXJnZXQ9dGhpcywhYy5wcmVEaXNwYXRjaHx8Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZSkhPT0hMSl7cz14LmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxlLHUpLG49MDt3aGlsZSgobz1zW24rK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLmN1cnJlbnRUYXJnZXQ9by5lbGVtLGE9MDt3aGlsZSgoaT1vLmhhbmRsZXJzW2ErK10pJiYhZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghZS5uYW1lc3BhY2VfcmV8fGUubmFtZXNwYWNlX3JlLnRlc3QoaS5uYW1lc3BhY2UpKSYmKGUuaGFuZGxlT2JqPWksZS5kYXRhPWkuZGF0YSxyPSgoeC5ldmVudC5zcGVjaWFsW2kub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxpLmhhbmRsZXIpLmFwcGx5KG8uZWxlbSxsKSxyIT09dCYmKGUucmVzdWx0PXIpPT09ITEmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGUpLGUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLG8sYSxzPVtdLGw9bi5kZWxlZ2F0ZUNvdW50LHU9ZS50YXJnZXQ7aWYobCYmdS5ub2RlVHlwZSYmKCFlLmJ1dHRvbnx8ImNsaWNrIiE9PWUudHlwZSkpZm9yKDt1IT10aGlzO3U9dS5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT11Lm5vZGVUeXBlJiYodS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09ZS50eXBlKSl7Zm9yKG89W10sYT0wO2w+YTthKyspaT1uW2FdLHI9aS5zZWxlY3RvcisiICIsb1tyXT09PXQmJihvW3JdPWkubmVlZHNDb250ZXh0P3gocix0aGlzKS5pbmRleCh1KT49MDp4LmZpbmQocix0aGlzLG51bGwsW3VdKS5sZW5ndGgpLG9bcl0mJm8ucHVzaChpKTtvLmxlbmd0aCYmcy5wdXNoKHtlbGVtOnUsaGFuZGxlcnM6b30pfXJldHVybiBuLmxlbmd0aD5sJiZzLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpuLnNsaWNlKGwpfSksc30sZml4OmZ1bmN0aW9uKGUpe2lmKGVbeC5leHBhbmRvXSlyZXR1cm4gZTt2YXIgdCxuLHIsaT1lLnR5cGUsbz1lLHM9dGhpcy5maXhIb29rc1tpXTtzfHwodGhpcy5maXhIb29rc1tpXT1zPXR0LnRlc3QoaSk/dGhpcy5tb3VzZUhvb2tzOmV0LnRlc3QoaSk/dGhpcy5rZXlIb29rczp7fSkscj1zLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KHMucHJvcHMpOnRoaXMucHJvcHMsZT1uZXcgeC5FdmVudChvKSx0PXIubGVuZ3RoO3doaWxlKHQtLSluPXJbdF0sZVtuXT1vW25dO3JldHVybiBlLnRhcmdldHx8KGUudGFyZ2V0PW8uc3JjRWxlbWVudHx8YSksMz09PWUudGFyZ2V0Lm5vZGVUeXBlJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksZS5tZXRhS2V5PSEhZS5tZXRhS2V5LHMuZmlsdGVyP3MuZmlsdGVyKGUsbyk6ZX0scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUud2hpY2gmJihlLndoaWNoPW51bGwhPXQuY2hhckNvZGU/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLG4pe3ZhciByLGksbyxzPW4uYnV0dG9uLGw9bi5mcm9tRWxlbWVudDtyZXR1cm4gbnVsbD09ZS5wYWdlWCYmbnVsbCE9bi5jbGllbnRYJiYoaT1lLnRhcmdldC5vd25lckRvY3VtZW50fHxhLG89aS5kb2N1bWVudEVsZW1lbnQscj1pLmJvZHksZS5wYWdlWD1uLmNsaWVudFgrKG8mJm8uc2Nyb2xsTGVmdHx8ciYmci5zY3JvbGxMZWZ0fHwwKS0obyYmby5jbGllbnRMZWZ0fHxyJiZyLmNsaWVudExlZnR8fDApLGUucGFnZVk9bi5jbGllbnRZKyhvJiZvLnNjcm9sbFRvcHx8ciYmci5zY3JvbGxUb3B8fDApLShvJiZvLmNsaWVudFRvcHx8ciYmci5jbGllbnRUb3B8fDApKSwhZS5yZWxhdGVkVGFyZ2V0JiZsJiYoZS5yZWxhdGVkVGFyZ2V0PWw9PT1lLnRhcmdldD9uLnRvRWxlbWVudDpsKSxlLndoaWNofHxzPT09dHx8KGUud2hpY2g9MSZzPzE6MiZzPzM6NCZzPzI6MCksZX19LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1hdCgpJiZ0aGlzLmZvY3VzKXRyeXtyZXR1cm4gdGhpcy5mb2N1cygpLCExfWNhdGNoKGUpe319LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PWF0KCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnR9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB4Lm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHgubm9kZU5hbWUoZS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UucmVzdWx0IT09dCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5leHRlbmQobmV3IHguRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP3guZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6eC5ldmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50RGVmYXVsdCgpfX0seC5yZW1vdmVFdmVudD1hLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0ib24iK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBlW3JdPT09aSYmKGVbcl09bnVsbCksZS5kZXRhY2hFdmVudChyLG4pKX0seC5FdmVudD1mdW5jdGlvbihlLG4pe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeC5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5yZXR1cm5WYWx1ZT09PSExfHxlLmdldFByZXZlbnREZWZhdWx0JiZlLmdldFByZXZlbnREZWZhdWx0KCk/aXQ6b3QpOnRoaXMudHlwZT1lLG4mJnguZXh0ZW5kKHRoaXMsbiksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fHgubm93KCksdGhpc1t4LmV4cGFuZG9dPSEwLHQpOm5ldyB4LkV2ZW50KGUsbil9LHguRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6b3QsaXNQcm9wYWdhdGlvblN0b3BwZWQ6b3QsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6b3QscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9aXQsZSYmKGUucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1pdCxlJiYoZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksZS5jYW5jZWxCdWJibGU9ITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWl0LHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSx4LmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihlLHQpe3guZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LG89ZS5oYW5kbGVPYmo7cmV0dXJuKCFpfHxpIT09ciYmIXguY29udGFpbnMocixpKSkmJihlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLHguc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwoeC5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4geC5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6KHguZXZlbnQuYWRkKHRoaXMsImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdCIsZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQscj14Lm5vZGVOYW1lKG4sImlucHV0Iil8fHgubm9kZU5hbWUobiwiYnV0dG9uIik/bi5mb3JtOnQ7ciYmIXguX2RhdGEociwic3VibWl0QnViYmxlcyIpJiYoeC5ldmVudC5hZGQociwic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGU9ITB9KSx4Ll9kYXRhKHIsInN1Ym1pdEJ1YmJsZXMiLCEwKSl9KSx0KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGUmJihkZWxldGUgZS5fc3VibWl0X2J1YmJsZSx0aGlzLnBhcmVudE5vZGUmJiFlLmlzVHJpZ2dlciYmeC5ldmVudC5zaW11bGF0ZSgic3VibWl0Iix0aGlzLnBhcmVudE5vZGUsZSwhMCkpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiB4Lm5vZGVOYW1lKHRoaXMsImZvcm0iKT8hMTooeC5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKSx0KX19KSx4LnN1cHBvcnQuY2hhbmdlQnViYmxlc3x8KHguZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIFoudGVzdCh0aGlzLm5vZGVOYW1lKT8oKCJjaGVja2JveCI9PT10aGlzLnR5cGV8fCJyYWRpbyI9PT10aGlzLnR5cGUpJiYoeC5ldmVudC5hZGQodGhpcywicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7ImNoZWNrZWQiPT09ZS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZSYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMCl9KSx4LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSkseC5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLGUsITApfSkpLCExKTooeC5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7Wi50ZXN0KHQubm9kZU5hbWUpJiYheC5fZGF0YSh0LCJjaGFuZ2VCdWJibGVzIikmJih4LmV2ZW50LmFkZCh0LCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7IXRoaXMucGFyZW50Tm9kZXx8ZS5pc1NpbXVsYXRlZHx8ZS5pc1RyaWdnZXJ8fHguZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGUsITApfSkseC5fZGF0YSh0LCJjaGFuZ2VCdWJibGVzIiwhMCkpfSksdCl9LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldDtyZXR1cm4gdGhpcyE9PW58fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHwicmFkaW8iIT09bi50eXBlJiYiY2hlY2tib3giIT09bi50eXBlP2UuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOnR9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIHguZXZlbnQucmVtb3ZlKHRoaXMsIi5fY2hhbmdlIiksIVoudGVzdCh0aGlzLm5vZGVOYW1lKX19KSx4LnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXN8fHguZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9ZnVuY3Rpb24oZSl7eC5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LHguZXZlbnQuZml4KGUpLCEwKX07eC5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpezA9PT1uKysmJmEuYWRkRXZlbnRMaXN0ZW5lcihlLHIsITApfSx0ZWFyZG93bjpmdW5jdGlvbigpezA9PT0tLW4mJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHIsITApfX19KSx4LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSxuLHIsaSxvKXt2YXIgYSxzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7InN0cmluZyIhPXR5cGVvZiBuJiYocj1yfHxuLG49dCk7Zm9yKGEgaW4gZSl0aGlzLm9uKGEsbixyLGVbYV0sbyk7cmV0dXJuIHRoaXN9aWYobnVsbD09ciYmbnVsbD09aT8oaT1uLHI9bj10KTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj10KTooaT1yLHI9bixuPXQpKSxpPT09ITEpaT1vdDtlbHNlIGlmKCFpKXJldHVybiB0aGlzO3JldHVybiAxPT09byYmKHM9aSxpPWZ1bmN0aW9uKGUpe3JldHVybiB4KCkub2ZmKGUpLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmd1aWQ9cy5ndWlkfHwocy5ndWlkPXguZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5ldmVudC5hZGQodGhpcyxlLGkscixuKX0pfSxvbmU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24oZSx0LG4sciwxKX0sb2ZmOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvO2lmKGUmJmUucHJldmVudERlZmF1bHQmJmUuaGFuZGxlT2JqKXJldHVybiBpPWUuaGFuZGxlT2JqLHgoZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGkubmFtZXNwYWNlP2kub3JpZ1R5cGUrIi4iK2kubmFtZXNwYWNlOmkub3JpZ1R5cGUsaS5zZWxlY3RvcixpLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IobyBpbiBlKXRoaXMub2ZmKG8sbixlW29dKTtyZXR1cm4gdGhpc31yZXR1cm4obj09PSExfHwiZnVuY3Rpb24iPT10eXBlb2YgbikmJihyPW4sbj10KSxyPT09ITEmJihyPW90KSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnJlbW92ZSh0aGlzLGUscixuKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzWzBdO3JldHVybiByP3guZXZlbnQudHJpZ2dlcihlLG4sciwhMCk6dH19KTt2YXIgc3Q9L14uW146I1xbXC4sXSokLyxsdD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyx1dD14LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LGN0PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O3guZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj10aGlzLGk9ci5sZW5ndGg7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayh4KGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7aT50O3QrKylpZih4LmNvbnRhaW5zKHJbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKHQ9MDtpPnQ7dCsrKXguZmluZChlLHJbdF0sbik7cmV0dXJuIG49dGhpcy5wdXNoU3RhY2soaT4xP3gudW5pcXVlKG4pOm4pLG4uc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIitlOmUsbn0saGFzOmZ1bmN0aW9uKGUpe3ZhciB0LG49eChlLHRoaXMpLHI9bi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MDtyPnQ7dCsrKWlmKHguY29udGFpbnModGhpcyxuW3RdKSlyZXR1cm4hMH0pfSxub3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGZ0KHRoaXMsZXx8W10sITApKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGV8fFtdLCExKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhZnQodGhpcywic3RyaW5nIj09dHlwZW9mIGUmJnV0LnRlc3QoZSk/eChlKTplfHxbXSwhMSkubGVuZ3RofSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgsbz1bXSxhPXV0LnRlc3QoZSl8fCJzdHJpbmciIT10eXBlb2YgZT94KGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7aT5yO3IrKylmb3Iobj10aGlzW3JdO24mJm4hPT10O249bi5wYXJlbnROb2RlKWlmKDExPm4ubm9kZVR5cGUmJihhP2EuaW5kZXgobik+LTE6MT09PW4ubm9kZVR5cGUmJnguZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSkpe249by5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aD4xP3gudW5pcXVlKG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/eC5pbkFycmF5KHRoaXNbMF0seChlKSk6eC5pbkFycmF5KGUuanF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPSJzdHJpbmciPT10eXBlb2YgZT94KGUsdCk6eC5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj14Lm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSk7ZnVuY3Rpb24gcHQoZSx0KXtkbyBlPWVbdF07d2hpbGUoZSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfXguZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmMTEhPT10Lm5vZGVUeXBlP3Q6bnVsbH0scGFyZW50czpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gcHQoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gcHQoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJuZXh0U2libGluZyIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiB4LnNpYmxpbmcoKGUucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsZSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiB4LnNpYmxpbmcoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHgubm9kZU5hbWUoZSwiaWZyYW1lIik/ZS5jb250ZW50RG9jdW1lbnR8fGUuY29udGVudFdpbmRvdy5kb2N1bWVudDp4Lm1lcmdlKFtdLGUuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihlLHQpe3guZm5bZV09ZnVuY3Rpb24obixyKXt2YXIgaT14Lm1hcCh0aGlzLHQsbik7cmV0dXJuIlVudGlsIiE9PWUuc2xpY2UoLTUpJiYocj1uKSxyJiYic3RyaW5nIj09dHlwZW9mIHImJihpPXguZmlsdGVyKHIsaSkpLHRoaXMubGVuZ3RoPjEmJihjdFtlXXx8KGk9eC51bmlxdWUoaSkpLGx0LnRlc3QoZSkmJihpPWkucmV2ZXJzZSgpKSksdGhpcy5wdXNoU3RhY2soaSl9fSkseC5leHRlbmQoe2ZpbHRlcjpmdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoJiYxPT09ci5ub2RlVHlwZT94LmZpbmQubWF0Y2hlc1NlbGVjdG9yKHIsZSk/W3JdOltdOnguZmluZC5tYXRjaGVzKGUseC5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSkpfSxkaXI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPVtdLG89ZVtuXTt3aGlsZShvJiY5IT09by5ub2RlVHlwZSYmKHI9PT10fHwxIT09by5ub2RlVHlwZXx8IXgobykuaXMocikpKTE9PT1vLm5vZGVUeXBlJiZpLnB1c2gobyksbz1vW25dO3JldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKDtlO2U9ZS5uZXh0U2libGluZykxPT09ZS5ub2RlVHlwZSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn19KTtmdW5jdGlvbiBmdChlLHQsbil7aWYoeC5pc0Z1bmN0aW9uKHQpKXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiEhdC5jYWxsKGUscixlKSE9PW59KTtpZih0Lm5vZGVUeXBlKXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQhPT1ufSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KXtpZihzdC50ZXN0KHQpKXJldHVybiB4LmZpbHRlcih0LGUsbik7dD14LmZpbHRlcih0LGUpfXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4geC5pbkFycmF5KGUsdCk+PTAhPT1ufSl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9aHQuc3BsaXQoInwiKSxuPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKG4uY3JlYXRlRWxlbWVudCl3aGlsZSh0Lmxlbmd0aCluLmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7cmV0dXJuIG59dmFyIGh0PSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIixndD0vIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9nLG10PVJlZ0V4cCgiPCg/OiIraHQrIilbXFxzLz5dIiwiaSIpLHl0PS9eXHMrLyx2dD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLGJ0PS88KFtcdzpdKykvLHh0PS88dGJvZHkvaSx3dD0vPHwmIz9cdys7LyxUdD0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLEN0PS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLE50PS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGt0PS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxFdD0vXnRydWVcLyguKikvLFN0PS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZyxBdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6eC5zdXBwb3J0Lmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sanQ9ZHQoYSksRHQ9anQuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJkaXYiKSk7QXQub3B0Z3JvdXA9QXQub3B0aW9uLEF0LnRib2R5PUF0LnRmb290PUF0LmNvbGdyb3VwPUF0LmNhcHRpb249QXQudGhlYWQsQXQudGg9QXQudGQseC5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3gudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fGEpLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PUx0KHRoaXMsZSk7dC5hcHBlbmRDaGlsZChlKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9THQodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWU/eC5maWx0ZXIoZSx0aGlzKTp0aGlzLGk9MDtmb3IoO251bGwhPShuPXJbaV0pO2krKyl0fHwxIT09bi5ub2RlVHlwZXx8eC5jbGVhbkRhdGEoRnQobikpLG4ucGFyZW50Tm9kZSYmKHQmJnguY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pJiZfdChGdChuLCJzY3JpcHQiKSksbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspezE9PT1lLm5vZGVUeXBlJiZ4LmNsZWFuRGF0YShGdChlLCExKSk7d2hpbGUoZS5maXJzdENoaWxkKWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLm9wdGlvbnMmJngubm9kZU5hbWUoZSwic2VsZWN0IikmJihlLm9wdGlvbnMubGVuZ3RoPTApfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHguY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIDE9PT1uLm5vZGVUeXBlP24uaW5uZXJIVE1MLnJlcGxhY2UoZ3QsIiIpOnQ7aWYoISgic3RyaW5nIiE9dHlwZW9mIGV8fFR0LnRlc3QoZSl8fCF4LnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSYmbXQudGVzdChlKXx8IXguc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChlKXx8QXRbKGJ0LmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKSl7ZT1lLnJlcGxhY2UodnQsIjwkMT48LyQyPiIpO3RyeXtmb3IoO2k+cjtyKyspbj10aGlzW3JdfHx7fSwxPT09bi5ub2RlVHlwZSYmKHguY2xlYW5EYXRhKEZ0KG4sITEpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gobyl7fX1uJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGU9eC5tYXAodGhpcyxmdW5jdGlvbihlKXtyZXR1cm5bZS5uZXh0U2libGluZyxlLnBhcmVudE5vZGVdfSksdD0wO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihuKXt2YXIgcj1lW3QrK10saT1lW3QrK107aSYmKHImJnIucGFyZW50Tm9kZSE9PWkmJihyPXRoaXMubmV4dFNpYmxpbmcpLHgodGhpcykucmVtb3ZlKCksaS5pbnNlcnRCZWZvcmUobixyKSl9LCEwKSx0P3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZShlLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oZSx0LG4pe2U9ZC5hcHBseShbXSxlKTt2YXIgcixpLG8sYSxzLGwsdT0wLGM9dGhpcy5sZW5ndGgscD10aGlzLGY9Yy0xLGg9ZVswXSxnPXguaXNGdW5jdGlvbihoKTtpZihnfHwhKDE+PWN8fCJzdHJpbmciIT10eXBlb2YgaHx8eC5zdXBwb3J0LmNoZWNrQ2xvbmUpJiZOdC50ZXN0KGgpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24ocil7dmFyIGk9cC5lcShyKTtnJiYoZVswXT1oLmNhbGwodGhpcyxyLGkuaHRtbCgpKSksaS5kb21NYW5pcChlLHQsbil9KTtpZihjJiYobD14LmJ1aWxkRnJhZ21lbnQoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsIW4mJnRoaXMpLHI9bC5maXJzdENoaWxkLDE9PT1sLmNoaWxkTm9kZXMubGVuZ3RoJiYobD1yKSxyKSl7Zm9yKGE9eC5tYXAoRnQobCwic2NyaXB0IiksSHQpLG89YS5sZW5ndGg7Yz51O3UrKylpPWwsdSE9PWYmJihpPXguY2xvbmUoaSwhMCwhMCksbyYmeC5tZXJnZShhLEZ0KGksInNjcmlwdCIpKSksdC5jYWxsKHRoaXNbdV0saSx1KTtpZihvKWZvcihzPWFbYS5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCx4Lm1hcChhLHF0KSx1PTA7bz51O3UrKylpPWFbdV0sa3QudGVzdChpLnR5cGV8fCIiKSYmIXguX2RhdGEoaSwiZ2xvYmFsRXZhbCIpJiZ4LmNvbnRhaW5zKHMsaSkmJihpLnNyYz94Ll9ldmFsVXJsKGkuc3JjKTp4Lmdsb2JhbEV2YWwoKGkudGV4dHx8aS50ZXh0Q29udGVudHx8aS5pbm5lckhUTUx8fCIiKS5yZXBsYWNlKFN0LCIiKSkpO2w9cj1udWxsfXJldHVybiB0aGlzfX0pO2Z1bmN0aW9uIEx0KGUsdCl7cmV0dXJuIHgubm9kZU5hbWUoZSwidGFibGUiKSYmeC5ub2RlTmFtZSgxPT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTplfWZ1bmN0aW9uIEh0KGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT14LmZpbmQuYXR0cihlLCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBxdChlKXt2YXIgdD1FdC5leGVjKGUudHlwZSk7cmV0dXJuIHQ/ZS50eXBlPXRbMV06ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIF90KGUsdCl7dmFyIG4scj0wO2Zvcig7bnVsbCE9KG49ZVtyXSk7cisrKXguX2RhdGEobiwiZ2xvYmFsRXZhbCIsIXR8fHguX2RhdGEodFtyXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBNdChlLHQpe2lmKDE9PT10Lm5vZGVUeXBlJiZ4Lmhhc0RhdGEoZSkpe3ZhciBuLHIsaSxvPXguX2RhdGEoZSksYT14Ll9kYXRhKHQsbykscz1vLmV2ZW50cztpZihzKXtkZWxldGUgYS5oYW5kbGUsYS5ldmVudHM9e307Zm9yKG4gaW4gcylmb3Iocj0wLGk9c1tuXS5sZW5ndGg7aT5yO3IrKyl4LmV2ZW50LmFkZCh0LG4sc1tuXVtyXSl9YS5kYXRhJiYoYS5kYXRhPXguZXh0ZW5kKHt9LGEuZGF0YSkpfX1mdW5jdGlvbiBPdChlLHQpe3ZhciBuLHIsaTtpZigxPT09dC5ub2RlVHlwZSl7aWYobj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIXguc3VwcG9ydC5ub0Nsb25lRXZlbnQmJnRbeC5leHBhbmRvXSl7aT14Ll9kYXRhKHQpO2ZvcihyIGluIGkuZXZlbnRzKXgucmVtb3ZlRXZlbnQodCxyLGkuaGFuZGxlKTt0LnJlbW92ZUF0dHJpYnV0ZSh4LmV4cGFuZG8pfSJzY3JpcHQiPT09biYmdC50ZXh0IT09ZS50ZXh0PyhIdCh0KS50ZXh0PWUudGV4dCxxdCh0KSk6Im9iamVjdCI9PT1uPyh0LnBhcmVudE5vZGUmJih0Lm91dGVySFRNTD1lLm91dGVySFRNTCkseC5zdXBwb3J0Lmh0bWw1Q2xvbmUmJmUuaW5uZXJIVE1MJiYheC50cmltKHQuaW5uZXJIVE1MKSYmKHQuaW5uZXJIVE1MPWUuaW5uZXJIVE1MKSk6ImlucHV0Ij09PW4mJkN0LnRlc3QoZS50eXBlKT8odC5kZWZhdWx0Q2hlY2tlZD10LmNoZWNrZWQ9ZS5jaGVja2VkLHQudmFsdWUhPT1lLnZhbHVlJiYodC52YWx1ZT1lLnZhbHVlKSk6Im9wdGlvbiI9PT1uP3QuZGVmYXVsdFNlbGVjdGVkPXQuc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6KCJpbnB1dCI9PT1ufHwidGV4dGFyZWEiPT09bikmJih0LmRlZmF1bHRWYWx1ZT1lLmRlZmF1bHRWYWx1ZSl9fXguZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihlKXt2YXIgbixyPTAsaT1bXSxvPXgoZSksYT1vLmxlbmd0aC0xO2Zvcig7YT49cjtyKyspbj1yPT09YT90aGlzOnRoaXMuY2xvbmUoITApLHgob1tyXSlbdF0obiksaC5hcHBseShpLG4uZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhpKX19KTtmdW5jdGlvbiBGdChlLG4pe3ZhciByLG8sYT0wLHM9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1pP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUobnx8IioiKTp0eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsIT09aT9lLnF1ZXJ5U2VsZWN0b3JBbGwobnx8IioiKTp0O2lmKCFzKWZvcihzPVtdLHI9ZS5jaGlsZE5vZGVzfHxlO251bGwhPShvPXJbYV0pO2ErKykhbnx8eC5ub2RlTmFtZShvLG4pP3MucHVzaChvKTp4Lm1lcmdlKHMsRnQobyxuKSk7cmV0dXJuIG49PT10fHxuJiZ4Lm5vZGVOYW1lKGUsbik/eC5tZXJnZShbZV0scyk6c31mdW5jdGlvbiBCdChlKXtDdC50ZXN0KGUudHlwZSkmJihlLmRlZmF1bHRDaGVja2VkPWUuY2hlY2tlZCl9eC5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLGw9eC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoeC5zdXBwb3J0Lmh0bWw1Q2xvbmV8fHguaXNYTUxEb2MoZSl8fCFtdC50ZXN0KCI8IitlLm5vZGVOYW1lKyI+Iik/bz1lLmNsb25lTm9kZSghMCk6KER0LmlubmVySFRNTD1lLm91dGVySFRNTCxEdC5yZW1vdmVDaGlsZChvPUR0LmZpcnN0Q2hpbGQpKSwhKHguc3VwcG9ydC5ub0Nsb25lRXZlbnQmJnguc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8eC5pc1hNTERvYyhlKSkpZm9yKHI9RnQobykscz1GdChlKSxhPTA7bnVsbCE9KGk9c1thXSk7KythKXJbYV0mJk90KGksclthXSk7aWYodClpZihuKWZvcihzPXN8fEZ0KGUpLHI9cnx8RnQobyksYT0wO251bGwhPShpPXNbYV0pO2ErKylNdChpLHJbYV0pO2Vsc2UgTXQoZSxvKTtyZXR1cm4gcj1GdChvLCJzY3JpcHQiKSxyLmxlbmd0aD4wJiZfdChyLCFsJiZGdChlLCJzY3JpcHQiKSkscj1zPWk9bnVsbCxvfSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLGwsdSxjLHA9ZS5sZW5ndGgsZj1kdCh0KSxkPVtdLGg9MDtmb3IoO3A+aDtoKyspaWYobz1lW2hdLG98fDA9PT1vKWlmKCJvYmplY3QiPT09eC50eXBlKG8pKXgubWVyZ2UoZCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKHd0LnRlc3Qobykpe3M9c3x8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxsPShidC5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGM9QXRbbF18fEF0Ll9kZWZhdWx0LHMuaW5uZXJIVE1MPWNbMV0rby5yZXBsYWNlKHZ0LCI8JDE+PC8kMj4iKStjWzJdLGk9Y1swXTt3aGlsZShpLS0pcz1zLmxhc3RDaGlsZDtpZigheC5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZ5dC50ZXN0KG8pJiZkLnB1c2godC5jcmVhdGVUZXh0Tm9kZSh5dC5leGVjKG8pWzBdKSksIXguc3VwcG9ydC50Ym9keSl7bz0idGFibGUiIT09bHx8eHQudGVzdChvKT8iPHRhYmxlPiIhPT1jWzFdfHx4dC50ZXN0KG8pPzA6czpzLmZpcnN0Q2hpbGQsaT1vJiZvLmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKGktLSl4Lm5vZGVOYW1lKHU9by5jaGlsZE5vZGVzW2ldLCJ0Ym9keSIpJiYhdS5jaGlsZE5vZGVzLmxlbmd0aCYmby5yZW1vdmVDaGlsZCh1KX14Lm1lcmdlKGQscy5jaGlsZE5vZGVzKSxzLnRleHRDb250ZW50PSIiO3doaWxlKHMuZmlyc3RDaGlsZClzLnJlbW92ZUNoaWxkKHMuZmlyc3RDaGlsZCk7cz1mLmxhc3RDaGlsZH1lbHNlIGQucHVzaCh0LmNyZWF0ZVRleHROb2RlKG8pKTtzJiZmLnJlbW92ZUNoaWxkKHMpLHguc3VwcG9ydC5hcHBlbmRDaGVja2VkfHx4LmdyZXAoRnQoZCwiaW5wdXQiKSxCdCksaD0wO3doaWxlKG89ZFtoKytdKWlmKCghcnx8LTE9PT14LmluQXJyYXkobyxyKSkmJihhPXguY29udGFpbnMoby5vd25lckRvY3VtZW50LG8pLHM9RnQoZi5hcHBlbmRDaGlsZChvKSwic2NyaXB0IiksYSYmX3Qocyksbikpe2k9MDt3aGlsZShvPXNbaSsrXSlrdC50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIHM9bnVsbCxmfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLG8sYSxzPTAsbD14LmV4cGFuZG8sdT14LmNhY2hlLGM9eC5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8sZj14LmV2ZW50LnNwZWNpYWw7Zm9yKDtudWxsIT0obj1lW3NdKTtzKyspaWYoKHR8fHguYWNjZXB0RGF0YShuKSkmJihvPW5bbF0sYT1vJiZ1W29dKSl7aWYoYS5ldmVudHMpZm9yKHIgaW4gYS5ldmVudHMpZltyXT94LmV2ZW50LnJlbW92ZShuLHIpOngucmVtb3ZlRXZlbnQobixyLGEuaGFuZGxlKTsNCnVbb10mJihkZWxldGUgdVtvXSxjP2RlbGV0ZSBuW2xdOnR5cGVvZiBuLnJlbW92ZUF0dHJpYnV0ZSE9PWk/bi5yZW1vdmVBdHRyaWJ1dGUobCk6bltsXT1udWxsLHAucHVzaChvKSl9fSxfZXZhbFVybDpmdW5jdGlvbihlKXtyZXR1cm4geC5hamF4KHt1cmw6ZSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfX0pLHguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD14KGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiYxPT09ZS5maXJzdENoaWxkLm5vZGVUeXBlKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHguaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9eCh0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD14LmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7eC5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fHgodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pO3ZhciBQdCxSdCxXdCwkdD0vYWxwaGFcKFteKV0qXCkvaSxJdD0vb3BhY2l0eVxzKj1ccyooW14pXSopLyx6dD0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC8sWHQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFV0PS9ebWFyZ2luLyxWdD1SZWdFeHAoIl4oIit3KyIpKC4qKSQiLCJpIiksWXQ9UmVnRXhwKCJeKCIrdysiKSg/IXB4KVthLXolXSskIiwiaSIpLEp0PVJlZ0V4cCgiXihbKy1dKT0oIit3KyIpIiwiaSIpLEd0PXtCT0RZOiJibG9jayJ9LFF0PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxLdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxadD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGVuPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gdG4oZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPWVuLmxlbmd0aDt3aGlsZShpLS0paWYodD1lbltpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBubihlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcm4oZSx0KXt2YXIgbixyLGksbz1bXSxhPTAscz1lLmxlbmd0aDtmb3IoO3M+YTthKyspcj1lW2FdLHIuc3R5bGUmJihvW2FdPXguX2RhdGEociwib2xkZGlzcGxheSIpLG49ci5zdHlsZS5kaXNwbGF5LHQ/KG9bYV18fCJub25lIiE9PW58fChyLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZubihyKSYmKG9bYV09eC5fZGF0YShyLCJvbGRkaXNwbGF5IixsbihyLm5vZGVOYW1lKSkpKTpvW2FdfHwoaT1ubihyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZ4Ll9kYXRhKHIsIm9sZGRpc3BsYXkiLGk/bjp4LmNzcyhyLCJkaXNwbGF5IikpKSk7Zm9yKGE9MDtzPmE7YSsrKXI9ZVthXSxyLnN0eWxlJiYodCYmIm5vbmUiIT09ci5zdHlsZS5kaXNwbGF5JiYiIiE9PXIuc3R5bGUuZGlzcGxheXx8KHIuc3R5bGUuZGlzcGxheT10P29bYV18fCIiOiJub25lIikpO3JldHVybiBlfXguZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSxuKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlLG4scil7dmFyIGksbyxhPXt9LHM9MDtpZih4LmlzQXJyYXkobikpe2ZvcihvPVJ0KGUpLGk9bi5sZW5ndGg7aT5zO3MrKylhW25bc11dPXguY3NzKGUsbltzXSwhMSxvKTtyZXR1cm4gYX1yZXR1cm4gciE9PXQ/eC5zdHlsZShlLG4scik6eC5jc3MoZSxuKX0sZSxuLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gcm4odGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7bm4odGhpcyk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPVd0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOnguc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgbyxhLHMsbD14LmNhbWVsQ2FzZShuKSx1PWUuc3R5bGU7aWYobj14LmNzc1Byb3BzW2xdfHwoeC5jc3NQcm9wc1tsXT10bih1LGwpKSxzPXguY3NzSG9va3Nbbl18fHguY3NzSG9va3NbbF0scj09PXQpcmV0dXJuIHMmJiJnZXQiaW4gcyYmKG89cy5nZXQoZSwhMSxpKSkhPT10P286dVtuXTtpZihhPXR5cGVvZiByLCJzdHJpbmciPT09YSYmKG89SnQuZXhlYyhyKSkmJihyPShvWzFdKzEpKm9bMl0rcGFyc2VGbG9hdCh4LmNzcyhlLG4pKSxhPSJudW1iZXIiKSwhKG51bGw9PXJ8fCJudW1iZXIiPT09YSYmaXNOYU4ocil8fCgibnVtYmVyIiE9PWF8fHguY3NzTnVtYmVyW2xdfHwocis9InB4IikseC5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1yfHwwIT09bi5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fCh1W25dPSJpbmhlcml0IikscyYmInNldCJpbiBzJiYocj1zLnNldChlLHIsaSkpPT09dCkpKXRyeXt1W25dPXJ9Y2F0Y2goYyl7fX19LGNzczpmdW5jdGlvbihlLG4scixpKXt2YXIgbyxhLHMsbD14LmNhbWVsQ2FzZShuKTtyZXR1cm4gbj14LmNzc1Byb3BzW2xdfHwoeC5jc3NQcm9wc1tsXT10bihlLnN0eWxlLGwpKSxzPXguY3NzSG9va3Nbbl18fHguY3NzSG9va3NbbF0scyYmImdldCJpbiBzJiYoYT1zLmdldChlLCEwLHIpKSxhPT09dCYmKGE9V3QoZSxuLGkpKSwibm9ybWFsIj09PWEmJm4gaW4gS3QmJihhPUt0W25dKSwiIj09PXJ8fHI/KG89cGFyc2VGbG9hdChhKSxyPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6YSk6YX19KSxlLmdldENvbXB1dGVkU3R5bGU/KFJ0PWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX0sV3Q9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPXJ8fFJ0KGUpLGw9cz9zLmdldFByb3BlcnR5VmFsdWUobil8fHNbbl06dCx1PWUuc3R5bGU7cmV0dXJuIHMmJigiIiE9PWx8fHguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwobD14LnN0eWxlKGUsbikpLFl0LnRlc3QobCkmJlV0LnRlc3QobikmJihpPXUud2lkdGgsbz11Lm1pbldpZHRoLGE9dS5tYXhXaWR0aCx1Lm1pbldpZHRoPXUubWF4V2lkdGg9dS53aWR0aD1sLGw9cy53aWR0aCx1LndpZHRoPWksdS5taW5XaWR0aD1vLHUubWF4V2lkdGg9YSkpLGx9KTphLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihSdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9LFd0PWZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1yfHxSdChlKSxsPXM/c1tuXTp0LHU9ZS5zdHlsZTtyZXR1cm4gbnVsbD09bCYmdSYmdVtuXSYmKGw9dVtuXSksWXQudGVzdChsKSYmIXp0LnRlc3QobikmJihpPXUubGVmdCxvPWUucnVudGltZVN0eWxlLGE9byYmby5sZWZ0LGEmJihvLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVmdCksdS5sZWZ0PSJmb250U2l6ZSI9PT1uPyIxZW0iOmwsbD11LnBpeGVsTGVmdCsicHgiLHUubGVmdD1pLGEmJihvLmxlZnQ9YSkpLCIiPT09bD8iYXV0byI6bH0pO2Z1bmN0aW9uIG9uKGUsdCxuKXt2YXIgcj1WdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwicHgiKTp0fWZ1bmN0aW9uIGFuKGUsdCxuLHIsaSl7dmFyIG89bj09PShyPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09dD8xOjAsYT0wO2Zvcig7ND5vO28rPTIpIm1hcmdpbiI9PT1uJiYoYSs9eC5jc3MoZSxuK1p0W29dLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYoYS09eC5jc3MoZSwicGFkZGluZyIrWnRbb10sITAsaSkpLCJtYXJnaW4iIT09biYmKGEtPXguY3NzKGUsImJvcmRlciIrWnRbb10rIldpZHRoIiwhMCxpKSkpOihhKz14LmNzcyhlLCJwYWRkaW5nIitadFtvXSwhMCxpKSwicGFkZGluZyIhPT1uJiYoYSs9eC5jc3MoZSwiYm9yZGVyIitadFtvXSsiV2lkdGgiLCEwLGkpKSk7cmV0dXJuIGF9ZnVuY3Rpb24gc24oZSx0LG4pe3ZhciByPSEwLGk9IndpZHRoIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxvPVJ0KGUpLGE9eC5zdXBwb3J0LmJveFNpemluZyYmImJvcmRlci1ib3giPT09eC5jc3MoZSwiYm94U2l6aW5nIiwhMSxvKTtpZigwPj1pfHxudWxsPT1pKXtpZihpPVd0KGUsdCxvKSwoMD5pfHxudWxsPT1pKSYmKGk9ZS5zdHlsZVt0XSksWXQudGVzdChpKSlyZXR1cm4gaTtyPWEmJih4LnN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGV8fGk9PT1lLnN0eWxlW3RdKSxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrYW4oZSx0LG58fChhPyJib3JkZXIiOiJjb250ZW50IikscixvKSsicHgifWZ1bmN0aW9uIGxuKGUpe3ZhciB0PWEsbj1HdFtlXTtyZXR1cm4gbnx8KG49dW4oZSx0KSwibm9uZSIhPT1uJiZufHwoUHQ9KFB0fHx4KCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikuY3NzKCJjc3NUZXh0IiwiZGlzcGxheTpibG9jayAhaW1wb3J0YW50IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PShQdFswXS5jb250ZW50V2luZG93fHxQdFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LHQud3JpdGUoIjwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PiIpLHQuY2xvc2UoKSxuPXVuKGUsdCksUHQuZGV0YWNoKCkpLEd0W2VdPW4pLG59ZnVuY3Rpb24gdW4oZSx0KXt2YXIgbj14KHQuY3JlYXRlRWxlbWVudChlKSkuYXBwZW5kVG8odC5ib2R5KSxyPXguY3NzKG5bMF0sImRpc3BsYXkiKTtyZXR1cm4gbi5yZW1vdmUoKSxyfXguZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSxuKXt4LmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oZSxyLGkpe3JldHVybiByPzA9PT1lLm9mZnNldFdpZHRoJiZYdC50ZXN0KHguY3NzKGUsImRpc3BsYXkiKSk/eC5zd2FwKGUsUXQsZnVuY3Rpb24oKXtyZXR1cm4gc24oZSxuLGkpfSk6c24oZSxuLGkpOnR9LHNldDpmdW5jdGlvbihlLHQscil7dmFyIGk9ciYmUnQoZSk7cmV0dXJuIG9uKGUsdCxyP2FuKGUsbixyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHguc3VwcG9ydC5vcGFjaXR5fHwoeC5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gSXQudGVzdCgodCYmZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUuZmlsdGVyOmUuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6dD8iMSI6IiJ9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuPWUuc3R5bGUscj1lLmN1cnJlbnRTdHlsZSxpPXguaXNOdW1lcmljKHQpPyJhbHBoYShvcGFjaXR5PSIrMTAwKnQrIikiOiIiLG89ciYmci5maWx0ZXJ8fG4uZmlsdGVyfHwiIjtuLnpvb209MSwodD49MXx8IiI9PT10KSYmIiI9PT14LnRyaW0oby5yZXBsYWNlKCR0LCIiKSkmJm4ucmVtb3ZlQXR0cmlidXRlJiYobi5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09dHx8ciYmIXIuZmlsdGVyKXx8KG4uZmlsdGVyPSR0LnRlc3Qobyk/by5yZXBsYWNlKCR0LGkpOm8rIiAiK2kpfX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLG4pe3JldHVybiBuP3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSxXdCxbZSwibWFyZ2luUmlnaHQiXSk6dH19KSwheC5zdXBwb3J0LnBpeGVsUG9zaXRpb24mJnguZm4ucG9zaXRpb24mJnguZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLG4pe3guY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihlLHIpe3JldHVybiByPyhyPVd0KGUsbiksWXQudGVzdChyKT94KGUpLnBvc2l0aW9uKClbbl0rInB4IjpyKTp0fX19KX0pLHguZXhwciYmeC5leHByLmZpbHRlcnMmJih4LmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIDA+PWUub2Zmc2V0V2lkdGgmJjA+PWUub2Zmc2V0SGVpZ2h0fHwheC5zdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cyYmIm5vbmUiPT09KGUuc3R5bGUmJmUuc3R5bGUuZGlzcGxheXx8eC5jc3MoZSwiZGlzcGxheSIpKX0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK1p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LFV0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PW9uKX0pO3ZhciBjbj0vJTIwL2cscG49L1xbXF0kLyxmbj0vXHI/XG4vZyxkbj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksaG49L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZobi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhZG4udGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IUN0LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoZm4sIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKGZuLCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLG4pe3ZhciByLGk9W10sbz1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQsaVtpLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKG49PT10JiYobj14LmFqYXhTZXR0aW5ncyYmeC5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLHguaXNBcnJheShlKXx8ZS5qcXVlcnkmJiF4LmlzUGxhaW5PYmplY3QoZSkpeC5lYWNoKGUsZnVuY3Rpb24oKXtvKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKHIgaW4gZSlnbihyLGVbcl0sbixvKTtyZXR1cm4gaS5qb2luKCImIikucmVwbGFjZShjbiwiKyIpfTtmdW5jdGlvbiBnbihlLHQsbixyKXt2YXIgaTtpZih4LmlzQXJyYXkodCkpeC5lYWNoKHQsZnVuY3Rpb24odCxpKXtufHxwbi50ZXN0KGUpP3IoZSxpKTpnbihlKyJbIisoIm9iamVjdCI9PXR5cGVvZiBpP3Q6IiIpKyJdIixpLG4scil9KTtlbHNlIGlmKG58fCJvYmplY3QiIT09eC50eXBlKHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpZ24oZSsiWyIraSsiXSIsdFtpXSxuLHIpfXguZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLHguZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9fSk7dmFyIG1uLHluLHZuPXgubm93KCksYm49L1w/Lyx4bj0vIy4qJC8sd249LyhbPyZdKV89W14mXSovLFRuPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKVxyPyQvZ20sQ249L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sTm49L14oPzpHRVR8SEVBRCkkLyxrbj0vXlwvXC8vLEVuPS9eKFtcdy4rLV0rOikoPzpcL1wvKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLyxTbj14LmZuLmxvYWQsQW49e30sam49e30sRG49IiovIi5jb25jYXQoIioiKTt0cnl7eW49by5ocmVmfWNhdGNoKExuKXt5bj1hLmNyZWF0ZUVsZW1lbnQoImEiKSx5bi5ocmVmPSIiLHluPXluLmhyZWZ9bW49RW4uZXhlYyh5bi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7InN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9IioiKTt2YXIgcixpPTAsbz10LnRvTG93ZXJDYXNlKCkubWF0Y2goVCl8fFtdO2lmKHguaXNGdW5jdGlvbihuKSl3aGlsZShyPW9baSsrXSkiKyI9PT1yWzBdPyhyPXIuc2xpY2UoMSl8fCIqIiwoZVtyXT1lW3JdfHxbXSkudW5zaGlmdChuKSk6KGVbcl09ZVtyXXx8W10pLnB1c2gobil9fWZ1bmN0aW9uIHFuKGUsbixyLGkpe3ZhciBvPXt9LGE9ZT09PWpuO2Z1bmN0aW9uIHMobCl7dmFyIHU7cmV0dXJuIG9bbF09ITAseC5lYWNoKGVbbF18fFtdLGZ1bmN0aW9uKGUsbCl7dmFyIGM9bChuLHIsaSk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBjfHxhfHxvW2NdP2E/ISh1PWMpOnQ6KG4uZGF0YVR5cGVzLnVuc2hpZnQoYykscyhjKSwhMSl9KSx1fXJldHVybiBzKG4uZGF0YVR5cGVzWzBdKXx8IW9bIioiXSYmcygiKiIpfWZ1bmN0aW9uIF9uKGUsbil7dmFyIHIsaSxvPXguYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoaSBpbiBuKW5baV0hPT10JiYoKG9baV0/ZTpyfHwocj17fSkpW2ldPW5baV0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsbixyKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJlNuKXJldHVybiBTbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGksbyxhLHM9dGhpcyxsPWUuaW5kZXhPZigiICIpO3JldHVybiBsPj0wJiYoaT1lLnNsaWNlKGwsZS5sZW5ndGgpLGU9ZS5zbGljZSgwLGwpKSx4LmlzRnVuY3Rpb24obik/KHI9bixuPXQpOm4mJiJvYmplY3QiPT10eXBlb2YgbiYmKGE9IlBPU1QiKSxzLmxlbmd0aD4wJiZ4LmFqYXgoe3VybDplLHR5cGU6YSxkYXRhVHlwZToiaHRtbCIsZGF0YTpufSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxzLmh0bWwoaT94KCI8ZGl2PiIpLmFwcGVuZCh4LnBhcnNlSFRNTChlKSkuZmluZChpKTplKX0pLmNvbXBsZXRlKHImJmZ1bmN0aW9uKGUsdCl7cy5lYWNoKHIsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSksdGhpc30seC5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXt4LmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSkseC5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnluLHR5cGU6IkdFVCIsaXNMb2NhbDpDbi50ZXN0KG1uWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkRuLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6eC5wYXJzZUpTT04sInRleHQgeG1sIjp4LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9fbihfbihlLHguYWpheFNldHRpbmdzKSx0KTpfbih4LmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpIbihBbiksYWpheFRyYW5zcG9ydDpIbihqbiksYWpheDpmdW5jdGlvbihlLG4peyJvYmplY3QiPT10eXBlb2YgZSYmKG49ZSxlPXQpLG49bnx8e307dmFyIHIsaSxvLGEscyxsLHUsYyxwPXguYWpheFNldHVwKHt9LG4pLGY9cC5jb250ZXh0fHxwLGQ9cC5jb250ZXh0JiYoZi5ub2RlVHlwZXx8Zi5qcXVlcnkpP3goZik6eC5ldmVudCxoPXguRGVmZXJyZWQoKSxnPXguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLG09cC5zdGF0dXNDb2RlfHx7fSx5PXt9LHY9e30sYj0wLHc9ImNhbmNlbGVkIixDPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PWIpe2lmKCFjKXtjPXt9O3doaWxlKHQ9VG4uZXhlYyhhKSljW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PWNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09Yj9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGJ8fChlPXZbbl09dltuXXx8ZSx5W2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGJ8fChwLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPmIpZm9yKHQgaW4gZSltW3RdPVttW3RdLGVbdF1dO2Vsc2UgQy5hbHdheXMoZVtDLnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx3O3JldHVybiB1JiZ1LmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKEMpLmNvbXBsZXRlPWcuYWRkLEMuc3VjY2Vzcz1DLmRvbmUsQy5lcnJvcj1DLmZhaWwscC51cmw9KChlfHxwLnVybHx8eW4pKyIiKS5yZXBsYWNlKHhuLCIiKS5yZXBsYWNlKGtuLG1uWzFdKyIvLyIpLHAudHlwZT1uLm1ldGhvZHx8bi50eXBlfHxwLm1ldGhvZHx8cC50eXBlLHAuZGF0YVR5cGVzPXgudHJpbShwLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goVCl8fFsiIl0sbnVsbD09cC5jcm9zc0RvbWFpbiYmKHI9RW4uZXhlYyhwLnVybC50b0xvd2VyQ2FzZSgpKSxwLmNyb3NzRG9tYWluPSEoIXJ8fHJbMV09PT1tblsxXSYmclsyXT09PW1uWzJdJiYoclszXXx8KCJodHRwOiI9PT1yWzFdPyI4MCI6IjQ0MyIpKT09PShtblszXXx8KCJodHRwOiI9PT1tblsxXT8iODAiOiI0NDMiKSkpKSxwLmRhdGEmJnAucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgcC5kYXRhJiYocC5kYXRhPXgucGFyYW0ocC5kYXRhLHAudHJhZGl0aW9uYWwpKSxxbihBbixwLG4sQyksMj09PWIpcmV0dXJuIEM7bD1wLmdsb2JhbCxsJiYwPT09eC5hY3RpdmUrKyYmeC5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxwLnR5cGU9cC50eXBlLnRvVXBwZXJDYXNlKCkscC5oYXNDb250ZW50PSFObi50ZXN0KHAudHlwZSksbz1wLnVybCxwLmhhc0NvbnRlbnR8fChwLmRhdGEmJihvPXAudXJsKz0oYm4udGVzdChvKT8iJiI6Ij8iKStwLmRhdGEsZGVsZXRlIHAuZGF0YSkscC5jYWNoZT09PSExJiYocC51cmw9d24udGVzdChvKT9vLnJlcGxhY2Uod24sIiQxXz0iK3ZuKyspOm8rKGJuLnRlc3Qobyk/IiYiOiI/IikrIl89Iit2bisrKSkscC5pZk1vZGlmaWVkJiYoeC5sYXN0TW9kaWZpZWRbb10mJkMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHgubGFzdE1vZGlmaWVkW29dKSx4LmV0YWdbb10mJkMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIseC5ldGFnW29dKSksKHAuZGF0YSYmcC5oYXNDb250ZW50JiZwLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZDLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscC5jb250ZW50VHlwZSksQy5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHAuZGF0YVR5cGVzWzBdJiZwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dP3AuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0rKCIqIiE9PXAuZGF0YVR5cGVzWzBdPyIsICIrRG4rIjsgcT0wLjAxIjoiIik6cC5hY2NlcHRzWyIqIl0pO2ZvcihpIGluIHAuaGVhZGVycylDLnNldFJlcXVlc3RIZWFkZXIoaSxwLmhlYWRlcnNbaV0pO2lmKHAuYmVmb3JlU2VuZCYmKHAuYmVmb3JlU2VuZC5jYWxsKGYsQyxwKT09PSExfHwyPT09YikpcmV0dXJuIEMuYWJvcnQoKTt3PSJhYm9ydCI7Zm9yKGkgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pQ1tpXShwW2ldKTtpZih1PXFuKGpuLHAsbixDKSl7Qy5yZWFkeVN0YXRlPTEsbCYmZC50cmlnZ2VyKCJhamF4U2VuZCIsW0MscF0pLHAuYXN5bmMmJnAudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Qy5hYm9ydCgidGltZW91dCIpfSxwLnRpbWVvdXQpKTt0cnl7Yj0xLHUuc2VuZCh5LGspfWNhdGNoKE4pe2lmKCEoMj5iKSl0aHJvdyBOO2soLTEsTil9fWVsc2UgaygtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24gayhlLG4scixpKXt2YXIgYyx5LHYsdyxULE49bjsyIT09YiYmKGI9MixzJiZjbGVhclRpbWVvdXQocyksdT10LGE9aXx8IiIsQy5yZWFkeVN0YXRlPWU+MD80OjAsYz1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLHImJih3PU1uKHAsQyxyKSksdz1PbihwLHcsQyxjKSxjPyhwLmlmTW9kaWZpZWQmJihUPUMuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSxUJiYoeC5sYXN0TW9kaWZpZWRbb109VCksVD1DLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksVCYmKHguZXRhZ1tvXT1UKSksMjA0PT09ZXx8IkhFQUQiPT09cC50eXBlP049Im5vY29udGVudCI6MzA0PT09ZT9OPSJub3Rtb2RpZmllZCI6KE49dy5zdGF0ZSx5PXcuZGF0YSx2PXcuZXJyb3IsYz0hdikpOih2PU4sKGV8fCFOKSYmKE49ImVycm9yIiwwPmUmJihlPTApKSksQy5zdGF0dXM9ZSxDLnN0YXR1c1RleHQ9KG58fE4pKyIiLGM/aC5yZXNvbHZlV2l0aChmLFt5LE4sQ10pOmgucmVqZWN0V2l0aChmLFtDLE4sdl0pLEMuc3RhdHVzQ29kZShtKSxtPXQsbCYmZC50cmlnZ2VyKGM/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbQyxwLGM/eTp2XSksZy5maXJlV2l0aChmLFtDLE5dKSxsJiYoZC50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtDLHBdKSwtLXguYWN0aXZlfHx4LmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gQ30sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLG4pe3JldHVybiB4LmdldChlLHQsbiwic2NyaXB0Iil9fSkseC5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGUsbil7eFtuXT1mdW5jdGlvbihlLHIsaSxvKXtyZXR1cm4geC5pc0Z1bmN0aW9uKHIpJiYobz1vfHxpLGk9cixyPXQpLHguYWpheCh7dXJsOmUsdHlwZTpuLGRhdGFUeXBlOm8sZGF0YTpyLHN1Y2Nlc3M6aX0pfX0pO2Z1bmN0aW9uIE1uKGUsbixyKXt2YXIgaSxvLGEscyxsPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxvPT09dCYmKG89ZS5taW1lVHlwZXx8bi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKG8pZm9yKHMgaW4gbClpZihsW3NdJiZsW3NdLnRlc3Qobykpe3UudW5zaGlmdChzKTticmVha31pZih1WzBdaW4gcilhPXVbMF07ZWxzZXtmb3IocyBpbiByKXtpZighdVswXXx8ZS5jb252ZXJ0ZXJzW3MrIiAiK3VbMF1dKXthPXM7YnJlYWt9aXx8KGk9cyl9YT1hfHxpfXJldHVybiBhPyhhIT09dVswXSYmdS51bnNoaWZ0KGEpLHJbYV0pOnR9ZnVuY3Rpb24gT24oZSx0LG4scil7dmFyIGksbyxhLHMsbCx1PXt9LGM9ZS5kYXRhVHlwZXMuc2xpY2UoKTtpZihjWzFdKWZvcihhIGluIGUuY29udmVydGVycyl1W2EudG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW2FdO289Yy5zaGlmdCgpO3doaWxlKG8paWYoZS5yZXNwb25zZUZpZWxkc1tvXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tvXV09dCksIWwmJnImJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLGw9byxvPWMuc2hpZnQoKSlpZigiKiI9PT1vKW89bDtlbHNlIGlmKCIqIiE9PWwmJmwhPT1vKXtpZihhPXVbbCsiICIrb118fHVbIiogIitvXSwhYSlmb3IoaSBpbiB1KWlmKHM9aS5zcGxpdCgiICIpLHNbMV09PT1vJiYoYT11W2wrIiAiK3NbMF1dfHx1WyIqICIrc1swXV0pKXthPT09ITA/YT11W2ldOnVbaV0hPT0hMCYmKG89c1swXSxjLnVuc2hpZnQoc1sxXSkpO2JyZWFrfWlmKGEhPT0hMClpZihhJiZlWyJ0aHJvd3MiXSl0PWEodCk7ZWxzZSB0cnl7dD1hKHQpfWNhdGNoKHApe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmE/cDoiTm8gY29udmVyc2lvbiBmcm9tICIrbCsiIHRvICIrb319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX14LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiB4Lmdsb2JhbEV2YWwoZSksZX19fSkseC5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2UuY2FjaGU9PT10JiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIixlLmdsb2JhbD0hMSl9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIG4scj1hLmhlYWR8fHgoImhlYWQiKVswXXx8YS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVuY3Rpb24odCxpKXtuPWEuY3JlYXRlRWxlbWVudCgic2NyaXB0Iiksbi5hc3luYz0hMCxlLnNjcmlwdENoYXJzZXQmJihuLmNoYXJzZXQ9ZS5zY3JpcHRDaGFyc2V0KSxuLnNyYz1lLnVybCxuLm9ubG9hZD1uLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlLHQpeyh0fHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpJiYobi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxuLnBhcmVudE5vZGUmJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxuPW51bGwsdHx8aSgyMDAsInN1Y2Nlc3MiKSl9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCh0LCEwKX19fX0pO3ZhciBGbj1bXSxCbj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1Gbi5wb3AoKXx8eC5leHBhbmRvKyJfIit2bisrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihuLHIsaSl7dmFyIG8sYSxzLGw9bi5qc29ucCE9PSExJiYoQm4udGVzdChuLnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiBuLmRhdGEmJiEobi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZCbi50ZXN0KG4uZGF0YSkmJiJkYXRhIik7cmV0dXJuIGx8fCJqc29ucCI9PT1uLmRhdGFUeXBlc1swXT8obz1uLmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENhbGxiYWNrLGw/bltsXT1uW2xdLnJlcGxhY2UoQm4sIiQxIitvKTpuLmpzb25wIT09ITEmJihuLnVybCs9KGJuLnRlc3Qobi51cmwpPyImIjoiPyIpK24uanNvbnArIj0iK28pLG4uY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKG8rIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LG4uZGF0YVR5cGVzWzBdPSJqc29uIixhPWVbb10sZVtvXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxpLmFsd2F5cyhmdW5jdGlvbigpe2Vbb109YSxuW29dJiYobi5qc29ucENhbGxiYWNrPXIuanNvbnBDYWxsYmFjayxGbi5wdXNoKG8pKSxzJiZ4LmlzRnVuY3Rpb24oYSkmJmEoc1swXSkscz1hPXR9KSwic2NyaXB0Iik6dH0pO3ZhciBQbixSbixXbj0wLCRuPWUuQWN0aXZlWE9iamVjdCYmZnVuY3Rpb24oKXt2YXIgZTtmb3IoZSBpbiBQbilQbltlXSh0LCEwKX07ZnVuY3Rpb24gSW4oKXt0cnl7cmV0dXJuIG5ldyBlLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe319ZnVuY3Rpb24gem4oKXt0cnl7cmV0dXJuIG5ldyBlLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2godCl7fX14LmFqYXhTZXR0aW5ncy54aHI9ZS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmSW4oKXx8em4oKX06SW4sUm49eC5hamF4U2V0dGluZ3MueGhyKCkseC5zdXBwb3J0LmNvcnM9ISFSbiYmIndpdGhDcmVkZW50aWFscyJpbiBSbixSbj14LnN1cHBvcnQuYWpheD0hIVJuLFJuJiZ4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NEb21haW58fHguc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHMsbD1uLnhocigpO2lmKG4udXNlcm5hbWU/bC5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jLG4udXNlcm5hbWUsbi5wYXNzd29yZCk6bC5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKSxuLnhockZpZWxkcylmb3IocyBpbiBuLnhockZpZWxkcylsW3NdPW4ueGhyRmllbGRzW3NdO24ubWltZVR5cGUmJmwub3ZlcnJpZGVNaW1lVHlwZSYmbC5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLG4uY3Jvc3NEb21haW58fGlbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGlbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTt0cnl7Zm9yKHMgaW4gaSlsLnNldFJlcXVlc3RIZWFkZXIocyxpW3NdKX1jYXRjaCh1KXt9bC5zZW5kKG4uaGFzQ29udGVudCYmbi5kYXRhfHxudWxsKSxyPWZ1bmN0aW9uKGUsaSl7dmFyIHMsdSxjLHA7dHJ5e2lmKHImJihpfHw0PT09bC5yZWFkeVN0YXRlKSlpZihyPXQsYSYmKGwub25yZWFkeXN0YXRlY2hhbmdlPXgubm9vcCwkbiYmZGVsZXRlIFBuW2FdKSxpKTQhPT1sLnJlYWR5U3RhdGUmJmwuYWJvcnQoKTtlbHNle3A9e30scz1sLnN0YXR1cyx1PWwuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksInN0cmluZyI9PXR5cGVvZiBsLnJlc3BvbnNlVGV4dCYmKHAudGV4dD1sLnJlc3BvbnNlVGV4dCk7dHJ5e2M9bC5zdGF0dXNUZXh0fWNhdGNoKGYpe2M9IiJ9c3x8IW4uaXNMb2NhbHx8bi5jcm9zc0RvbWFpbj8xMjIzPT09cyYmKHM9MjA0KTpzPXAudGV4dD8yMDA6NDA0fX1jYXRjaChkKXtpfHxvKC0xLGQpfXAmJm8ocyxjLHAsdSl9LG4uYXN5bmM/ND09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHIpOihhPSsrV24sJG4mJihQbnx8KFBuPXt9LHgoZSkudW5sb2FkKCRuKSksUG5bYV09ciksbC5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIodCwhMCl9fX19KTt2YXIgWG4sVW4sVm49L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFluPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3crIikoW2EteiVdKikkIiwiaSIpLEpuPS9xdWV1ZUhvb2tzJC8sR249W25yXSxRbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxyPW4uY3VyKCksaT1Zbi5leGVjKHQpLG89aSYmaVszXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLGE9KHguY3NzTnVtYmVyW2VdfHwicHgiIT09byYmK3IpJiZZbi5leGVjKHguY3NzKG4uZWxlbSxlKSkscz0xLGw9MjA7aWYoYSYmYVszXSE9PW8pe289b3x8YVszXSxpPWl8fFtdLGE9K3J8fDE7ZG8gcz1zfHwiLjUiLGEvPXMseC5zdHlsZShuLmVsZW0sZSxhK28pO3doaWxlKHMhPT0ocz1uLmN1cigpL3IpJiYxIT09cyYmLS1sKX1yZXR1cm4gaSYmKGE9bi5zdGFydD0rYXx8K3J8fDAsbi51bml0PW8sbi5lbmQ9aVsxXT9hKyhpWzFdKzEpKmlbMl06K2lbMl0pLG59XX07ZnVuY3Rpb24gS24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1huPXR9KSxYbj14Lm5vdygpfWZ1bmN0aW9uIFpuKGUsdCxuKXt2YXIgcixpPShRblt0XXx8W10pLmNvbmNhdChRblsiKiJdKSxvPTAsYT1pLmxlbmd0aDtmb3IoO2E+bztvKyspaWYocj1pW29dLmNhbGwobix0LGUpKXJldHVybiByfWZ1bmN0aW9uIGVyKGUsdCxuKXt2YXIgcixpLG89MCxhPUduLmxlbmd0aCxzPXguRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgbC5lbGVtfSksbD1mdW5jdGlvbigpe2lmKGkpcmV0dXJuITE7dmFyIHQ9WG58fEtuKCksbj1NYXRoLm1heCgwLHUuc3RhcnRUaW1lK3UuZHVyYXRpb24tdCkscj1uL3UuZHVyYXRpb258fDAsbz0xLXIsYT0wLGw9dS50d2VlbnMubGVuZ3RoO2Zvcig7bD5hO2ErKyl1LnR3ZWVuc1thXS5ydW4obyk7cmV0dXJuIHMubm90aWZ5V2l0aChlLFt1LG8sbl0pLDE+byYmbD9uOihzLnJlc29sdmVXaXRoKGUsW3VdKSwhMSl9LHU9cy5wcm9taXNlKHtlbGVtOmUscHJvcHM6eC5leHRlbmQoe30sdCksb3B0czp4LmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sbiksb3JpZ2luYWxQcm9wZXJ0aWVzOnQsb3JpZ2luYWxPcHRpb25zOm4sc3RhcnRUaW1lOlhufHxLbigpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIHI9eC5Ud2VlbihlLHUub3B0cyx0LG4sdS5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fHUub3B0cy5lYXNpbmcpO3JldHVybiB1LnR3ZWVucy5wdXNoKHIpLHJ9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxyPXQ/dS50d2VlbnMubGVuZ3RoOjA7aWYoaSlyZXR1cm4gdGhpcztmb3IoaT0hMDtyPm47bisrKXUudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9zLnJlc29sdmVXaXRoKGUsW3UsdF0pOnMucmVqZWN0V2l0aChlLFt1LHRdKSx0aGlzfX0pLGM9dS5wcm9wcztmb3IodHIoYyx1Lm9wdHMuc3BlY2lhbEVhc2luZyk7YT5vO28rKylpZihyPUduW29dLmNhbGwodSxlLGMsdS5vcHRzKSlyZXR1cm4gcjtyZXR1cm4geC5tYXAoYyxabix1KSx4LmlzRnVuY3Rpb24odS5vcHRzLnN0YXJ0KSYmdS5vcHRzLnN0YXJ0LmNhbGwoZSx1KSx4LmZ4LnRpbWVyKHguZXh0ZW5kKGwse2VsZW06ZSxhbmltOnUscXVldWU6dS5vcHRzLnF1ZXVlfSkpLHUucHJvZ3Jlc3ModS5vcHRzLnByb2dyZXNzKS5kb25lKHUub3B0cy5kb25lLHUub3B0cy5jb21wbGV0ZSkuZmFpbCh1Lm9wdHMuZmFpbCkuYWx3YXlzKHUub3B0cy5hbHdheXMpfWZ1bmN0aW9uIHRyKGUsdCl7dmFyIG4scixpLG8sYTtmb3IobiBpbiBlKWlmKHI9eC5jYW1lbENhc2UobiksaT10W3JdLG89ZVtuXSx4LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSxhPXguY3NzSG9va3Nbcl0sYSYmImV4cGFuZCJpbiBhKXtvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdO2ZvcihuIGluIG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9eC5BbmltYXRpb249eC5leHRlbmQoZXIse3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXt4LmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVsiKiJdKTplPWUuc3BsaXQoIiAiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO2k+cjtyKyspbj1lW3JdLFFuW25dPVFuW25dfHxbXSxRbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P0duLnVuc2hpZnQoZSk6R24ucHVzaChlKX19KTtmdW5jdGlvbiBucihlLHQsbil7dmFyIHIsaSxvLGEscyxsLHU9dGhpcyxjPXt9LHA9ZS5zdHlsZSxmPWUubm9kZVR5cGUmJm5uKGUpLGQ9eC5fZGF0YShlLCJmeHNob3ciKTtuLnF1ZXVlfHwocz14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09cy51bnF1ZXVlZCYmKHMudW5xdWV1ZWQ9MCxsPXMuZW1wdHkuZmlyZSxzLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtzLnVucXVldWVkfHxsKCl9KSxzLnVucXVldWVkKyssdS5hbHdheXMoZnVuY3Rpb24oKXt1LmFsd2F5cyhmdW5jdGlvbigpe3MudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxzLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKHguc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiYiaW5saW5lIiE9PWxuKGUubm9kZU5hbWUpP3Auem9vbT0xOnAuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PSJoaWRkZW4iLHguc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzfHx1LmFsd2F5cyhmdW5jdGlvbigpe3Aub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxwLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLHAub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKHIgaW4gdClpZihpPXRbcl0sVm4uZXhlYyhpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHwidG9nZ2xlIj09PWksaT09PShmPyJoaWRlIjoic2hvdyIpKWNvbnRpbnVlO2Nbcl09ZCYmZFtyXXx8eC5zdHlsZShlLHIpfWlmKCF4LmlzRW1wdHlPYmplY3QoYykpe2Q/ImhpZGRlbiJpbiBkJiYoZj1kLmhpZGRlbik6ZD14Ll9kYXRhKGUsImZ4c2hvdyIse30pLG8mJihkLmhpZGRlbj0hZiksZj94KGUpLnNob3coKTp1LmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLHUuZG9uZShmdW5jdGlvbigpe3ZhciB0O3guX3JlbW92ZURhdGEoZSwiZnhzaG93Iik7Zm9yKHQgaW4gYyl4LnN0eWxlKGUsdCxjW3RdKX0pO2ZvcihyIGluIGMpYT1abihmP2Rbcl06MCxyLHUpLHIgaW4gZHx8KGRbcl09YS5zdGFydCxmJiYoYS5lbmQ9YS5zdGFydCxhLnN0YXJ0PSJ3aWR0aCI9PT1yfHwiaGVpZ2h0Ij09PXI/MTowKSl9fWZ1bmN0aW9uIHJyKGUsdCxuLHIsaSl7cmV0dXJuIG5ldyByci5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfXguVHdlZW49cnIscnIucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpycixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHwic3dpbmciLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoeC5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1yci5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9dD10aGlzLm9wdGlvbnMuZHVyYXRpb24/eC5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxyci5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9cnIucHJvdG90eXBlLHJyLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09ZS5lbGVtW2UucHJvcF18fGUuZWxlbS5zdHlsZSYmbnVsbCE9ZS5lbGVtLnN0eWxlW2UucHJvcF0/KHQ9eC5jc3MoZS5lbGVtLGUucHJvcCwiIiksdCYmImF1dG8iIT09dD90OjApOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7eC5meC5zdGVwW2UucHJvcF0/eC5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYobnVsbCE9ZS5lbGVtLnN0eWxlW3guY3NzUHJvcHNbZS5wcm9wXV18fHguY3NzSG9va3NbZS5wcm9wXSk/eC5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0scnIucHJvcEhvb2tzLnNjcm9sbFRvcD1yci5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx4LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49eC5mblt0XTt4LmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoaXIodCwhMCksZSxyLGkpfX0pLHguZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKG5uKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT14LmlzRW1wdHlPYmplY3QoZSksbz14LnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9ZXIodGhpcyx4LmV4dGVuZCh7fSxlKSxvKTsoaXx8eC5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJnQuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fG8ucXVldWU9PT0hMT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KHIpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJihyPW4sbj1lLGU9dCksbiYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLG49bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz14LnRpbWVycyxhPXguX2RhdGEodGhpcyk7aWYobilhW25dJiZhW25dLnN0b3AmJmkoYVtuXSk7ZWxzZSBmb3IobiBpbiBhKWFbbl0mJmFbbl0uc3RvcCYmSm4udGVzdChuKSYmaShhW25dKTtmb3Iobj1vLmxlbmd0aDtuLS07KW9bbl0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJm9bbl0ucXVldWUhPT1lfHwob1tuXS5hbmltLnN0b3AociksdD0hMSxvLnNwbGljZShuLDEpKTsodHx8IXIpJiZ4LmRlcXVldWUodGhpcyxlKX0pfSxmaW5pc2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT0hMSYmKGU9ZXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj14Ll9kYXRhKHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxhPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7YT50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBpcihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246aXIoInNob3ciKSxzbGlkZVVwOmlyKCJoaWRlIiksc2xpZGVUb2dnbGU6aXIoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9cnIucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj14LnRpbWVycyxyPTA7Zm9yKFhuPXgubm93KCk7bi5sZW5ndGg+cjtyKyspZT1uW3JdLGUoKXx8bltyXSE9PWV8fG4uc3BsaWNlKHItLSwxKTtuLmxlbmd0aHx8eC5meC5zdG9wKCksWG49dH0seC5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJngudGltZXJzLnB1c2goZSkmJnguZnguc3RhcnQoKX0seC5meC5pbnRlcnZhbD0xMyx4LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7VW58fChVbj1zZXRJbnRlcnZhbCh4LmZ4LnRpY2sseC5meC5pbnRlcnZhbCkpfSx4LmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFVuKSxVbj1udWxsfSx4LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSx4LmZ4LnN0ZXA9e30seC5leHByJiZ4LmV4cHIuZmlsdGVycyYmKHguZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB4LmdyZXAoeC50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KSx4LmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXt4Lm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIG4scixvPXt0b3A6MCxsZWZ0OjB9LGE9dGhpc1swXSxzPWEmJmEub3duZXJEb2N1bWVudDtpZihzKXJldHVybiBuPXMuZG9jdW1lbnRFbGVtZW50LHguY29udGFpbnMobixhKT8odHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09aSYmKG89YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1vcihzKSx7dG9wOm8udG9wKyhyLnBhZ2VZT2Zmc2V0fHxuLnNjcm9sbFRvcCktKG4uY2xpZW50VG9wfHwwKSxsZWZ0Om8ubGVmdCsoci5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0KS0obi5jbGllbnRMZWZ0fHwwKX0pOm99LHgub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXguY3NzKGUsInBvc2l0aW9uIik7InN0YXRpYyI9PT1yJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKTt2YXIgaT14KGUpLG89aS5vZmZzZXQoKSxhPXguY3NzKGUsInRvcCIpLHM9eC5jc3MoZSwibGVmdCIpLGw9KCJhYnNvbHV0ZSI9PT1yfHwiZml4ZWQiPT09cikmJnguaW5BcnJheSgiYXV0byIsW2Esc10pPi0xLHU9e30sYz17fSxwLGY7bD8oYz1pLnBvc2l0aW9uKCkscD1jLnRvcCxmPWMubGVmdCk6KHA9cGFyc2VGbG9hdChhKXx8MCxmPXBhcnNlRmxvYXQocyl8fDApLHguaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixvKSksbnVsbCE9dC50b3AmJih1LnRvcD10LnRvcC1vLnRvcCtwKSxudWxsIT10LmxlZnQmJih1LmxlZnQ9dC5sZWZ0LW8ubGVmdCtmKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSx1KTppLmNzcyh1KX19LHguZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj17dG9wOjAsbGVmdDowfSxyPXRoaXNbMF07cmV0dXJuImZpeGVkIj09PXguY3NzKHIsInBvc2l0aW9uIik/dD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLHgubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwobj1lLm9mZnNldCgpKSxuLnRvcCs9eC5jc3MoZVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxuLmxlZnQrPXguY3NzKGVbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOnQudG9wLW4udG9wLXguY3NzKHIsIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LW4ubGVmdC14LmNzcyhyLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fHM7d2hpbGUoZSYmIXgubm9kZU5hbWUoZSwiaHRtbCIpJiYic3RhdGljIj09PXguY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8c30pfX0pLHguZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihlLG4pe3ZhciByPS9ZLy50ZXN0KG4pO3guZm5bZV09ZnVuY3Rpb24oaSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxpLG8pe3ZhciBhPW9yKGUpO3JldHVybiBvPT09dD9hP24gaW4gYT9hW25dOmEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2ldOmVbaV06KGE/YS5zY3JvbGxUbyhyP3goYSkuc2Nyb2xsTGVmdCgpOm8scj9vOngoYSkuc2Nyb2xsVG9wKCkpOmVbaV09byx0KX0sZSxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gb3IoZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZT9lLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvdzohMX14LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLG4pe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDpuLCIiOiJvdXRlciIrZX0sZnVuY3Rpb24ocixpKXt4LmZuW2ldPWZ1bmN0aW9uKGksbyl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGkpLHM9cnx8KGk9PT0hMHx8bz09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihuLHIsaSl7dmFyIG87cmV0dXJuIHguaXNXaW5kb3cobik/bi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PW4ubm9kZVR5cGU/KG89bi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgobi5ib2R5WyJzY3JvbGwiK2VdLG9bInNjcm9sbCIrZV0sbi5ib2R5WyJvZmZzZXQiK2VdLG9bIm9mZnNldCIrZV0sb1siY2xpZW50IitlXSkpOmk9PT10P3guY3NzKG4scixzKTp4LnN0eWxlKG4scixpLHMpfSxuLGE/aTp0LGEsbnVsbCl9fSl9KSx4LmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHguZm4uYW5kU2VsZj14LmZuLmFkZEJhY2ssIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz14OihlLmpRdWVyeT1lLiQ9eCwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4geH0pKX0pKHdpbmRvdyk7DQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="23" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jquery-ui.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jquery-ui.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="9" startDateTime="2024-11-07T09:35:45.923+00:00" startTime="2233" endTime="2279" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="9" waitTime="0" receiveTime="30" sslNegotiateTime="-1" responseBodySize="343963">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qcXVlcnktdWkuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>343700</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MzQzNzAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMzQzNzAwDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpYLVBvd2VyZWQtQnk6IFNlcnZsZXQvMy4wDQpYLVVBLUNvbXBhdGlibGU6IElFPTgNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjQgT2N0IDIwMjQgMjA6MjY6NDQgR01UDQpDb250ZW50LUxhbmd1YWdlOiBlbi1VUw0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyohIGpRdWVyeSBVSSAtIHYxLjEyLjEgLSAyMDE4LTAzLTA2DQoqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiogSW5jbHVkZXM6IHdpZGdldC5qcywgcG9zaXRpb24uanMsIGRhdGEuanMsIGRpc2FibGUtc2VsZWN0aW9uLmpzLCBmb2N1c2FibGUuanMsIGZvcm0tcmVzZXQtbWl4aW4uanMsIGpxdWVyeS0xLTcuanMsIGtleWNvZGUuanMsIGxhYmVscy5qcywgc2Nyb2xsLXBhcmVudC5qcywgdGFiYmFibGUuanMsIHVuaXF1ZS1pZC5qcywgd2lkZ2V0cy9kcmFnZ2FibGUuanMsIHdpZGdldHMvZHJvcHBhYmxlLmpzLCB3aWRnZXRzL3Jlc2l6YWJsZS5qcywgd2lkZ2V0cy9zZWxlY3RhYmxlLmpzLCB3aWRnZXRzL3NvcnRhYmxlLmpzLCB3aWRnZXRzL2J1dHRvbi5qcywgd2lkZ2V0cy9jaGVja2JveHJhZGlvLmpzLCB3aWRnZXRzL2NvbnRyb2xncm91cC5qcywgd2lkZ2V0cy9kYXRlcGlja2VyLmpzLCB3aWRnZXRzL2RpYWxvZy5qcywgd2lkZ2V0cy9tb3VzZS5qcywgd2lkZ2V0cy9wcm9ncmVzc2Jhci5qcywgd2lkZ2V0cy90b29sdGlwLmpzDQoqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi8NCg0KKGZ1bmN0aW9uKCBmYWN0b3J5ICkgew0KCWlmICggdHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kICkgew0KDQoJCS8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4NCgkJZGVmaW5lKFsgImpxdWVyeSIgXSwgZmFjdG9yeSApOw0KCX0gZWxzZSB7DQoNCgkJLy8gQnJvd3NlciBnbG9iYWxzDQoJCWZhY3RvcnkoIGpRdWVyeSApOw0KCX0NCn0oZnVuY3Rpb24oICQgKSB7DQoNCiQudWkgPSAkLnVpIHx8IHt9Ow0KDQp2YXIgdmVyc2lvbiA9ICQudWkudmVyc2lvbiA9ICIxLjEyLjEiOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIFdpZGdldCAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogV2lkZ2V0DQovLz4+Z3JvdXA6IENvcmUNCi8vPj5kZXNjcmlwdGlvbjogUHJvdmlkZXMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBzdGF0ZWZ1bCB3aWRnZXRzIHdpdGggYSBjb21tb24gQVBJLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS53aWRnZXQvDQovLz4+ZGVtb3M6IGh0dHA6Ly9qcXVlcnl1aS5jb20vd2lkZ2V0Lw0KDQoNCg0KdmFyIHdpZGdldFV1aWQgPSAwOw0KdmFyIHdpZGdldFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOw0KDQokLmNsZWFuRGF0YSA9ICggZnVuY3Rpb24oIG9yaWcgKSB7DQoJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtcyApIHsNCgkJdmFyIGV2ZW50cywgZWxlbSwgaTsNCgkJZm9yICggaSA9IDA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7DQoJCQl0cnkgew0KDQoJCQkJLy8gT25seSB0cmlnZ2VyIHJlbW92ZSB3aGVuIG5lY2Vzc2FyeSB0byBzYXZlIHRpbWUNCgkJCQlldmVudHMgPSAkLl9kYXRhKCBlbGVtLCAiZXZlbnRzIiApOw0KCQkJCWlmICggZXZlbnRzICYmIGV2ZW50cy5yZW1vdmUgKSB7DQoJCQkJCSQoIGVsZW0gKS50cmlnZ2VySGFuZGxlciggInJlbW92ZSIgKTsNCgkJCQl9DQoNCgkJCS8vIEh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgyMzUNCgkJCX0gY2F0Y2ggKCBlICkge30NCgkJfQ0KCQlvcmlnKCBlbGVtcyApOw0KCX07DQp9ICkoICQuY2xlYW5EYXRhICk7DQoNCiQud2lkZ2V0ID0gZnVuY3Rpb24oIG5hbWUsIGJhc2UsIHByb3RvdHlwZSApIHsNCgl2YXIgZXhpc3RpbmdDb25zdHJ1Y3RvciwgY29uc3RydWN0b3IsIGJhc2VQcm90b3R5cGU7DQoNCgkvLyBQcm94aWVkUHJvdG90eXBlIGFsbG93cyB0aGUgcHJvdmlkZWQgcHJvdG90eXBlIHRvIHJlbWFpbiB1bm1vZGlmaWVkDQoJLy8gc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBhcyBhIG1peGluIGZvciBtdWx0aXBsZSB3aWRnZXRzICgjODg3NikNCgl2YXIgcHJveGllZFByb3RvdHlwZSA9IHt9Ow0KDQoJdmFyIG5hbWVzcGFjZSA9IG5hbWUuc3BsaXQoICIuIiApWyAwIF07DQoJbmFtZSA9IG5hbWUuc3BsaXQoICIuIiApWyAxIF07DQoJdmFyIGZ1bGxOYW1lID0gbmFtZXNwYWNlICsgIi0iICsgbmFtZTsNCg0KCWlmICggIXByb3RvdHlwZSApIHsNCgkJcHJvdG90eXBlID0gYmFzZTsNCgkJYmFzZSA9ICQuV2lkZ2V0Ow0KCX0NCg0KCWlmICggJC5pc0FycmF5KCBwcm90b3R5cGUgKSApIHsNCgkJcHJvdG90eXBlID0gJC5leHRlbmQuYXBwbHkoIG51bGwsIFsge30gXS5jb25jYXQoIHByb3RvdHlwZSApICk7DQoJfQ0KDQoJLy8gQ3JlYXRlIHNlbGVjdG9yIGZvciBwbHVnaW4NCgkkLmV4cHJbICI6IiBdWyBmdWxsTmFtZS50b0xvd2VyQ2FzZSgpIF0gPSBmdW5jdGlvbiggZWxlbSApIHsNCgkJcmV0dXJuICEhJC5kYXRhKCBlbGVtLCBmdWxsTmFtZSApOw0KCX07DQoNCgkkWyBuYW1lc3BhY2UgXSA9ICRbIG5hbWVzcGFjZSBdIHx8IHt9Ow0KCWV4aXN0aW5nQ29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdOw0KCWNvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBlbGVtZW50ICkgew0KDQoJCS8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCAibmV3IiBrZXl3b3JkDQoJCWlmICggIXRoaXMuX2NyZWF0ZVdpZGdldCApIHsNCgkJCXJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTsNCgkJfQ0KDQoJCS8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBpbml0aWFsaXppbmcgZm9yIHNpbXBsZSBpbmhlcml0YW5jZQ0KCQkvLyBtdXN0IHVzZSAibmV3IiBrZXl3b3JkICh0aGUgY29kZSBhYm92ZSBhbHdheXMgcGFzc2VzIGFyZ3MpDQoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsNCgkJCXRoaXMuX2NyZWF0ZVdpZGdldCggb3B0aW9ucywgZWxlbWVudCApOw0KCQl9DQoJfTsNCg0KCS8vIEV4dGVuZCB3aXRoIHRoZSBleGlzdGluZyBjb25zdHJ1Y3RvciB0byBjYXJyeSBvdmVyIGFueSBzdGF0aWMgcHJvcGVydGllcw0KCSQuZXh0ZW5kKCBjb25zdHJ1Y3RvciwgZXhpc3RpbmdDb25zdHJ1Y3Rvciwgew0KCQl2ZXJzaW9uOiBwcm90b3R5cGUudmVyc2lvbiwNCg0KCQkvLyBDb3B5IHRoZSBvYmplY3QgdXNlZCB0byBjcmVhdGUgdGhlIHByb3RvdHlwZSBpbiBjYXNlIHdlIG5lZWQgdG8NCgkJLy8gcmVkZWZpbmUgdGhlIHdpZGdldCBsYXRlcg0KCQlfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksDQoNCgkJLy8gVHJhY2sgd2lkZ2V0cyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIHdpZGdldCBpbiBjYXNlIHRoaXMgd2lkZ2V0IGlzDQoJCS8vIHJlZGVmaW5lZCBhZnRlciBhIHdpZGdldCBpbmhlcml0cyBmcm9tIGl0DQoJCV9jaGlsZENvbnN0cnVjdG9yczogW10NCgl9ICk7DQoNCgliYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTsNCg0KCS8vIFdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZQ0KCS8vIG90aGVyd2lzZSB3ZSdsbCBtb2RpZnkgdGhlIG9wdGlvbnMgaGFzaCBvbiB0aGUgcHJvdG90eXBlIHRoYXQgd2UncmUNCgkvLyBpbmhlcml0aW5nIGZyb20NCgliYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTsNCgkkLmVhY2goIHByb3RvdHlwZSwgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkgew0KCQlpZiAoICEkLmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7DQoJCQlwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSB2YWx1ZTsNCgkJCXJldHVybjsNCgkJfQ0KCQlwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSAoIGZ1bmN0aW9uKCkgew0KCQkJZnVuY3Rpb24gX3N1cGVyKCkgew0KCQkJCXJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsNCgkJCX0NCg0KCQkJZnVuY3Rpb24gX3N1cGVyQXBwbHkoIGFyZ3MgKSB7DQoJCQkJcmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKTsNCgkJCX0NCg0KCQkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCQkJCXZhciBfX3N1cGVyID0gdGhpcy5fc3VwZXI7DQoJCQkJdmFyIF9fc3VwZXJBcHBseSA9IHRoaXMuX3N1cGVyQXBwbHk7DQoJCQkJdmFyIHJldHVyblZhbHVlOw0KDQoJCQkJdGhpcy5fc3VwZXIgPSBfc3VwZXI7DQoJCQkJdGhpcy5fc3VwZXJBcHBseSA9IF9zdXBlckFwcGx5Ow0KDQoJCQkJcmV0dXJuVmFsdWUgPSB2YWx1ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7DQoNCgkJCQl0aGlzLl9zdXBlciA9IF9fc3VwZXI7DQoJCQkJdGhpcy5fc3VwZXJBcHBseSA9IF9fc3VwZXJBcHBseTsNCg0KCQkJCXJldHVybiByZXR1cm5WYWx1ZTsNCgkJCX07DQoJCX0gKSgpOw0KCX0gKTsNCgljb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAkLndpZGdldC5leHRlbmQoIGJhc2VQcm90b3R5cGUsIHsNCg0KCQkvLyBUT0RPOiByZW1vdmUgc3VwcG9ydCBmb3Igd2lkZ2V0RXZlbnRQcmVmaXgNCgkJLy8gYWx3YXlzIHVzZSB0aGUgbmFtZSArIGEgY29sb24gYXMgdGhlIHByZWZpeCwgZS5nLiwgZHJhZ2dhYmxlOnN0YXJ0DQoJCS8vIGRvbid0IHByZWZpeCBmb3Igd2lkZ2V0cyB0aGF0IGFyZW4ndCBET00tYmFzZWQNCgkJd2lkZ2V0RXZlbnRQcmVmaXg6IGV4aXN0aW5nQ29uc3RydWN0b3IgPyAoIGJhc2VQcm90b3R5cGUud2lkZ2V0RXZlbnRQcmVmaXggfHwgbmFtZSApIDogbmFtZQ0KCX0sIHByb3hpZWRQcm90b3R5cGUsIHsNCgkJY29uc3RydWN0b3I6IGNvbnN0cnVjdG9yLA0KCQluYW1lc3BhY2U6IG5hbWVzcGFjZSwNCgkJd2lkZ2V0TmFtZTogbmFtZSwNCgkJd2lkZ2V0RnVsbE5hbWU6IGZ1bGxOYW1lDQoJfSApOw0KDQoJLy8gSWYgdGhpcyB3aWRnZXQgaXMgYmVpbmcgcmVkZWZpbmVkIHRoZW4gd2UgbmVlZCB0byBmaW5kIGFsbCB3aWRnZXRzIHRoYXQNCgkvLyBhcmUgaW5oZXJpdGluZyBmcm9tIGl0IGFuZCByZWRlZmluZSBhbGwgb2YgdGhlbSBzbyB0aGF0IHRoZXkgaW5oZXJpdCBmcm9tDQoJLy8gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoaXMgd2lkZ2V0LiBXZSdyZSBlc3NlbnRpYWxseSB0cnlpbmcgdG8gcmVwbGFjZSBvbmUNCgkvLyBsZXZlbCBpbiB0aGUgcHJvdG90eXBlIGNoYWluLg0KCWlmICggZXhpc3RpbmdDb25zdHJ1Y3RvciApIHsNCgkJJC5lYWNoKCBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycywgZnVuY3Rpb24oIGksIGNoaWxkICkgew0KCQkJdmFyIGNoaWxkUHJvdG90eXBlID0gY2hpbGQucHJvdG90eXBlOw0KDQoJCQkvLyBSZWRlZmluZSB0aGUgY2hpbGQgd2lkZ2V0IHVzaW5nIHRoZSBzYW1lIHByb3RvdHlwZSB0aGF0IHdhcw0KCQkJLy8gb3JpZ2luYWxseSB1c2VkLCBidXQgaW5oZXJpdCBmcm9tIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGUgYmFzZQ0KCQkJJC53aWRnZXQoIGNoaWxkUHJvdG90eXBlLm5hbWVzcGFjZSArICIuIiArIGNoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsIGNvbnN0cnVjdG9yLA0KCQkJCWNoaWxkLl9wcm90byApOw0KCQl9ICk7DQoNCgkJLy8gUmVtb3ZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNoaWxkIGNvbnN0cnVjdG9ycyBmcm9tIHRoZSBvbGQgY29uc3RydWN0b3INCgkJLy8gc28gdGhlIG9sZCBjaGlsZCBjb25zdHJ1Y3RvcnMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkDQoJCWRlbGV0ZSBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9yczsNCgl9IGVsc2Ugew0KCQliYXNlLl9jaGlsZENvbnN0cnVjdG9ycy5wdXNoKCBjb25zdHJ1Y3RvciApOw0KCX0NCg0KCSQud2lkZ2V0LmJyaWRnZSggbmFtZSwgY29uc3RydWN0b3IgKTsNCg0KCXJldHVybiBjb25zdHJ1Y3RvcjsNCn07DQoNCiQud2lkZ2V0LmV4dGVuZCA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7DQoJdmFyIGlucHV0ID0gd2lkZ2V0U2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICk7DQoJdmFyIGlucHV0SW5kZXggPSAwOw0KCXZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDsNCgl2YXIga2V5Ow0KCXZhciB2YWx1ZTsNCg0KCWZvciAoIDsgaW5wdXRJbmRleCA8IGlucHV0TGVuZ3RoOyBpbnB1dEluZGV4KysgKSB7DQoJCWZvciAoIGtleSBpbiBpbnB1dFsgaW5wdXRJbmRleCBdICkgew0KCQkJdmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTsNCgkJCWlmICggaW5wdXRbIGlucHV0SW5kZXggXS5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCApIHsNCg0KCQkJCS8vIENsb25lIG9iamVjdHMNCgkJCQlpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSApIHsNCgkJCQkJdGFyZ2V0WyBrZXkgXSA9ICQuaXNQbGFpbk9iamVjdCggdGFyZ2V0WyBrZXkgXSApID8NCgkJCQkJCSQud2lkZ2V0LmV4dGVuZCgge30sIHRhcmdldFsga2V5IF0sIHZhbHVlICkgOg0KDQoJCQkJCQkvLyBEb24ndCBleHRlbmQgc3RyaW5ncywgYXJyYXlzLCBldGMuIHdpdGggb2JqZWN0cw0KCQkJCQkJJC53aWRnZXQuZXh0ZW5kKCB7fSwgdmFsdWUgKTsNCg0KCQkJCS8vIENvcHkgZXZlcnl0aGluZyBlbHNlIGJ5IHJlZmVyZW5jZQ0KCQkJCX0gZWxzZSB7DQoJCQkJCXRhcmdldFsga2V5IF0gPSB2YWx1ZTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQoJcmV0dXJuIHRhcmdldDsNCn07DQoNCiQud2lkZ2V0LmJyaWRnZSA9IGZ1bmN0aW9uKCBuYW1lLCBvYmplY3QgKSB7DQoJdmFyIGZ1bGxOYW1lID0gb2JqZWN0LnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZSB8fCBuYW1lOw0KCSQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zICkgew0KCQl2YXIgaXNNZXRob2RDYWxsID0gdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciOw0KCQl2YXIgYXJncyA9IHdpZGdldFNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApOw0KCQl2YXIgcmV0dXJuVmFsdWUgPSB0aGlzOw0KDQoJCWlmICggaXNNZXRob2RDYWxsICkgew0KDQoJCQkvLyBJZiB0aGlzIGlzIGFuIGVtcHR5IGNvbGxlY3Rpb24sIHdlIG5lZWQgdG8gaGF2ZSB0aGUgaW5zdGFuY2UgbWV0aG9kDQoJCQkvLyByZXR1cm4gdW5kZWZpbmVkIGluc3RlYWQgb2YgdGhlIGpRdWVyeSBpbnN0YW5jZQ0KCQkJaWYgKCAhdGhpcy5sZW5ndGggJiYgb3B0aW9ucyA9PT0gImluc3RhbmNlIiApIHsNCgkJCQlyZXR1cm5WYWx1ZSA9IHVuZGVmaW5lZDsNCgkJCX0gZWxzZSB7DQoJCQkJdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQkJdmFyIG1ldGhvZFZhbHVlOw0KCQkJCQl2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7DQoNCgkJCQkJaWYgKCBvcHRpb25zID09PSAiaW5zdGFuY2UiICkgew0KCQkJCQkJcmV0dXJuVmFsdWUgPSBpbnN0YW5jZTsNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KDQoJCQkJCWlmICggIWluc3RhbmNlICkgew0KCQkJCQkJcmV0dXJuICQuZXJyb3IoICJjYW5ub3QgY2FsbCBtZXRob2RzIG9uICIgKyBuYW1lICsNCgkJCQkJCQkiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyAiICsNCgkJCQkJCQkiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICciICsgb3B0aW9ucyArICInIiApOw0KCQkJCQl9DQoNCgkJCQkJaWYgKCAhJC5pc0Z1bmN0aW9uKCBpbnN0YW5jZVsgb3B0aW9ucyBdICkgfHwgb3B0aW9ucy5jaGFyQXQoIDAgKSA9PT0gIl8iICkgew0KCQkJCQkJcmV0dXJuICQuZXJyb3IoICJubyBzdWNoIG1ldGhvZCAnIiArIG9wdGlvbnMgKyAiJyBmb3IgIiArIG5hbWUgKw0KCQkJCQkJCSIgd2lkZ2V0IGluc3RhbmNlIiApOw0KCQkJCQl9DQoNCgkJCQkJbWV0aG9kVmFsdWUgPSBpbnN0YW5jZVsgb3B0aW9ucyBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApOw0KDQoJCQkJCWlmICggbWV0aG9kVmFsdWUgIT09IGluc3RhbmNlICYmIG1ldGhvZFZhbHVlICE9PSB1bmRlZmluZWQgKSB7DQoJCQkJCQlyZXR1cm5WYWx1ZSA9IG1ldGhvZFZhbHVlICYmIG1ldGhvZFZhbHVlLmpxdWVyeSA/DQoJCQkJCQkJcmV0dXJuVmFsdWUucHVzaFN0YWNrKCBtZXRob2RWYWx1ZS5nZXQoKSApIDoNCgkJCQkJCQltZXRob2RWYWx1ZTsNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCX0gKTsNCgkJCX0NCgkJfSBlbHNlIHsNCg0KCQkJLy8gQWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0DQoJCQlpZiAoIGFyZ3MubGVuZ3RoICkgew0KCQkJCW9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQuYXBwbHkoIG51bGwsIFsgb3B0aW9ucyBdLmNvbmNhdCggYXJncyApICk7DQoJCQl9DQoNCgkJCXRoaXMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQkJdmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApOw0KCQkJCWlmICggaW5zdGFuY2UgKSB7DQoJCQkJCWluc3RhbmNlLm9wdGlvbiggb3B0aW9ucyB8fCB7fSApOw0KCQkJCQlpZiAoIGluc3RhbmNlLl9pbml0ICkgew0KCQkJCQkJaW5zdGFuY2UuX2luaXQoKTsNCgkJCQkJfQ0KCQkJCX0gZWxzZSB7DQoJCQkJCSQuZGF0YSggdGhpcywgZnVsbE5hbWUsIG5ldyBvYmplY3QoIG9wdGlvbnMsIHRoaXMgKSApOw0KCQkJCX0NCgkJCX0gKTsNCgkJfQ0KDQoJCXJldHVybiByZXR1cm5WYWx1ZTsNCgl9Ow0KfTsNCg0KJC5XaWRnZXQgPSBmdW5jdGlvbiggLyogb3B0aW9ucywgZWxlbWVudCAqLyApIHt9Ow0KJC5XaWRnZXQuX2NoaWxkQ29uc3RydWN0b3JzID0gW107DQoNCiQuV2lkZ2V0LnByb3RvdHlwZSA9IHsNCgl3aWRnZXROYW1lOiAid2lkZ2V0IiwNCgl3aWRnZXRFdmVudFByZWZpeDogIiIsDQoJZGVmYXVsdEVsZW1lbnQ6ICI8ZGl2PiIsDQoNCglvcHRpb25zOiB7DQoJCWNsYXNzZXM6IHt9LA0KCQlkaXNhYmxlZDogZmFsc2UsDQoNCgkJLy8gQ2FsbGJhY2tzDQoJCWNyZWF0ZTogbnVsbA0KCX0sDQoNCglfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHsNCgkJZWxlbWVudCA9ICQoIGVsZW1lbnQgfHwgdGhpcy5kZWZhdWx0RWxlbWVudCB8fCB0aGlzIClbIDAgXTsNCgkJdGhpcy5lbGVtZW50ID0gJCggZWxlbWVudCApOw0KCQl0aGlzLnV1aWQgPSB3aWRnZXRVdWlkKys7DQoJCXRoaXMuZXZlbnROYW1lc3BhY2UgPSAiLiIgKyB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQ7DQoNCgkJdGhpcy5iaW5kaW5ncyA9ICQoKTsNCgkJdGhpcy5ob3ZlcmFibGUgPSAkKCk7DQoJCXRoaXMuZm9jdXNhYmxlID0gJCgpOw0KCQl0aGlzLmNsYXNzZXNFbGVtZW50TG9va3VwID0ge307DQoNCgkJaWYgKCBlbGVtZW50ICE9PSB0aGlzICkgew0KCQkJJC5kYXRhKCBlbGVtZW50LCB0aGlzLndpZGdldEZ1bGxOYW1lLCB0aGlzICk7DQoJCQl0aGlzLl9vbiggdHJ1ZSwgdGhpcy5lbGVtZW50LCB7DQoJCQkJcmVtb3ZlOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJCWlmICggZXZlbnQudGFyZ2V0ID09PSBlbGVtZW50ICkgew0KCQkJCQkJdGhpcy5kZXN0cm95KCk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9ICk7DQoJCQl0aGlzLmRvY3VtZW50ID0gJCggZWxlbWVudC5zdHlsZSA/DQoNCgkJCQkvLyBFbGVtZW50IHdpdGhpbiB0aGUgZG9jdW1lbnQNCgkJCQllbGVtZW50Lm93bmVyRG9jdW1lbnQgOg0KDQoJCQkJLy8gRWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnQNCgkJCQllbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQgKTsNCgkJCXRoaXMud2luZG93ID0gJCggdGhpcy5kb2N1bWVudFsgMCBdLmRlZmF1bHRWaWV3IHx8IHRoaXMuZG9jdW1lbnRbIDAgXS5wYXJlbnRXaW5kb3cgKTsNCgkJfQ0KDQoJCXRoaXMub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sDQoJCQl0aGlzLm9wdGlvbnMsDQoJCQl0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksDQoJCQlvcHRpb25zICk7DQoNCgkJdGhpcy5fY3JlYXRlKCk7DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7DQoJCQl0aGlzLl9zZXRPcHRpb25EaXNhYmxlZCggdGhpcy5vcHRpb25zLmRpc2FibGVkICk7DQoJCX0NCg0KCQl0aGlzLl90cmlnZ2VyKCAiY3JlYXRlIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTsNCgkJdGhpcy5faW5pdCgpOw0KCX0sDQoNCglfZ2V0Q3JlYXRlT3B0aW9uczogZnVuY3Rpb24oKSB7DQoJCXJldHVybiB7fTsNCgl9LA0KDQoJX2dldENyZWF0ZUV2ZW50RGF0YTogJC5ub29wLA0KDQoJX2NyZWF0ZTogJC5ub29wLA0KDQoJX2luaXQ6ICQubm9vcCwNCg0KCWRlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9IHRoaXM7DQoNCgkJdGhpcy5fZGVzdHJveSgpOw0KCQkkLmVhY2goIHRoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXAsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoIHZhbHVlLCBrZXkgKTsNCgkJfSApOw0KDQoJCS8vIFdlIGNhbiBwcm9iYWJseSByZW1vdmUgdGhlIHVuYmluZCBjYWxscyBpbiAyLjANCgkJLy8gYWxsIGV2ZW50IGJpbmRpbmdzIHNob3VsZCBnbyB0aHJvdWdoIHRoaXMuX29uKCkNCgkJdGhpcy5lbGVtZW50DQoJCQkub2ZmKCB0aGlzLmV2ZW50TmFtZXNwYWNlICkNCgkJCS5yZW1vdmVEYXRhKCB0aGlzLndpZGdldEZ1bGxOYW1lICk7DQoJCXRoaXMud2lkZ2V0KCkNCgkJCS5vZmYoIHRoaXMuZXZlbnROYW1lc3BhY2UgKQ0KCQkJLnJlbW92ZUF0dHIoICJhcmlhLWRpc2FibGVkIiApOw0KDQoJCS8vIENsZWFuIHVwIGV2ZW50cyBhbmQgc3RhdGVzDQoJCXRoaXMuYmluZGluZ3Mub2ZmKCB0aGlzLmV2ZW50TmFtZXNwYWNlICk7DQoJfSwNCg0KCV9kZXN0cm95OiAkLm5vb3AsDQoNCgl3aWRnZXQ6IGZ1bmN0aW9uKCkgew0KCQlyZXR1cm4gdGhpcy5lbGVtZW50Ow0KCX0sDQoNCglvcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KCQl2YXIgb3B0aW9ucyA9IGtleTsNCgkJdmFyIHBhcnRzOw0KCQl2YXIgY3VyT3B0aW9uOw0KCQl2YXIgaTsNCg0KCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7DQoNCgkJCS8vIERvbid0IHJldHVybiBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgaGFzaA0KCQkJcmV0dXJuICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9ucyApOw0KCQl9DQoNCgkJaWYgKCB0eXBlb2Yga2V5ID09PSAic3RyaW5nIiApIHsNCg0KCQkJLy8gSGFuZGxlIG5lc3RlZCBrZXlzLCBlLmcuLCAiZm9vLmJhciIgPT4geyBmb286IHsgYmFyOiBfX18gfSB9DQoJCQlvcHRpb25zID0ge307DQoJCQlwYXJ0cyA9IGtleS5zcGxpdCggIi4iICk7DQoJCQlrZXkgPSBwYXJ0cy5zaGlmdCgpOw0KCQkJaWYgKCBwYXJ0cy5sZW5ndGggKSB7DQoJCQkJY3VyT3B0aW9uID0gb3B0aW9uc1sga2V5IF0gPSAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnNbIGtleSBdICk7DQoJCQkJZm9yICggaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKysgKSB7DQoJCQkJCWN1ck9wdGlvblsgcGFydHNbIGkgXSBdID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gfHwge307DQoJCQkJCWN1ck9wdGlvbiA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdOw0KCQkJCX0NCgkJCQlrZXkgPSBwYXJ0cy5wb3AoKTsNCgkJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7DQoJCQkJCXJldHVybiBjdXJPcHRpb25bIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogY3VyT3B0aW9uWyBrZXkgXTsNCgkJCQl9DQoJCQkJY3VyT3B0aW9uWyBrZXkgXSA9IHZhbHVlOw0KCQkJfSBlbHNlIHsNCgkJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7DQoJCQkJCXJldHVybiB0aGlzLm9wdGlvbnNbIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogdGhpcy5vcHRpb25zWyBrZXkgXTsNCgkJCQl9DQoJCQkJb3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsNCgkJCX0NCgkJfQ0KDQoJCXRoaXMuX3NldE9wdGlvbnMoIG9wdGlvbnMgKTsNCg0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJX3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkgew0KCQl2YXIga2V5Ow0KDQoJCWZvciAoIGtleSBpbiBvcHRpb25zICkgew0KCQkJdGhpcy5fc2V0T3B0aW9uKCBrZXksIG9wdGlvbnNbIGtleSBdICk7DQoJCX0NCg0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCWlmICgga2V5ID09PSAiY2xhc3NlcyIgKSB7DQoJCQl0aGlzLl9zZXRPcHRpb25DbGFzc2VzKCB2YWx1ZSApOw0KCQl9DQoNCgkJdGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlOw0KDQoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgew0KCQkJdGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQoIHZhbHVlICk7DQoJCX0NCg0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJX3NldE9wdGlvbkNsYXNzZXM6IGZ1bmN0aW9uKCB2YWx1ZSApIHsNCgkJdmFyIGNsYXNzS2V5LCBlbGVtZW50cywgY3VycmVudEVsZW1lbnRzOw0KDQoJCWZvciAoIGNsYXNzS2V5IGluIHZhbHVlICkgew0KCQkJY3VycmVudEVsZW1lbnRzID0gdGhpcy5jbGFzc2VzRWxlbWVudExvb2t1cFsgY2xhc3NLZXkgXTsNCgkJCWlmICggdmFsdWVbIGNsYXNzS2V5IF0gPT09IHRoaXMub3B0aW9ucy5jbGFzc2VzWyBjbGFzc0tleSBdIHx8DQoJCQkJCSFjdXJyZW50RWxlbWVudHMgfHwNCgkJCQkJIWN1cnJlbnRFbGVtZW50cy5sZW5ndGggKSB7DQoJCQkJY29udGludWU7DQoJCQl9DQoNCgkJCS8vIFdlIGFyZSBkb2luZyB0aGlzIHRvIGNyZWF0ZSBhIG5ldyBqUXVlcnkgb2JqZWN0IGJlY2F1c2UgdGhlIF9yZW1vdmVDbGFzcygpIGNhbGwNCgkJCS8vIG9uIHRoZSBuZXh0IGxpbmUgaXMgZ29pbmcgdG8gZGVzdHJveSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGVsZW1lbnRzIGJlaW5nDQoJCQkvLyB0cmFja2VkLiBXZSBuZWVkIHRvIHNhdmUgYSBjb3B5IG9mIHRoaXMgY29sbGVjdGlvbiBzbyB0aGF0IHdlIGNhbiBhZGQgdGhlIG5ldyBjbGFzc2VzDQoJCQkvLyBiZWxvdy4NCgkJCWVsZW1lbnRzID0gJCggY3VycmVudEVsZW1lbnRzLmdldCgpICk7DQoJCQl0aGlzLl9yZW1vdmVDbGFzcyggY3VycmVudEVsZW1lbnRzLCBjbGFzc0tleSApOw0KDQoJCQkvLyBXZSBkb24ndCB1c2UgX2FkZENsYXNzKCkgaGVyZSwgYmVjYXVzZSB0aGF0IHVzZXMgdGhpcy5vcHRpb25zLmNsYXNzZXMNCgkJCS8vIGZvciBnZW5lcmF0aW5nIHRoZSBzdHJpbmcgb2YgY2xhc3Nlcy4gV2Ugd2FudCB0byB1c2UgdGhlIHZhbHVlIHBhc3NlZCBpbiBmcm9tDQoJCQkvLyBfc2V0T3B0aW9uKCksIHRoaXMgaXMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgY2xhc3NlcyBvcHRpb24gd2hpY2ggd2FzIHBhc3NlZCB0bw0KCQkJLy8gX3NldE9wdGlvbigpLiBXZSBwYXNzIHRoaXMgdmFsdWUgZGlyZWN0bHkgdG8gX2NsYXNzZXMoKS4NCgkJCWVsZW1lbnRzLmFkZENsYXNzKCB0aGlzLl9jbGFzc2VzKCB7DQoJCQkJZWxlbWVudDogZWxlbWVudHMsDQoJCQkJa2V5czogY2xhc3NLZXksDQoJCQkJY2xhc3NlczogdmFsdWUsDQoJCQkJYWRkOiB0cnVlDQoJCQl9ICkgKTsNCgkJfQ0KCX0sDQoNCglfc2V0T3B0aW9uRGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsNCgkJdGhpcy5fdG9nZ2xlQ2xhc3MoIHRoaXMud2lkZ2V0KCksIHRoaXMud2lkZ2V0RnVsbE5hbWUgKyAiLWRpc2FibGVkIiwgbnVsbCwgISF2YWx1ZSApOw0KDQoJCS8vIElmIHRoZSB3aWRnZXQgaXMgYmVjb21pbmcgZGlzYWJsZWQsIHRoZW4gbm90aGluZyBpcyBpbnRlcmFjdGl2ZQ0KCQlpZiAoIHZhbHVlICkgew0KCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMuaG92ZXJhYmxlLCBudWxsLCAidWktc3RhdGUtaG92ZXIiICk7DQoJCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5mb2N1c2FibGUsIG51bGwsICJ1aS1zdGF0ZS1mb2N1cyIgKTsNCgkJfQ0KCX0sDQoNCgllbmFibGU6IGZ1bmN0aW9uKCkgew0KCQlyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyggeyBkaXNhYmxlZDogZmFsc2UgfSApOw0KCX0sDQoNCglkaXNhYmxlOiBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoIHsgZGlzYWJsZWQ6IHRydWUgfSApOw0KCX0sDQoNCglfY2xhc3NlczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7DQoJCXZhciBmdWxsID0gW107DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQlvcHRpb25zID0gJC5leHRlbmQoIHsNCgkJCWVsZW1lbnQ6IHRoaXMuZWxlbWVudCwNCgkJCWNsYXNzZXM6IHRoaXMub3B0aW9ucy5jbGFzc2VzIHx8IHt9DQoJCX0sIG9wdGlvbnMgKTsNCg0KCQlmdW5jdGlvbiBwcm9jZXNzQ2xhc3NTdHJpbmcoIGNsYXNzZXMsIGNoZWNrT3B0aW9uICkgew0KCQkJdmFyIGN1cnJlbnQsIGk7DQoJCQlmb3IgKCBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKysgKSB7DQoJCQkJY3VycmVudCA9IHRoYXQuY2xhc3Nlc0VsZW1lbnRMb29rdXBbIGNsYXNzZXNbIGkgXSBdIHx8ICQoKTsNCgkJCQlpZiAoIG9wdGlvbnMuYWRkICkgew0KCQkJCQljdXJyZW50ID0gJCggJC51bmlxdWUoIGN1cnJlbnQuZ2V0KCkuY29uY2F0KCBvcHRpb25zLmVsZW1lbnQuZ2V0KCkgKSApICk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJY3VycmVudCA9ICQoIGN1cnJlbnQubm90KCBvcHRpb25zLmVsZW1lbnQgKS5nZXQoKSApOw0KCQkJCX0NCgkJCQl0aGF0LmNsYXNzZXNFbGVtZW50TG9va3VwWyBjbGFzc2VzWyBpIF0gXSA9IGN1cnJlbnQ7DQoJCQkJZnVsbC5wdXNoKCBjbGFzc2VzWyBpIF0gKTsNCgkJCQlpZiAoIGNoZWNrT3B0aW9uICYmIG9wdGlvbnMuY2xhc3Nlc1sgY2xhc3Nlc1sgaSBdIF0gKSB7DQoJCQkJCWZ1bGwucHVzaCggb3B0aW9ucy5jbGFzc2VzWyBjbGFzc2VzWyBpIF0gXSApOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXRoaXMuX29uKCBvcHRpb25zLmVsZW1lbnQsIHsNCgkJCSJyZW1vdmUiOiAiX3VudHJhY2tDbGFzc2VzRWxlbWVudCINCgkJfSApOw0KDQoJCWlmICggb3B0aW9ucy5rZXlzICkgew0KCQkJcHJvY2Vzc0NsYXNzU3RyaW5nKCBvcHRpb25zLmtleXMubWF0Y2goIC9cUysvZyApIHx8IFtdLCB0cnVlICk7DQoJCX0NCgkJaWYgKCBvcHRpb25zLmV4dHJhICkgew0KCQkJcHJvY2Vzc0NsYXNzU3RyaW5nKCBvcHRpb25zLmV4dHJhLm1hdGNoKCAvXFMrL2cgKSB8fCBbXSApOw0KCQl9DQoNCgkJcmV0dXJuIGZ1bGwuam9pbiggIiAiICk7DQoJfSwNCg0KCV91bnRyYWNrQ2xhc3Nlc0VsZW1lbnQ6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJdmFyIHRoYXQgPSB0aGlzOw0KCQkkLmVhY2goIHRoYXQuY2xhc3Nlc0VsZW1lbnRMb29rdXAsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KCQkJaWYgKCAkLmluQXJyYXkoIGV2ZW50LnRhcmdldCwgdmFsdWUgKSAhPT0gLTEgKSB7DQoJCQkJdGhhdC5jbGFzc2VzRWxlbWVudExvb2t1cFsga2V5IF0gPSAkKCB2YWx1ZS5ub3QoIGV2ZW50LnRhcmdldCApLmdldCgpICk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KDQoJX3JlbW92ZUNsYXNzOiBmdW5jdGlvbiggZWxlbWVudCwga2V5cywgZXh0cmEgKSB7DQoJCXJldHVybiB0aGlzLl90b2dnbGVDbGFzcyggZWxlbWVudCwga2V5cywgZXh0cmEsIGZhbHNlICk7DQoJfSwNCg0KCV9hZGRDbGFzczogZnVuY3Rpb24oIGVsZW1lbnQsIGtleXMsIGV4dHJhICkgew0KCQlyZXR1cm4gdGhpcy5fdG9nZ2xlQ2xhc3MoIGVsZW1lbnQsIGtleXMsIGV4dHJhLCB0cnVlICk7DQoJfSwNCg0KCV90b2dnbGVDbGFzczogZnVuY3Rpb24oIGVsZW1lbnQsIGtleXMsIGV4dHJhLCBhZGQgKSB7DQoJCWFkZCA9ICggdHlwZW9mIGFkZCA9PT0gImJvb2xlYW4iICkgPyBhZGQgOiBleHRyYTsNCgkJdmFyIHNoaWZ0ID0gKCB0eXBlb2YgZWxlbWVudCA9PT0gInN0cmluZyIgfHwgZWxlbWVudCA9PT0gbnVsbCApLA0KCQkJb3B0aW9ucyA9IHsNCgkJCQlleHRyYTogc2hpZnQgPyBrZXlzIDogZXh0cmEsDQoJCQkJa2V5czogc2hpZnQgPyBlbGVtZW50IDoga2V5cywNCgkJCQllbGVtZW50OiBzaGlmdCA/IHRoaXMuZWxlbWVudCA6IGVsZW1lbnQsDQoJCQkJYWRkOiBhZGQNCgkJCX07DQoJCW9wdGlvbnMuZWxlbWVudC50b2dnbGVDbGFzcyggdGhpcy5fY2xhc3Nlcyggb3B0aW9ucyApLCBhZGQgKTsNCgkJcmV0dXJuIHRoaXM7DQoJfSwNCg0KCV9vbjogZnVuY3Rpb24oIHN1cHByZXNzRGlzYWJsZWRDaGVjaywgZWxlbWVudCwgaGFuZGxlcnMgKSB7DQoJCXZhciBkZWxlZ2F0ZUVsZW1lbnQ7DQoJCXZhciBpbnN0YW5jZSA9IHRoaXM7DQoNCgkJLy8gTm8gc3VwcHJlc3NEaXNhYmxlZENoZWNrIGZsYWcsIHNodWZmbGUgYXJndW1lbnRzDQoJCWlmICggdHlwZW9mIHN1cHByZXNzRGlzYWJsZWRDaGVjayAhPT0gImJvb2xlYW4iICkgew0KCQkJaGFuZGxlcnMgPSBlbGVtZW50Ow0KCQkJZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjazsNCgkJCXN1cHByZXNzRGlzYWJsZWRDaGVjayA9IGZhbHNlOw0KCQl9DQoNCgkJLy8gTm8gZWxlbWVudCBhcmd1bWVudCwgc2h1ZmZsZSBhbmQgdXNlIHRoaXMuZWxlbWVudA0KCQlpZiAoICFoYW5kbGVycyApIHsNCgkJCWhhbmRsZXJzID0gZWxlbWVudDsNCgkJCWVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7DQoJCQlkZWxlZ2F0ZUVsZW1lbnQgPSB0aGlzLndpZGdldCgpOw0KCQl9IGVsc2Ugew0KCQkJZWxlbWVudCA9IGRlbGVnYXRlRWxlbWVudCA9ICQoIGVsZW1lbnQgKTsNCgkJCXRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmFkZCggZWxlbWVudCApOw0KCQl9DQoNCgkJJC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkgew0KCQkJZnVuY3Rpb24gaGFuZGxlclByb3h5KCkgew0KDQoJCQkJLy8gQWxsb3cgd2lkZ2V0cyB0byBjdXN0b21pemUgdGhlIGRpc2FibGVkIGhhbmRsaW5nDQoJCQkJLy8gLSBkaXNhYmxlZCBhcyBhbiBhcnJheSBpbnN0ZWFkIG9mIGJvb2xlYW4NCgkJCQkvLyAtIGRpc2FibGVkIGNsYXNzIGFzIG1ldGhvZCBmb3IgZGlzYWJsaW5nIGluZGl2aWR1YWwgcGFydHMNCgkJCQlpZiAoICFzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgJiYNCgkJCQkJCSggaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlZCA9PT0gdHJ1ZSB8fA0KCQkJCQkJJCggdGhpcyApLmhhc0NsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICkgKSApIHsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCQlyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gInN0cmluZyIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApDQoJCQkJCS5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApOw0KCQkJfQ0KDQoJCQkvLyBDb3B5IHRoZSBndWlkIHNvIGRpcmVjdCB1bmJpbmRpbmcgd29ya3MNCgkJCWlmICggdHlwZW9mIGhhbmRsZXIgIT09ICJzdHJpbmciICkgew0KCQkJCWhhbmRsZXJQcm94eS5ndWlkID0gaGFuZGxlci5ndWlkID0NCgkJCQkJaGFuZGxlci5ndWlkIHx8IGhhbmRsZXJQcm94eS5ndWlkIHx8ICQuZ3VpZCsrOw0KCQkJfQ0KDQoJCQl2YXIgbWF0Y2ggPSBldmVudC5tYXRjaCggL14oW1x3Oi1dKilccyooLiopJC8gKTsNCgkJCXZhciBldmVudE5hbWUgPSBtYXRjaFsgMSBdICsgaW5zdGFuY2UuZXZlbnROYW1lc3BhY2U7DQoJCQl2YXIgc2VsZWN0b3IgPSBtYXRjaFsgMiBdOw0KDQoJCQlpZiAoIHNlbGVjdG9yICkgew0KCQkJCWRlbGVnYXRlRWxlbWVudC5vbiggZXZlbnROYW1lLCBzZWxlY3RvciwgaGFuZGxlclByb3h5ICk7DQoJCQl9IGVsc2Ugew0KCQkJCWVsZW1lbnQub24oIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KDQoJX29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHsNCgkJZXZlbnROYW1lID0gKCBldmVudE5hbWUgfHwgIiIgKS5zcGxpdCggIiAiICkuam9pbiggdGhpcy5ldmVudE5hbWVzcGFjZSArICIgIiApICsNCgkJCXRoaXMuZXZlbnROYW1lc3BhY2U7DQoJCWVsZW1lbnQub2ZmKCBldmVudE5hbWUgKS5vZmYoIGV2ZW50TmFtZSApOw0KDQoJCS8vIENsZWFyIHRoZSBzdGFjayB0byBhdm9pZCBtZW1vcnkgbGVha3MgKCMxMDA1NikNCgkJdGhpcy5iaW5kaW5ncyA9ICQoIHRoaXMuYmluZGluZ3Mubm90KCBlbGVtZW50ICkuZ2V0KCkgKTsNCgkJdGhpcy5mb2N1c2FibGUgPSAkKCB0aGlzLmZvY3VzYWJsZS5ub3QoIGVsZW1lbnQgKS5nZXQoKSApOw0KCQl0aGlzLmhvdmVyYWJsZSA9ICQoIHRoaXMuaG92ZXJhYmxlLm5vdCggZWxlbWVudCApLmdldCgpICk7DQoJfSwNCg0KCV9kZWxheTogZnVuY3Rpb24oIGhhbmRsZXIsIGRlbGF5ICkgew0KCQlmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7DQoJCQlyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gInN0cmluZyIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApDQoJCQkJLmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7DQoJCX0NCgkJdmFyIGluc3RhbmNlID0gdGhpczsNCgkJcmV0dXJuIHNldFRpbWVvdXQoIGhhbmRsZXJQcm94eSwgZGVsYXkgfHwgMCApOw0KCX0sDQoNCglfaG92ZXJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsNCgkJdGhpcy5ob3ZlcmFibGUgPSB0aGlzLmhvdmVyYWJsZS5hZGQoIGVsZW1lbnQgKTsNCgkJdGhpcy5fb24oIGVsZW1lbnQsIHsNCgkJCW1vdXNlZW50ZXI6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQl0aGlzLl9hZGRDbGFzcyggJCggZXZlbnQuY3VycmVudFRhcmdldCApLCBudWxsLCAidWktc3RhdGUtaG92ZXIiICk7DQoJCQl9LA0KCQkJbW91c2VsZWF2ZTogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQkJCXRoaXMuX3JlbW92ZUNsYXNzKCAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksIG51bGwsICJ1aS1zdGF0ZS1ob3ZlciIgKTsNCgkJCX0NCgkJfSApOw0KCX0sDQoNCglfZm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsNCgkJdGhpcy5mb2N1c2FibGUgPSB0aGlzLmZvY3VzYWJsZS5hZGQoIGVsZW1lbnQgKTsNCgkJdGhpcy5fb24oIGVsZW1lbnQsIHsNCgkJCWZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQl0aGlzLl9hZGRDbGFzcyggJCggZXZlbnQuY3VycmVudFRhcmdldCApLCBudWxsLCAidWktc3RhdGUtZm9jdXMiICk7DQoJCQl9LA0KCQkJZm9jdXNvdXQ6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQl0aGlzLl9yZW1vdmVDbGFzcyggJCggZXZlbnQuY3VycmVudFRhcmdldCApLCBudWxsLCAidWktc3RhdGUtZm9jdXMiICk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KDQoJX3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHsNCgkJdmFyIHByb3AsIG9yaWc7DQoJCXZhciBjYWxsYmFjayA9IHRoaXMub3B0aW9uc1sgdHlwZSBdOw0KDQoJCWRhdGEgPSBkYXRhIHx8IHt9Ow0KCQlldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7DQoJCWV2ZW50LnR5cGUgPSAoIHR5cGUgPT09IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggPw0KCQkJdHlwZSA6DQoJCQl0aGlzLndpZGdldEV2ZW50UHJlZml4ICsgdHlwZSApLnRvTG93ZXJDYXNlKCk7DQoNCgkJLy8gVGhlIG9yaWdpbmFsIGV2ZW50IG1heSBjb21lIGZyb20gYW55IGVsZW1lbnQNCgkJLy8gc28gd2UgbmVlZCB0byByZXNldCB0aGUgdGFyZ2V0IG9uIHRoZSBuZXcgZXZlbnQNCgkJZXZlbnQudGFyZ2V0ID0gdGhpcy5lbGVtZW50WyAwIF07DQoNCgkJLy8gQ29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudA0KCQlvcmlnID0gZXZlbnQub3JpZ2luYWxFdmVudDsNCgkJaWYgKCBvcmlnICkgew0KCQkJZm9yICggcHJvcCBpbiBvcmlnICkgew0KCQkJCWlmICggISggcHJvcCBpbiBldmVudCApICkgew0KCQkJCQlldmVudFsgcHJvcCBdID0gb3JpZ1sgcHJvcCBdOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXRoaXMuZWxlbWVudC50cmlnZ2VyKCBldmVudCwgZGF0YSApOw0KCQlyZXR1cm4gISggJC5pc0Z1bmN0aW9uKCBjYWxsYmFjayApICYmDQoJCQljYWxsYmFjay5hcHBseSggdGhpcy5lbGVtZW50WyAwIF0sIFsgZXZlbnQgXS5jb25jYXQoIGRhdGEgKSApID09PSBmYWxzZSB8fA0KCQkJZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKTsNCgl9DQp9Ow0KDQokLmVhY2goIHsgc2hvdzogImZhZGVJbiIsIGhpZGU6ICJmYWRlT3V0IiB9LCBmdW5jdGlvbiggbWV0aG9kLCBkZWZhdWx0RWZmZWN0ICkgew0KCSQuV2lkZ2V0LnByb3RvdHlwZVsgIl8iICsgbWV0aG9kIF0gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucywgY2FsbGJhY2sgKSB7DQoJCWlmICggdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciICkgew0KCQkJb3B0aW9ucyA9IHsgZWZmZWN0OiBvcHRpb25zIH07DQoJCX0NCg0KCQl2YXIgaGFzT3B0aW9uczsNCgkJdmFyIGVmZmVjdE5hbWUgPSAhb3B0aW9ucyA/DQoJCQltZXRob2QgOg0KCQkJb3B0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gIm51bWJlciIgPw0KCQkJCWRlZmF1bHRFZmZlY3QgOg0KCQkJCW9wdGlvbnMuZWZmZWN0IHx8IGRlZmF1bHRFZmZlY3Q7DQoNCgkJb3B0aW9ucyA9IG9wdGlvbnMgfHwge307DQoJCWlmICggdHlwZW9mIG9wdGlvbnMgPT09ICJudW1iZXIiICkgew0KCQkJb3B0aW9ucyA9IHsgZHVyYXRpb246IG9wdGlvbnMgfTsNCgkJfQ0KDQoJCWhhc09wdGlvbnMgPSAhJC5pc0VtcHR5T2JqZWN0KCBvcHRpb25zICk7DQoJCW9wdGlvbnMuY29tcGxldGUgPSBjYWxsYmFjazsNCg0KCQlpZiAoIG9wdGlvbnMuZGVsYXkgKSB7DQoJCQllbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7DQoJCX0NCg0KCQlpZiAoIGhhc09wdGlvbnMgJiYgJC5lZmZlY3RzICYmICQuZWZmZWN0cy5lZmZlY3RbIGVmZmVjdE5hbWUgXSApIHsNCgkJCWVsZW1lbnRbIG1ldGhvZCBdKCBvcHRpb25zICk7DQoJCX0gZWxzZSBpZiAoIGVmZmVjdE5hbWUgIT09IG1ldGhvZCAmJiBlbGVtZW50WyBlZmZlY3ROYW1lIF0gKSB7DQoJCQllbGVtZW50WyBlZmZlY3ROYW1lIF0oIG9wdGlvbnMuZHVyYXRpb24sIG9wdGlvbnMuZWFzaW5nLCBjYWxsYmFjayApOw0KCQl9IGVsc2Ugew0KCQkJZWxlbWVudC5xdWV1ZSggZnVuY3Rpb24oIG5leHQgKSB7DQoJCQkJJCggdGhpcyApWyBtZXRob2QgXSgpOw0KCQkJCWlmICggY2FsbGJhY2sgKSB7DQoJCQkJCWNhbGxiYWNrLmNhbGwoIGVsZW1lbnRbIDAgXSApOw0KCQkJCX0NCgkJCQluZXh0KCk7DQoJCQl9ICk7DQoJCX0NCgl9Ow0KfSApOw0KDQp2YXIgd2lkZ2V0ID0gJC53aWRnZXQ7DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgUG9zaXRpb24gMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqDQogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wb3NpdGlvbi8NCiAqLw0KDQovLz4+bGFiZWw6IFBvc2l0aW9uDQovLz4+Z3JvdXA6IENvcmUNCi8vPj5kZXNjcmlwdGlvbjogUG9zaXRpb25zIGVsZW1lbnRzIHJlbGF0aXZlIHRvIG90aGVyIGVsZW1lbnRzLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3Bvc2l0aW9uLw0KLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL3Bvc2l0aW9uLw0KDQoNCiggZnVuY3Rpb24oKSB7DQp2YXIgY2FjaGVkU2Nyb2xsYmFyV2lkdGgsDQoJbWF4ID0gTWF0aC5tYXgsDQoJYWJzID0gTWF0aC5hYnMsDQoJcmhvcml6b250YWwgPSAvbGVmdHxjZW50ZXJ8cmlnaHQvLA0KCXJ2ZXJ0aWNhbCA9IC90b3B8Y2VudGVyfGJvdHRvbS8sDQoJcm9mZnNldCA9IC9bXCtcLV1cZCsoXC5bXGRdKyk/JT8vLA0KCXJwb3NpdGlvbiA9IC9eXHcrLywNCglycGVyY2VudCA9IC8lJC8sDQoJX3Bvc2l0aW9uID0gJC5mbi5wb3NpdGlvbjsNCg0KZnVuY3Rpb24gZ2V0T2Zmc2V0cyggb2Zmc2V0cywgd2lkdGgsIGhlaWdodCApIHsNCglyZXR1cm4gWw0KCQlwYXJzZUZsb2F0KCBvZmZzZXRzWyAwIF0gKSAqICggcnBlcmNlbnQudGVzdCggb2Zmc2V0c1sgMCBdICkgPyB3aWR0aCAvIDEwMCA6IDEgKSwNCgkJcGFyc2VGbG9hdCggb2Zmc2V0c1sgMSBdICkgKiAoIHJwZXJjZW50LnRlc3QoIG9mZnNldHNbIDEgXSApID8gaGVpZ2h0IC8gMTAwIDogMSApDQoJXTsNCn0NCg0KZnVuY3Rpb24gcGFyc2VDc3MoIGVsZW1lbnQsIHByb3BlcnR5ICkgew0KCXJldHVybiBwYXJzZUludCggJC5jc3MoIGVsZW1lbnQsIHByb3BlcnR5ICksIDEwICkgfHwgMDsNCn0NCg0KZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyggZWxlbSApIHsNCgl2YXIgcmF3ID0gZWxlbVsgMCBdOw0KCWlmICggcmF3Lm5vZGVUeXBlID09PSA5ICkgew0KCQlyZXR1cm4gew0KCQkJd2lkdGg6IGVsZW0ud2lkdGgoKSwNCgkJCWhlaWdodDogZWxlbS5oZWlnaHQoKSwNCgkJCW9mZnNldDogeyB0b3A6IDAsIGxlZnQ6IDAgfQ0KCQl9Ow0KCX0NCglpZiAoICQuaXNXaW5kb3coIHJhdyApICkgew0KCQlyZXR1cm4gew0KCQkJd2lkdGg6IGVsZW0ud2lkdGgoKSwNCgkJCWhlaWdodDogZWxlbS5oZWlnaHQoKSwNCgkJCW9mZnNldDogeyB0b3A6IGVsZW0uc2Nyb2xsVG9wKCksIGxlZnQ6IGVsZW0uc2Nyb2xsTGVmdCgpIH0NCgkJfTsNCgl9DQoJaWYgKCByYXcucHJldmVudERlZmF1bHQgKSB7DQoJCXJldHVybiB7DQoJCQl3aWR0aDogMCwNCgkJCWhlaWdodDogMCwNCgkJCW9mZnNldDogeyB0b3A6IHJhdy5wYWdlWSwgbGVmdDogcmF3LnBhZ2VYIH0NCgkJfTsNCgl9DQoJcmV0dXJuIHsNCgkJd2lkdGg6IGVsZW0ub3V0ZXJXaWR0aCgpLA0KCQloZWlnaHQ6IGVsZW0ub3V0ZXJIZWlnaHQoKSwNCgkJb2Zmc2V0OiBlbGVtLm9mZnNldCgpDQoJfTsNCn0NCg0KJC5wb3NpdGlvbiA9IHsNCglzY3JvbGxiYXJXaWR0aDogZnVuY3Rpb24oKSB7DQoJCWlmICggY2FjaGVkU2Nyb2xsYmFyV2lkdGggIT09IHVuZGVmaW5lZCApIHsNCgkJCXJldHVybiBjYWNoZWRTY3JvbGxiYXJXaWR0aDsNCgkJfQ0KCQl2YXIgdzEsIHcyLA0KCQkJZGl2ID0gJCggIjxkaXYgIiArDQoJCQkJInN0eWxlPSdkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6aGlkZGVuOyc+IiArDQoJCQkJIjxkaXYgc3R5bGU9J2hlaWdodDoxMDBweDt3aWR0aDphdXRvOyc+PC9kaXY+PC9kaXY+IiApLA0KCQkJaW5uZXJEaXYgPSBkaXYuY2hpbGRyZW4oKVsgMCBdOw0KDQoJCSQoICJib2R5IiApLmFwcGVuZCggZGl2ICk7DQoJCXcxID0gaW5uZXJEaXYub2Zmc2V0V2lkdGg7DQoJCWRpdi5jc3MoICJvdmVyZmxvdyIsICJzY3JvbGwiICk7DQoNCgkJdzIgPSBpbm5lckRpdi5vZmZzZXRXaWR0aDsNCg0KCQlpZiAoIHcxID09PSB3MiApIHsNCgkJCXcyID0gZGl2WyAwIF0uY2xpZW50V2lkdGg7DQoJCX0NCg0KCQlkaXYucmVtb3ZlKCk7DQoNCgkJcmV0dXJuICggY2FjaGVkU2Nyb2xsYmFyV2lkdGggPSB3MSAtIHcyICk7DQoJfSwNCglnZXRTY3JvbGxJbmZvOiBmdW5jdGlvbiggd2l0aGluICkgew0KCQl2YXIgb3ZlcmZsb3dYID0gd2l0aGluLmlzV2luZG93IHx8IHdpdGhpbi5pc0RvY3VtZW50ID8gIiIgOg0KCQkJCXdpdGhpbi5lbGVtZW50LmNzcyggIm92ZXJmbG93LXgiICksDQoJCQlvdmVyZmxvd1kgPSB3aXRoaW4uaXNXaW5kb3cgfHwgd2l0aGluLmlzRG9jdW1lbnQgPyAiIiA6DQoJCQkJd2l0aGluLmVsZW1lbnQuY3NzKCAib3ZlcmZsb3cteSIgKSwNCgkJCWhhc092ZXJmbG93WCA9IG92ZXJmbG93WCA9PT0gInNjcm9sbCIgfHwNCgkJCQkoIG92ZXJmbG93WCA9PT0gImF1dG8iICYmIHdpdGhpbi53aWR0aCA8IHdpdGhpbi5lbGVtZW50WyAwIF0uc2Nyb2xsV2lkdGggKSwNCgkJCWhhc092ZXJmbG93WSA9IG92ZXJmbG93WSA9PT0gInNjcm9sbCIgfHwNCgkJCQkoIG92ZXJmbG93WSA9PT0gImF1dG8iICYmIHdpdGhpbi5oZWlnaHQgPCB3aXRoaW4uZWxlbWVudFsgMCBdLnNjcm9sbEhlaWdodCApOw0KCQlyZXR1cm4gew0KCQkJd2lkdGg6IGhhc092ZXJmbG93WSA/ICQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDAsDQoJCQloZWlnaHQ6IGhhc092ZXJmbG93WCA/ICQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDANCgkJfTsNCgl9LA0KCWdldFdpdGhpbkluZm86IGZ1bmN0aW9uKCBlbGVtZW50ICkgew0KCQl2YXIgd2l0aGluRWxlbWVudCA9ICQoIGVsZW1lbnQgfHwgd2luZG93ICksDQoJCQlpc1dpbmRvdyA9ICQuaXNXaW5kb3coIHdpdGhpbkVsZW1lbnRbIDAgXSApLA0KCQkJaXNEb2N1bWVudCA9ICEhd2l0aGluRWxlbWVudFsgMCBdICYmIHdpdGhpbkVsZW1lbnRbIDAgXS5ub2RlVHlwZSA9PT0gOSwNCgkJCWhhc09mZnNldCA9ICFpc1dpbmRvdyAmJiAhaXNEb2N1bWVudDsNCgkJcmV0dXJuIHsNCgkJCWVsZW1lbnQ6IHdpdGhpbkVsZW1lbnQsDQoJCQlpc1dpbmRvdzogaXNXaW5kb3csDQoJCQlpc0RvY3VtZW50OiBpc0RvY3VtZW50LA0KCQkJb2Zmc2V0OiBoYXNPZmZzZXQgPyAkKCBlbGVtZW50ICkub2Zmc2V0KCkgOiB7IGxlZnQ6IDAsIHRvcDogMCB9LA0KCQkJc2Nyb2xsTGVmdDogd2l0aGluRWxlbWVudC5zY3JvbGxMZWZ0KCksDQoJCQlzY3JvbGxUb3A6IHdpdGhpbkVsZW1lbnQuc2Nyb2xsVG9wKCksDQoJCQl3aWR0aDogd2l0aGluRWxlbWVudC5vdXRlcldpZHRoKCksDQoJCQloZWlnaHQ6IHdpdGhpbkVsZW1lbnQub3V0ZXJIZWlnaHQoKQ0KCQl9Ow0KCX0NCn07DQoNCiQuZm4ucG9zaXRpb24gPSBmdW5jdGlvbiggb3B0aW9ucyApIHsNCglpZiAoICFvcHRpb25zIHx8ICFvcHRpb25zLm9mICkgew0KCQlyZXR1cm4gX3Bvc2l0aW9uLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsNCgl9DQoNCgkvLyBNYWtlIGEgY29weSwgd2UgZG9uJ3Qgd2FudCB0byBtb2RpZnkgYXJndW1lbnRzDQoJb3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApOw0KDQoJdmFyIGF0T2Zmc2V0LCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0LCB0YXJnZXRPZmZzZXQsIGJhc2VQb3NpdGlvbiwgZGltZW5zaW9ucywNCgkJdGFyZ2V0ID0gJCggb3B0aW9ucy5vZiApLA0KCQl3aXRoaW4gPSAkLnBvc2l0aW9uLmdldFdpdGhpbkluZm8oIG9wdGlvbnMud2l0aGluICksDQoJCXNjcm9sbEluZm8gPSAkLnBvc2l0aW9uLmdldFNjcm9sbEluZm8oIHdpdGhpbiApLA0KCQljb2xsaXNpb24gPSAoIG9wdGlvbnMuY29sbGlzaW9uIHx8ICJmbGlwIiApLnNwbGl0KCAiICIgKSwNCgkJb2Zmc2V0cyA9IHt9Ow0KDQoJZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoIHRhcmdldCApOw0KCWlmICggdGFyZ2V0WyAwIF0ucHJldmVudERlZmF1bHQgKSB7DQoNCgkJLy8gRm9yY2UgbGVmdCB0b3AgdG8gYWxsb3cgZmxpcHBpbmcNCgkJb3B0aW9ucy5hdCA9ICJsZWZ0IHRvcCI7DQoJfQ0KCXRhcmdldFdpZHRoID0gZGltZW5zaW9ucy53aWR0aDsNCgl0YXJnZXRIZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDsNCgl0YXJnZXRPZmZzZXQgPSBkaW1lbnNpb25zLm9mZnNldDsNCg0KCS8vIENsb25lIHRvIHJldXNlIG9yaWdpbmFsIHRhcmdldE9mZnNldCBsYXRlcg0KCWJhc2VQb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgdGFyZ2V0T2Zmc2V0ICk7DQoNCgkvLyBGb3JjZSBteSBhbmQgYXQgdG8gaGF2ZSB2YWxpZCBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBwb3NpdGlvbnMNCgkvLyBpZiBhIHZhbHVlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2VudGVyDQoJJC5lYWNoKCBbICJteSIsICJhdCIgXSwgZnVuY3Rpb24oKSB7DQoJCXZhciBwb3MgPSAoIG9wdGlvbnNbIHRoaXMgXSB8fCAiIiApLnNwbGl0KCAiICIgKSwNCgkJCWhvcml6b250YWxPZmZzZXQsDQoJCQl2ZXJ0aWNhbE9mZnNldDsNCg0KCQlpZiAoIHBvcy5sZW5ndGggPT09IDEgKSB7DQoJCQlwb3MgPSByaG9yaXpvbnRhbC50ZXN0KCBwb3NbIDAgXSApID8NCgkJCQlwb3MuY29uY2F0KCBbICJjZW50ZXIiIF0gKSA6DQoJCQkJcnZlcnRpY2FsLnRlc3QoIHBvc1sgMCBdICkgPw0KCQkJCQlbICJjZW50ZXIiIF0uY29uY2F0KCBwb3MgKSA6DQoJCQkJCVsgImNlbnRlciIsICJjZW50ZXIiIF07DQoJCX0NCgkJcG9zWyAwIF0gPSByaG9yaXpvbnRhbC50ZXN0KCBwb3NbIDAgXSApID8gcG9zWyAwIF0gOiAiY2VudGVyIjsNCgkJcG9zWyAxIF0gPSBydmVydGljYWwudGVzdCggcG9zWyAxIF0gKSA/IHBvc1sgMSBdIDogImNlbnRlciI7DQoNCgkJLy8gQ2FsY3VsYXRlIG9mZnNldHMNCgkJaG9yaXpvbnRhbE9mZnNldCA9IHJvZmZzZXQuZXhlYyggcG9zWyAwIF0gKTsNCgkJdmVydGljYWxPZmZzZXQgPSByb2Zmc2V0LmV4ZWMoIHBvc1sgMSBdICk7DQoJCW9mZnNldHNbIHRoaXMgXSA9IFsNCgkJCWhvcml6b250YWxPZmZzZXQgPyBob3Jpem9udGFsT2Zmc2V0WyAwIF0gOiAwLA0KCQkJdmVydGljYWxPZmZzZXQgPyB2ZXJ0aWNhbE9mZnNldFsgMCBdIDogMA0KCQldOw0KDQoJCS8vIFJlZHVjZSB0byBqdXN0IHRoZSBwb3NpdGlvbnMgd2l0aG91dCB0aGUgb2Zmc2V0cw0KCQlvcHRpb25zWyB0aGlzIF0gPSBbDQoJCQlycG9zaXRpb24uZXhlYyggcG9zWyAwIF0gKVsgMCBdLA0KCQkJcnBvc2l0aW9uLmV4ZWMoIHBvc1sgMSBdIClbIDAgXQ0KCQldOw0KCX0gKTsNCg0KCS8vIE5vcm1hbGl6ZSBjb2xsaXNpb24gb3B0aW9uDQoJaWYgKCBjb2xsaXNpb24ubGVuZ3RoID09PSAxICkgew0KCQljb2xsaXNpb25bIDEgXSA9IGNvbGxpc2lvblsgMCBdOw0KCX0NCg0KCWlmICggb3B0aW9ucy5hdFsgMCBdID09PSAicmlnaHQiICkgew0KCQliYXNlUG9zaXRpb24ubGVmdCArPSB0YXJnZXRXaWR0aDsNCgl9IGVsc2UgaWYgKCBvcHRpb25zLmF0WyAwIF0gPT09ICJjZW50ZXIiICkgew0KCQliYXNlUG9zaXRpb24ubGVmdCArPSB0YXJnZXRXaWR0aCAvIDI7DQoJfQ0KDQoJaWYgKCBvcHRpb25zLmF0WyAxIF0gPT09ICJib3R0b20iICkgew0KCQliYXNlUG9zaXRpb24udG9wICs9IHRhcmdldEhlaWdodDsNCgl9IGVsc2UgaWYgKCBvcHRpb25zLmF0WyAxIF0gPT09ICJjZW50ZXIiICkgew0KCQliYXNlUG9zaXRpb24udG9wICs9IHRhcmdldEhlaWdodCAvIDI7DQoJfQ0KDQoJYXRPZmZzZXQgPSBnZXRPZmZzZXRzKCBvZmZzZXRzLmF0LCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0ICk7DQoJYmFzZVBvc2l0aW9uLmxlZnQgKz0gYXRPZmZzZXRbIDAgXTsNCgliYXNlUG9zaXRpb24udG9wICs9IGF0T2Zmc2V0WyAxIF07DQoNCglyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJdmFyIGNvbGxpc2lvblBvc2l0aW9uLCB1c2luZywNCgkJCWVsZW0gPSAkKCB0aGlzICksDQoJCQllbGVtV2lkdGggPSBlbGVtLm91dGVyV2lkdGgoKSwNCgkJCWVsZW1IZWlnaHQgPSBlbGVtLm91dGVySGVpZ2h0KCksDQoJCQltYXJnaW5MZWZ0ID0gcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5MZWZ0IiApLA0KCQkJbWFyZ2luVG9wID0gcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5Ub3AiICksDQoJCQljb2xsaXNpb25XaWR0aCA9IGVsZW1XaWR0aCArIG1hcmdpbkxlZnQgKyBwYXJzZUNzcyggdGhpcywgIm1hcmdpblJpZ2h0IiApICsNCgkJCQlzY3JvbGxJbmZvLndpZHRoLA0KCQkJY29sbGlzaW9uSGVpZ2h0ID0gZWxlbUhlaWdodCArIG1hcmdpblRvcCArIHBhcnNlQ3NzKCB0aGlzLCAibWFyZ2luQm90dG9tIiApICsNCgkJCQlzY3JvbGxJbmZvLmhlaWdodCwNCgkJCXBvc2l0aW9uID0gJC5leHRlbmQoIHt9LCBiYXNlUG9zaXRpb24gKSwNCgkJCW15T2Zmc2V0ID0gZ2V0T2Zmc2V0cyggb2Zmc2V0cy5teSwgZWxlbS5vdXRlcldpZHRoKCksIGVsZW0ub3V0ZXJIZWlnaHQoKSApOw0KDQoJCWlmICggb3B0aW9ucy5teVsgMCBdID09PSAicmlnaHQiICkgew0KCQkJcG9zaXRpb24ubGVmdCAtPSBlbGVtV2lkdGg7DQoJCX0gZWxzZSBpZiAoIG9wdGlvbnMubXlbIDAgXSA9PT0gImNlbnRlciIgKSB7DQoJCQlwb3NpdGlvbi5sZWZ0IC09IGVsZW1XaWR0aCAvIDI7DQoJCX0NCg0KCQlpZiAoIG9wdGlvbnMubXlbIDEgXSA9PT0gImJvdHRvbSIgKSB7DQoJCQlwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodDsNCgkJfSBlbHNlIGlmICggb3B0aW9ucy5teVsgMSBdID09PSAiY2VudGVyIiApIHsNCgkJCXBvc2l0aW9uLnRvcCAtPSBlbGVtSGVpZ2h0IC8gMjsNCgkJfQ0KDQoJCXBvc2l0aW9uLmxlZnQgKz0gbXlPZmZzZXRbIDAgXTsNCgkJcG9zaXRpb24udG9wICs9IG15T2Zmc2V0WyAxIF07DQoNCgkJY29sbGlzaW9uUG9zaXRpb24gPSB7DQoJCQltYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0LA0KCQkJbWFyZ2luVG9wOiBtYXJnaW5Ub3ANCgkJfTsNCg0KCQkkLmVhY2goIFsgImxlZnQiLCAidG9wIiBdLCBmdW5jdGlvbiggaSwgZGlyICkgew0KCQkJaWYgKCAkLnVpLnBvc2l0aW9uWyBjb2xsaXNpb25bIGkgXSBdICkgew0KCQkJCSQudWkucG9zaXRpb25bIGNvbGxpc2lvblsgaSBdIF1bIGRpciBdKCBwb3NpdGlvbiwgew0KCQkJCQl0YXJnZXRXaWR0aDogdGFyZ2V0V2lkdGgsDQoJCQkJCXRhcmdldEhlaWdodDogdGFyZ2V0SGVpZ2h0LA0KCQkJCQllbGVtV2lkdGg6IGVsZW1XaWR0aCwNCgkJCQkJZWxlbUhlaWdodDogZWxlbUhlaWdodCwNCgkJCQkJY29sbGlzaW9uUG9zaXRpb246IGNvbGxpc2lvblBvc2l0aW9uLA0KCQkJCQljb2xsaXNpb25XaWR0aDogY29sbGlzaW9uV2lkdGgsDQoJCQkJCWNvbGxpc2lvbkhlaWdodDogY29sbGlzaW9uSGVpZ2h0LA0KCQkJCQlvZmZzZXQ6IFsgYXRPZmZzZXRbIDAgXSArIG15T2Zmc2V0WyAwIF0sIGF0T2Zmc2V0IFsgMSBdICsgbXlPZmZzZXRbIDEgXSBdLA0KCQkJCQlteTogb3B0aW9ucy5teSwNCgkJCQkJYXQ6IG9wdGlvbnMuYXQsDQoJCQkJCXdpdGhpbjogd2l0aGluLA0KCQkJCQllbGVtOiBlbGVtDQoJCQkJfSApOw0KCQkJfQ0KCQl9ICk7DQoNCgkJaWYgKCBvcHRpb25zLnVzaW5nICkgew0KDQoJCQkvLyBBZGRzIGZlZWRiYWNrIGFzIHNlY29uZCBhcmd1bWVudCB0byB1c2luZyBjYWxsYmFjaywgaWYgcHJlc2VudA0KCQkJdXNpbmcgPSBmdW5jdGlvbiggcHJvcHMgKSB7DQoJCQkJdmFyIGxlZnQgPSB0YXJnZXRPZmZzZXQubGVmdCAtIHBvc2l0aW9uLmxlZnQsDQoJCQkJCXJpZ2h0ID0gbGVmdCArIHRhcmdldFdpZHRoIC0gZWxlbVdpZHRoLA0KCQkJCQl0b3AgPSB0YXJnZXRPZmZzZXQudG9wIC0gcG9zaXRpb24udG9wLA0KCQkJCQlib3R0b20gPSB0b3AgKyB0YXJnZXRIZWlnaHQgLSBlbGVtSGVpZ2h0LA0KCQkJCQlmZWVkYmFjayA9IHsNCgkJCQkJCXRhcmdldDogew0KCQkJCQkJCWVsZW1lbnQ6IHRhcmdldCwNCgkJCQkJCQlsZWZ0OiB0YXJnZXRPZmZzZXQubGVmdCwNCgkJCQkJCQl0b3A6IHRhcmdldE9mZnNldC50b3AsDQoJCQkJCQkJd2lkdGg6IHRhcmdldFdpZHRoLA0KCQkJCQkJCWhlaWdodDogdGFyZ2V0SGVpZ2h0DQoJCQkJCQl9LA0KCQkJCQkJZWxlbWVudDogew0KCQkJCQkJCWVsZW1lbnQ6IGVsZW0sDQoJCQkJCQkJbGVmdDogcG9zaXRpb24ubGVmdCwNCgkJCQkJCQl0b3A6IHBvc2l0aW9uLnRvcCwNCgkJCQkJCQl3aWR0aDogZWxlbVdpZHRoLA0KCQkJCQkJCWhlaWdodDogZWxlbUhlaWdodA0KCQkJCQkJfSwNCgkJCQkJCWhvcml6b250YWw6IHJpZ2h0IDwgMCA/ICJsZWZ0IiA6IGxlZnQgPiAwID8gInJpZ2h0IiA6ICJjZW50ZXIiLA0KCQkJCQkJdmVydGljYWw6IGJvdHRvbSA8IDAgPyAidG9wIiA6IHRvcCA+IDAgPyAiYm90dG9tIiA6ICJtaWRkbGUiDQoJCQkJCX07DQoJCQkJaWYgKCB0YXJnZXRXaWR0aCA8IGVsZW1XaWR0aCAmJiBhYnMoIGxlZnQgKyByaWdodCApIDwgdGFyZ2V0V2lkdGggKSB7DQoJCQkJCWZlZWRiYWNrLmhvcml6b250YWwgPSAiY2VudGVyIjsNCgkJCQl9DQoJCQkJaWYgKCB0YXJnZXRIZWlnaHQgPCBlbGVtSGVpZ2h0ICYmIGFicyggdG9wICsgYm90dG9tICkgPCB0YXJnZXRIZWlnaHQgKSB7DQoJCQkJCWZlZWRiYWNrLnZlcnRpY2FsID0gIm1pZGRsZSI7DQoJCQkJfQ0KCQkJCWlmICggbWF4KCBhYnMoIGxlZnQgKSwgYWJzKCByaWdodCApICkgPiBtYXgoIGFicyggdG9wICksIGFicyggYm90dG9tICkgKSApIHsNCgkJCQkJZmVlZGJhY2suaW1wb3J0YW50ID0gImhvcml6b250YWwiOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWZlZWRiYWNrLmltcG9ydGFudCA9ICJ2ZXJ0aWNhbCI7DQoJCQkJfQ0KCQkJCW9wdGlvbnMudXNpbmcuY2FsbCggdGhpcywgcHJvcHMsIGZlZWRiYWNrICk7DQoJCQl9Ow0KCQl9DQoNCgkJZWxlbS5vZmZzZXQoICQuZXh0ZW5kKCBwb3NpdGlvbiwgeyB1c2luZzogdXNpbmcgfSApICk7DQoJfSApOw0KfTsNCg0KJC51aS5wb3NpdGlvbiA9IHsNCglmaXQ6IHsNCgkJbGVmdDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkgew0KCQkJdmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLA0KCQkJCXdpdGhpbk9mZnNldCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxMZWZ0IDogd2l0aGluLm9mZnNldC5sZWZ0LA0KCQkJCW91dGVyV2lkdGggPSB3aXRoaW4ud2lkdGgsDQoJCQkJY29sbGlzaW9uUG9zTGVmdCA9IHBvc2l0aW9uLmxlZnQgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsDQoJCQkJb3ZlckxlZnQgPSB3aXRoaW5PZmZzZXQgLSBjb2xsaXNpb25Qb3NMZWZ0LA0KCQkJCW92ZXJSaWdodCA9IGNvbGxpc2lvblBvc0xlZnQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldCwNCgkJCQluZXdPdmVyUmlnaHQ7DQoNCgkJCS8vIEVsZW1lbnQgaXMgd2lkZXIgdGhhbiB3aXRoaW4NCgkJCWlmICggZGF0YS5jb2xsaXNpb25XaWR0aCA+IG91dGVyV2lkdGggKSB7DQoNCgkJCQkvLyBFbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIHRoZSBsZWZ0IHNpZGUgb2Ygd2l0aGluDQoJCQkJaWYgKCBvdmVyTGVmdCA+IDAgJiYgb3ZlclJpZ2h0IDw9IDAgKSB7DQoJCQkJCW5ld092ZXJSaWdodCA9IHBvc2l0aW9uLmxlZnQgKyBvdmVyTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0NCgkJCQkJCXdpdGhpbk9mZnNldDsNCgkJCQkJcG9zaXRpb24ubGVmdCArPSBvdmVyTGVmdCAtIG5ld092ZXJSaWdodDsNCg0KCQkJCS8vIEVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgcmlnaHQgc2lkZSBvZiB3aXRoaW4NCgkJCQl9IGVsc2UgaWYgKCBvdmVyUmlnaHQgPiAwICYmIG92ZXJMZWZ0IDw9IDAgKSB7DQoJCQkJCXBvc2l0aW9uLmxlZnQgPSB3aXRoaW5PZmZzZXQ7DQoNCgkJCQkvLyBFbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIGJvdGggbGVmdCBhbmQgcmlnaHQgc2lkZXMgb2Ygd2l0aGluDQoJCQkJfSBlbHNlIHsNCgkJCQkJaWYgKCBvdmVyTGVmdCA+IG92ZXJSaWdodCApIHsNCgkJCQkJCXBvc2l0aW9uLmxlZnQgPSB3aXRoaW5PZmZzZXQgKyBvdXRlcldpZHRoIC0gZGF0YS5jb2xsaXNpb25XaWR0aDsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCXBvc2l0aW9uLmxlZnQgPSB3aXRoaW5PZmZzZXQ7DQoJCQkJCX0NCgkJCQl9DQoNCgkJCS8vIFRvbyBmYXIgbGVmdCAtPiBhbGlnbiB3aXRoIGxlZnQgZWRnZQ0KCQkJfSBlbHNlIGlmICggb3ZlckxlZnQgPiAwICkgew0KCQkJCXBvc2l0aW9uLmxlZnQgKz0gb3ZlckxlZnQ7DQoNCgkJCS8vIFRvbyBmYXIgcmlnaHQgLT4gYWxpZ24gd2l0aCByaWdodCBlZGdlDQoJCQl9IGVsc2UgaWYgKCBvdmVyUmlnaHQgPiAwICkgew0KCQkJCXBvc2l0aW9uLmxlZnQgLT0gb3ZlclJpZ2h0Ow0KDQoJCQkvLyBBZGp1c3QgYmFzZWQgb24gcG9zaXRpb24gYW5kIG1hcmdpbg0KCQkJfSBlbHNlIHsNCgkJCQlwb3NpdGlvbi5sZWZ0ID0gbWF4KCBwb3NpdGlvbi5sZWZ0IC0gY29sbGlzaW9uUG9zTGVmdCwgcG9zaXRpb24ubGVmdCApOw0KCQkJfQ0KCQl9LA0KCQl0b3A6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHsNCgkJCXZhciB3aXRoaW4gPSBkYXRhLndpdGhpbiwNCgkJCQl3aXRoaW5PZmZzZXQgPSB3aXRoaW4uaXNXaW5kb3cgPyB3aXRoaW4uc2Nyb2xsVG9wIDogd2l0aGluLm9mZnNldC50b3AsDQoJCQkJb3V0ZXJIZWlnaHQgPSBkYXRhLndpdGhpbi5oZWlnaHQsDQoJCQkJY29sbGlzaW9uUG9zVG9wID0gcG9zaXRpb24udG9wIC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsDQoJCQkJb3ZlclRvcCA9IHdpdGhpbk9mZnNldCAtIGNvbGxpc2lvblBvc1RvcCwNCgkJCQlvdmVyQm90dG9tID0gY29sbGlzaW9uUG9zVG9wICsgZGF0YS5jb2xsaXNpb25IZWlnaHQgLSBvdXRlckhlaWdodCAtIHdpdGhpbk9mZnNldCwNCgkJCQluZXdPdmVyQm90dG9tOw0KDQoJCQkvLyBFbGVtZW50IGlzIHRhbGxlciB0aGFuIHdpdGhpbg0KCQkJaWYgKCBkYXRhLmNvbGxpc2lvbkhlaWdodCA+IG91dGVySGVpZ2h0ICkgew0KDQoJCQkJLy8gRWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciB0aGUgdG9wIG9mIHdpdGhpbg0KCQkJCWlmICggb3ZlclRvcCA+IDAgJiYgb3ZlckJvdHRvbSA8PSAwICkgew0KCQkJCQluZXdPdmVyQm90dG9tID0gcG9zaXRpb24udG9wICsgb3ZlclRvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLQ0KCQkJCQkJd2l0aGluT2Zmc2V0Ow0KCQkJCQlwb3NpdGlvbi50b3AgKz0gb3ZlclRvcCAtIG5ld092ZXJCb3R0b207DQoNCgkJCQkvLyBFbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIGJvdHRvbSBvZiB3aXRoaW4NCgkJCQl9IGVsc2UgaWYgKCBvdmVyQm90dG9tID4gMCAmJiBvdmVyVG9wIDw9IDAgKSB7DQoJCQkJCXBvc2l0aW9uLnRvcCA9IHdpdGhpbk9mZnNldDsNCg0KCQkJCS8vIEVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90aCB0b3AgYW5kIGJvdHRvbSBvZiB3aXRoaW4NCgkJCQl9IGVsc2Ugew0KCQkJCQlpZiAoIG92ZXJUb3AgPiBvdmVyQm90dG9tICkgew0KCQkJCQkJcG9zaXRpb24udG9wID0gd2l0aGluT2Zmc2V0ICsgb3V0ZXJIZWlnaHQgLSBkYXRhLmNvbGxpc2lvbkhlaWdodDsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCXBvc2l0aW9uLnRvcCA9IHdpdGhpbk9mZnNldDsNCgkJCQkJfQ0KCQkJCX0NCg0KCQkJLy8gVG9vIGZhciB1cCAtPiBhbGlnbiB3aXRoIHRvcA0KCQkJfSBlbHNlIGlmICggb3ZlclRvcCA+IDAgKSB7DQoJCQkJcG9zaXRpb24udG9wICs9IG92ZXJUb3A7DQoNCgkJCS8vIFRvbyBmYXIgZG93biAtPiBhbGlnbiB3aXRoIGJvdHRvbSBlZGdlDQoJCQl9IGVsc2UgaWYgKCBvdmVyQm90dG9tID4gMCApIHsNCgkJCQlwb3NpdGlvbi50b3AgLT0gb3ZlckJvdHRvbTsNCg0KCQkJLy8gQWRqdXN0IGJhc2VkIG9uIHBvc2l0aW9uIGFuZCBtYXJnaW4NCgkJCX0gZWxzZSB7DQoJCQkJcG9zaXRpb24udG9wID0gbWF4KCBwb3NpdGlvbi50b3AgLSBjb2xsaXNpb25Qb3NUb3AsIHBvc2l0aW9uLnRvcCApOw0KCQkJfQ0KCQl9DQoJfSwNCglmbGlwOiB7DQoJCWxlZnQ6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHsNCgkJCXZhciB3aXRoaW4gPSBkYXRhLndpdGhpbiwNCgkJCQl3aXRoaW5PZmZzZXQgPSB3aXRoaW4ub2Zmc2V0LmxlZnQgKyB3aXRoaW4uc2Nyb2xsTGVmdCwNCgkJCQlvdXRlcldpZHRoID0gd2l0aGluLndpZHRoLA0KCQkJCW9mZnNldExlZnQgPSB3aXRoaW4uaXNXaW5kb3cgPyB3aXRoaW4uc2Nyb2xsTGVmdCA6IHdpdGhpbi5vZmZzZXQubGVmdCwNCgkJCQljb2xsaXNpb25Qb3NMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCwNCgkJCQlvdmVyTGVmdCA9IGNvbGxpc2lvblBvc0xlZnQgLSBvZmZzZXRMZWZ0LA0KCQkJCW92ZXJSaWdodCA9IGNvbGxpc2lvblBvc0xlZnQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIG9mZnNldExlZnQsDQoJCQkJbXlPZmZzZXQgPSBkYXRhLm15WyAwIF0gPT09ICJsZWZ0IiA/DQoJCQkJCS1kYXRhLmVsZW1XaWR0aCA6DQoJCQkJCWRhdGEubXlbIDAgXSA9PT0gInJpZ2h0IiA/DQoJCQkJCQlkYXRhLmVsZW1XaWR0aCA6DQoJCQkJCQkwLA0KCQkJCWF0T2Zmc2V0ID0gZGF0YS5hdFsgMCBdID09PSAibGVmdCIgPw0KCQkJCQlkYXRhLnRhcmdldFdpZHRoIDoNCgkJCQkJZGF0YS5hdFsgMCBdID09PSAicmlnaHQiID8NCgkJCQkJCS1kYXRhLnRhcmdldFdpZHRoIDoNCgkJCQkJCTAsDQoJCQkJb2Zmc2V0ID0gLTIgKiBkYXRhLm9mZnNldFsgMCBdLA0KCQkJCW5ld092ZXJSaWdodCwNCgkJCQluZXdPdmVyTGVmdDsNCg0KCQkJaWYgKCBvdmVyTGVmdCA8IDAgKSB7DQoJCQkJbmV3T3ZlclJpZ2h0ID0gcG9zaXRpb24ubGVmdCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0NCgkJCQkJb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldDsNCgkJCQlpZiAoIG5ld092ZXJSaWdodCA8IDAgfHwgbmV3T3ZlclJpZ2h0IDwgYWJzKCBvdmVyTGVmdCApICkgew0KCQkJCQlwb3NpdGlvbi5sZWZ0ICs9IG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQ7DQoJCQkJfQ0KCQkJfSBlbHNlIGlmICggb3ZlclJpZ2h0ID4gMCApIHsNCgkJCQluZXdPdmVyTGVmdCA9IHBvc2l0aW9uLmxlZnQgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQgKyBteU9mZnNldCArDQoJCQkJCWF0T2Zmc2V0ICsgb2Zmc2V0IC0gb2Zmc2V0TGVmdDsNCgkJCQlpZiAoIG5ld092ZXJMZWZ0ID4gMCB8fCBhYnMoIG5ld092ZXJMZWZ0ICkgPCBvdmVyUmlnaHQgKSB7DQoJCQkJCXBvc2l0aW9uLmxlZnQgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsNCgkJCQl9DQoJCQl9DQoJCX0sDQoJCXRvcDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkgew0KCQkJdmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLA0KCQkJCXdpdGhpbk9mZnNldCA9IHdpdGhpbi5vZmZzZXQudG9wICsgd2l0aGluLnNjcm9sbFRvcCwNCgkJCQlvdXRlckhlaWdodCA9IHdpdGhpbi5oZWlnaHQsDQoJCQkJb2Zmc2V0VG9wID0gd2l0aGluLmlzV2luZG93ID8gd2l0aGluLnNjcm9sbFRvcCA6IHdpdGhpbi5vZmZzZXQudG9wLA0KCQkJCWNvbGxpc2lvblBvc1RvcCA9IHBvc2l0aW9uLnRvcCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLA0KCQkJCW92ZXJUb3AgPSBjb2xsaXNpb25Qb3NUb3AgLSBvZmZzZXRUb3AsDQoJCQkJb3ZlckJvdHRvbSA9IGNvbGxpc2lvblBvc1RvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSBvZmZzZXRUb3AsDQoJCQkJdG9wID0gZGF0YS5teVsgMSBdID09PSAidG9wIiwNCgkJCQlteU9mZnNldCA9IHRvcCA/DQoJCQkJCS1kYXRhLmVsZW1IZWlnaHQgOg0KCQkJCQlkYXRhLm15WyAxIF0gPT09ICJib3R0b20iID8NCgkJCQkJCWRhdGEuZWxlbUhlaWdodCA6DQoJCQkJCQkwLA0KCQkJCWF0T2Zmc2V0ID0gZGF0YS5hdFsgMSBdID09PSAidG9wIiA/DQoJCQkJCWRhdGEudGFyZ2V0SGVpZ2h0IDoNCgkJCQkJZGF0YS5hdFsgMSBdID09PSAiYm90dG9tIiA/DQoJCQkJCQktZGF0YS50YXJnZXRIZWlnaHQgOg0KCQkJCQkJMCwNCgkJCQlvZmZzZXQgPSAtMiAqIGRhdGEub2Zmc2V0WyAxIF0sDQoJCQkJbmV3T3ZlclRvcCwNCgkJCQluZXdPdmVyQm90dG9tOw0KCQkJaWYgKCBvdmVyVG9wIDwgMCApIHsNCgkJCQluZXdPdmVyQm90dG9tID0gcG9zaXRpb24udG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0NCgkJCQkJb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQ7DQoJCQkJaWYgKCBuZXdPdmVyQm90dG9tIDwgMCB8fCBuZXdPdmVyQm90dG9tIDwgYWJzKCBvdmVyVG9wICkgKSB7DQoJCQkJCXBvc2l0aW9uLnRvcCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0Ow0KCQkJCX0NCgkJCX0gZWxzZSBpZiAoIG92ZXJCb3R0b20gPiAwICkgew0KCQkJCW5ld092ZXJUb3AgPSBwb3NpdGlvbi50b3AgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKw0KCQkJCQlvZmZzZXQgLSBvZmZzZXRUb3A7DQoJCQkJaWYgKCBuZXdPdmVyVG9wID4gMCB8fCBhYnMoIG5ld092ZXJUb3AgKSA8IG92ZXJCb3R0b20gKSB7DQoJCQkJCXBvc2l0aW9uLnRvcCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0Ow0KCQkJCX0NCgkJCX0NCgkJfQ0KCX0sDQoJZmxpcGZpdDogew0KCQlsZWZ0OiBmdW5jdGlvbigpIHsNCgkJCSQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsNCgkJCSQudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOw0KCQl9LA0KCQl0b3A6IGZ1bmN0aW9uKCkgew0KCQkJJC51aS5wb3NpdGlvbi5mbGlwLnRvcC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7DQoJCQkkLnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOw0KCQl9DQoJfQ0KfTsNCg0KfSApKCk7DQoNCnZhciBwb3NpdGlvbiA9ICQudWkucG9zaXRpb247DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgOmRhdGEgMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqLw0KDQovLz4+bGFiZWw6IDpkYXRhIFNlbGVjdG9yDQovLz4+Z3JvdXA6IENvcmUNCi8vPj5kZXNjcmlwdGlvbjogU2VsZWN0cyBlbGVtZW50cyB3aGljaCBoYXZlIGRhdGEgc3RvcmVkIHVuZGVyIHRoZSBzcGVjaWZpZWQga2V5Lg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RhdGEtc2VsZWN0b3IvDQoNCg0KdmFyIGRhdGEgPSAkLmV4dGVuZCggJC5leHByWyAiOiIgXSwgew0KCWRhdGE6ICQuZXhwci5jcmVhdGVQc2V1ZG8gPw0KCQkkLmV4cHIuY3JlYXRlUHNldWRvKCBmdW5jdGlvbiggZGF0YU5hbWUgKSB7DQoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7DQoJCQkJcmV0dXJuICEhJC5kYXRhKCBlbGVtLCBkYXRhTmFtZSApOw0KCQkJfTsNCgkJfSApIDoNCg0KCQkvLyBTdXBwb3J0OiBqUXVlcnkgPDEuOA0KCQlmdW5jdGlvbiggZWxlbSwgaSwgbWF0Y2ggKSB7DQoJCQlyZXR1cm4gISEkLmRhdGEoIGVsZW0sIG1hdGNoWyAzIF0gKTsNCgkJfQ0KfSApOw0KDQovKiENCiAqIGpRdWVyeSBVSSBEaXNhYmxlIFNlbGVjdGlvbiAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogZGlzYWJsZVNlbGVjdGlvbg0KLy8+Pmdyb3VwOiBDb3JlDQovLz4+ZGVzY3JpcHRpb246IERpc2FibGUgc2VsZWN0aW9uIG9mIHRleHQgY29udGVudCB3aXRoaW4gdGhlIHNldCBvZiBtYXRjaGVkIGVsZW1lbnRzLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2Rpc2FibGVTZWxlY3Rpb24vDQoNCi8vIFRoaXMgZmlsZSBpcyBkZXByZWNhdGVkDQoNCg0KdmFyIGRpc2FibGVTZWxlY3Rpb24gPSAkLmZuLmV4dGVuZCggew0KCWRpc2FibGVTZWxlY3Rpb246ICggZnVuY3Rpb24oKSB7DQoJCXZhciBldmVudFR5cGUgPSAib25zZWxlY3RzdGFydCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSA/DQoJCQkic2VsZWN0c3RhcnQiIDoNCgkJCSJtb3VzZWRvd24iOw0KDQoJCXJldHVybiBmdW5jdGlvbigpIHsNCgkJCXJldHVybiB0aGlzLm9uKCBldmVudFR5cGUgKyAiLnVpLWRpc2FibGVTZWxlY3Rpb24iLCBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkJCX0gKTsNCgkJfTsNCgl9ICkoKSwNCg0KCWVuYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7DQoJCXJldHVybiB0aGlzLm9mZiggIi51aS1kaXNhYmxlU2VsZWN0aW9uIiApOw0KCX0NCn0gKTsNCg0KDQovKiENCiAqIGpRdWVyeSBVSSBGb2N1c2FibGUgMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqLw0KDQovLz4+bGFiZWw6IDpmb2N1c2FibGUgU2VsZWN0b3INCi8vPj5ncm91cDogQ29yZQ0KLy8+PmRlc2NyaXB0aW9uOiBTZWxlY3RzIGVsZW1lbnRzIHdoaWNoIGNhbiBiZSBmb2N1c2VkLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2ZvY3VzYWJsZS1zZWxlY3Rvci8NCg0KDQoNCi8vIFNlbGVjdG9ycw0KJC51aS5mb2N1c2FibGUgPSBmdW5jdGlvbiggZWxlbWVudCwgaGFzVGFiaW5kZXggKSB7DQoJdmFyIG1hcCwgbWFwTmFtZSwgaW1nLCBmb2N1c2FibGVJZlZpc2libGUsIGZpZWxkc2V0LA0KCQlub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCg0KCWlmICggImFyZWEiID09PSBub2RlTmFtZSApIHsNCgkJbWFwID0gZWxlbWVudC5wYXJlbnROb2RlOw0KCQltYXBOYW1lID0gbWFwLm5hbWU7DQoJCWlmICggIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gIm1hcCIgKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgkJaW1nID0gJCggImltZ1t1c2VtYXA9JyMiICsgbWFwTmFtZSArICInXSIgKTsNCgkJcmV0dXJuIGltZy5sZW5ndGggPiAwICYmIGltZy5pcyggIjp2aXNpYmxlIiApOw0KCX0NCg0KCWlmICggL14oaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC8udGVzdCggbm9kZU5hbWUgKSApIHsNCgkJZm9jdXNhYmxlSWZWaXNpYmxlID0gIWVsZW1lbnQuZGlzYWJsZWQ7DQoNCgkJaWYgKCBmb2N1c2FibGVJZlZpc2libGUgKSB7DQoNCgkJCS8vIEZvcm0gY29udHJvbHMgd2l0aGluIGEgZGlzYWJsZWQgZmllbGRzZXQgYXJlIGRpc2FibGVkLg0KCQkJLy8gSG93ZXZlciwgY29udHJvbHMgd2l0aGluIHRoZSBmaWVsZHNldCdzIGxlZ2VuZCBkbyBub3QgZ2V0IGRpc2FibGVkLg0KCQkJLy8gU2luY2UgY29udHJvbHMgZ2VuZXJhbGx5IGFyZW4ndCBwbGFjZWQgaW5zaWRlIGxlZ2VuZHMsIHdlIHNraXANCgkJCS8vIHRoaXMgcG9ydGlvbiBvZiB0aGUgY2hlY2suDQoJCQlmaWVsZHNldCA9ICQoIGVsZW1lbnQgKS5jbG9zZXN0KCAiZmllbGRzZXQiIClbIDAgXTsNCgkJCWlmICggZmllbGRzZXQgKSB7DQoJCQkJZm9jdXNhYmxlSWZWaXNpYmxlID0gIWZpZWxkc2V0LmRpc2FibGVkOw0KCQkJfQ0KCQl9DQoJfSBlbHNlIGlmICggImEiID09PSBub2RlTmFtZSApIHsNCgkJZm9jdXNhYmxlSWZWaXNpYmxlID0gZWxlbWVudC5ocmVmIHx8IGhhc1RhYmluZGV4Ow0KCX0gZWxzZSB7DQoJCWZvY3VzYWJsZUlmVmlzaWJsZSA9IGhhc1RhYmluZGV4Ow0KCX0NCg0KCXJldHVybiBmb2N1c2FibGVJZlZpc2libGUgJiYgJCggZWxlbWVudCApLmlzKCAiOnZpc2libGUiICkgJiYgdmlzaWJsZSggJCggZWxlbWVudCApICk7DQp9Ow0KDQovLyBTdXBwb3J0OiBJRSA4IG9ubHkNCi8vIElFIDggZG9lc24ndCByZXNvbHZlIGluaGVyaXQgdG8gdmlzaWJsZS9oaWRkZW4gZm9yIGNvbXB1dGVkIHZhbHVlcw0KZnVuY3Rpb24gdmlzaWJsZSggZWxlbWVudCApIHsNCgl2YXIgdmlzaWJpbGl0eSA9IGVsZW1lbnQuY3NzKCAidmlzaWJpbGl0eSIgKTsNCgl3aGlsZSAoIHZpc2liaWxpdHkgPT09ICJpbmhlcml0IiApIHsNCgkJZWxlbWVudCA9IGVsZW1lbnQucGFyZW50KCk7DQoJCXZpc2liaWxpdHkgPSBlbGVtZW50LmNzcyggInZpc2liaWxpdHkiICk7DQoJfQ0KCXJldHVybiB2aXNpYmlsaXR5ICE9PSAiaGlkZGVuIjsNCn0NCg0KJC5leHRlbmQoICQuZXhwclsgIjoiIF0sIHsNCglmb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkgew0KCQlyZXR1cm4gJC51aS5mb2N1c2FibGUoIGVsZW1lbnQsICQuYXR0ciggZWxlbWVudCwgInRhYmluZGV4IiApICE9IG51bGwgKTsNCgl9DQp9ICk7DQoNCnZhciBmb2N1c2FibGUgPSAkLnVpLmZvY3VzYWJsZTsNCg0KDQoNCg0KLy8gU3VwcG9ydDogSUU4IE9ubHkNCi8vIElFOCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBmb3JtIGF0dHJpYnV0ZSBhbmQgd2hlbiBpdCBpcyBzdXBwbGllZC4gSXQgb3ZlcndyaXRlcyB0aGUgZm9ybSBwcm9wDQovLyB3aXRoIGEgc3RyaW5nLCBzbyB3ZSBuZWVkIHRvIGZpbmQgdGhlIHByb3BlciBmb3JtLg0KdmFyIGZvcm0gPSAkLmZuLmZvcm0gPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdHlwZW9mIHRoaXNbIDAgXS5mb3JtID09PSAic3RyaW5nIiA/IHRoaXMuY2xvc2VzdCggImZvcm0iICkgOiAkKCB0aGlzWyAwIF0uZm9ybSApOw0KfTsNCg0KDQovKiENCiAqIGpRdWVyeSBVSSBGb3JtIFJlc2V0IE1peGluIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBGb3JtIFJlc2V0IE1peGluDQovLz4+Z3JvdXA6IENvcmUNCi8vPj5kZXNjcmlwdGlvbjogUmVmcmVzaCBpbnB1dCB3aWRnZXRzIHdoZW4gdGhlaXIgZm9ybSBpcyByZXNldA0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2Zvcm0tcmVzZXQtbWl4aW4vDQoNCg0KDQp2YXIgZm9ybVJlc2V0TWl4aW4gPSAkLnVpLmZvcm1SZXNldE1peGluID0gew0KCV9mb3JtUmVzZXRIYW5kbGVyOiBmdW5jdGlvbigpIHsNCgkJdmFyIGZvcm0gPSAkKCB0aGlzICk7DQoNCgkJLy8gV2FpdCBmb3IgdGhlIGZvcm0gcmVzZXQgdG8gYWN0dWFsbHkgaGFwcGVuIGJlZm9yZSByZWZyZXNoaW5nDQoJCXNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGluc3RhbmNlcyA9IGZvcm0uZGF0YSggInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIiApOw0KCQkJJC5lYWNoKCBpbnN0YW5jZXMsIGZ1bmN0aW9uKCkgew0KCQkJCXRoaXMucmVmcmVzaCgpOw0KCQkJfSApOw0KCQl9ICk7DQoJfSwNCg0KCV9iaW5kRm9ybVJlc2V0SGFuZGxlcjogZnVuY3Rpb24oKSB7DQoJCXRoaXMuZm9ybSA9IHRoaXMuZWxlbWVudC5mb3JtKCk7DQoJCWlmICggIXRoaXMuZm9ybS5sZW5ndGggKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl2YXIgaW5zdGFuY2VzID0gdGhpcy5mb3JtLmRhdGEoICJ1aS1mb3JtLXJlc2V0LWluc3RhbmNlcyIgKSB8fCBbXTsNCgkJaWYgKCAhaW5zdGFuY2VzLmxlbmd0aCApIHsNCg0KCQkJLy8gV2UgZG9uJ3QgdXNlIF9vbigpIGhlcmUgYmVjYXVzZSB3ZSB1c2UgYSBzaW5nbGUgZXZlbnQgaGFuZGxlciBwZXIgZm9ybQ0KCQkJdGhpcy5mb3JtLm9uKCAicmVzZXQudWktZm9ybS1yZXNldCIsIHRoaXMuX2Zvcm1SZXNldEhhbmRsZXIgKTsNCgkJfQ0KCQlpbnN0YW5jZXMucHVzaCggdGhpcyApOw0KCQl0aGlzLmZvcm0uZGF0YSggInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIiwgaW5zdGFuY2VzICk7DQoJfSwNCg0KCV91bmJpbmRGb3JtUmVzZXRIYW5kbGVyOiBmdW5jdGlvbigpIHsNCgkJaWYgKCAhdGhpcy5mb3JtLmxlbmd0aCApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCXZhciBpbnN0YW5jZXMgPSB0aGlzLmZvcm0uZGF0YSggInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIiApOw0KCQlpbnN0YW5jZXMuc3BsaWNlKCAkLmluQXJyYXkoIHRoaXMsIGluc3RhbmNlcyApLCAxICk7DQoJCWlmICggaW5zdGFuY2VzLmxlbmd0aCApIHsNCgkJCXRoaXMuZm9ybS5kYXRhKCAidWktZm9ybS1yZXNldC1pbnN0YW5jZXMiLCBpbnN0YW5jZXMgKTsNCgkJfSBlbHNlIHsNCgkJCXRoaXMuZm9ybQ0KCQkJCS5yZW1vdmVEYXRhKCAidWktZm9ybS1yZXNldC1pbnN0YW5jZXMiICkNCgkJCQkub2ZmKCAicmVzZXQudWktZm9ybS1yZXNldCIgKTsNCgkJfQ0KCX0NCn07DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgU3VwcG9ydCBmb3IgalF1ZXJ5IGNvcmUgMS43LnggMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqDQogKi8NCg0KLy8+PmxhYmVsOiBqUXVlcnkgMS43IFN1cHBvcnQNCi8vPj5ncm91cDogQ29yZQ0KLy8+PmRlc2NyaXB0aW9uOiBTdXBwb3J0IHZlcnNpb24gMS43Lnggb2YgalF1ZXJ5IGNvcmUNCg0KDQoNCi8vIFN1cHBvcnQ6IGpRdWVyeSAxLjcgb25seQ0KLy8gTm90IGEgZ3JlYXQgd2F5IHRvIGNoZWNrIHZlcnNpb25zLCBidXQgc2luY2Ugd2Ugb25seSBzdXBwb3J0IDEuNysgYW5kIG9ubHkNCi8vIG5lZWQgdG8gZGV0ZWN0IDwxLjgsIHRoaXMgaXMgYSBzaW1wbGUgY2hlY2sgdGhhdCBzaG91bGQgc3VmZmljZS4gQ2hlY2tpbmcNCi8vIGZvciAiMS43LiIgd291bGQgYmUgYSBiaXQgc2FmZXIsIGJ1dCB0aGUgdmVyc2lvbiBzdHJpbmcgaXMgMS43LCBub3QgMS43LjANCi8vIGFuZCB3ZSdsbCBuZXZlciByZWFjaCAxLjcwLjAgKGlmIHdlIGRvLCB3ZSBjZXJ0YWlubHkgd29uJ3QgYmUgc3VwcG9ydGluZw0KLy8gMS43IGFueW1vcmUpLiBTZWUgIzExMTk3IGZvciB3aHkgd2UncmUgbm90IHVzaW5nIGZlYXR1cmUgZGV0ZWN0aW9uLg0KaWYgKCAkLmZuLmpxdWVyeS5zdWJzdHJpbmcoIDAsIDMgKSA9PT0gIjEuNyIgKSB7DQoNCgkvLyBTZXR0ZXJzIGZvciAuaW5uZXJXaWR0aCgpLCAuaW5uZXJIZWlnaHQoKSwgLm91dGVyV2lkdGgoKSwgLm91dGVySGVpZ2h0KCkNCgkvLyBVbmxpa2UgalF1ZXJ5IENvcmUgMS44KywgdGhlc2Ugb25seSBzdXBwb3J0IG51bWVyaWMgdmFsdWVzIHRvIHNldCB0aGUNCgkvLyBkaW1lbnNpb25zIGluIHBpeGVscw0KCSQuZWFjaCggWyAiV2lkdGgiLCAiSGVpZ2h0IiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsNCgkJdmFyIHNpZGUgPSBuYW1lID09PSAiV2lkdGgiID8gWyAiTGVmdCIsICJSaWdodCIgXSA6IFsgIlRvcCIsICJCb3R0b20iIF0sDQoJCQl0eXBlID0gbmFtZS50b0xvd2VyQ2FzZSgpLA0KCQkJb3JpZyA9IHsNCgkJCQlpbm5lcldpZHRoOiAkLmZuLmlubmVyV2lkdGgsDQoJCQkJaW5uZXJIZWlnaHQ6ICQuZm4uaW5uZXJIZWlnaHQsDQoJCQkJb3V0ZXJXaWR0aDogJC5mbi5vdXRlcldpZHRoLA0KCQkJCW91dGVySGVpZ2h0OiAkLmZuLm91dGVySGVpZ2h0DQoJCQl9Ow0KDQoJCWZ1bmN0aW9uIHJlZHVjZSggZWxlbSwgc2l6ZSwgYm9yZGVyLCBtYXJnaW4gKSB7DQoJCQkkLmVhY2goIHNpZGUsIGZ1bmN0aW9uKCkgew0KCQkJCXNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sICJwYWRkaW5nIiArIHRoaXMgKSApIHx8IDA7DQoJCQkJaWYgKCBib3JkZXIgKSB7DQoJCQkJCXNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sICJib3JkZXIiICsgdGhpcyArICJXaWR0aCIgKSApIHx8IDA7DQoJCQkJfQ0KCQkJCWlmICggbWFyZ2luICkgew0KCQkJCQlzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCAibWFyZ2luIiArIHRoaXMgKSApIHx8IDA7DQoJCQkJfQ0KCQkJfSApOw0KCQkJcmV0dXJuIHNpemU7DQoJCX0NCg0KCQkkLmZuWyAiaW5uZXIiICsgbmFtZSBdID0gZnVuY3Rpb24oIHNpemUgKSB7DQoJCQlpZiAoIHNpemUgPT09IHVuZGVmaW5lZCApIHsNCgkJCQlyZXR1cm4gb3JpZ1sgImlubmVyIiArIG5hbWUgXS5jYWxsKCB0aGlzICk7DQoJCQl9DQoNCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJCSQoIHRoaXMgKS5jc3MoIHR5cGUsIHJlZHVjZSggdGhpcywgc2l6ZSApICsgInB4IiApOw0KCQkJfSApOw0KCQl9Ow0KDQoJCSQuZm5bICJvdXRlciIgKyBuYW1lIF0gPSBmdW5jdGlvbiggc2l6ZSwgbWFyZ2luICkgew0KCQkJaWYgKCB0eXBlb2Ygc2l6ZSAhPT0gIm51bWJlciIgKSB7DQoJCQkJcmV0dXJuIG9yaWdbICJvdXRlciIgKyBuYW1lIF0uY2FsbCggdGhpcywgc2l6ZSApOw0KCQkJfQ0KDQoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQkkKCB0aGlzICkuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgInB4IiApOw0KCQkJfSApOw0KCQl9Ow0KCX0gKTsNCg0KCSQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsNCgkJcmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID8NCgkJCXRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yICkNCgkJKTsNCgl9Ow0KfQ0KDQo7DQovKiENCiAqIGpRdWVyeSBVSSBLZXljb2RlIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBLZXljb2RlDQovLz4+Z3JvdXA6IENvcmUNCi8vPj5kZXNjcmlwdGlvbjogUHJvdmlkZSBrZXljb2RlcyBhcyBrZXluYW1lcw0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS51aS5rZXlDb2RlLw0KDQoNCnZhciBrZXljb2RlID0gJC51aS5rZXlDb2RlID0gew0KCUJBQ0tTUEFDRTogOCwNCglDT01NQTogMTg4LA0KCURFTEVURTogNDYsDQoJRE9XTjogNDAsDQoJRU5EOiAzNSwNCglFTlRFUjogMTMsDQoJRVNDQVBFOiAyNywNCglIT01FOiAzNiwNCglMRUZUOiAzNywNCglQQUdFX0RPV046IDM0LA0KCVBBR0VfVVA6IDMzLA0KCVBFUklPRDogMTkwLA0KCVJJR0hUOiAzOSwNCglTUEFDRTogMzIsDQoJVEFCOiA5LA0KCVVQOiAzOA0KfTsNCg0KDQoNCg0KLy8gSW50ZXJuYWwgdXNlIG9ubHkNCnZhciBlc2NhcGVTZWxlY3RvciA9ICQudWkuZXNjYXBlU2VsZWN0b3IgPSAoIGZ1bmN0aW9uKCkgew0KCXZhciBzZWxlY3RvckVzY2FwZSA9IC8oWyEiIyQlJicoKSorLC4vOjs8PT4/QFtcXV5ge3x9fl0pL2c7DQoJcmV0dXJuIGZ1bmN0aW9uKCBzZWxlY3RvciApIHsNCgkJcmV0dXJuIHNlbGVjdG9yLnJlcGxhY2UoIHNlbGVjdG9yRXNjYXBlLCAiXFwkMSIgKTsNCgl9Ow0KfSApKCk7DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgTGFiZWxzIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBsYWJlbHMNCi8vPj5ncm91cDogQ29yZQ0KLy8+PmRlc2NyaXB0aW9uOiBGaW5kIGFsbCB0aGUgbGFiZWxzIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIGlucHV0DQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vbGFiZWxzLw0KDQoNCg0KdmFyIGxhYmVscyA9ICQuZm4ubGFiZWxzID0gZnVuY3Rpb24oKSB7DQoJdmFyIGFuY2VzdG9yLCBzZWxlY3RvciwgaWQsIGxhYmVscywgYW5jZXN0b3JzOw0KDQoJLy8gQ2hlY2sgY29udHJvbC5sYWJlbHMgZmlyc3QNCglpZiAoIHRoaXNbIDAgXS5sYWJlbHMgJiYgdGhpc1sgMCBdLmxhYmVscy5sZW5ndGggKSB7DQoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggdGhpc1sgMCBdLmxhYmVscyApOw0KCX0NCg0KCS8vIFN1cHBvcnQ6IElFIDw9IDExLCBGRiA8PSAzNywgQW5kcm9pZCA8PSAyLjMgb25seQ0KCS8vIEFib3ZlIGJyb3dzZXJzIGRvIG5vdCBzdXBwb3J0IGNvbnRyb2wubGFiZWxzLiBFdmVyeXRoaW5nIGJlbG93IGlzIHRvIHN1cHBvcnQgdGhlbQ0KCS8vIGFzIHdlbGwgYXMgZG9jdW1lbnQgZnJhZ21lbnRzLiBjb250cm9sLmxhYmVscyBkb2VzIG5vdCB3b3JrIG9uIGRvY3VtZW50IGZyYWdtZW50cw0KCWxhYmVscyA9IHRoaXMuZXEoIDAgKS5wYXJlbnRzKCAibGFiZWwiICk7DQoNCgkvLyBMb29rIGZvciB0aGUgbGFiZWwgYmFzZWQgb24gdGhlIGlkDQoJaWQgPSB0aGlzLmF0dHIoICJpZCIgKTsNCglpZiAoIGlkICkgew0KDQoJCS8vIFdlIGRvbid0IHNlYXJjaCBhZ2FpbnN0IHRoZSBkb2N1bWVudCBpbiBjYXNlIHRoZSBlbGVtZW50DQoJCS8vIGlzIGRpc2Nvbm5lY3RlZCBmcm9tIHRoZSBET00NCgkJYW5jZXN0b3IgPSB0aGlzLmVxKCAwICkucGFyZW50cygpLmxhc3QoKTsNCg0KCQkvLyBHZXQgYSBmdWxsIHNldCBvZiB0b3AgbGV2ZWwgYW5jZXN0b3JzDQoJCWFuY2VzdG9ycyA9IGFuY2VzdG9yLmFkZCggYW5jZXN0b3IubGVuZ3RoID8gYW5jZXN0b3Iuc2libGluZ3MoKSA6IHRoaXMuc2libGluZ3MoKSApOw0KDQoJCS8vIENyZWF0ZSBhIHNlbGVjdG9yIGZvciB0aGUgbGFiZWwgYmFzZWQgb24gdGhlIGlkDQoJCXNlbGVjdG9yID0gImxhYmVsW2Zvcj0nIiArICQudWkuZXNjYXBlU2VsZWN0b3IoIGlkICkgKyAiJ10iOw0KDQoJCWxhYmVscyA9IGxhYmVscy5hZGQoIGFuY2VzdG9ycy5maW5kKCBzZWxlY3RvciApLmFkZEJhY2soIHNlbGVjdG9yICkgKTsNCg0KCX0NCg0KCS8vIFJldHVybiB3aGF0ZXZlciB3ZSBoYXZlIGZvdW5kIGZvciBsYWJlbHMNCglyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGxhYmVscyApOw0KfTsNCg0KDQovKiENCiAqIGpRdWVyeSBVSSBTY3JvbGwgUGFyZW50IDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBzY3JvbGxQYXJlbnQNCi8vPj5ncm91cDogQ29yZQ0KLy8+PmRlc2NyaXB0aW9uOiBHZXQgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgZWxlbWVudCB0aGF0IGlzIHNjcm9sbGFibGUuDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2Nyb2xsUGFyZW50Lw0KDQoNCg0KdmFyIHNjcm9sbFBhcmVudCA9ICQuZm4uc2Nyb2xsUGFyZW50ID0gZnVuY3Rpb24oIGluY2x1ZGVIaWRkZW4gKSB7DQoJdmFyIHBvc2l0aW9uID0gdGhpcy5jc3MoICJwb3NpdGlvbiIgKSwNCgkJZXhjbHVkZVN0YXRpY1BhcmVudCA9IHBvc2l0aW9uID09PSAiYWJzb2x1dGUiLA0KCQlvdmVyZmxvd1JlZ2V4ID0gaW5jbHVkZUhpZGRlbiA/IC8oYXV0b3xzY3JvbGx8aGlkZGVuKS8gOiAvKGF1dG98c2Nyb2xsKS8sDQoJCXNjcm9sbFBhcmVudCA9IHRoaXMucGFyZW50cygpLmZpbHRlciggZnVuY3Rpb24oKSB7DQoJCQl2YXIgcGFyZW50ID0gJCggdGhpcyApOw0KCQkJaWYgKCBleGNsdWRlU3RhdGljUGFyZW50ICYmIHBhcmVudC5jc3MoICJwb3NpdGlvbiIgKSA9PT0gInN0YXRpYyIgKSB7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQkJcmV0dXJuIG92ZXJmbG93UmVnZXgudGVzdCggcGFyZW50LmNzcyggIm92ZXJmbG93IiApICsgcGFyZW50LmNzcyggIm92ZXJmbG93LXkiICkgKw0KCQkJCXBhcmVudC5jc3MoICJvdmVyZmxvdy14IiApICk7DQoJCX0gKS5lcSggMCApOw0KDQoJcmV0dXJuIHBvc2l0aW9uID09PSAiZml4ZWQiIHx8ICFzY3JvbGxQYXJlbnQubGVuZ3RoID8NCgkJJCggdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSA6DQoJCXNjcm9sbFBhcmVudDsNCn07DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgVGFiYmFibGUgMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqLw0KDQovLz4+bGFiZWw6IDp0YWJiYWJsZSBTZWxlY3Rvcg0KLy8+Pmdyb3VwOiBDb3JlDQovLz4+ZGVzY3JpcHRpb246IFNlbGVjdHMgZWxlbWVudHMgd2hpY2ggY2FuIGJlIHRhYmJlZCB0by4NCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS90YWJiYWJsZS1zZWxlY3Rvci8NCg0KDQoNCnZhciB0YWJiYWJsZSA9ICQuZXh0ZW5kKCAkLmV4cHJbICI6IiBdLCB7DQoJdGFiYmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkgew0KCQl2YXIgdGFiSW5kZXggPSAkLmF0dHIoIGVsZW1lbnQsICJ0YWJpbmRleCIgKSwNCgkJCWhhc1RhYmluZGV4ID0gdGFiSW5kZXggIT0gbnVsbDsNCgkJcmV0dXJuICggIWhhc1RhYmluZGV4IHx8IHRhYkluZGV4ID49IDAgKSAmJiAkLnVpLmZvY3VzYWJsZSggZWxlbWVudCwgaGFzVGFiaW5kZXggKTsNCgl9DQp9ICk7DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgVW5pcXVlIElEIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiB1bmlxdWVJZA0KLy8+Pmdyb3VwOiBDb3JlDQovLz4+ZGVzY3JpcHRpb246IEZ1bmN0aW9ucyB0byBnZW5lcmF0ZSBhbmQgcmVtb3ZlIHVuaXF1ZUlkJ3MNCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS91bmlxdWVJZC8NCg0KDQoNCnZhciB1bmlxdWVJZCA9ICQuZm4uZXh0ZW5kKCB7DQoJdW5pcXVlSWQ6ICggZnVuY3Rpb24oKSB7DQoJCXZhciB1dWlkID0gMDsNCg0KCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQlpZiAoICF0aGlzLmlkICkgew0KCQkJCQl0aGlzLmlkID0gInVpLWlkLSIgKyAoICsrdXVpZCApOw0KCQkJCX0NCgkJCX0gKTsNCgkJfTsNCgl9ICkoKSwNCg0KCXJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQlpZiAoIC9edWktaWQtXGQrJC8udGVzdCggdGhpcy5pZCApICkgew0KCQkJCSQoIHRoaXMgKS5yZW1vdmVBdHRyKCAiaWQiICk7DQoJCQl9DQoJCX0gKTsNCgl9DQp9ICk7DQoNCg0KDQoNCi8vIFRoaXMgZmlsZSBpcyBkZXByZWNhdGVkDQp2YXIgaWUgPSAkLnVpLmllID0gISEvbXNpZSBbXHcuXSsvLmV4ZWMoIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSApOw0KDQovKiENCiAqIGpRdWVyeSBVSSBNb3VzZSAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogTW91c2UNCi8vPj5ncm91cDogV2lkZ2V0cw0KLy8+PmRlc2NyaXB0aW9uOiBBYnN0cmFjdHMgbW91c2UtYmFzZWQgaW50ZXJhY3Rpb25zIHRvIGFzc2lzdCBpbiBjcmVhdGluZyBjZXJ0YWluIHdpZGdldHMuDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vbW91c2UvDQoNCg0KDQp2YXIgbW91c2VIYW5kbGVkID0gZmFsc2U7DQokKCBkb2N1bWVudCApLm9uKCAibW91c2V1cCIsIGZ1bmN0aW9uKCkgew0KCW1vdXNlSGFuZGxlZCA9IGZhbHNlOw0KfSApOw0KDQp2YXIgd2lkZ2V0c01vdXNlID0gJC53aWRnZXQoICJ1aS5tb3VzZSIsIHsNCgl2ZXJzaW9uOiAiMS4xMi4xIiwNCglvcHRpb25zOiB7DQoJCWNhbmNlbDogImlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uLCBzZWxlY3QsIG9wdGlvbiIsDQoJCWRpc3RhbmNlOiAxLA0KCQlkZWxheTogMA0KCX0sDQoJX21vdXNlSW5pdDogZnVuY3Rpb24oKSB7DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQl0aGlzLmVsZW1lbnQNCgkJCS5vbiggIm1vdXNlZG93bi4iICsgdGhpcy53aWRnZXROYW1lLCBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJcmV0dXJuIHRoYXQuX21vdXNlRG93biggZXZlbnQgKTsNCgkJCX0gKQ0KCQkJLm9uKCAiY2xpY2suIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oIGV2ZW50ICkgew0KCQkJCWlmICggdHJ1ZSA9PT0gJC5kYXRhKCBldmVudC50YXJnZXQsIHRoYXQud2lkZ2V0TmFtZSArICIucHJldmVudENsaWNrRXZlbnQiICkgKSB7DQoJCQkJCSQucmVtb3ZlRGF0YSggZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAiLnByZXZlbnRDbGlja0V2ZW50IiApOw0KCQkJCQlldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCX0NCgkJCX0gKTsNCg0KCQl0aGlzLnN0YXJ0ZWQgPSBmYWxzZTsNCgl9LA0KDQoJLy8gVE9ETzogbWFrZSBzdXJlIGRlc3Ryb3lpbmcgb25lIGluc3RhbmNlIG9mIG1vdXNlIGRvZXNuJ3QgbWVzcyB3aXRoDQoJLy8gb3RoZXIgaW5zdGFuY2VzIG9mIG1vdXNlDQoJX21vdXNlRGVzdHJveTogZnVuY3Rpb24oKSB7DQoJCXRoaXMuZWxlbWVudC5vZmYoICIuIiArIHRoaXMud2lkZ2V0TmFtZSApOw0KCQlpZiAoIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlICkgew0KCQkJdGhpcy5kb2N1bWVudA0KCQkJCS5vZmYoICJtb3VzZW1vdmUuIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgKQ0KCQkJCS5vZmYoICJtb3VzZXVwLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApOw0KCQl9DQoJfSwNCg0KCV9tb3VzZURvd246IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQkvLyBkb24ndCBsZXQgbW9yZSB0aGFuIG9uZSB3aWRnZXQgaGFuZGxlIG1vdXNlU3RhcnQNCgkJaWYgKCBtb3VzZUhhbmRsZWQgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLl9tb3VzZU1vdmVkID0gZmFsc2U7DQoNCgkJLy8gV2UgbWF5IGhhdmUgbWlzc2VkIG1vdXNldXAgKG91dCBvZiB3aW5kb3cpDQoJCSggdGhpcy5fbW91c2VTdGFydGVkICYmIHRoaXMuX21vdXNlVXAoIGV2ZW50ICkgKTsNCg0KCQl0aGlzLl9tb3VzZURvd25FdmVudCA9IGV2ZW50Ow0KDQoJCXZhciB0aGF0ID0gdGhpcywNCgkJCWJ0bklzTGVmdCA9ICggZXZlbnQud2hpY2ggPT09IDEgKSwNCg0KCQkJLy8gZXZlbnQudGFyZ2V0Lm5vZGVOYW1lIHdvcmtzIGFyb3VuZCBhIGJ1ZyBpbiBJRSA4IHdpdGgNCgkJCS8vIGRpc2FibGVkIGlucHV0cyAoIzc2MjApDQoJCQllbElzQ2FuY2VsID0gKCB0eXBlb2YgdGhpcy5vcHRpb25zLmNhbmNlbCA9PT0gInN0cmluZyIgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID8NCgkJCQkkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCB0aGlzLm9wdGlvbnMuY2FuY2VsICkubGVuZ3RoIDogZmFsc2UgKTsNCgkJaWYgKCAhYnRuSXNMZWZ0IHx8IGVsSXNDYW5jZWwgfHwgIXRoaXMuX21vdXNlQ2FwdHVyZSggZXZlbnQgKSApIHsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoNCgkJdGhpcy5tb3VzZURlbGF5TWV0ID0gIXRoaXMub3B0aW9ucy5kZWxheTsNCgkJaWYgKCAhdGhpcy5tb3VzZURlbGF5TWV0ICkgew0KCQkJdGhpcy5fbW91c2VEZWxheVRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7DQoJCQkJdGhhdC5tb3VzZURlbGF5TWV0ID0gdHJ1ZTsNCgkJCX0sIHRoaXMub3B0aW9ucy5kZWxheSApOw0KCQl9DQoNCgkJaWYgKCB0aGlzLl9tb3VzZURpc3RhbmNlTWV0KCBldmVudCApICYmIHRoaXMuX21vdXNlRGVsYXlNZXQoIGV2ZW50ICkgKSB7DQoJCQl0aGlzLl9tb3VzZVN0YXJ0ZWQgPSAoIHRoaXMuX21vdXNlU3RhcnQoIGV2ZW50ICkgIT09IGZhbHNlICk7DQoJCQlpZiAoICF0aGlzLl9tb3VzZVN0YXJ0ZWQgKSB7DQoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJfQ0KDQoJCS8vIENsaWNrIGV2ZW50IG1heSBuZXZlciBoYXZlIGZpcmVkIChHZWNrbyAmIE9wZXJhKQ0KCQlpZiAoIHRydWUgPT09ICQuZGF0YSggZXZlbnQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyAiLnByZXZlbnRDbGlja0V2ZW50IiApICkgew0KCQkJJC5yZW1vdmVEYXRhKCBldmVudC50YXJnZXQsIHRoaXMud2lkZ2V0TmFtZSArICIucHJldmVudENsaWNrRXZlbnQiICk7DQoJCX0NCg0KCQkvLyBUaGVzZSBkZWxlZ2F0ZXMgYXJlIHJlcXVpcmVkIHRvIGtlZXAgY29udGV4dA0KCQl0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSA9IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCXJldHVybiB0aGF0Ll9tb3VzZU1vdmUoIGV2ZW50ICk7DQoJCX07DQoJCXRoaXMuX21vdXNlVXBEZWxlZ2F0ZSA9IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCXJldHVybiB0aGF0Ll9tb3VzZVVwKCBldmVudCApOw0KCQl9Ow0KDQoJCXRoaXMuZG9jdW1lbnQNCgkJCS5vbiggIm1vdXNlbW92ZS4iICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSApDQoJCQkub24oICJtb3VzZXVwLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApOw0KDQoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQoNCgkJbW91c2VIYW5kbGVkID0gdHJ1ZTsNCgkJcmV0dXJuIHRydWU7DQoJfSwNCg0KCV9tb3VzZU1vdmU6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQkvLyBPbmx5IGNoZWNrIGZvciBtb3VzZXVwcyBvdXRzaWRlIHRoZSBkb2N1bWVudCBpZiB5b3UndmUgbW92ZWQgaW5zaWRlIHRoZSBkb2N1bWVudA0KCQkvLyBhdCBsZWFzdCBvbmNlLiBUaGlzIHByZXZlbnRzIHRoZSBmaXJpbmcgb2YgbW91c2V1cCBpbiB0aGUgY2FzZSBvZiBJRTw5LCB3aGljaCB3aWxsDQoJCS8vIGZpcmUgYSBtb3VzZW1vdmUgZXZlbnQgaWYgY29udGVudCBpcyBwbGFjZWQgdW5kZXIgdGhlIGN1cnNvci4gU2VlICM3Nzc4DQoJCS8vIFN1cHBvcnQ6IElFIDw5DQoJCWlmICggdGhpcy5fbW91c2VNb3ZlZCApIHsNCg0KCQkJLy8gSUUgbW91c2V1cCBjaGVjayAtIG1vdXNldXAgaGFwcGVuZWQgd2hlbiBtb3VzZSB3YXMgb3V0IG9mIHdpbmRvdw0KCQkJaWYgKCAkLnVpLmllICYmICggIWRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPCA5ICkgJiYNCgkJCQkJIWV2ZW50LmJ1dHRvbiApIHsNCgkJCQlyZXR1cm4gdGhpcy5fbW91c2VVcCggZXZlbnQgKTsNCg0KCQkJLy8gSWZyYW1lIG1vdXNldXAgY2hlY2sgLSBtb3VzZXVwIG9jY3VycmVkIGluIGFub3RoZXIgZG9jdW1lbnQNCgkJCX0gZWxzZSBpZiAoICFldmVudC53aGljaCApIHsNCg0KCQkJCS8vIFN1cHBvcnQ6IFNhZmFyaSA8PTggLSA5DQoJCQkJLy8gU2FmYXJpIHNldHMgd2hpY2ggdG8gMCBpZiB5b3UgcHJlc3MgYW55IG9mIHRoZSBmb2xsb3dpbmcga2V5cw0KCQkJCS8vIGR1cmluZyBhIGRyYWcgKCMxNDQ2MSkNCgkJCQlpZiAoIGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuY3RybEtleSB8fA0KCQkJCQkJZXZlbnQub3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc2hpZnRLZXkgKSB7DQoJCQkJCXRoaXMuaWdub3JlTWlzc2luZ1doaWNoID0gdHJ1ZTsNCgkJCQl9IGVsc2UgaWYgKCAhdGhpcy5pZ25vcmVNaXNzaW5nV2hpY2ggKSB7DQoJCQkJCXJldHVybiB0aGlzLl9tb3VzZVVwKCBldmVudCApOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCWlmICggZXZlbnQud2hpY2ggfHwgZXZlbnQuYnV0dG9uICkgew0KCQkJdGhpcy5fbW91c2VNb3ZlZCA9IHRydWU7DQoJCX0NCg0KCQlpZiAoIHRoaXMuX21vdXNlU3RhcnRlZCApIHsNCgkJCXRoaXMuX21vdXNlRHJhZyggZXZlbnQgKTsNCgkJCXJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCQl9DQoNCgkJaWYgKCB0aGlzLl9tb3VzZURpc3RhbmNlTWV0KCBldmVudCApICYmIHRoaXMuX21vdXNlRGVsYXlNZXQoIGV2ZW50ICkgKSB7DQoJCQl0aGlzLl9tb3VzZVN0YXJ0ZWQgPQ0KCQkJCSggdGhpcy5fbW91c2VTdGFydCggdGhpcy5fbW91c2VEb3duRXZlbnQsIGV2ZW50ICkgIT09IGZhbHNlICk7DQoJCQkoIHRoaXMuX21vdXNlU3RhcnRlZCA/IHRoaXMuX21vdXNlRHJhZyggZXZlbnQgKSA6IHRoaXMuX21vdXNlVXAoIGV2ZW50ICkgKTsNCgkJfQ0KDQoJCXJldHVybiAhdGhpcy5fbW91c2VTdGFydGVkOw0KCX0sDQoNCglfbW91c2VVcDogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl0aGlzLmRvY3VtZW50DQoJCQkub2ZmKCAibW91c2Vtb3ZlLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlICkNCgkJCS5vZmYoICJtb3VzZXVwLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApOw0KDQoJCWlmICggdGhpcy5fbW91c2VTdGFydGVkICkgew0KCQkJdGhpcy5fbW91c2VTdGFydGVkID0gZmFsc2U7DQoNCgkJCWlmICggZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQgKSB7DQoJCQkJJC5kYXRhKCBldmVudC50YXJnZXQsIHRoaXMud2lkZ2V0TmFtZSArICIucHJldmVudENsaWNrRXZlbnQiLCB0cnVlICk7DQoJCQl9DQoNCgkJCXRoaXMuX21vdXNlU3RvcCggZXZlbnQgKTsNCgkJfQ0KDQoJCWlmICggdGhpcy5fbW91c2VEZWxheVRpbWVyICkgew0KCQkJY2xlYXJUaW1lb3V0KCB0aGlzLl9tb3VzZURlbGF5VGltZXIgKTsNCgkJCWRlbGV0ZSB0aGlzLl9tb3VzZURlbGF5VGltZXI7DQoJCX0NCg0KCQl0aGlzLmlnbm9yZU1pc3NpbmdXaGljaCA9IGZhbHNlOw0KCQltb3VzZUhhbmRsZWQgPSBmYWxzZTsNCgkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgl9LA0KDQoJX21vdXNlRGlzdGFuY2VNZXQ6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJcmV0dXJuICggTWF0aC5tYXgoDQoJCQkJTWF0aC5hYnMoIHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VYIC0gZXZlbnQucGFnZVggKSwNCgkJCQlNYXRoLmFicyggdGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVkgLSBldmVudC5wYWdlWSApDQoJCQkpID49IHRoaXMub3B0aW9ucy5kaXN0YW5jZQ0KCQkpOw0KCX0sDQoNCglfbW91c2VEZWxheU1ldDogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkgew0KCQlyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0Ow0KCX0sDQoNCgkvLyBUaGVzZSBhcmUgcGxhY2Vob2xkZXIgbWV0aG9kcywgdG8gYmUgb3ZlcnJpZGVuIGJ5IGV4dGVuZGluZyBwbHVnaW4NCglfbW91c2VTdGFydDogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge30sDQoJX21vdXNlRHJhZzogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge30sDQoJX21vdXNlU3RvcDogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge30sDQoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkgeyByZXR1cm4gdHJ1ZTsgfQ0KfSApOw0KDQoNCg0KDQovLyAkLnVpLnBsdWdpbiBpcyBkZXByZWNhdGVkLiBVc2UgJC53aWRnZXQoKSBleHRlbnNpb25zIGluc3RlYWQuDQp2YXIgcGx1Z2luID0gJC51aS5wbHVnaW4gPSB7DQoJYWRkOiBmdW5jdGlvbiggbW9kdWxlLCBvcHRpb24sIHNldCApIHsNCgkJdmFyIGksDQoJCQlwcm90byA9ICQudWlbIG1vZHVsZSBdLnByb3RvdHlwZTsNCgkJZm9yICggaSBpbiBzZXQgKSB7DQoJCQlwcm90by5wbHVnaW5zWyBpIF0gPSBwcm90by5wbHVnaW5zWyBpIF0gfHwgW107DQoJCQlwcm90by5wbHVnaW5zWyBpIF0ucHVzaCggWyBvcHRpb24sIHNldFsgaSBdIF0gKTsNCgkJfQ0KCX0sDQoJY2FsbDogZnVuY3Rpb24oIGluc3RhbmNlLCBuYW1lLCBhcmdzLCBhbGxvd0Rpc2Nvbm5lY3RlZCApIHsNCgkJdmFyIGksDQoJCQlzZXQgPSBpbnN0YW5jZS5wbHVnaW5zWyBuYW1lIF07DQoNCgkJaWYgKCAhc2V0ICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJaWYgKCAhYWxsb3dEaXNjb25uZWN0ZWQgJiYgKCAhaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUgfHwNCgkJCQlpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMTEgKSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWZvciAoIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkgew0KCQkJaWYgKCBpbnN0YW5jZS5vcHRpb25zWyBzZXRbIGkgXVsgMCBdIF0gKSB7DQoJCQkJc2V0WyBpIF1bIDEgXS5hcHBseSggaW5zdGFuY2UuZWxlbWVudCwgYXJncyApOw0KCQkJfQ0KCQl9DQoJfQ0KfTsNCg0KDQoNCnZhciBzYWZlQWN0aXZlRWxlbWVudCA9ICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQgPSBmdW5jdGlvbiggZG9jdW1lbnQgKSB7DQoJdmFyIGFjdGl2ZUVsZW1lbnQ7DQoNCgkvLyBTdXBwb3J0OiBJRSA5IG9ubHkNCgkvLyBJRTkgdGhyb3dzIGFuICJVbnNwZWNpZmllZCBlcnJvciIgYWNjZXNzaW5nIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgZnJvbSBhbiA8aWZyYW1lPg0KCXRyeSB7DQoJCWFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Ow0KCX0gY2F0Y2ggKCBlcnJvciApIHsNCgkJYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmJvZHk7DQoJfQ0KDQoJLy8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHkNCgkvLyBJRSBtYXkgcmV0dXJuIG51bGwgaW5zdGVhZCBvZiBhbiBlbGVtZW50DQoJLy8gSW50ZXJlc3RpbmdseSwgdGhpcyBvbmx5IHNlZW1zIHRvIG9jY3VyIHdoZW4gTk9UIGluIGFuIGlmcmFtZQ0KCWlmICggIWFjdGl2ZUVsZW1lbnQgKSB7DQoJCWFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5ib2R5Ow0KCX0NCg0KCS8vIFN1cHBvcnQ6IElFIDExIG9ubHkNCgkvLyBJRTExIHJldHVybnMgYSBzZWVtaW5nbHkgZW1wdHkgb2JqZWN0IGluIHNvbWUgY2FzZXMgd2hlbiBhY2Nlc3NpbmcNCgkvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGZyb20gYW4gPGlmcmFtZT4NCglpZiAoICFhY3RpdmVFbGVtZW50Lm5vZGVOYW1lICkgew0KCQlhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYm9keTsNCgl9DQoNCglyZXR1cm4gYWN0aXZlRWxlbWVudDsNCn07DQoNCg0KDQp2YXIgc2FmZUJsdXIgPSAkLnVpLnNhZmVCbHVyID0gZnVuY3Rpb24oIGVsZW1lbnQgKSB7DQoNCgkvLyBTdXBwb3J0OiBJRTkgLSAxMCBvbmx5DQoJLy8gSWYgdGhlIDxib2R5PiBpcyBibHVycmVkLCBJRSB3aWxsIHN3aXRjaCB3aW5kb3dzLCBzZWUgIzk0MjANCglpZiAoIGVsZW1lbnQgJiYgZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAiYm9keSIgKSB7DQoJCSQoIGVsZW1lbnQgKS50cmlnZ2VyKCAiYmx1ciIgKTsNCgl9DQp9Ow0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIERyYWdnYWJsZSAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogRHJhZ2dhYmxlDQovLz4+Z3JvdXA6IEludGVyYWN0aW9ucw0KLy8+PmRlc2NyaXB0aW9uOiBFbmFibGVzIGRyYWdnaW5nIGZ1bmN0aW9uYWxpdHkgZm9yIGFueSBlbGVtZW50Lg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RyYWdnYWJsZS8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9kcmFnZ2FibGUvDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvZHJhZ2dhYmxlLmNzcw0KDQoNCg0KJC53aWRnZXQoICJ1aS5kcmFnZ2FibGUiLCAkLnVpLm1vdXNlLCB7DQoJdmVyc2lvbjogIjEuMTIuMSIsDQoJd2lkZ2V0RXZlbnRQcmVmaXg6ICJkcmFnIiwNCglvcHRpb25zOiB7DQoJCWFkZENsYXNzZXM6IHRydWUsDQoJCWFwcGVuZFRvOiAicGFyZW50IiwNCgkJYXhpczogZmFsc2UsDQoJCWNvbm5lY3RUb1NvcnRhYmxlOiBmYWxzZSwNCgkJY29udGFpbm1lbnQ6IGZhbHNlLA0KCQljdXJzb3I6ICJhdXRvIiwNCgkJY3Vyc29yQXQ6IGZhbHNlLA0KCQlncmlkOiBmYWxzZSwNCgkJaGFuZGxlOiBmYWxzZSwNCgkJaGVscGVyOiAib3JpZ2luYWwiLA0KCQlpZnJhbWVGaXg6IGZhbHNlLA0KCQlvcGFjaXR5OiBmYWxzZSwNCgkJcmVmcmVzaFBvc2l0aW9uczogZmFsc2UsDQoJCXJldmVydDogZmFsc2UsDQoJCXJldmVydER1cmF0aW9uOiA1MDAsDQoJCXNjb3BlOiAiZGVmYXVsdCIsDQoJCXNjcm9sbDogdHJ1ZSwNCgkJc2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLA0KCQlzY3JvbGxTcGVlZDogMjAsDQoJCXNuYXA6IGZhbHNlLA0KCQlzbmFwTW9kZTogImJvdGgiLA0KCQlzbmFwVG9sZXJhbmNlOiAyMCwNCgkJc3RhY2s6IGZhbHNlLA0KCQl6SW5kZXg6IGZhbHNlLA0KDQoJCS8vIENhbGxiYWNrcw0KCQlkcmFnOiBudWxsLA0KCQlzdGFydDogbnVsbCwNCgkJc3RvcDogbnVsbA0KCX0sDQoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuaGVscGVyID09PSAib3JpZ2luYWwiICkgew0KCQkJdGhpcy5fc2V0UG9zaXRpb25SZWxhdGl2ZSgpOw0KCQl9DQoJCWlmICggdGhpcy5vcHRpb25zLmFkZENsYXNzZXMgKSB7DQoJCQl0aGlzLl9hZGRDbGFzcyggInVpLWRyYWdnYWJsZSIgKTsNCgkJfQ0KCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsNCg0KCQl0aGlzLl9tb3VzZUluaXQoKTsNCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7DQoJCWlmICgga2V5ID09PSAiaGFuZGxlIiApIHsNCgkJCXRoaXMuX3JlbW92ZUhhbmRsZUNsYXNzTmFtZSgpOw0KCQkJdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7DQoJCX0NCgl9LA0KDQoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KCQlpZiAoICggdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50ICkuaXMoICIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIiApICkgew0KCQkJdGhpcy5kZXN0cm95T25DbGVhciA9IHRydWU7DQoJCQlyZXR1cm47DQoJCX0NCgkJdGhpcy5fcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lKCk7DQoJCXRoaXMuX21vdXNlRGVzdHJveSgpOw0KCX0sDQoNCglfbW91c2VDYXB0dXJlOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXZhciBvID0gdGhpcy5vcHRpb25zOw0KDQoJCS8vIEFtb25nIG90aGVycywgcHJldmVudCBhIGRyYWcgb24gYSByZXNpemFibGUtaGFuZGxlDQoJCWlmICggdGhpcy5oZWxwZXIgfHwgby5kaXNhYmxlZCB8fA0KCQkJCSQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktcmVzaXphYmxlLWhhbmRsZSIgKS5sZW5ndGggPiAwICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJLy9RdWl0IGlmIHdlJ3JlIG5vdCBvbiBhIHZhbGlkIGhhbmRsZQ0KCQl0aGlzLmhhbmRsZSA9IHRoaXMuX2dldEhhbmRsZSggZXZlbnQgKTsNCgkJaWYgKCAhdGhpcy5oYW5kbGUgKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQl0aGlzLl9ibHVyQWN0aXZlRWxlbWVudCggZXZlbnQgKTsNCg0KCQl0aGlzLl9ibG9ja0ZyYW1lcyggby5pZnJhbWVGaXggPT09IHRydWUgPyAiaWZyYW1lIiA6IG8uaWZyYW1lRml4ICk7DQoNCgkJcmV0dXJuIHRydWU7DQoNCgl9LA0KDQoJX2Jsb2NrRnJhbWVzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7DQoJCXRoaXMuaWZyYW1lQmxvY2tzID0gdGhpcy5kb2N1bWVudC5maW5kKCBzZWxlY3RvciApLm1hcCggZnVuY3Rpb24oKSB7DQoJCQl2YXIgaWZyYW1lID0gJCggdGhpcyApOw0KDQoJCQlyZXR1cm4gJCggIjxkaXY+IiApDQoJCQkJLmNzcyggInBvc2l0aW9uIiwgImFic29sdXRlIiApDQoJCQkJLmFwcGVuZFRvKCBpZnJhbWUucGFyZW50KCkgKQ0KCQkJCS5vdXRlcldpZHRoKCBpZnJhbWUub3V0ZXJXaWR0aCgpICkNCgkJCQkub3V0ZXJIZWlnaHQoIGlmcmFtZS5vdXRlckhlaWdodCgpICkNCgkJCQkub2Zmc2V0KCBpZnJhbWUub2Zmc2V0KCkgKVsgMCBdOw0KCQl9ICk7DQoJfSwNCg0KCV91bmJsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHsNCgkJaWYgKCB0aGlzLmlmcmFtZUJsb2NrcyApIHsNCgkJCXRoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpOw0KCQkJZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzOw0KCQl9DQoJfSwNCg0KCV9ibHVyQWN0aXZlRWxlbWVudDogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgYWN0aXZlRWxlbWVudCA9ICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQoIHRoaXMuZG9jdW1lbnRbIDAgXSApLA0KCQkJdGFyZ2V0ID0gJCggZXZlbnQudGFyZ2V0ICk7DQoNCgkJLy8gRG9uJ3QgYmx1ciBpZiB0aGUgZXZlbnQgb2NjdXJyZWQgb24gYW4gZWxlbWVudCB0aGF0IGlzIHdpdGhpbg0KCQkvLyB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudA0KCQkvLyBTZWUgIzEwNTI3LCAjMTI0NzINCgkJaWYgKCB0YXJnZXQuY2xvc2VzdCggYWN0aXZlRWxlbWVudCApLmxlbmd0aCApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCS8vIEJsdXIgYW55IGVsZW1lbnQgdGhhdCBjdXJyZW50bHkgaGFzIGZvY3VzLCBzZWUgIzQyNjENCgkJJC51aS5zYWZlQmx1ciggYWN0aXZlRWxlbWVudCApOw0KCX0sDQoNCglfbW91c2VTdGFydDogZnVuY3Rpb24oIGV2ZW50ICkgew0KDQoJCXZhciBvID0gdGhpcy5vcHRpb25zOw0KDQoJCS8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyDQoJCXRoaXMuaGVscGVyID0gdGhpcy5fY3JlYXRlSGVscGVyKCBldmVudCApOw0KDQoJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmhlbHBlciwgInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIgKTsNCg0KCQkvL0NhY2hlIHRoZSBoZWxwZXIgc2l6ZQ0KCQl0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7DQoNCgkJLy9JZiBkZG1hbmFnZXIgaXMgdXNlZCBmb3IgZHJvcHBhYmxlcywgc2V0IHRoZSBnbG9iYWwgZHJhZ2dhYmxlDQoJCWlmICggJC51aS5kZG1hbmFnZXIgKSB7DQoJCQkkLnVpLmRkbWFuYWdlci5jdXJyZW50ID0gdGhpczsNCgkJfQ0KDQoJCS8qDQoJCSAqIC0gUG9zaXRpb24gZ2VuZXJhdGlvbiAtDQoJCSAqIFRoaXMgYmxvY2sgZ2VuZXJhdGVzIGV2ZXJ5dGhpbmcgcG9zaXRpb24gcmVsYXRlZCAtIGl0J3MgdGhlIGNvcmUgb2YgZHJhZ2dhYmxlcy4NCgkJICovDQoNCgkJLy9DYWNoZSB0aGUgbWFyZ2lucyBvZiB0aGUgb3JpZ2luYWwgZWxlbWVudA0KCQl0aGlzLl9jYWNoZU1hcmdpbnMoKTsNCg0KCQkvL1N0b3JlIHRoZSBoZWxwZXIncyBjc3MgcG9zaXRpb24NCgkJdGhpcy5jc3NQb3NpdGlvbiA9IHRoaXMuaGVscGVyLmNzcyggInBvc2l0aW9uIiApOw0KCQl0aGlzLnNjcm9sbFBhcmVudCA9IHRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCggdHJ1ZSApOw0KCQl0aGlzLm9mZnNldFBhcmVudCA9IHRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpOw0KCQl0aGlzLmhhc0ZpeGVkQW5jZXN0b3IgPSB0aGlzLmhlbHBlci5wYXJlbnRzKCkuZmlsdGVyKCBmdW5jdGlvbigpIHsNCgkJCQlyZXR1cm4gJCggdGhpcyApLmNzcyggInBvc2l0aW9uIiApID09PSAiZml4ZWQiOw0KCQkJfSApLmxlbmd0aCA+IDA7DQoNCgkJLy9UaGUgZWxlbWVudCdzIGFic29sdXRlIHBvc2l0aW9uIG9uIHRoZSBwYWdlIG1pbnVzIG1hcmdpbnMNCgkJdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTsNCgkJdGhpcy5fcmVmcmVzaE9mZnNldHMoIGV2ZW50ICk7DQoNCgkJLy9HZW5lcmF0ZSB0aGUgb3JpZ2luYWwgcG9zaXRpb24NCgkJdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oIGV2ZW50LCBmYWxzZSApOw0KCQl0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDsNCgkJdGhpcy5vcmlnaW5hbFBhZ2VZID0gZXZlbnQucGFnZVk7DQoNCgkJLy9BZGp1c3QgdGhlIG1vdXNlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgaGVscGVyIGlmICJjdXJzb3JBdCIgaXMgc3VwcGxpZWQNCgkJKCBvLmN1cnNvckF0ICYmIHRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoIG8uY3Vyc29yQXQgKSApOw0KDQoJCS8vU2V0IGEgY29udGFpbm1lbnQgaWYgZ2l2ZW4gaW4gdGhlIG9wdGlvbnMNCgkJdGhpcy5fc2V0Q29udGFpbm1lbnQoKTsNCg0KCQkvL1RyaWdnZXIgZXZlbnQgKyBjYWxsYmFja3MNCgkJaWYgKCB0aGlzLl90cmlnZ2VyKCAic3RhcnQiLCBldmVudCApID09PSBmYWxzZSApIHsNCgkJCXRoaXMuX2NsZWFyKCk7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQkvL1JlY2FjaGUgdGhlIGhlbHBlciBzaXplDQoJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsNCg0KCQkvL1ByZXBhcmUgdGhlIGRyb3BwYWJsZSBvZmZzZXRzDQoJCWlmICggJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91ciApIHsNCgkJCSQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKCB0aGlzLCBldmVudCApOw0KCQl9DQoNCgkJLy8gRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZSBiZWZvcmUgZ2V0dGluZyBpdHMNCgkJLy8gY29ycmVjdCBwb3NpdGlvbg0KCQl0aGlzLl9tb3VzZURyYWcoIGV2ZW50LCB0cnVlICk7DQoNCgkJLy8gSWYgdGhlIGRkbWFuYWdlciBpcyB1c2VkIGZvciBkcm9wcGFibGVzLCBpbmZvcm0gdGhlIG1hbmFnZXIgdGhhdCBkcmFnZ2luZyBoYXMgc3RhcnRlZA0KCQkvLyAoc2VlICM1MDAzKQ0KCQlpZiAoICQudWkuZGRtYW5hZ2VyICkgew0KCQkJJC51aS5kZG1hbmFnZXIuZHJhZ1N0YXJ0KCB0aGlzLCBldmVudCApOw0KCQl9DQoNCgkJcmV0dXJuIHRydWU7DQoJfSwNCg0KCV9yZWZyZXNoT2Zmc2V0czogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl0aGlzLm9mZnNldCA9IHsNCgkJCXRvcDogdGhpcy5wb3NpdGlvbkFicy50b3AgLSB0aGlzLm1hcmdpbnMudG9wLA0KCQkJbGVmdDogdGhpcy5wb3NpdGlvbkFicy5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQsDQoJCQlzY3JvbGw6IGZhbHNlLA0KCQkJcGFyZW50OiB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSwNCgkJCXJlbGF0aXZlOiB0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpDQoJCX07DQoNCgkJdGhpcy5vZmZzZXQuY2xpY2sgPSB7DQoJCQlsZWZ0OiBldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmxlZnQsDQoJCQl0b3A6IGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQudG9wDQoJCX07DQoJfSwNCg0KCV9tb3VzZURyYWc6IGZ1bmN0aW9uKCBldmVudCwgbm9Qcm9wYWdhdGlvbiApIHsNCg0KCQkvLyByZXNldCBhbnkgbmVjZXNzYXJ5IGNhY2hlZCBwcm9wZXJ0aWVzIChzZWUgIzUwMDkpDQoJCWlmICggdGhpcy5oYXNGaXhlZEFuY2VzdG9yICkgew0KCQkJdGhpcy5vZmZzZXQucGFyZW50ID0gdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCk7DQoJCX0NCg0KCQkvL0NvbXB1dGUgdGhlIGhlbHBlcnMgcG9zaXRpb24NCgkJdGhpcy5wb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oIGV2ZW50LCB0cnVlICk7DQoJCXRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyggImFic29sdXRlIiApOw0KDQoJCS8vQ2FsbCBwbHVnaW5zIGFuZCBjYWxsYmFja3MgYW5kIHVzZSB0aGUgcmVzdWx0aW5nIHBvc2l0aW9uIGlmIHNvbWV0aGluZyBpcyByZXR1cm5lZA0KCQlpZiAoICFub1Byb3BhZ2F0aW9uICkgew0KCQkJdmFyIHVpID0gdGhpcy5fdWlIYXNoKCk7DQoJCQlpZiAoIHRoaXMuX3RyaWdnZXIoICJkcmFnIiwgZXZlbnQsIHVpICkgPT09IGZhbHNlICkgew0KCQkJCXRoaXMuX21vdXNlVXAoIG5ldyAkLkV2ZW50KCAibW91c2V1cCIsIGV2ZW50ICkgKTsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQl0aGlzLnBvc2l0aW9uID0gdWkucG9zaXRpb247DQoJCX0NCg0KCQl0aGlzLmhlbHBlclsgMCBdLnN0eWxlLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyAicHgiOw0KCQl0aGlzLmhlbHBlclsgMCBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgInB4IjsNCg0KCQlpZiAoICQudWkuZGRtYW5hZ2VyICkgew0KCQkJJC51aS5kZG1hbmFnZXIuZHJhZyggdGhpcywgZXZlbnQgKTsNCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCgl9LA0KDQoJX21vdXNlU3RvcDogZnVuY3Rpb24oIGV2ZW50ICkgew0KDQoJCS8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcA0KCQl2YXIgdGhhdCA9IHRoaXMsDQoJCQlkcm9wcGVkID0gZmFsc2U7DQoJCWlmICggJC51aS5kZG1hbmFnZXIgJiYgIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyICkgew0KCQkJZHJvcHBlZCA9ICQudWkuZGRtYW5hZ2VyLmRyb3AoIHRoaXMsIGV2ZW50ICk7DQoJCX0NCg0KCQkvL2lmIGEgZHJvcCBjb21lcyBmcm9tIG91dHNpZGUgKGEgc29ydGFibGUpDQoJCWlmICggdGhpcy5kcm9wcGVkICkgew0KCQkJZHJvcHBlZCA9IHRoaXMuZHJvcHBlZDsNCgkJCXRoaXMuZHJvcHBlZCA9IGZhbHNlOw0KCQl9DQoNCgkJaWYgKCAoIHRoaXMub3B0aW9ucy5yZXZlcnQgPT09ICJpbnZhbGlkIiAmJiAhZHJvcHBlZCApIHx8DQoJCQkJKCB0aGlzLm9wdGlvbnMucmV2ZXJ0ID09PSAidmFsaWQiICYmIGRyb3BwZWQgKSB8fA0KCQkJCXRoaXMub3B0aW9ucy5yZXZlcnQgPT09IHRydWUgfHwgKCAkLmlzRnVuY3Rpb24oIHRoaXMub3B0aW9ucy5yZXZlcnQgKSAmJg0KCQkJCXRoaXMub3B0aW9ucy5yZXZlcnQuY2FsbCggdGhpcy5lbGVtZW50LCBkcm9wcGVkICkgKQ0KCQkpIHsNCgkJCSQoIHRoaXMuaGVscGVyICkuYW5pbWF0ZSgNCgkJCQl0aGlzLm9yaWdpbmFsUG9zaXRpb24sDQoJCQkJcGFyc2VJbnQoIHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwgMTAgKSwNCgkJCQlmdW5jdGlvbigpIHsNCgkJCQkJaWYgKCB0aGF0Ll90cmlnZ2VyKCAic3RvcCIsIGV2ZW50ICkgIT09IGZhbHNlICkgew0KCQkJCQkJdGhhdC5fY2xlYXIoKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCSk7DQoJCX0gZWxzZSB7DQoJCQlpZiAoIHRoaXMuX3RyaWdnZXIoICJzdG9wIiwgZXZlbnQgKSAhPT0gZmFsc2UgKSB7DQoJCQkJdGhpcy5fY2xlYXIoKTsNCgkJCX0NCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCgl9LA0KDQoJX21vdXNlVXA6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJdGhpcy5fdW5ibG9ja0ZyYW1lcygpOw0KDQoJCS8vIElmIHRoZSBkZG1hbmFnZXIgaXMgdXNlZCBmb3IgZHJvcHBhYmxlcywgaW5mb3JtIHRoZSBtYW5hZ2VyIHRoYXQgZHJhZ2dpbmcgaGFzIHN0b3BwZWQNCgkJLy8gKHNlZSAjNTAwMykNCgkJaWYgKCAkLnVpLmRkbWFuYWdlciApIHsNCgkJCSQudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKCB0aGlzLCBldmVudCApOw0KCQl9DQoNCgkJLy8gT25seSBuZWVkIHRvIGZvY3VzIGlmIHRoZSBldmVudCBvY2N1cnJlZCBvbiB0aGUgZHJhZ2dhYmxlIGl0c2VsZiwgc2VlICMxMDUyNw0KCQlpZiAoIHRoaXMuaGFuZGxlRWxlbWVudC5pcyggZXZlbnQudGFyZ2V0ICkgKSB7DQoNCgkJCS8vIFRoZSBpbnRlcmFjdGlvbiBpcyBvdmVyOyB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpY2sgcmVzdWx0ZWQgaW4gYSBkcmFnLA0KCQkJLy8gZm9jdXMgdGhlIGVsZW1lbnQNCgkJCXRoaXMuZWxlbWVudC50cmlnZ2VyKCAiZm9jdXMiICk7DQoJCX0NCg0KCQlyZXR1cm4gJC51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCggdGhpcywgZXZlbnQgKTsNCgl9LA0KDQoJY2FuY2VsOiBmdW5jdGlvbigpIHsNCg0KCQlpZiAoIHRoaXMuaGVscGVyLmlzKCAiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIgKSApIHsNCgkJCXRoaXMuX21vdXNlVXAoIG5ldyAkLkV2ZW50KCAibW91c2V1cCIsIHsgdGFyZ2V0OiB0aGlzLmVsZW1lbnRbIDAgXSB9ICkgKTsNCgkJfSBlbHNlIHsNCgkJCXRoaXMuX2NsZWFyKCk7DQoJCX0NCg0KCQlyZXR1cm4gdGhpczsNCg0KCX0sDQoNCglfZ2V0SGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXJldHVybiB0aGlzLm9wdGlvbnMuaGFuZGxlID8NCgkJCSEhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5oYW5kbGUgKSApLmxlbmd0aCA6DQoJCQl0cnVlOw0KCX0sDQoNCglfc2V0SGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5oYW5kbGVFbGVtZW50ID0gdGhpcy5vcHRpb25zLmhhbmRsZSA/DQoJCQl0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLmhhbmRsZSApIDogdGhpcy5lbGVtZW50Ow0KCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5oYW5kbGVFbGVtZW50LCAidWktZHJhZ2dhYmxlLWhhbmRsZSIgKTsNCgl9LA0KDQoJX3JlbW92ZUhhbmRsZUNsYXNzTmFtZTogZnVuY3Rpb24oKSB7DQoJCXRoaXMuX3JlbW92ZUNsYXNzKCB0aGlzLmhhbmRsZUVsZW1lbnQsICJ1aS1kcmFnZ2FibGUtaGFuZGxlIiApOw0KCX0sDQoNCglfY3JlYXRlSGVscGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoNCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsDQoJCQloZWxwZXJJc0Z1bmN0aW9uID0gJC5pc0Z1bmN0aW9uKCBvLmhlbHBlciApLA0KCQkJaGVscGVyID0gaGVscGVySXNGdW5jdGlvbiA/DQoJCQkJJCggby5oZWxwZXIuYXBwbHkoIHRoaXMuZWxlbWVudFsgMCBdLCBbIGV2ZW50IF0gKSApIDoNCgkJCQkoIG8uaGVscGVyID09PSAiY2xvbmUiID8NCgkJCQkJdGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0ciggImlkIiApIDoNCgkJCQkJdGhpcy5lbGVtZW50ICk7DQoNCgkJaWYgKCAhaGVscGVyLnBhcmVudHMoICJib2R5IiApLmxlbmd0aCApIHsNCgkJCWhlbHBlci5hcHBlbmRUbyggKCBvLmFwcGVuZFRvID09PSAicGFyZW50IiA/DQoJCQkJdGhpcy5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZSA6DQoJCQkJby5hcHBlbmRUbyApICk7DQoJCX0NCg0KCQkvLyBIdHRwOi8vYnVncy5qcXVlcnl1aS5jb20vdGlja2V0Lzk0NDYNCgkJLy8gYSBoZWxwZXIgZnVuY3Rpb24gY2FuIHJldHVybiB0aGUgb3JpZ2luYWwgZWxlbWVudA0KCQkvLyB3aGljaCB3b3VsZG4ndCBoYXZlIGJlZW4gc2V0IHRvIHJlbGF0aXZlIGluIF9jcmVhdGUNCgkJaWYgKCBoZWxwZXJJc0Z1bmN0aW9uICYmIGhlbHBlclsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsNCgkJCXRoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKTsNCgkJfQ0KDQoJCWlmICggaGVscGVyWyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICYmDQoJCQkJISggLyhmaXhlZHxhYnNvbHV0ZSkvICkudGVzdCggaGVscGVyLmNzcyggInBvc2l0aW9uIiApICkgKSB7DQoJCQloZWxwZXIuY3NzKCAicG9zaXRpb24iLCAiYWJzb2x1dGUiICk7DQoJCX0NCg0KCQlyZXR1cm4gaGVscGVyOw0KDQoJfSwNCg0KCV9zZXRQb3NpdGlvblJlbGF0aXZlOiBmdW5jdGlvbigpIHsNCgkJaWYgKCAhKCAvXig/OnJ8YXxmKS8gKS50ZXN0KCB0aGlzLmVsZW1lbnQuY3NzKCAicG9zaXRpb24iICkgKSApIHsNCgkJCXRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsNCgkJfQ0KCX0sDQoNCglfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjogZnVuY3Rpb24oIG9iaiApIHsNCgkJaWYgKCB0eXBlb2Ygb2JqID09PSAic3RyaW5nIiApIHsNCgkJCW9iaiA9IG9iai5zcGxpdCggIiAiICk7DQoJCX0NCgkJaWYgKCAkLmlzQXJyYXkoIG9iaiApICkgew0KCQkJb2JqID0geyBsZWZ0OiArb2JqWyAwIF0sIHRvcDogK29ialsgMSBdIHx8IDAgfTsNCgkJfQ0KCQlpZiAoICJsZWZ0IiBpbiBvYmogKSB7DQoJCQl0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gb2JqLmxlZnQgKyB0aGlzLm1hcmdpbnMubGVmdDsNCgkJfQ0KCQlpZiAoICJyaWdodCIgaW4gb2JqICkgew0KCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSBvYmoucmlnaHQgKyB0aGlzLm1hcmdpbnMubGVmdDsNCgkJfQ0KCQlpZiAoICJ0b3AiIGluIG9iaiApIHsNCgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IG9iai50b3AgKyB0aGlzLm1hcmdpbnMudG9wOw0KCQl9DQoJCWlmICggImJvdHRvbSIgaW4gb2JqICkgew0KCQkJdGhpcy5vZmZzZXQuY2xpY2sudG9wID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSBvYmouYm90dG9tICsgdGhpcy5tYXJnaW5zLnRvcDsNCgkJfQ0KCX0sDQoNCglfaXNSb290Tm9kZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7DQoJCXJldHVybiAoIC8oaHRtbHxib2R5KS9pICkudGVzdCggZWxlbWVudC50YWdOYW1lICkgfHwgZWxlbWVudCA9PT0gdGhpcy5kb2N1bWVudFsgMCBdOw0KCX0sDQoNCglfZ2V0UGFyZW50T2Zmc2V0OiBmdW5jdGlvbigpIHsNCg0KCQkvL0dldCB0aGUgb2Zmc2V0UGFyZW50IGFuZCBjYWNoZSBpdHMgcG9zaXRpb24NCgkJdmFyIHBvID0gdGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCksDQoJCQlkb2N1bWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXTsNCg0KCQkvLyBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gbW9kaWZ5IGEgb2Zmc2V0IGNhbGN1bGF0ZWQgb24gc3RhcnQsIHNpbmNlIHRoZQ0KCQkvLyBmb2xsb3dpbmcgaGFwcGVuZWQ6DQoJCS8vIDEuIFRoZSBwb3NpdGlvbiBvZiB0aGUgaGVscGVyIGlzIGFic29sdXRlLCBzbyBpdCdzIHBvc2l0aW9uIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlDQoJCS8vIG5leHQgcG9zaXRpb25lZCBwYXJlbnQNCgkJLy8gMi4gVGhlIGFjdHVhbCBvZmZzZXQgcGFyZW50IGlzIGEgY2hpbGQgb2YgdGhlIHNjcm9sbCBwYXJlbnQsIGFuZCB0aGUgc2Nyb2xsIHBhcmVudCBpc24ndA0KCQkvLyB0aGUgZG9jdW1lbnQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHNjcm9sbCBpcyBpbmNsdWRlZCBpbiB0aGUgaW5pdGlhbCBjYWxjdWxhdGlvbiBvZiB0aGUNCgkJLy8gb2Zmc2V0IG9mIHRoZSBwYXJlbnQsIGFuZCBuZXZlciByZWNhbGN1bGF0ZWQgdXBvbiBkcmFnDQoJCWlmICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gImFic29sdXRlIiAmJiB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSBkb2N1bWVudCAmJg0KCQkJCSQuY29udGFpbnMoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0sIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gKSApIHsNCgkJCXBvLmxlZnQgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOw0KCQkJcG8udG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOw0KCQl9DQoNCgkJaWYgKCB0aGlzLl9pc1Jvb3ROb2RlKCB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSB7DQoJCQlwbyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07DQoJCX0NCg0KCQlyZXR1cm4gew0KCQkJdG9wOiBwby50b3AgKyAoIHBhcnNlSW50KCB0aGlzLm9mZnNldFBhcmVudC5jc3MoICJib3JkZXJUb3BXaWR0aCIgKSwgMTAgKSB8fCAwICksDQoJCQlsZWZ0OiBwby5sZWZ0ICsgKCBwYXJzZUludCggdGhpcy5vZmZzZXRQYXJlbnQuY3NzKCAiYm9yZGVyTGVmdFdpZHRoIiApLCAxMCApIHx8IDAgKQ0KCQl9Ow0KDQoJfSwNCg0KCV9nZXRSZWxhdGl2ZU9mZnNldDogZnVuY3Rpb24oKSB7DQoJCWlmICggdGhpcy5jc3NQb3NpdGlvbiAhPT0gInJlbGF0aXZlIiApIHsNCgkJCXJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9Ow0KCQl9DQoNCgkJdmFyIHAgPSB0aGlzLmVsZW1lbnQucG9zaXRpb24oKSwNCgkJCXNjcm9sbElzUm9vdE5vZGUgPSB0aGlzLl9pc1Jvb3ROb2RlKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICk7DQoNCgkJcmV0dXJuIHsNCgkJCXRvcDogcC50b3AgLSAoIHBhcnNlSW50KCB0aGlzLmhlbHBlci5jc3MoICJ0b3AiICksIDEwICkgfHwgMCApICsNCgkJCQkoICFzY3JvbGxJc1Jvb3ROb2RlID8gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCkgOiAwICksDQoJCQlsZWZ0OiBwLmxlZnQgLSAoIHBhcnNlSW50KCB0aGlzLmhlbHBlci5jc3MoICJsZWZ0IiApLCAxMCApIHx8IDAgKSArDQoJCQkJKCAhc2Nyb2xsSXNSb290Tm9kZSA/IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6IDAgKQ0KCQl9Ow0KDQoJfSwNCg0KCV9jYWNoZU1hcmdpbnM6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLm1hcmdpbnMgPSB7DQoJCQlsZWZ0OiAoIHBhcnNlSW50KCB0aGlzLmVsZW1lbnQuY3NzKCAibWFyZ2luTGVmdCIgKSwgMTAgKSB8fCAwICksDQoJCQl0b3A6ICggcGFyc2VJbnQoIHRoaXMuZWxlbWVudC5jc3MoICJtYXJnaW5Ub3AiICksIDEwICkgfHwgMCApLA0KCQkJcmlnaHQ6ICggcGFyc2VJbnQoIHRoaXMuZWxlbWVudC5jc3MoICJtYXJnaW5SaWdodCIgKSwgMTAgKSB8fCAwICksDQoJCQlib3R0b206ICggcGFyc2VJbnQoIHRoaXMuZWxlbWVudC5jc3MoICJtYXJnaW5Cb3R0b20iICksIDEwICkgfHwgMCApDQoJCX07DQoJfSwNCg0KCV9jYWNoZUhlbHBlclByb3BvcnRpb25zOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHsNCgkJCXdpZHRoOiB0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksDQoJCQloZWlnaHQ6IHRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCkNCgkJfTsNCgl9LA0KDQoJX3NldENvbnRhaW5tZW50OiBmdW5jdGlvbigpIHsNCg0KCQl2YXIgaXNVc2VyU2Nyb2xsYWJsZSwgYywgY2UsDQoJCQlvID0gdGhpcy5vcHRpb25zLA0KCQkJZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF07DQoNCgkJdGhpcy5yZWxhdGl2ZUNvbnRhaW5lciA9IG51bGw7DQoNCgkJaWYgKCAhby5jb250YWlubWVudCApIHsNCgkJCXRoaXMuY29udGFpbm1lbnQgPSBudWxsOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJaWYgKCBvLmNvbnRhaW5tZW50ID09PSAid2luZG93IiApIHsNCgkJCXRoaXMuY29udGFpbm1lbnQgPSBbDQoJCQkJJCggd2luZG93ICkuc2Nyb2xsTGVmdCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LA0KCQkJCSQoIHdpbmRvdyApLnNjcm9sbFRvcCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCwNCgkJCQkkKCB3aW5kb3cgKS5zY3JvbGxMZWZ0KCkgKyAkKCB3aW5kb3cgKS53aWR0aCgpIC0NCgkJCQkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LA0KCQkJCSQoIHdpbmRvdyApLnNjcm9sbFRvcCgpICsNCgkJCQkJKCAkKCB3aW5kb3cgKS5oZWlnaHQoKSB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0ICkgLQ0KCQkJCQl0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3ANCgkJCV07DQoJCQlyZXR1cm47DQoJCX0NCg0KCQlpZiAoIG8uY29udGFpbm1lbnQgPT09ICJkb2N1bWVudCIgKSB7DQoJCQl0aGlzLmNvbnRhaW5tZW50ID0gWw0KCQkJCTAsDQoJCQkJMCwNCgkJCQkkKCBkb2N1bWVudCApLndpZHRoKCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQsDQoJCQkJKCAkKCBkb2N1bWVudCApLmhlaWdodCgpIHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQgKSAtDQoJCQkJCXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcA0KCQkJXTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWlmICggby5jb250YWlubWVudC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgKSB7DQoJCQl0aGlzLmNvbnRhaW5tZW50ID0gby5jb250YWlubWVudDsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWlmICggby5jb250YWlubWVudCA9PT0gInBhcmVudCIgKSB7DQoJCQlvLmNvbnRhaW5tZW50ID0gdGhpcy5oZWxwZXJbIDAgXS5wYXJlbnROb2RlOw0KCQl9DQoNCgkJYyA9ICQoIG8uY29udGFpbm1lbnQgKTsNCgkJY2UgPSBjWyAwIF07DQoNCgkJaWYgKCAhY2UgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQlpc1VzZXJTY3JvbGxhYmxlID0gLyhzY3JvbGx8YXV0bykvLnRlc3QoIGMuY3NzKCAib3ZlcmZsb3ciICkgKTsNCg0KCQl0aGlzLmNvbnRhaW5tZW50ID0gWw0KCQkJKCBwYXJzZUludCggYy5jc3MoICJib3JkZXJMZWZ0V2lkdGgiICksIDEwICkgfHwgMCApICsNCgkJCQkoIHBhcnNlSW50KCBjLmNzcyggInBhZGRpbmdMZWZ0IiApLCAxMCApIHx8IDAgKSwNCgkJCSggcGFyc2VJbnQoIGMuY3NzKCAiYm9yZGVyVG9wV2lkdGgiICksIDEwICkgfHwgMCApICsNCgkJCQkoIHBhcnNlSW50KCBjLmNzcyggInBhZGRpbmdUb3AiICksIDEwICkgfHwgMCApLA0KCQkJKCBpc1VzZXJTY3JvbGxhYmxlID8gTWF0aC5tYXgoIGNlLnNjcm9sbFdpZHRoLCBjZS5vZmZzZXRXaWR0aCApIDogY2Uub2Zmc2V0V2lkdGggKSAtDQoJCQkJKCBwYXJzZUludCggYy5jc3MoICJib3JkZXJSaWdodFdpZHRoIiApLCAxMCApIHx8IDAgKSAtDQoJCQkJKCBwYXJzZUludCggYy5jc3MoICJwYWRkaW5nUmlnaHQiICksIDEwICkgfHwgMCApIC0NCgkJCQl0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0NCgkJCQl0aGlzLm1hcmdpbnMubGVmdCAtDQoJCQkJdGhpcy5tYXJnaW5zLnJpZ2h0LA0KCQkJKCBpc1VzZXJTY3JvbGxhYmxlID8gTWF0aC5tYXgoIGNlLnNjcm9sbEhlaWdodCwgY2Uub2Zmc2V0SGVpZ2h0ICkgOiBjZS5vZmZzZXRIZWlnaHQgKSAtDQoJCQkJKCBwYXJzZUludCggYy5jc3MoICJib3JkZXJCb3R0b21XaWR0aCIgKSwgMTAgKSB8fCAwICkgLQ0KCQkJCSggcGFyc2VJbnQoIGMuY3NzKCAicGFkZGluZ0JvdHRvbSIgKSwgMTAgKSB8fCAwICkgLQ0KCQkJCXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0NCgkJCQl0aGlzLm1hcmdpbnMudG9wIC0NCgkJCQl0aGlzLm1hcmdpbnMuYm90dG9tDQoJCV07DQoJCXRoaXMucmVsYXRpdmVDb250YWluZXIgPSBjOw0KCX0sDQoNCglfY29udmVydFBvc2l0aW9uVG86IGZ1bmN0aW9uKCBkLCBwb3MgKSB7DQoNCgkJaWYgKCAhcG9zICkgew0KCQkJcG9zID0gdGhpcy5wb3NpdGlvbjsNCgkJfQ0KDQoJCXZhciBtb2QgPSBkID09PSAiYWJzb2x1dGUiID8gMSA6IC0xLA0KCQkJc2Nyb2xsSXNSb290Tm9kZSA9IHRoaXMuX2lzUm9vdE5vZGUoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gKTsNCg0KCQlyZXR1cm4gew0KCQkJdG9wOiAoDQoNCgkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24NCgkJCQlwb3MudG9wCSsNCg0KCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudA0KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAqIG1vZCArDQoNCgkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQ0KCQkJCXRoaXMub2Zmc2V0LnBhcmVudC50b3AgKiBtb2QgLQ0KCQkJCSggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8NCgkJCQkJLXRoaXMub2Zmc2V0LnNjcm9sbC50b3AgOg0KCQkJCQkoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCApICkgKiBtb2QgKQ0KCQkJKSwNCgkJCWxlZnQ6ICgNCg0KCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbg0KCQkJCXBvcy5sZWZ0ICsNCg0KCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudA0KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgKiBtb2QgKw0KDQoJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikNCgkJCQl0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAqIG1vZAktDQoJCQkJKCAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPw0KCQkJCQktdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgOg0KCQkJCQkoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgKSApICogbW9kICkNCgkJCSkNCgkJfTsNCg0KCX0sDQoNCglfZ2VuZXJhdGVQb3NpdGlvbjogZnVuY3Rpb24oIGV2ZW50LCBjb25zdHJhaW5Qb3NpdGlvbiApIHsNCg0KCQl2YXIgY29udGFpbm1lbnQsIGNvLCB0b3AsIGxlZnQsDQoJCQlvID0gdGhpcy5vcHRpb25zLA0KCQkJc2Nyb2xsSXNSb290Tm9kZSA9IHRoaXMuX2lzUm9vdE5vZGUoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gKSwNCgkJCXBhZ2VYID0gZXZlbnQucGFnZVgsDQoJCQlwYWdlWSA9IGV2ZW50LnBhZ2VZOw0KDQoJCS8vIENhY2hlIHRoZSBzY3JvbGwNCgkJaWYgKCAhc2Nyb2xsSXNSb290Tm9kZSB8fCAhdGhpcy5vZmZzZXQuc2Nyb2xsICkgew0KCQkJdGhpcy5vZmZzZXQuc2Nyb2xsID0gew0KCQkJCXRvcDogdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksDQoJCQkJbGVmdDogdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpDQoJCQl9Ow0KCQl9DQoNCgkJLyoNCgkJICogLSBQb3NpdGlvbiBjb25zdHJhaW5pbmcgLQ0KCQkgKiBDb25zdHJhaW4gdGhlIHBvc2l0aW9uIHRvIGEgbWl4IG9mIGdyaWQsIGNvbnRhaW5tZW50Lg0KCQkgKi8NCg0KCQkvLyBJZiB3ZSBhcmUgbm90IGRyYWdnaW5nIHlldCwgd2Ugd29uJ3QgY2hlY2sgZm9yIG9wdGlvbnMNCgkJaWYgKCBjb25zdHJhaW5Qb3NpdGlvbiApIHsNCgkJCWlmICggdGhpcy5jb250YWlubWVudCApIHsNCgkJCQlpZiAoIHRoaXMucmVsYXRpdmVDb250YWluZXIgKSB7DQoJCQkJCWNvID0gdGhpcy5yZWxhdGl2ZUNvbnRhaW5lci5vZmZzZXQoKTsNCgkJCQkJY29udGFpbm1lbnQgPSBbDQoJCQkJCQl0aGlzLmNvbnRhaW5tZW50WyAwIF0gKyBjby5sZWZ0LA0KCQkJCQkJdGhpcy5jb250YWlubWVudFsgMSBdICsgY28udG9wLA0KCQkJCQkJdGhpcy5jb250YWlubWVudFsgMiBdICsgY28ubGVmdCwNCgkJCQkJCXRoaXMuY29udGFpbm1lbnRbIDMgXSArIGNvLnRvcA0KCQkJCQldOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWNvbnRhaW5tZW50ID0gdGhpcy5jb250YWlubWVudDsNCgkJCQl9DQoNCgkJCQlpZiAoIGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IGNvbnRhaW5tZW50WyAwIF0gKSB7DQoJCQkJCXBhZ2VYID0gY29udGFpbm1lbnRbIDAgXSArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7DQoJCQkJfQ0KCQkJCWlmICggZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCBjb250YWlubWVudFsgMSBdICkgew0KCQkJCQlwYWdlWSA9IGNvbnRhaW5tZW50WyAxIF0gKyB0aGlzLm9mZnNldC5jbGljay50b3A7DQoJCQkJfQ0KCQkJCWlmICggZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gY29udGFpbm1lbnRbIDIgXSApIHsNCgkJCQkJcGFnZVggPSBjb250YWlubWVudFsgMiBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDsNCgkJCQl9DQoJCQkJaWYgKCBldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WyAzIF0gKSB7DQoJCQkJCXBhZ2VZID0gY29udGFpbm1lbnRbIDMgXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDsNCgkJCQl9DQoJCQl9DQoNCgkJCWlmICggby5ncmlkICkgew0KDQoJCQkJLy9DaGVjayBmb3IgZ3JpZCBlbGVtZW50cyBzZXQgdG8gMCB0byBwcmV2ZW50IGRpdmlkZSBieSAwIGVycm9yIGNhdXNpbmcgaW52YWxpZA0KCQkJCS8vIGFyZ3VtZW50IGVycm9ycyBpbiBJRSAoc2VlIHRpY2tldCAjNjk1MCkNCgkJCQl0b3AgPSBvLmdyaWRbIDEgXSA/IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoICggcGFnZVkgLQ0KCQkJCQl0aGlzLm9yaWdpbmFsUGFnZVkgKSAvIG8uZ3JpZFsgMSBdICkgKiBvLmdyaWRbIDEgXSA6IHRoaXMub3JpZ2luYWxQYWdlWTsNCgkJCQlwYWdlWSA9IGNvbnRhaW5tZW50ID8gKCAoIHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSBjb250YWlubWVudFsgMSBdIHx8DQoJCQkJCXRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WyAzIF0gKSA/DQoJCQkJCQl0b3AgOg0KCQkJCQkJKCAoIHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSBjb250YWlubWVudFsgMSBdICkgPw0KCQkJCQkJCXRvcCAtIG8uZ3JpZFsgMSBdIDogdG9wICsgby5ncmlkWyAxIF0gKSApIDogdG9wOw0KDQoJCQkJbGVmdCA9IG8uZ3JpZFsgMCBdID8gdGhpcy5vcmlnaW5hbFBhZ2VYICsNCgkJCQkJTWF0aC5yb3VuZCggKCBwYWdlWCAtIHRoaXMub3JpZ2luYWxQYWdlWCApIC8gby5ncmlkWyAwIF0gKSAqIG8uZ3JpZFsgMCBdIDoNCgkJCQkJdGhpcy5vcmlnaW5hbFBhZ2VYOw0KCQkJCXBhZ2VYID0gY29udGFpbm1lbnQgPyAoICggbGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gY29udGFpbm1lbnRbIDAgXSB8fA0KCQkJCQlsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+IGNvbnRhaW5tZW50WyAyIF0gKSA/DQoJCQkJCQlsZWZ0IDoNCgkJCQkJCSggKCBsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+PSBjb250YWlubWVudFsgMCBdICkgPw0KCQkJCQkJCWxlZnQgLSBvLmdyaWRbIDAgXSA6IGxlZnQgKyBvLmdyaWRbIDAgXSApICkgOiBsZWZ0Ow0KCQkJfQ0KDQoJCQlpZiAoIG8uYXhpcyA9PT0gInkiICkgew0KCQkJCXBhZ2VYID0gdGhpcy5vcmlnaW5hbFBhZ2VYOw0KCQkJfQ0KDQoJCQlpZiAoIG8uYXhpcyA9PT0gIngiICkgew0KCQkJCXBhZ2VZID0gdGhpcy5vcmlnaW5hbFBhZ2VZOw0KCQkJfQ0KCQl9DQoNCgkJcmV0dXJuIHsNCgkJCXRvcDogKA0KDQoJCQkJLy8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uDQoJCQkJcGFnZVkgLQ0KDQoJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkNCgkJCQl0aGlzLm9mZnNldC5jbGljay50b3AgLQ0KDQoJCQkJLy8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50DQoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0NCg0KCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpDQoJCQkJdGhpcy5vZmZzZXQucGFyZW50LnRvcCArDQoJCQkJKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8NCgkJCQkJLXRoaXMub2Zmc2V0LnNjcm9sbC50b3AgOg0KCQkJCQkoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCApICkNCgkJCSksDQoJCQlsZWZ0OiAoDQoNCgkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24NCgkJCQlwYWdlWCAtDQoNCgkJCQkvLyBDbGljayBvZmZzZXQgKHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50KQ0KCQkJCXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgLQ0KDQoJCQkJLy8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50DQoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtDQoNCgkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQ0KCQkJCXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICsNCgkJCQkoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPw0KCQkJCQktdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgOg0KCQkJCQkoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgKSApDQoJCQkpDQoJCX07DQoNCgl9LA0KDQoJX2NsZWFyOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMuaGVscGVyLCAidWktZHJhZ2dhYmxlLWRyYWdnaW5nIiApOw0KCQlpZiAoIHRoaXMuaGVscGVyWyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICYmICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwgKSB7DQoJCQl0aGlzLmhlbHBlci5yZW1vdmUoKTsNCgkJfQ0KCQl0aGlzLmhlbHBlciA9IG51bGw7DQoJCXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IGZhbHNlOw0KCQlpZiAoIHRoaXMuZGVzdHJveU9uQ2xlYXIgKSB7DQoJCQl0aGlzLmRlc3Ryb3koKTsNCgkJfQ0KCX0sDQoNCgkvLyBGcm9tIG5vdyBvbiBidWxrIHN0dWZmIC0gbWFpbmx5IGhlbHBlcnMNCg0KCV90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIHVpICkgew0KCQl1aSA9IHVpIHx8IHRoaXMuX3VpSGFzaCgpOw0KCQkkLnVpLnBsdWdpbi5jYWxsKCB0aGlzLCB0eXBlLCBbIGV2ZW50LCB1aSwgdGhpcyBdLCB0cnVlICk7DQoNCgkJLy8gQWJzb2x1dGUgcG9zaXRpb24gYW5kIG9mZnNldCAoc2VlICM2ODg0ICkgaGF2ZSB0byBiZSByZWNhbGN1bGF0ZWQgYWZ0ZXIgcGx1Z2lucw0KCQlpZiAoIC9eKGRyYWd8c3RhcnR8c3RvcCkvLnRlc3QoIHR5cGUgKSApIHsNCgkJCXRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyggImFic29sdXRlIiApOw0KCQkJdWkub2Zmc2V0ID0gdGhpcy5wb3NpdGlvbkFiczsNCgkJfQ0KCQlyZXR1cm4gJC5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmNhbGwoIHRoaXMsIHR5cGUsIGV2ZW50LCB1aSApOw0KCX0sDQoNCglwbHVnaW5zOiB7fSwNCg0KCV91aUhhc2g6IGZ1bmN0aW9uKCkgew0KCQlyZXR1cm4gew0KCQkJaGVscGVyOiB0aGlzLmhlbHBlciwNCgkJCXBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLA0KCQkJb3JpZ2luYWxQb3NpdGlvbjogdGhpcy5vcmlnaW5hbFBvc2l0aW9uLA0KCQkJb2Zmc2V0OiB0aGlzLnBvc2l0aW9uQWJzDQoJCX07DQoJfQ0KDQp9ICk7DQoNCiQudWkucGx1Z2luLmFkZCggImRyYWdnYWJsZSIsICJjb25uZWN0VG9Tb3J0YWJsZSIsIHsNCglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgZHJhZ2dhYmxlICkgew0KCQl2YXIgdWlTb3J0YWJsZSA9ICQuZXh0ZW5kKCB7fSwgdWksIHsNCgkJCWl0ZW06IGRyYWdnYWJsZS5lbGVtZW50DQoJCX0gKTsNCg0KCQlkcmFnZ2FibGUuc29ydGFibGVzID0gW107DQoJCSQoIGRyYWdnYWJsZS5vcHRpb25zLmNvbm5lY3RUb1NvcnRhYmxlICkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQl2YXIgc29ydGFibGUgPSAkKCB0aGlzICkuc29ydGFibGUoICJpbnN0YW5jZSIgKTsNCg0KCQkJaWYgKCBzb3J0YWJsZSAmJiAhc29ydGFibGUub3B0aW9ucy5kaXNhYmxlZCApIHsNCgkJCQlkcmFnZ2FibGUuc29ydGFibGVzLnB1c2goIHNvcnRhYmxlICk7DQoNCgkJCQkvLyBSZWZyZXNoUG9zaXRpb25zIGlzIGNhbGxlZCBhdCBkcmFnIHN0YXJ0IHRvIHJlZnJlc2ggdGhlIGNvbnRhaW5lckNhY2hlDQoJCQkJLy8gd2hpY2ggaXMgdXNlZCBpbiBkcmFnLiBUaGlzIGVuc3VyZXMgaXQncyBpbml0aWFsaXplZCBhbmQgc3luY2hyb25pemVkDQoJCQkJLy8gd2l0aCBhbnkgY2hhbmdlcyB0aGF0IG1pZ2h0IGhhdmUgaGFwcGVuZWQgb24gdGhlIHBhZ2Ugc2luY2UgaW5pdGlhbGl6YXRpb24uDQoJCQkJc29ydGFibGUucmVmcmVzaFBvc2l0aW9ucygpOw0KCQkJCXNvcnRhYmxlLl90cmlnZ2VyKCAiYWN0aXZhdGUiLCBldmVudCwgdWlTb3J0YWJsZSApOw0KCQkJfQ0KCQl9ICk7DQoJfSwNCglzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBkcmFnZ2FibGUgKSB7DQoJCXZhciB1aVNvcnRhYmxlID0gJC5leHRlbmQoIHt9LCB1aSwgew0KCQkJaXRlbTogZHJhZ2dhYmxlLmVsZW1lbnQNCgkJfSApOw0KDQoJCWRyYWdnYWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gZmFsc2U7DQoNCgkJJC5lYWNoKCBkcmFnZ2FibGUuc29ydGFibGVzLCBmdW5jdGlvbigpIHsNCgkJCXZhciBzb3J0YWJsZSA9IHRoaXM7DQoNCgkJCWlmICggc29ydGFibGUuaXNPdmVyICkgew0KCQkJCXNvcnRhYmxlLmlzT3ZlciA9IDA7DQoNCgkJCQkvLyBBbGxvdyB0aGlzIHNvcnRhYmxlIHRvIGhhbmRsZSByZW1vdmluZyB0aGUgaGVscGVyDQoJCQkJZHJhZ2dhYmxlLmNhbmNlbEhlbHBlclJlbW92YWwgPSB0cnVlOw0KCQkJCXNvcnRhYmxlLmNhbmNlbEhlbHBlclJlbW92YWwgPSBmYWxzZTsNCg0KCQkJCS8vIFVzZSBfc3RvcmVkQ1NTIFRvIHJlc3RvcmUgcHJvcGVydGllcyBpbiB0aGUgc29ydGFibGUsDQoJCQkJLy8gYXMgdGhpcyBhbHNvIGhhbmRsZXMgcmV2ZXJ0ICgjOTY3NSkgc2luY2UgdGhlIGRyYWdnYWJsZQ0KCQkJCS8vIG1heSBoYXZlIG1vZGlmaWVkIHRoZW0gaW4gdW5leHBlY3RlZCB3YXlzICgjODgwOSkNCgkJCQlzb3J0YWJsZS5fc3RvcmVkQ1NTID0gew0KCQkJCQlwb3NpdGlvbjogc29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCAicG9zaXRpb24iICksDQoJCQkJCXRvcDogc29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCAidG9wIiApLA0KCQkJCQlsZWZ0OiBzb3J0YWJsZS5wbGFjZWhvbGRlci5jc3MoICJsZWZ0IiApDQoJCQkJfTsNCg0KCQkJCXNvcnRhYmxlLl9tb3VzZVN0b3AoIGV2ZW50ICk7DQoNCgkJCQkvLyBPbmNlIGRyYWcgaGFzIGVuZGVkLCB0aGUgc29ydGFibGUgc2hvdWxkIHJldHVybiB0byB1c2luZw0KCQkJCS8vIGl0cyBvcmlnaW5hbCBoZWxwZXIsIG5vdCB0aGUgc2hhcmVkIGhlbHBlciBmcm9tIGRyYWdnYWJsZQ0KCQkJCXNvcnRhYmxlLm9wdGlvbnMuaGVscGVyID0gc29ydGFibGUub3B0aW9ucy5faGVscGVyOw0KCQkJfSBlbHNlIHsNCg0KCQkJCS8vIFByZXZlbnQgdGhpcyBTb3J0YWJsZSBmcm9tIHJlbW92aW5nIHRoZSBoZWxwZXIuDQoJCQkJLy8gSG93ZXZlciwgZG9uJ3Qgc2V0IHRoZSBkcmFnZ2FibGUgdG8gcmVtb3ZlIHRoZSBoZWxwZXINCgkJCQkvLyBlaXRoZXIgYXMgYW5vdGhlciBjb25uZWN0ZWQgU29ydGFibGUgbWF5IHlldCBoYW5kbGUgdGhlIHJlbW92YWwuDQoJCQkJc29ydGFibGUuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IHRydWU7DQoNCgkJCQlzb3J0YWJsZS5fdHJpZ2dlciggImRlYWN0aXZhdGUiLCBldmVudCwgdWlTb3J0YWJsZSApOw0KCQkJfQ0KCQl9ICk7DQoJfSwNCglkcmFnOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBkcmFnZ2FibGUgKSB7DQoJCSQuZWFjaCggZHJhZ2dhYmxlLnNvcnRhYmxlcywgZnVuY3Rpb24oKSB7DQoJCQl2YXIgaW5uZXJtb3N0SW50ZXJzZWN0aW5nID0gZmFsc2UsDQoJCQkJc29ydGFibGUgPSB0aGlzOw0KDQoJCQkvLyBDb3B5IG92ZXIgdmFyaWFibGVzIHRoYXQgc29ydGFibGUncyBfaW50ZXJzZWN0c1dpdGggdXNlcw0KCQkJc29ydGFibGUucG9zaXRpb25BYnMgPSBkcmFnZ2FibGUucG9zaXRpb25BYnM7DQoJCQlzb3J0YWJsZS5oZWxwZXJQcm9wb3J0aW9ucyA9IGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9uczsNCgkJCXNvcnRhYmxlLm9mZnNldC5jbGljayA9IGRyYWdnYWJsZS5vZmZzZXQuY2xpY2s7DQoNCgkJCWlmICggc29ydGFibGUuX2ludGVyc2VjdHNXaXRoKCBzb3J0YWJsZS5jb250YWluZXJDYWNoZSApICkgew0KCQkJCWlubmVybW9zdEludGVyc2VjdGluZyA9IHRydWU7DQoNCgkJCQkkLmVhY2goIGRyYWdnYWJsZS5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkgew0KDQoJCQkJCS8vIENvcHkgb3ZlciB2YXJpYWJsZXMgdGhhdCBzb3J0YWJsZSdzIF9pbnRlcnNlY3RzV2l0aCB1c2VzDQoJCQkJCXRoaXMucG9zaXRpb25BYnMgPSBkcmFnZ2FibGUucG9zaXRpb25BYnM7DQoJCQkJCXRoaXMuaGVscGVyUHJvcG9ydGlvbnMgPSBkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnM7DQoJCQkJCXRoaXMub2Zmc2V0LmNsaWNrID0gZHJhZ2dhYmxlLm9mZnNldC5jbGljazsNCg0KCQkJCQlpZiAoIHRoaXMgIT09IHNvcnRhYmxlICYmDQoJCQkJCQkJdGhpcy5faW50ZXJzZWN0c1dpdGgoIHRoaXMuY29udGFpbmVyQ2FjaGUgKSAmJg0KCQkJCQkJCSQuY29udGFpbnMoIHNvcnRhYmxlLmVsZW1lbnRbIDAgXSwgdGhpcy5lbGVtZW50WyAwIF0gKSApIHsNCgkJCQkJCWlubmVybW9zdEludGVyc2VjdGluZyA9IGZhbHNlOw0KCQkJCQl9DQoNCgkJCQkJcmV0dXJuIGlubmVybW9zdEludGVyc2VjdGluZzsNCgkJCQl9ICk7DQoJCQl9DQoNCgkJCWlmICggaW5uZXJtb3N0SW50ZXJzZWN0aW5nICkgew0KDQoJCQkJLy8gSWYgaXQgaW50ZXJzZWN0cywgd2UgdXNlIGEgbGl0dGxlIGlzT3ZlciB2YXJpYWJsZSBhbmQgc2V0IGl0IG9uY2UsDQoJCQkJLy8gc28gdGhhdCB0aGUgbW92ZS1pbiBzdHVmZiBnZXRzIGZpcmVkIG9ubHkgb25jZS4NCgkJCQlpZiAoICFzb3J0YWJsZS5pc092ZXIgKSB7DQoJCQkJCXNvcnRhYmxlLmlzT3ZlciA9IDE7DQoNCgkJCQkJLy8gU3RvcmUgZHJhZ2dhYmxlJ3MgcGFyZW50IGluIGNhc2Ugd2UgbmVlZCB0byByZWFwcGVuZCB0byBpdCBsYXRlci4NCgkJCQkJZHJhZ2dhYmxlLl9wYXJlbnQgPSB1aS5oZWxwZXIucGFyZW50KCk7DQoNCgkJCQkJc29ydGFibGUuY3VycmVudEl0ZW0gPSB1aS5oZWxwZXINCgkJCQkJCS5hcHBlbmRUbyggc29ydGFibGUuZWxlbWVudCApDQoJCQkJCQkuZGF0YSggInVpLXNvcnRhYmxlLWl0ZW0iLCB0cnVlICk7DQoNCgkJCQkJLy8gU3RvcmUgaGVscGVyIG9wdGlvbiB0byBsYXRlciByZXN0b3JlIGl0DQoJCQkJCXNvcnRhYmxlLm9wdGlvbnMuX2hlbHBlciA9IHNvcnRhYmxlLm9wdGlvbnMuaGVscGVyOw0KDQoJCQkJCXNvcnRhYmxlLm9wdGlvbnMuaGVscGVyID0gZnVuY3Rpb24oKSB7DQoJCQkJCQlyZXR1cm4gdWkuaGVscGVyWyAwIF07DQoJCQkJCX07DQoNCgkJCQkJLy8gRmlyZSB0aGUgc3RhcnQgZXZlbnRzIG9mIHRoZSBzb3J0YWJsZSB3aXRoIG91ciBwYXNzZWQgYnJvd3NlciBldmVudCwNCgkJCQkJLy8gYW5kIG91ciBvd24gaGVscGVyIChzbyBpdCBkb2Vzbid0IGNyZWF0ZSBhIG5ldyBvbmUpDQoJCQkJCWV2ZW50LnRhcmdldCA9IHNvcnRhYmxlLmN1cnJlbnRJdGVtWyAwIF07DQoJCQkJCXNvcnRhYmxlLl9tb3VzZUNhcHR1cmUoIGV2ZW50LCB0cnVlICk7DQoJCQkJCXNvcnRhYmxlLl9tb3VzZVN0YXJ0KCBldmVudCwgdHJ1ZSwgdHJ1ZSApOw0KDQoJCQkJCS8vIEJlY2F1c2UgdGhlIGJyb3dzZXIgZXZlbnQgaXMgd2F5IG9mZiB0aGUgbmV3IGFwcGVuZGVkIHBvcnRsZXQsDQoJCQkJCS8vIG1vZGlmeSBuZWNlc3NhcnkgdmFyaWFibGVzIHRvIHJlZmxlY3QgdGhlIGNoYW5nZXMNCgkJCQkJc29ydGFibGUub2Zmc2V0LmNsaWNrLnRvcCA9IGRyYWdnYWJsZS5vZmZzZXQuY2xpY2sudG9wOw0KCQkJCQlzb3J0YWJsZS5vZmZzZXQuY2xpY2subGVmdCA9IGRyYWdnYWJsZS5vZmZzZXQuY2xpY2subGVmdDsNCgkJCQkJc29ydGFibGUub2Zmc2V0LnBhcmVudC5sZWZ0IC09IGRyYWdnYWJsZS5vZmZzZXQucGFyZW50LmxlZnQgLQ0KCQkJCQkJc29ydGFibGUub2Zmc2V0LnBhcmVudC5sZWZ0Ow0KCQkJCQlzb3J0YWJsZS5vZmZzZXQucGFyZW50LnRvcCAtPSBkcmFnZ2FibGUub2Zmc2V0LnBhcmVudC50b3AgLQ0KCQkJCQkJc29ydGFibGUub2Zmc2V0LnBhcmVudC50b3A7DQoNCgkJCQkJZHJhZ2dhYmxlLl90cmlnZ2VyKCAidG9Tb3J0YWJsZSIsIGV2ZW50ICk7DQoNCgkJCQkJLy8gSW5mb3JtIGRyYWdnYWJsZSB0aGF0IHRoZSBoZWxwZXIgaXMgaW4gYSB2YWxpZCBkcm9wIHpvbmUsDQoJCQkJCS8vIHVzZWQgc29sZWx5IGluIHRoZSByZXZlcnQgb3B0aW9uIHRvIGhhbmRsZSAidmFsaWQvaW52YWxpZCIuDQoJCQkJCWRyYWdnYWJsZS5kcm9wcGVkID0gc29ydGFibGUuZWxlbWVudDsNCg0KCQkJCQkvLyBOZWVkIHRvIHJlZnJlc2hQb3NpdGlvbnMgb2YgYWxsIHNvcnRhYmxlcyBpbiB0aGUgY2FzZSB0aGF0DQoJCQkJCS8vIGFkZGluZyB0byBvbmUgc29ydGFibGUgY2hhbmdlcyB0aGUgbG9jYXRpb24gb2YgdGhlIG90aGVyIHNvcnRhYmxlcyAoIzk2NzUpDQoJCQkJCSQuZWFjaCggZHJhZ2dhYmxlLnNvcnRhYmxlcywgZnVuY3Rpb24oKSB7DQoJCQkJCQl0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTsNCgkJCQkJfSApOw0KDQoJCQkJCS8vIEhhY2sgc28gcmVjZWl2ZS91cGRhdGUgY2FsbGJhY2tzIHdvcmsgKG1vc3RseSkNCgkJCQkJZHJhZ2dhYmxlLmN1cnJlbnRJdGVtID0gZHJhZ2dhYmxlLmVsZW1lbnQ7DQoJCQkJCXNvcnRhYmxlLmZyb21PdXRzaWRlID0gZHJhZ2dhYmxlOw0KCQkJCX0NCg0KCQkJCWlmICggc29ydGFibGUuY3VycmVudEl0ZW0gKSB7DQoJCQkJCXNvcnRhYmxlLl9tb3VzZURyYWcoIGV2ZW50ICk7DQoNCgkJCQkJLy8gQ29weSB0aGUgc29ydGFibGUncyBwb3NpdGlvbiBiZWNhdXNlIHRoZSBkcmFnZ2FibGUncyBjYW4gcG90ZW50aWFsbHkgcmVmbGVjdA0KCQkJCQkvLyBhIHJlbGF0aXZlIHBvc2l0aW9uLCB3aGlsZSBzb3J0YWJsZSBpcyBhbHdheXMgYWJzb2x1dGUsIHdoaWNoIHRoZSBkcmFnZ2VkDQoJCQkJCS8vIGVsZW1lbnQgaGFzIG5vdyBiZWNvbWUuICgjODgwOSkNCgkJCQkJdWkucG9zaXRpb24gPSBzb3J0YWJsZS5wb3NpdGlvbjsNCgkJCQl9DQoJCQl9IGVsc2Ugew0KDQoJCQkJLy8gSWYgaXQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCB0aGUgc29ydGFibGUsIGFuZCBpdCBpbnRlcnNlY3RlZCBiZWZvcmUsDQoJCQkJLy8gd2UgZmFrZSB0aGUgZHJhZyBzdG9wIG9mIHRoZSBzb3J0YWJsZSwgYnV0IG1ha2Ugc3VyZSBpdCBkb2Vzbid0IHJlbW92ZQ0KCQkJCS8vIHRoZSBoZWxwZXIgYnkgdXNpbmcgY2FuY2VsSGVscGVyUmVtb3ZhbC4NCgkJCQlpZiAoIHNvcnRhYmxlLmlzT3ZlciApIHsNCg0KCQkJCQlzb3J0YWJsZS5pc092ZXIgPSAwOw0KCQkJCQlzb3J0YWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gdHJ1ZTsNCg0KCQkJCQkvLyBDYWxsaW5nIHNvcnRhYmxlJ3MgbW91c2VTdG9wIHdvdWxkIHRyaWdnZXIgYSByZXZlcnQsDQoJCQkJCS8vIHNvIHJldmVydCBtdXN0IGJlIHRlbXBvcmFyaWx5IGZhbHNlIHVudGlsIGFmdGVyIG1vdXNlU3RvcCBpcyBjYWxsZWQuDQoJCQkJCXNvcnRhYmxlLm9wdGlvbnMuX3JldmVydCA9IHNvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0Ow0KCQkJCQlzb3J0YWJsZS5vcHRpb25zLnJldmVydCA9IGZhbHNlOw0KDQoJCQkJCXNvcnRhYmxlLl90cmlnZ2VyKCAib3V0IiwgZXZlbnQsIHNvcnRhYmxlLl91aUhhc2goIHNvcnRhYmxlICkgKTsNCgkJCQkJc29ydGFibGUuX21vdXNlU3RvcCggZXZlbnQsIHRydWUgKTsNCg0KCQkJCQkvLyBSZXN0b3JlIHNvcnRhYmxlIGJlaGF2aW9ycyB0aGF0IHdlcmUgbW9kZmllZA0KCQkJCQkvLyB3aGVuIHRoZSBkcmFnZ2FibGUgZW50ZXJlZCB0aGUgc29ydGFibGUgYXJlYSAoIzk0ODEpDQoJCQkJCXNvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0ID0gc29ydGFibGUub3B0aW9ucy5fcmV2ZXJ0Ow0KCQkJCQlzb3J0YWJsZS5vcHRpb25zLmhlbHBlciA9IHNvcnRhYmxlLm9wdGlvbnMuX2hlbHBlcjsNCg0KCQkJCQlpZiAoIHNvcnRhYmxlLnBsYWNlaG9sZGVyICkgew0KCQkJCQkJc29ydGFibGUucGxhY2Vob2xkZXIucmVtb3ZlKCk7DQoJCQkJCX0NCg0KCQkJCQkvLyBSZXN0b3JlIGFuZCByZWNhbGN1bGF0ZSB0aGUgZHJhZ2dhYmxlJ3Mgb2Zmc2V0IGNvbnNpZGVyaW5nIHRoZSBzb3J0YWJsZQ0KCQkJCQkvLyBtYXkgaGF2ZSBtb2RpZmllZCB0aGVtIGluIHVuZXhwZWN0ZWQgd2F5cy4gKCM4ODA5LCAjMTA2NjkpDQoJCQkJCXVpLmhlbHBlci5hcHBlbmRUbyggZHJhZ2dhYmxlLl9wYXJlbnQgKTsNCgkJCQkJZHJhZ2dhYmxlLl9yZWZyZXNoT2Zmc2V0cyggZXZlbnQgKTsNCgkJCQkJdWkucG9zaXRpb24gPSBkcmFnZ2FibGUuX2dlbmVyYXRlUG9zaXRpb24oIGV2ZW50LCB0cnVlICk7DQoNCgkJCQkJZHJhZ2dhYmxlLl90cmlnZ2VyKCAiZnJvbVNvcnRhYmxlIiwgZXZlbnQgKTsNCg0KCQkJCQkvLyBJbmZvcm0gZHJhZ2dhYmxlIHRoYXQgdGhlIGhlbHBlciBpcyBubyBsb25nZXIgaW4gYSB2YWxpZCBkcm9wIHpvbmUNCgkJCQkJZHJhZ2dhYmxlLmRyb3BwZWQgPSBmYWxzZTsNCg0KCQkJCQkvLyBOZWVkIHRvIHJlZnJlc2hQb3NpdGlvbnMgb2YgYWxsIHNvcnRhYmxlcyBqdXN0IGluIGNhc2UgcmVtb3ZpbmcNCgkJCQkJLy8gZnJvbSBvbmUgc29ydGFibGUgY2hhbmdlcyB0aGUgbG9jYXRpb24gb2Ygb3RoZXIgc29ydGFibGVzICgjOTY3NSkNCgkJCQkJJC5lYWNoKCBkcmFnZ2FibGUuc29ydGFibGVzLCBmdW5jdGlvbigpIHsNCgkJCQkJCXRoaXMucmVmcmVzaFBvc2l0aW9ucygpOw0KCQkJCQl9ICk7DQoJCQkJfQ0KCQkJfQ0KCQl9ICk7DQoJfQ0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJkcmFnZ2FibGUiLCAiY3Vyc29yIiwgew0KCXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHsNCgkJdmFyIHQgPSAkKCAiYm9keSIgKSwNCgkJCW8gPSBpbnN0YW5jZS5vcHRpb25zOw0KDQoJCWlmICggdC5jc3MoICJjdXJzb3IiICkgKSB7DQoJCQlvLl9jdXJzb3IgPSB0LmNzcyggImN1cnNvciIgKTsNCgkJfQ0KCQl0LmNzcyggImN1cnNvciIsIG8uY3Vyc29yICk7DQoJfSwNCglzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHsNCgkJdmFyIG8gPSBpbnN0YW5jZS5vcHRpb25zOw0KCQlpZiAoIG8uX2N1cnNvciApIHsNCgkJCSQoICJib2R5IiApLmNzcyggImN1cnNvciIsIG8uX2N1cnNvciApOw0KCQl9DQoJfQ0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJkcmFnZ2FibGUiLCAib3BhY2l0eSIsIHsNCglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7DQoJCXZhciB0ID0gJCggdWkuaGVscGVyICksDQoJCQlvID0gaW5zdGFuY2Uub3B0aW9uczsNCgkJaWYgKCB0LmNzcyggIm9wYWNpdHkiICkgKSB7DQoJCQlvLl9vcGFjaXR5ID0gdC5jc3MoICJvcGFjaXR5IiApOw0KCQl9DQoJCXQuY3NzKCAib3BhY2l0eSIsIG8ub3BhY2l0eSApOw0KCX0sDQoJc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7DQoJCXZhciBvID0gaW5zdGFuY2Uub3B0aW9uczsNCgkJaWYgKCBvLl9vcGFjaXR5ICkgew0KCQkJJCggdWkuaGVscGVyICkuY3NzKCAib3BhY2l0eSIsIG8uX29wYWNpdHkgKTsNCgkJfQ0KCX0NCn0gKTsNCg0KJC51aS5wbHVnaW4uYWRkKCAiZHJhZ2dhYmxlIiwgInNjcm9sbCIsIHsNCglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaSApIHsNCgkJaWYgKCAhaS5zY3JvbGxQYXJlbnROb3RIaWRkZW4gKSB7DQoJCQlpLnNjcm9sbFBhcmVudE5vdEhpZGRlbiA9IGkuaGVscGVyLnNjcm9sbFBhcmVudCggZmFsc2UgKTsNCgkJfQ0KDQoJCWlmICggaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bIDAgXSAhPT0gaS5kb2N1bWVudFsgMCBdICYmDQoJCQkJaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bIDAgXS50YWdOYW1lICE9PSAiSFRNTCIgKSB7DQoJCQlpLm92ZXJmbG93T2Zmc2V0ID0gaS5zY3JvbGxQYXJlbnROb3RIaWRkZW4ub2Zmc2V0KCk7DQoJCX0NCgl9LA0KCWRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGkgICkgew0KDQoJCXZhciBvID0gaS5vcHRpb25zLA0KCQkJc2Nyb2xsZWQgPSBmYWxzZSwNCgkJCXNjcm9sbFBhcmVudCA9IGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWyAwIF0sDQoJCQlkb2N1bWVudCA9IGkuZG9jdW1lbnRbIDAgXTsNCg0KCQlpZiAoIHNjcm9sbFBhcmVudCAhPT0gZG9jdW1lbnQgJiYgc2Nyb2xsUGFyZW50LnRhZ05hbWUgIT09ICJIVE1MIiApIHsNCgkJCWlmICggIW8uYXhpcyB8fCBvLmF4aXMgIT09ICJ4IiApIHsNCgkJCQlpZiAoICggaS5vdmVyZmxvd09mZnNldC50b3AgKyBzY3JvbGxQYXJlbnQub2Zmc2V0SGVpZ2h0ICkgLSBldmVudC5wYWdlWSA8DQoJCQkJCQlvLnNjcm9sbFNlbnNpdGl2aXR5ICkgew0KCQkJCQlzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wID0gc2Nyb2xsZWQgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wICsgby5zY3JvbGxTcGVlZDsNCgkJCQl9IGVsc2UgaWYgKCBldmVudC5wYWdlWSAtIGkub3ZlcmZsb3dPZmZzZXQudG9wIDwgby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCA9IHNjcm9sbGVkID0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQ7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlpZiAoICFvLmF4aXMgfHwgby5heGlzICE9PSAieSIgKSB7DQoJCQkJaWYgKCAoIGkub3ZlcmZsb3dPZmZzZXQubGVmdCArIHNjcm9sbFBhcmVudC5vZmZzZXRXaWR0aCApIC0gZXZlbnQucGFnZVggPA0KCQkJCQkJby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9IHNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0ICsgby5zY3JvbGxTcGVlZDsNCgkJCQl9IGVsc2UgaWYgKCBldmVudC5wYWdlWCAtIGkub3ZlcmZsb3dPZmZzZXQubGVmdCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7DQoJCQkJCXNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCAtIG8uc2Nyb2xsU3BlZWQ7DQoJCQkJfQ0KCQkJfQ0KDQoJCX0gZWxzZSB7DQoNCgkJCWlmICggIW8uYXhpcyB8fCBvLmF4aXMgIT09ICJ4IiApIHsNCgkJCQlpZiAoIGV2ZW50LnBhZ2VZIC0gJCggZG9jdW1lbnQgKS5zY3JvbGxUb3AoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7DQoJCQkJCXNjcm9sbGVkID0gJCggZG9jdW1lbnQgKS5zY3JvbGxUb3AoICQoIGRvY3VtZW50ICkuc2Nyb2xsVG9wKCkgLSBvLnNjcm9sbFNwZWVkICk7DQoJCQkJfSBlbHNlIGlmICggJCggd2luZG93ICkuaGVpZ2h0KCkgLSAoIGV2ZW50LnBhZ2VZIC0gJCggZG9jdW1lbnQgKS5zY3JvbGxUb3AoKSApIDwNCgkJCQkJCW8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7DQoJCQkJCXNjcm9sbGVkID0gJCggZG9jdW1lbnQgKS5zY3JvbGxUb3AoICQoIGRvY3VtZW50ICkuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkICk7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlpZiAoICFvLmF4aXMgfHwgby5heGlzICE9PSAieSIgKSB7DQoJCQkJaWYgKCBldmVudC5wYWdlWCAtICQoIGRvY3VtZW50ICkuc2Nyb2xsTGVmdCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsZWQgPSAkKCBkb2N1bWVudCApLnNjcm9sbExlZnQoDQoJCQkJCQkkKCBkb2N1bWVudCApLnNjcm9sbExlZnQoKSAtIG8uc2Nyb2xsU3BlZWQNCgkJCQkJKTsNCgkJCQl9IGVsc2UgaWYgKCAkKCB3aW5kb3cgKS53aWR0aCgpIC0gKCBldmVudC5wYWdlWCAtICQoIGRvY3VtZW50ICkuc2Nyb2xsTGVmdCgpICkgPA0KCQkJCQkJby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsZWQgPSAkKCBkb2N1bWVudCApLnNjcm9sbExlZnQoDQoJCQkJCQkkKCBkb2N1bWVudCApLnNjcm9sbExlZnQoKSArIG8uc2Nyb2xsU3BlZWQNCgkJCQkJKTsNCgkJCQl9DQoJCQl9DQoNCgkJfQ0KDQoJCWlmICggc2Nyb2xsZWQgIT09IGZhbHNlICYmICQudWkuZGRtYW5hZ2VyICYmICFvLmRyb3BCZWhhdmlvdXIgKSB7DQoJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggaSwgZXZlbnQgKTsNCgkJfQ0KDQoJfQ0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJkcmFnZ2FibGUiLCAic25hcCIsIHsNCglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaSApIHsNCg0KCQl2YXIgbyA9IGkub3B0aW9uczsNCg0KCQlpLnNuYXBFbGVtZW50cyA9IFtdOw0KDQoJCSQoIG8uc25hcC5jb25zdHJ1Y3RvciAhPT0gU3RyaW5nID8gKCBvLnNuYXAuaXRlbXMgfHwgIjpkYXRhKHVpLWRyYWdnYWJsZSkiICkgOiBvLnNuYXAgKQ0KCQkJLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJCXZhciAkdCA9ICQoIHRoaXMgKSwNCgkJCQkJJG8gPSAkdC5vZmZzZXQoKTsNCgkJCQlpZiAoIHRoaXMgIT09IGkuZWxlbWVudFsgMCBdICkgew0KCQkJCQlpLnNuYXBFbGVtZW50cy5wdXNoKCB7DQoJCQkJCQlpdGVtOiB0aGlzLA0KCQkJCQkJd2lkdGg6ICR0Lm91dGVyV2lkdGgoKSwgaGVpZ2h0OiAkdC5vdXRlckhlaWdodCgpLA0KCQkJCQkJdG9wOiAkby50b3AsIGxlZnQ6ICRvLmxlZnQNCgkJCQkJfSApOw0KCQkJCX0NCgkJCX0gKTsNCg0KCX0sDQoJZHJhZzogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdCApIHsNCg0KCQl2YXIgdHMsIGJzLCBscywgcnMsIGwsIHIsIHQsIGIsIGksIGZpcnN0LA0KCQkJbyA9IGluc3Qub3B0aW9ucywNCgkJCWQgPSBvLnNuYXBUb2xlcmFuY2UsDQoJCQl4MSA9IHVpLm9mZnNldC5sZWZ0LCB4MiA9IHgxICsgaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCwNCgkJCXkxID0gdWkub2Zmc2V0LnRvcCwgeTIgPSB5MSArIGluc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0Ow0KDQoJCWZvciAoIGkgPSBpbnN0LnNuYXBFbGVtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHsNCg0KCQkJbCA9IGluc3Quc25hcEVsZW1lbnRzWyBpIF0ubGVmdCAtIGluc3QubWFyZ2lucy5sZWZ0Ow0KCQkJciA9IGwgKyBpbnN0LnNuYXBFbGVtZW50c1sgaSBdLndpZHRoOw0KCQkJdCA9IGluc3Quc25hcEVsZW1lbnRzWyBpIF0udG9wIC0gaW5zdC5tYXJnaW5zLnRvcDsNCgkJCWIgPSB0ICsgaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5oZWlnaHQ7DQoNCgkJCWlmICggeDIgPCBsIC0gZCB8fCB4MSA+IHIgKyBkIHx8IHkyIDwgdCAtIGQgfHwgeTEgPiBiICsgZCB8fA0KCQkJCQkhJC5jb250YWlucyggaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5pdGVtLm93bmVyRG9jdW1lbnQsDQoJCQkJCWluc3Quc25hcEVsZW1lbnRzWyBpIF0uaXRlbSApICkgew0KCQkJCWlmICggaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5zbmFwcGluZyApIHsNCgkJCQkJKCBpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlICYmDQoJCQkJCQlpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoDQoJCQkJCQkJaW5zdC5lbGVtZW50LA0KCQkJCQkJCWV2ZW50LA0KCQkJCQkJCSQuZXh0ZW5kKCBpbnN0Ll91aUhhc2goKSwgeyBzbmFwSXRlbTogaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5pdGVtIH0gKQ0KCQkJCQkJKSApOw0KCQkJCX0NCgkJCQlpbnN0LnNuYXBFbGVtZW50c1sgaSBdLnNuYXBwaW5nID0gZmFsc2U7DQoJCQkJY29udGludWU7DQoJCQl9DQoNCgkJCWlmICggby5zbmFwTW9kZSAhPT0gImlubmVyIiApIHsNCgkJCQl0cyA9IE1hdGguYWJzKCB0IC0geTIgKSA8PSBkOw0KCQkJCWJzID0gTWF0aC5hYnMoIGIgLSB5MSApIDw9IGQ7DQoJCQkJbHMgPSBNYXRoLmFicyggbCAtIHgyICkgPD0gZDsNCgkJCQlycyA9IE1hdGguYWJzKCByIC0geDEgKSA8PSBkOw0KCQkJCWlmICggdHMgKSB7DQoJCQkJCXVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IHQgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwNCgkJCQkJCWxlZnQ6IDANCgkJCQkJfSApLnRvcDsNCgkJCQl9DQoJCQkJaWYgKCBicyApIHsNCgkJCQkJdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oICJyZWxhdGl2ZSIsIHsNCgkJCQkJCXRvcDogYiwNCgkJCQkJCWxlZnQ6IDANCgkJCQkJfSApLnRvcDsNCgkJCQl9DQoJCQkJaWYgKCBscyApIHsNCgkJCQkJdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IDAsDQoJCQkJCQlsZWZ0OiBsIC0gaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aA0KCQkJCQl9ICkubGVmdDsNCgkJCQl9DQoJCQkJaWYgKCBycyApIHsNCgkJCQkJdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IDAsDQoJCQkJCQlsZWZ0OiByDQoJCQkJCX0gKS5sZWZ0Ow0KCQkJCX0NCgkJCX0NCg0KCQkJZmlyc3QgPSAoIHRzIHx8IGJzIHx8IGxzIHx8IHJzICk7DQoNCgkJCWlmICggby5zbmFwTW9kZSAhPT0gIm91dGVyIiApIHsNCgkJCQl0cyA9IE1hdGguYWJzKCB0IC0geTEgKSA8PSBkOw0KCQkJCWJzID0gTWF0aC5hYnMoIGIgLSB5MiApIDw9IGQ7DQoJCQkJbHMgPSBNYXRoLmFicyggbCAtIHgxICkgPD0gZDsNCgkJCQlycyA9IE1hdGguYWJzKCByIC0geDIgKSA8PSBkOw0KCQkJCWlmICggdHMgKSB7DQoJCQkJCXVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IHQsDQoJCQkJCQlsZWZ0OiAwDQoJCQkJCX0gKS50b3A7DQoJCQkJfQ0KCQkJCWlmICggYnMgKSB7DQoJCQkJCXVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IGIgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwNCgkJCQkJCWxlZnQ6IDANCgkJCQkJfSApLnRvcDsNCgkJCQl9DQoJCQkJaWYgKCBscyApIHsNCgkJCQkJdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCAicmVsYXRpdmUiLCB7DQoJCQkJCQl0b3A6IDAsDQoJCQkJCQlsZWZ0OiBsDQoJCQkJCX0gKS5sZWZ0Ow0KCQkJCX0NCgkJCQlpZiAoIHJzICkgew0KCQkJCQl1aS5wb3NpdGlvbi5sZWZ0ID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oICJyZWxhdGl2ZSIsIHsNCgkJCQkJCXRvcDogMCwNCgkJCQkJCWxlZnQ6IHIgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLndpZHRoDQoJCQkJCX0gKS5sZWZ0Ow0KCQkJCX0NCgkJCX0NCg0KCQkJaWYgKCAhaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5zbmFwcGluZyAmJiAoIHRzIHx8IGJzIHx8IGxzIHx8IHJzIHx8IGZpcnN0ICkgKSB7DQoJCQkJKCBpbnN0Lm9wdGlvbnMuc25hcC5zbmFwICYmDQoJCQkJCWluc3Qub3B0aW9ucy5zbmFwLnNuYXAuY2FsbCgNCgkJCQkJCWluc3QuZWxlbWVudCwNCgkJCQkJCWV2ZW50LA0KCQkJCQkJJC5leHRlbmQoIGluc3QuX3VpSGFzaCgpLCB7DQoJCQkJCQkJc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzWyBpIF0uaXRlbQ0KCQkJCQkJfSApICkgKTsNCgkJCX0NCgkJCWluc3Quc25hcEVsZW1lbnRzWyBpIF0uc25hcHBpbmcgPSAoIHRzIHx8IGJzIHx8IGxzIHx8IHJzIHx8IGZpcnN0ICk7DQoNCgkJfQ0KDQoJfQ0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJkcmFnZ2FibGUiLCAic3RhY2siLCB7DQoJc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3RhbmNlICkgew0KCQl2YXIgbWluLA0KCQkJbyA9IGluc3RhbmNlLm9wdGlvbnMsDQoJCQlncm91cCA9ICQubWFrZUFycmF5KCAkKCBvLnN0YWNrICkgKS5zb3J0KCBmdW5jdGlvbiggYSwgYiApIHsNCgkJCQlyZXR1cm4gKCBwYXJzZUludCggJCggYSApLmNzcyggInpJbmRleCIgKSwgMTAgKSB8fCAwICkgLQ0KCQkJCQkoIHBhcnNlSW50KCAkKCBiICkuY3NzKCAiekluZGV4IiApLCAxMCApIHx8IDAgKTsNCgkJCX0gKTsNCg0KCQlpZiAoICFncm91cC5sZW5ndGggKSB7IHJldHVybjsgfQ0KDQoJCW1pbiA9IHBhcnNlSW50KCAkKCBncm91cFsgMCBdICkuY3NzKCAiekluZGV4IiApLCAxMCApIHx8IDA7DQoJCSQoIGdyb3VwICkuZWFjaCggZnVuY3Rpb24oIGkgKSB7DQoJCQkkKCB0aGlzICkuY3NzKCAiekluZGV4IiwgbWluICsgaSApOw0KCQl9ICk7DQoJCXRoaXMuY3NzKCAiekluZGV4IiwgKCBtaW4gKyBncm91cC5sZW5ndGggKSApOw0KCX0NCn0gKTsNCg0KJC51aS5wbHVnaW4uYWRkKCAiZHJhZ2dhYmxlIiwgInpJbmRleCIsIHsNCglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7DQoJCXZhciB0ID0gJCggdWkuaGVscGVyICksDQoJCQlvID0gaW5zdGFuY2Uub3B0aW9uczsNCg0KCQlpZiAoIHQuY3NzKCAiekluZGV4IiApICkgew0KCQkJby5fekluZGV4ID0gdC5jc3MoICJ6SW5kZXgiICk7DQoJCX0NCgkJdC5jc3MoICJ6SW5kZXgiLCBvLnpJbmRleCApOw0KCX0sDQoJc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7DQoJCXZhciBvID0gaW5zdGFuY2Uub3B0aW9uczsNCg0KCQlpZiAoIG8uX3pJbmRleCApIHsNCgkJCSQoIHVpLmhlbHBlciApLmNzcyggInpJbmRleCIsIG8uX3pJbmRleCApOw0KCQl9DQoJfQ0KfSApOw0KDQp2YXIgd2lkZ2V0c0RyYWdnYWJsZSA9ICQudWkuZHJhZ2dhYmxlOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIERyb3BwYWJsZSAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogRHJvcHBhYmxlDQovLz4+Z3JvdXA6IEludGVyYWN0aW9ucw0KLy8+PmRlc2NyaXB0aW9uOiBFbmFibGVzIGRyb3AgdGFyZ2V0cyBmb3IgZHJhZ2dhYmxlIGVsZW1lbnRzLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2Ryb3BwYWJsZS8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9kcm9wcGFibGUvDQoNCg0KDQokLndpZGdldCggInVpLmRyb3BwYWJsZSIsIHsNCgl2ZXJzaW9uOiAiMS4xMi4xIiwNCgl3aWRnZXRFdmVudFByZWZpeDogImRyb3AiLA0KCW9wdGlvbnM6IHsNCgkJYWNjZXB0OiAiKiIsDQoJCWFkZENsYXNzZXM6IHRydWUsDQoJCWdyZWVkeTogZmFsc2UsDQoJCXNjb3BlOiAiZGVmYXVsdCIsDQoJCXRvbGVyYW5jZTogImludGVyc2VjdCIsDQoNCgkJLy8gQ2FsbGJhY2tzDQoJCWFjdGl2YXRlOiBudWxsLA0KCQlkZWFjdGl2YXRlOiBudWxsLA0KCQlkcm9wOiBudWxsLA0KCQlvdXQ6IG51bGwsDQoJCW92ZXI6IG51bGwNCgl9LA0KCV9jcmVhdGU6IGZ1bmN0aW9uKCkgew0KDQoJCXZhciBwcm9wb3J0aW9ucywNCgkJCW8gPSB0aGlzLm9wdGlvbnMsDQoJCQlhY2NlcHQgPSBvLmFjY2VwdDsNCg0KCQl0aGlzLmlzb3ZlciA9IGZhbHNlOw0KCQl0aGlzLmlzb3V0ID0gdHJ1ZTsNCg0KCQl0aGlzLmFjY2VwdCA9ICQuaXNGdW5jdGlvbiggYWNjZXB0ICkgPyBhY2NlcHQgOiBmdW5jdGlvbiggZCApIHsNCgkJCXJldHVybiBkLmlzKCBhY2NlcHQgKTsNCgkJfTsNCg0KCQl0aGlzLnByb3BvcnRpb25zID0gZnVuY3Rpb24oIC8qIHZhbHVlVG9Xcml0ZSAqLyApIHsNCgkJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsNCg0KCQkJCS8vIFN0b3JlIHRoZSBkcm9wcGFibGUncyBwcm9wb3J0aW9ucw0KCQkJCXByb3BvcnRpb25zID0gYXJndW1lbnRzWyAwIF07DQoJCQl9IGVsc2Ugew0KDQoJCQkJLy8gUmV0cmlldmUgb3IgZGVyaXZlIHRoZSBkcm9wcGFibGUncyBwcm9wb3J0aW9ucw0KCQkJCXJldHVybiBwcm9wb3J0aW9ucyA/DQoJCQkJCXByb3BvcnRpb25zIDoNCgkJCQkJcHJvcG9ydGlvbnMgPSB7DQoJCQkJCQl3aWR0aDogdGhpcy5lbGVtZW50WyAwIF0ub2Zmc2V0V2lkdGgsDQoJCQkJCQloZWlnaHQ6IHRoaXMuZWxlbWVudFsgMCBdLm9mZnNldEhlaWdodA0KCQkJCQl9Ow0KCQkJfQ0KCQl9Ow0KDQoJCXRoaXMuX2FkZFRvTWFuYWdlciggby5zY29wZSApOw0KDQoJCW8uYWRkQ2xhc3NlcyAmJiB0aGlzLl9hZGRDbGFzcyggInVpLWRyb3BwYWJsZSIgKTsNCg0KCX0sDQoNCglfYWRkVG9NYW5hZ2VyOiBmdW5jdGlvbiggc2NvcGUgKSB7DQoNCgkJLy8gQWRkIHRoZSByZWZlcmVuY2UgYW5kIHBvc2l0aW9ucyB0byB0aGUgbWFuYWdlcg0KCQkkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBzY29wZSBdID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgc2NvcGUgXSB8fCBbXTsNCgkJJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgc2NvcGUgXS5wdXNoKCB0aGlzICk7DQoJfSwNCg0KCV9zcGxpY2U6IGZ1bmN0aW9uKCBkcm9wICkgew0KCQl2YXIgaSA9IDA7DQoJCWZvciAoIDsgaSA8IGRyb3AubGVuZ3RoOyBpKysgKSB7DQoJCQlpZiAoIGRyb3BbIGkgXSA9PT0gdGhpcyApIHsNCgkJCQlkcm9wLnNwbGljZSggaSwgMSApOw0KCQkJfQ0KCQl9DQoJfSwNCg0KCV9kZXN0cm95OiBmdW5jdGlvbigpIHsNCgkJdmFyIGRyb3AgPSAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyB0aGlzLm9wdGlvbnMuc2NvcGUgXTsNCg0KCQl0aGlzLl9zcGxpY2UoIGRyb3AgKTsNCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoNCgkJaWYgKCBrZXkgPT09ICJhY2NlcHQiICkgew0KCQkJdGhpcy5hY2NlcHQgPSAkLmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSA6IGZ1bmN0aW9uKCBkICkgew0KCQkJCXJldHVybiBkLmlzKCB2YWx1ZSApOw0KCQkJfTsNCgkJfSBlbHNlIGlmICgga2V5ID09PSAic2NvcGUiICkgew0KCQkJdmFyIGRyb3AgPSAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyB0aGlzLm9wdGlvbnMuc2NvcGUgXTsNCg0KCQkJdGhpcy5fc3BsaWNlKCBkcm9wICk7DQoJCQl0aGlzLl9hZGRUb01hbmFnZXIoIHZhbHVlICk7DQoJCX0NCg0KCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOw0KCX0sDQoNCglfYWN0aXZhdGU6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJdmFyIGRyYWdnYWJsZSA9ICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7DQoNCgkJdGhpcy5fYWRkQWN0aXZlQ2xhc3MoKTsNCgkJaWYgKCBkcmFnZ2FibGUgKSB7DQoJCQl0aGlzLl90cmlnZ2VyKCAiYWN0aXZhdGUiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTsNCgkJfQ0KCX0sDQoNCglfZGVhY3RpdmF0ZTogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsNCg0KCQl0aGlzLl9yZW1vdmVBY3RpdmVDbGFzcygpOw0KCQlpZiAoIGRyYWdnYWJsZSApIHsNCgkJCXRoaXMuX3RyaWdnZXIoICJkZWFjdGl2YXRlIiwgZXZlbnQsIHRoaXMudWkoIGRyYWdnYWJsZSApICk7DQoJCX0NCgl9LA0KDQoJX292ZXI6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsNCg0KCQkvLyBCYWlsIGlmIGRyYWdnYWJsZSBhbmQgZHJvcHBhYmxlIGFyZSBzYW1lIGVsZW1lbnQNCgkJaWYgKCAhZHJhZ2dhYmxlIHx8ICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8DQoJCQkJZHJhZ2dhYmxlLmVsZW1lbnQgKVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWlmICggdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8DQoJCQkJZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkgew0KCQkJdGhpcy5fYWRkSG92ZXJDbGFzcygpOw0KCQkJdGhpcy5fdHJpZ2dlciggIm92ZXIiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTsNCgkJfQ0KDQoJfSwNCg0KCV9vdXQ6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsNCg0KCQkvLyBCYWlsIGlmIGRyYWdnYWJsZSBhbmQgZHJvcHBhYmxlIGFyZSBzYW1lIGVsZW1lbnQNCgkJaWYgKCAhZHJhZ2dhYmxlIHx8ICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8DQoJCQkJZHJhZ2dhYmxlLmVsZW1lbnQgKVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWlmICggdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8DQoJCQkJZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkgew0KCQkJdGhpcy5fcmVtb3ZlSG92ZXJDbGFzcygpOw0KCQkJdGhpcy5fdHJpZ2dlciggIm91dCIsIGV2ZW50LCB0aGlzLnVpKCBkcmFnZ2FibGUgKSApOw0KCQl9DQoNCgl9LA0KDQoJX2Ryb3A6IGZ1bmN0aW9uKCBldmVudCwgY3VzdG9tICkgew0KDQoJCXZhciBkcmFnZ2FibGUgPSBjdXN0b20gfHwgJC51aS5kZG1hbmFnZXIuY3VycmVudCwNCgkJCWNoaWxkcmVuSW50ZXJzZWN0aW9uID0gZmFsc2U7DQoNCgkJLy8gQmFpbCBpZiBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBhcmUgc2FtZSBlbGVtZW50DQoJCWlmICggIWRyYWdnYWJsZSB8fCAoIGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fA0KCQkJCWRyYWdnYWJsZS5lbGVtZW50IClbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQl0aGlzLmVsZW1lbnQNCgkJCS5maW5kKCAiOmRhdGEodWktZHJvcHBhYmxlKSIgKQ0KCQkJLm5vdCggIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmciICkNCgkJCS5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQl2YXIgaW5zdCA9ICQoIHRoaXMgKS5kcm9wcGFibGUoICJpbnN0YW5jZSIgKTsNCgkJCQlpZiAoDQoJCQkJCWluc3Qub3B0aW9ucy5ncmVlZHkgJiYNCgkJCQkJIWluc3Qub3B0aW9ucy5kaXNhYmxlZCAmJg0KCQkJCQlpbnN0Lm9wdGlvbnMuc2NvcGUgPT09IGRyYWdnYWJsZS5vcHRpb25zLnNjb3BlICYmDQoJCQkJCWluc3QuYWNjZXB0LmNhbGwoDQoJCQkJCQlpbnN0LmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKQ0KCQkJCQkpICYmDQoJCQkJCWludGVyc2VjdCgNCgkJCQkJCWRyYWdnYWJsZSwNCgkJCQkJCSQuZXh0ZW5kKCBpbnN0LCB7IG9mZnNldDogaW5zdC5lbGVtZW50Lm9mZnNldCgpIH0gKSwNCgkJCQkJCWluc3Qub3B0aW9ucy50b2xlcmFuY2UsIGV2ZW50DQoJCQkJCSkNCgkJCQkpIHsNCgkJCQkJY2hpbGRyZW5JbnRlcnNlY3Rpb24gPSB0cnVlOw0KCQkJCQlyZXR1cm4gZmFsc2U7IH0NCgkJCX0gKTsNCgkJaWYgKCBjaGlsZHJlbkludGVyc2VjdGlvbiApIHsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQoJCWlmICggdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sDQoJCQkJKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkgew0KCQkJdGhpcy5fcmVtb3ZlQWN0aXZlQ2xhc3MoKTsNCgkJCXRoaXMuX3JlbW92ZUhvdmVyQ2xhc3MoKTsNCg0KCQkJdGhpcy5fdHJpZ2dlciggImRyb3AiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTsNCgkJCXJldHVybiB0aGlzLmVsZW1lbnQ7DQoJCX0NCg0KCQlyZXR1cm4gZmFsc2U7DQoNCgl9LA0KDQoJdWk6IGZ1bmN0aW9uKCBjICkgew0KCQlyZXR1cm4gew0KCQkJZHJhZ2dhYmxlOiAoIGMuY3VycmVudEl0ZW0gfHwgYy5lbGVtZW50ICksDQoJCQloZWxwZXI6IGMuaGVscGVyLA0KCQkJcG9zaXRpb246IGMucG9zaXRpb24sDQoJCQlvZmZzZXQ6IGMucG9zaXRpb25BYnMNCgkJfTsNCgl9LA0KDQoJLy8gRXh0ZW5zaW9uIHBvaW50cyBqdXN0IHRvIG1ha2UgYmFja2NvbXBhdCBzYW5lIGFuZCBhdm9pZCBkdXBsaWNhdGluZyBsb2dpYw0KCS8vIFRPRE86IFJlbW92ZSBpbiAxLjEzIGFsb25nIHdpdGggY2FsbCB0byBpdCBiZWxvdw0KCV9hZGRIb3ZlckNsYXNzOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fYWRkQ2xhc3MoICJ1aS1kcm9wcGFibGUtaG92ZXIiICk7DQoJfSwNCg0KCV9yZW1vdmVIb3ZlckNsYXNzOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fcmVtb3ZlQ2xhc3MoICJ1aS1kcm9wcGFibGUtaG92ZXIiICk7DQoJfSwNCg0KCV9hZGRBY3RpdmVDbGFzczogZnVuY3Rpb24oKSB7DQoJCXRoaXMuX2FkZENsYXNzKCAidWktZHJvcHBhYmxlLWFjdGl2ZSIgKTsNCgl9LA0KDQoJX3JlbW92ZUFjdGl2ZUNsYXNzOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fcmVtb3ZlQ2xhc3MoICJ1aS1kcm9wcGFibGUtYWN0aXZlIiApOw0KCX0NCn0gKTsNCg0KdmFyIGludGVyc2VjdCA9ICQudWkuaW50ZXJzZWN0ID0gKCBmdW5jdGlvbigpIHsNCglmdW5jdGlvbiBpc092ZXJBeGlzKCB4LCByZWZlcmVuY2UsIHNpemUgKSB7DQoJCXJldHVybiAoIHggPj0gcmVmZXJlbmNlICkgJiYgKCB4IDwgKCByZWZlcmVuY2UgKyBzaXplICkgKTsNCgl9DQoNCglyZXR1cm4gZnVuY3Rpb24oIGRyYWdnYWJsZSwgZHJvcHBhYmxlLCB0b2xlcmFuY2VNb2RlLCBldmVudCApIHsNCg0KCQlpZiAoICFkcm9wcGFibGUub2Zmc2V0ICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJdmFyIHgxID0gKCBkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwNCgkJCQlkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUgKS5sZWZ0ICsgZHJhZ2dhYmxlLm1hcmdpbnMubGVmdCwNCgkJCXkxID0gKCBkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwNCgkJCQlkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUgKS50b3AgKyBkcmFnZ2FibGUubWFyZ2lucy50b3AsDQoJCQl4MiA9IHgxICsgZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLndpZHRoLA0KCQkJeTIgPSB5MSArIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsDQoJCQlsID0gZHJvcHBhYmxlLm9mZnNldC5sZWZ0LA0KCQkJdCA9IGRyb3BwYWJsZS5vZmZzZXQudG9wLA0KCQkJciA9IGwgKyBkcm9wcGFibGUucHJvcG9ydGlvbnMoKS53aWR0aCwNCgkJCWIgPSB0ICsgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkuaGVpZ2h0Ow0KDQoJCXN3aXRjaCAoIHRvbGVyYW5jZU1vZGUgKSB7DQoJCWNhc2UgImZpdCI6DQoJCQlyZXR1cm4gKCBsIDw9IHgxICYmIHgyIDw9IHIgJiYgdCA8PSB5MSAmJiB5MiA8PSBiICk7DQoJCWNhc2UgImludGVyc2VjdCI6DQoJCQlyZXR1cm4gKCBsIDwgeDEgKyAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSAmJiAvLyBSaWdodCBIYWxmDQoJCQkJeDIgLSAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSA8IHIgJiYgLy8gTGVmdCBIYWxmDQoJCQkJdCA8IHkxICsgKCBkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC8gMiApICYmIC8vIEJvdHRvbSBIYWxmDQoJCQkJeTIgLSAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyICkgPCBiICk7IC8vIFRvcCBIYWxmDQoJCWNhc2UgInBvaW50ZXIiOg0KCQkJcmV0dXJuIGlzT3ZlckF4aXMoIGV2ZW50LnBhZ2VZLCB0LCBkcm9wcGFibGUucHJvcG9ydGlvbnMoKS5oZWlnaHQgKSAmJg0KCQkJCWlzT3ZlckF4aXMoIGV2ZW50LnBhZ2VYLCBsLCBkcm9wcGFibGUucHJvcG9ydGlvbnMoKS53aWR0aCApOw0KCQljYXNlICJ0b3VjaCI6DQoJCQlyZXR1cm4gKA0KCQkJCSggeTEgPj0gdCAmJiB5MSA8PSBiICkgfHwgLy8gVG9wIGVkZ2UgdG91Y2hpbmcNCgkJCQkoIHkyID49IHQgJiYgeTIgPD0gYiApIHx8IC8vIEJvdHRvbSBlZGdlIHRvdWNoaW5nDQoJCQkJKCB5MSA8IHQgJiYgeTIgPiBiICkgLy8gU3Vycm91bmRlZCB2ZXJ0aWNhbGx5DQoJCQkpICYmICgNCgkJCQkoIHgxID49IGwgJiYgeDEgPD0gciApIHx8IC8vIExlZnQgZWRnZSB0b3VjaGluZw0KCQkJCSggeDIgPj0gbCAmJiB4MiA8PSByICkgfHwgLy8gUmlnaHQgZWRnZSB0b3VjaGluZw0KCQkJCSggeDEgPCBsICYmIHgyID4gciApIC8vIFN1cnJvdW5kZWQgaG9yaXpvbnRhbGx5DQoJCQkpOw0KCQlkZWZhdWx0Og0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJfTsNCn0gKSgpOw0KDQovKg0KCVRoaXMgbWFuYWdlciB0cmFja3Mgb2Zmc2V0cyBvZiBkcmFnZ2FibGVzIGFuZCBkcm9wcGFibGVzDQoqLw0KJC51aS5kZG1hbmFnZXIgPSB7DQoJY3VycmVudDogbnVsbCwNCglkcm9wcGFibGVzOiB7ICJkZWZhdWx0IjogW10gfSwNCglwcmVwYXJlT2Zmc2V0czogZnVuY3Rpb24oIHQsIGV2ZW50ICkgew0KDQoJCXZhciBpLCBqLA0KCQkJbSA9ICQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbIHQub3B0aW9ucy5zY29wZSBdIHx8IFtdLA0KCQkJdHlwZSA9IGV2ZW50ID8gZXZlbnQudHlwZSA6IG51bGwsIC8vIHdvcmthcm91bmQgZm9yICMyMzE3DQoJCQlsaXN0ID0gKCB0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCApLmZpbmQoICI6ZGF0YSh1aS1kcm9wcGFibGUpIiApLmFkZEJhY2soKTsNCg0KCQlkcm9wcGFibGVzTG9vcDogZm9yICggaSA9IDA7IGkgPCBtLmxlbmd0aDsgaSsrICkgew0KDQoJCQkvLyBObyBkaXNhYmxlZCBhbmQgbm9uLWFjY2VwdGVkDQoJCQlpZiAoIG1bIGkgXS5vcHRpb25zLmRpc2FibGVkIHx8ICggdCAmJiAhbVsgaSBdLmFjY2VwdC5jYWxsKCBtWyBpIF0uZWxlbWVudFsgMCBdLA0KCQkJCQkoIHQuY3VycmVudEl0ZW0gfHwgdC5lbGVtZW50ICkgKSApICkgew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KDQoJCQkvLyBGaWx0ZXIgb3V0IGVsZW1lbnRzIGluIHRoZSBjdXJyZW50IGRyYWdnZWQgaXRlbQ0KCQkJZm9yICggaiA9IDA7IGogPCBsaXN0Lmxlbmd0aDsgaisrICkgew0KCQkJCWlmICggbGlzdFsgaiBdID09PSBtWyBpIF0uZWxlbWVudFsgMCBdICkgew0KCQkJCQltWyBpIF0ucHJvcG9ydGlvbnMoKS5oZWlnaHQgPSAwOw0KCQkJCQljb250aW51ZSBkcm9wcGFibGVzTG9vcDsNCgkJCQl9DQoJCQl9DQoNCgkJCW1bIGkgXS52aXNpYmxlID0gbVsgaSBdLmVsZW1lbnQuY3NzKCAiZGlzcGxheSIgKSAhPT0gIm5vbmUiOw0KCQkJaWYgKCAhbVsgaSBdLnZpc2libGUgKSB7DQoJCQkJY29udGludWU7DQoJCQl9DQoNCgkJCS8vIEFjdGl2YXRlIHRoZSBkcm9wcGFibGUgaWYgdXNlZCBkaXJlY3RseSBmcm9tIGRyYWdnYWJsZXMNCgkJCWlmICggdHlwZSA9PT0gIm1vdXNlZG93biIgKSB7DQoJCQkJbVsgaSBdLl9hY3RpdmF0ZS5jYWxsKCBtWyBpIF0sIGV2ZW50ICk7DQoJCQl9DQoNCgkJCW1bIGkgXS5vZmZzZXQgPSBtWyBpIF0uZWxlbWVudC5vZmZzZXQoKTsNCgkJCW1bIGkgXS5wcm9wb3J0aW9ucyggew0KCQkJCXdpZHRoOiBtWyBpIF0uZWxlbWVudFsgMCBdLm9mZnNldFdpZHRoLA0KCQkJCWhlaWdodDogbVsgaSBdLmVsZW1lbnRbIDAgXS5vZmZzZXRIZWlnaHQNCgkJCX0gKTsNCg0KCQl9DQoNCgl9LA0KCWRyb3A6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkgew0KDQoJCXZhciBkcm9wcGVkID0gZmFsc2U7DQoNCgkJLy8gQ3JlYXRlIGEgY29weSBvZiB0aGUgZHJvcHBhYmxlcyBpbiBjYXNlIHRoZSBsaXN0IGNoYW5nZXMgZHVyaW5nIHRoZSBkcm9wICgjOTExNikNCgkJJC5lYWNoKCAoICQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbIGRyYWdnYWJsZS5vcHRpb25zLnNjb3BlIF0gfHwgW10gKS5zbGljZSgpLCBmdW5jdGlvbigpIHsNCg0KCQkJaWYgKCAhdGhpcy5vcHRpb25zICkgew0KCQkJCXJldHVybjsNCgkJCX0NCgkJCWlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiB0aGlzLnZpc2libGUgJiYNCgkJCQkJaW50ZXJzZWN0KCBkcmFnZ2FibGUsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsIGV2ZW50ICkgKSB7DQoJCQkJZHJvcHBlZCA9IHRoaXMuX2Ryb3AuY2FsbCggdGhpcywgZXZlbnQgKSB8fCBkcm9wcGVkOw0KCQkJfQ0KDQoJCQlpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgdGhpcy52aXNpYmxlICYmIHRoaXMuYWNjZXB0LmNhbGwoIHRoaXMuZWxlbWVudFsgMCBdLA0KCQkJCQkoIGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudCApICkgKSB7DQoJCQkJdGhpcy5pc291dCA9IHRydWU7DQoJCQkJdGhpcy5pc292ZXIgPSBmYWxzZTsNCgkJCQl0aGlzLl9kZWFjdGl2YXRlLmNhbGwoIHRoaXMsIGV2ZW50ICk7DQoJCQl9DQoNCgkJfSApOw0KCQlyZXR1cm4gZHJvcHBlZDsNCg0KCX0sDQoJZHJhZ1N0YXJ0OiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBldmVudCApIHsNCg0KCQkvLyBMaXN0ZW4gZm9yIHNjcm9sbGluZyBzbyB0aGF0IGlmIHRoZSBkcmFnZ2luZyBjYXVzZXMgc2Nyb2xsaW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUNCgkJLy8gZHJvcHBhYmxlcyBjYW4gYmUgcmVjYWxjdWxhdGVkIChzZWUgIzUwMDMpDQoJCWRyYWdnYWJsZS5lbGVtZW50LnBhcmVudHNVbnRpbCggImJvZHkiICkub24oICJzY3JvbGwuZHJvcHBhYmxlIiwgZnVuY3Rpb24oKSB7DQoJCQlpZiAoICFkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zICkgew0KCQkJCSQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKCBkcmFnZ2FibGUsIGV2ZW50ICk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KCWRyYWc6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkgew0KDQoJCS8vIElmIHlvdSBoYXZlIGEgaGlnaGx5IGR5bmFtaWMgcGFnZSwgeW91IG1pZ2h0IHRyeSB0aGlzIG9wdGlvbi4gSXQgcmVuZGVycyBwb3NpdGlvbnMNCgkJLy8gZXZlcnkgdGltZSB5b3UgbW92ZSB0aGUgbW91c2UuDQoJCWlmICggZHJhZ2dhYmxlLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyApIHsNCgkJCSQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKCBkcmFnZ2FibGUsIGV2ZW50ICk7DQoJCX0NCg0KCQkvLyBSdW4gdGhyb3VnaCBhbGwgZHJvcHBhYmxlcyBhbmQgY2hlY2sgdGhlaXIgcG9zaXRpb25zIGJhc2VkIG9uIHNwZWNpZmljIHRvbGVyYW5jZSBvcHRpb25zDQoJCSQuZWFjaCggJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGUgXSB8fCBbXSwgZnVuY3Rpb24oKSB7DQoNCgkJCWlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuZ3JlZWR5Q2hpbGQgfHwgIXRoaXMudmlzaWJsZSApIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCXZhciBwYXJlbnRJbnN0YW5jZSwgc2NvcGUsIHBhcmVudCwNCgkJCQlpbnRlcnNlY3RzID0gaW50ZXJzZWN0KCBkcmFnZ2FibGUsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsIGV2ZW50ICksDQoJCQkJYyA9ICFpbnRlcnNlY3RzICYmIHRoaXMuaXNvdmVyID8NCgkJCQkJImlzb3V0IiA6DQoJCQkJCSggaW50ZXJzZWN0cyAmJiAhdGhpcy5pc292ZXIgPyAiaXNvdmVyIiA6IG51bGwgKTsNCgkJCWlmICggIWMgKSB7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQlpZiAoIHRoaXMub3B0aW9ucy5ncmVlZHkgKSB7DQoNCgkJCQkvLyBmaW5kIGRyb3BwYWJsZSBwYXJlbnRzIHdpdGggc2FtZSBzY29wZQ0KCQkJCXNjb3BlID0gdGhpcy5vcHRpb25zLnNjb3BlOw0KCQkJCXBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCAiOmRhdGEodWktZHJvcHBhYmxlKSIgKS5maWx0ZXIoIGZ1bmN0aW9uKCkgew0KCQkJCQlyZXR1cm4gJCggdGhpcyApLmRyb3BwYWJsZSggImluc3RhbmNlIiApLm9wdGlvbnMuc2NvcGUgPT09IHNjb3BlOw0KCQkJCX0gKTsNCg0KCQkJCWlmICggcGFyZW50Lmxlbmd0aCApIHsNCgkJCQkJcGFyZW50SW5zdGFuY2UgPSAkKCBwYXJlbnRbIDAgXSApLmRyb3BwYWJsZSggImluc3RhbmNlIiApOw0KCQkJCQlwYXJlbnRJbnN0YW5jZS5ncmVlZHlDaGlsZCA9ICggYyA9PT0gImlzb3ZlciIgKTsNCgkJCQl9DQoJCQl9DQoNCgkJCS8vIFdlIGp1c3QgbW92ZWQgaW50byBhIGdyZWVkeSBjaGlsZA0KCQkJaWYgKCBwYXJlbnRJbnN0YW5jZSAmJiBjID09PSAiaXNvdmVyIiApIHsNCgkJCQlwYXJlbnRJbnN0YW5jZS5pc292ZXIgPSBmYWxzZTsNCgkJCQlwYXJlbnRJbnN0YW5jZS5pc291dCA9IHRydWU7DQoJCQkJcGFyZW50SW5zdGFuY2UuX291dC5jYWxsKCBwYXJlbnRJbnN0YW5jZSwgZXZlbnQgKTsNCgkJCX0NCg0KCQkJdGhpc1sgYyBdID0gdHJ1ZTsNCgkJCXRoaXNbIGMgPT09ICJpc291dCIgPyAiaXNvdmVyIiA6ICJpc291dCIgXSA9IGZhbHNlOw0KCQkJdGhpc1sgYyA9PT0gImlzb3ZlciIgPyAiX292ZXIiIDogIl9vdXQiIF0uY2FsbCggdGhpcywgZXZlbnQgKTsNCg0KCQkJLy8gV2UganVzdCBtb3ZlZCBvdXQgb2YgYSBncmVlZHkgY2hpbGQNCgkJCWlmICggcGFyZW50SW5zdGFuY2UgJiYgYyA9PT0gImlzb3V0IiApIHsNCgkJCQlwYXJlbnRJbnN0YW5jZS5pc291dCA9IGZhbHNlOw0KCQkJCXBhcmVudEluc3RhbmNlLmlzb3ZlciA9IHRydWU7DQoJCQkJcGFyZW50SW5zdGFuY2UuX292ZXIuY2FsbCggcGFyZW50SW5zdGFuY2UsIGV2ZW50ICk7DQoJCQl9DQoJCX0gKTsNCg0KCX0sDQoJZHJhZ1N0b3A6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkgew0KCQlkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoICJib2R5IiApLm9mZiggInNjcm9sbC5kcm9wcGFibGUiICk7DQoNCgkJLy8gQ2FsbCBwcmVwYXJlT2Zmc2V0cyBvbmUgZmluYWwgdGltZSBzaW5jZSBJRSBkb2VzIG5vdCBmaXJlIHJldHVybiBzY3JvbGwgZXZlbnRzIHdoZW4NCgkJLy8gb3ZlcmZsb3cgd2FzIGNhdXNlZCBieSBkcmFnIChzZWUgIzUwMDMpDQoJCWlmICggIWRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMgKSB7DQoJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApOw0KCQl9DQoJfQ0KfTsNCg0KLy8gREVQUkVDQVRFRA0KLy8gVE9ETzogc3dpdGNoIHJldHVybiBiYWNrIHRvIHdpZGdldCBkZWNsYXJhdGlvbiBhdCB0b3Agb2YgZmlsZSB3aGVuIHRoaXMgaXMgcmVtb3ZlZA0KaWYgKCAkLnVpQmFja0NvbXBhdCAhPT0gZmFsc2UgKSB7DQoNCgkvLyBCYWNrY29tcGF0IGZvciBhY3RpdmVDbGFzcyBhbmQgaG92ZXJDbGFzcyBvcHRpb25zDQoJJC53aWRnZXQoICJ1aS5kcm9wcGFibGUiLCAkLnVpLmRyb3BwYWJsZSwgew0KCQlvcHRpb25zOiB7DQoJCQlob3ZlckNsYXNzOiBmYWxzZSwNCgkJCWFjdGl2ZUNsYXNzOiBmYWxzZQ0KCQl9LA0KCQlfYWRkQWN0aXZlQ2xhc3M6IGZ1bmN0aW9uKCkgew0KCQkJdGhpcy5fc3VwZXIoKTsNCgkJCWlmICggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICkgew0KCQkJCXRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICk7DQoJCQl9DQoJCX0sDQoJCV9yZW1vdmVBY3RpdmVDbGFzczogZnVuY3Rpb24oKSB7DQoJCQl0aGlzLl9zdXBlcigpOw0KCQkJaWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKSB7DQoJCQkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKTsNCgkJCX0NCgkJfSwNCgkJX2FkZEhvdmVyQ2xhc3M6IGZ1bmN0aW9uKCkgew0KCQkJdGhpcy5fc3VwZXIoKTsNCgkJCWlmICggdGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MgKSB7DQoJCQkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApOw0KCQkJfQ0KCQl9LA0KCQlfcmVtb3ZlSG92ZXJDbGFzczogZnVuY3Rpb24oKSB7DQoJCQl0aGlzLl9zdXBlcigpOw0KCQkJaWYgKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApIHsNCgkJCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzICk7DQoJCQl9DQoJCX0NCgl9ICk7DQp9DQoNCnZhciB3aWRnZXRzRHJvcHBhYmxlID0gJC51aS5kcm9wcGFibGU7DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgUmVzaXphYmxlIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBSZXNpemFibGUNCi8vPj5ncm91cDogSW50ZXJhY3Rpb25zDQovLz4+ZGVzY3JpcHRpb246IEVuYWJsZXMgcmVzaXplIGZ1bmN0aW9uYWxpdHkgZm9yIGFueSBlbGVtZW50Lg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3Jlc2l6YWJsZS8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9yZXNpemFibGUvDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY29yZS5jc3MNCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9yZXNpemFibGUuY3NzDQovLz4+Y3NzLnRoZW1lOiAuLi8uLi90aGVtZXMvYmFzZS90aGVtZS5jc3MNCg0KDQoNCiQud2lkZ2V0KCAidWkucmVzaXphYmxlIiwgJC51aS5tb3VzZSwgew0KCXZlcnNpb246ICIxLjEyLjEiLA0KCXdpZGdldEV2ZW50UHJlZml4OiAicmVzaXplIiwNCglvcHRpb25zOiB7DQoJCWFsc29SZXNpemU6IGZhbHNlLA0KCQlhbmltYXRlOiBmYWxzZSwNCgkJYW5pbWF0ZUR1cmF0aW9uOiAic2xvdyIsDQoJCWFuaW1hdGVFYXNpbmc6ICJzd2luZyIsDQoJCWFzcGVjdFJhdGlvOiBmYWxzZSwNCgkJYXV0b0hpZGU6IGZhbHNlLA0KCQljbGFzc2VzOiB7DQoJCQkidWktcmVzaXphYmxlLXNlIjogInVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UiDQoJCX0sDQoJCWNvbnRhaW5tZW50OiBmYWxzZSwNCgkJZ2hvc3Q6IGZhbHNlLA0KCQlncmlkOiBmYWxzZSwNCgkJaGFuZGxlczogImUscyxzZSIsDQoJCWhlbHBlcjogZmFsc2UsDQoJCW1heEhlaWdodDogbnVsbCwNCgkJbWF4V2lkdGg6IG51bGwsDQoJCW1pbkhlaWdodDogMTAsDQoJCW1pbldpZHRoOiAxMCwNCg0KCQkvLyBTZWUgIzc5NjANCgkJekluZGV4OiA5MCwNCg0KCQkvLyBDYWxsYmFja3MNCgkJcmVzaXplOiBudWxsLA0KCQlzdGFydDogbnVsbCwNCgkJc3RvcDogbnVsbA0KCX0sDQoNCglfbnVtOiBmdW5jdGlvbiggdmFsdWUgKSB7DQoJCXJldHVybiBwYXJzZUZsb2F0KCB2YWx1ZSApIHx8IDA7DQoJfSwNCg0KCV9pc051bWJlcjogZnVuY3Rpb24oIHZhbHVlICkgew0KCQlyZXR1cm4gIWlzTmFOKCBwYXJzZUZsb2F0KCB2YWx1ZSApICk7DQoJfSwNCg0KCV9oYXNTY3JvbGw6IGZ1bmN0aW9uKCBlbCwgYSApIHsNCg0KCQlpZiAoICQoIGVsICkuY3NzKCAib3ZlcmZsb3ciICkgPT09ICJoaWRkZW4iICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJdmFyIHNjcm9sbCA9ICggYSAmJiBhID09PSAibGVmdCIgKSA/ICJzY3JvbGxMZWZ0IiA6ICJzY3JvbGxUb3AiLA0KCQkJaGFzID0gZmFsc2U7DQoNCgkJaWYgKCBlbFsgc2Nyb2xsIF0gPiAwICkgew0KCQkJcmV0dXJuIHRydWU7DQoJCX0NCg0KCQkvLyBUT0RPOiBkZXRlcm1pbmUgd2hpY2ggY2FzZXMgYWN0dWFsbHkgY2F1c2UgdGhpcyB0byBoYXBwZW4NCgkJLy8gaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIHRoZSBzY3JvbGwgc2V0LCBzZWUgaWYgaXQncyBwb3NzaWJsZSB0bw0KCQkvLyBzZXQgdGhlIHNjcm9sbA0KCQllbFsgc2Nyb2xsIF0gPSAxOw0KCQloYXMgPSAoIGVsWyBzY3JvbGwgXSA+IDAgKTsNCgkJZWxbIHNjcm9sbCBdID0gMDsNCgkJcmV0dXJuIGhhczsNCgl9LA0KDQoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7DQoNCgkJdmFyIG1hcmdpbnMsDQoJCQlvID0gdGhpcy5vcHRpb25zLA0KCQkJdGhhdCA9IHRoaXM7DQoJCXRoaXMuX2FkZENsYXNzKCAidWktcmVzaXphYmxlIiApOw0KDQoJCSQuZXh0ZW5kKCB0aGlzLCB7DQoJCQlfYXNwZWN0UmF0aW86ICEhKCBvLmFzcGVjdFJhdGlvICksDQoJCQlhc3BlY3RSYXRpbzogby5hc3BlY3RSYXRpbywNCgkJCW9yaWdpbmFsRWxlbWVudDogdGhpcy5lbGVtZW50LA0KCQkJX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM6IFtdLA0KCQkJX2hlbHBlcjogby5oZWxwZXIgfHwgby5naG9zdCB8fCBvLmFuaW1hdGUgPyBvLmhlbHBlciB8fCAidWktcmVzaXphYmxlLWhlbHBlciIgOiBudWxsDQoJCX0gKTsNCg0KCQkvLyBXcmFwIHRoZSBlbGVtZW50IGlmIGl0IGNhbm5vdCBob2xkIGNoaWxkIG5vZGVzDQoJCWlmICggdGhpcy5lbGVtZW50WyAwIF0ubm9kZU5hbWUubWF0Y2goIC9eKGNhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZykkL2kgKSApIHsNCg0KCQkJdGhpcy5lbGVtZW50LndyYXAoDQoJCQkJJCggIjxkaXYgY2xhc3M9J3VpLXdyYXBwZXInIHN0eWxlPSdvdmVyZmxvdzogaGlkZGVuOyc+PC9kaXY+IiApLmNzcyggew0KCQkJCQlwb3NpdGlvbjogdGhpcy5lbGVtZW50LmNzcyggInBvc2l0aW9uIiApLA0KCQkJCQl3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSwNCgkJCQkJaGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSwNCgkJCQkJdG9wOiB0aGlzLmVsZW1lbnQuY3NzKCAidG9wIiApLA0KCQkJCQlsZWZ0OiB0aGlzLmVsZW1lbnQuY3NzKCAibGVmdCIgKQ0KCQkJCX0gKQ0KCQkJKTsNCg0KCQkJdGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpLmRhdGEoDQoJCQkJInVpLXJlc2l6YWJsZSIsIHRoaXMuZWxlbWVudC5yZXNpemFibGUoICJpbnN0YW5jZSIgKQ0KCQkJKTsNCg0KCQkJdGhpcy5lbGVtZW50SXNXcmFwcGVyID0gdHJ1ZTsNCg0KCQkJbWFyZ2lucyA9IHsNCgkJCQltYXJnaW5Ub3A6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyggIm1hcmdpblRvcCIgKSwNCgkJCQltYXJnaW5SaWdodDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAibWFyZ2luUmlnaHQiICksDQoJCQkJbWFyZ2luQm90dG9tOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoICJtYXJnaW5Cb3R0b20iICksDQoJCQkJbWFyZ2luTGVmdDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAibWFyZ2luTGVmdCIgKQ0KCQkJfTsNCg0KCQkJdGhpcy5lbGVtZW50LmNzcyggbWFyZ2lucyApOw0KCQkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAibWFyZ2luIiwgMCApOw0KDQoJCQkvLyBzdXBwb3J0OiBTYWZhcmkNCgkJCS8vIFByZXZlbnQgU2FmYXJpIHRleHRhcmVhIHJlc2l6ZQ0KCQkJdGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlID0gdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAicmVzaXplIiApOw0KCQkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAicmVzaXplIiwgIm5vbmUiICk7DQoNCgkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCggdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCB7DQoJCQkJcG9zaXRpb246ICJzdGF0aWMiLA0KCQkJCXpvb206IDEsDQoJCQkJZGlzcGxheTogImJsb2NrIg0KCQkJfSApICk7DQoNCgkJCS8vIFN1cHBvcnQ6IElFOQ0KCQkJLy8gYXZvaWQgSUUganVtcCAoaGFyZCBzZXQgdGhlIG1hcmdpbikNCgkJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyggbWFyZ2lucyApOw0KDQoJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOw0KCQl9DQoNCgkJdGhpcy5fc2V0dXBIYW5kbGVzKCk7DQoNCgkJaWYgKCBvLmF1dG9IaWRlICkgew0KCQkJJCggdGhpcy5lbGVtZW50ICkNCgkJCQkub24oICJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7DQoJCQkJCWlmICggby5kaXNhYmxlZCApIHsNCgkJCQkJCXJldHVybjsNCgkJCQkJfQ0KCQkJCQl0aGF0Ll9yZW1vdmVDbGFzcyggInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIgKTsNCgkJCQkJdGhhdC5faGFuZGxlcy5zaG93KCk7DQoJCQkJfSApDQoJCQkJLm9uKCAibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgew0KCQkJCQlpZiAoIG8uZGlzYWJsZWQgKSB7DQoJCQkJCQlyZXR1cm47DQoJCQkJCX0NCgkJCQkJaWYgKCAhdGhhdC5yZXNpemluZyApIHsNCgkJCQkJCXRoYXQuX2FkZENsYXNzKCAidWktcmVzaXphYmxlLWF1dG9oaWRlIiApOw0KCQkJCQkJdGhhdC5faGFuZGxlcy5oaWRlKCk7DQoJCQkJCX0NCgkJCQl9ICk7DQoJCX0NCg0KCQl0aGlzLl9tb3VzZUluaXQoKTsNCgl9LA0KDQoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KDQoJCXRoaXMuX21vdXNlRGVzdHJveSgpOw0KDQoJCXZhciB3cmFwcGVyLA0KCQkJX2Rlc3Ryb3kgPSBmdW5jdGlvbiggZXhwICkgew0KCQkJCSQoIGV4cCApDQoJCQkJCS5yZW1vdmVEYXRhKCAicmVzaXphYmxlIiApDQoJCQkJCS5yZW1vdmVEYXRhKCAidWktcmVzaXphYmxlIiApDQoJCQkJCS5vZmYoICIucmVzaXphYmxlIiApDQoJCQkJCS5maW5kKCAiLnVpLXJlc2l6YWJsZS1oYW5kbGUiICkNCgkJCQkJCS5yZW1vdmUoKTsNCgkJCX07DQoNCgkJLy8gVE9ETzogVW53cmFwIGF0IHNhbWUgRE9NIHBvc2l0aW9uDQoJCWlmICggdGhpcy5lbGVtZW50SXNXcmFwcGVyICkgew0KCQkJX2Rlc3Ryb3koIHRoaXMuZWxlbWVudCApOw0KCQkJd3JhcHBlciA9IHRoaXMuZWxlbWVudDsNCgkJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyggew0KCQkJCXBvc2l0aW9uOiB3cmFwcGVyLmNzcyggInBvc2l0aW9uIiApLA0KCQkJCXdpZHRoOiB3cmFwcGVyLm91dGVyV2lkdGgoKSwNCgkJCQloZWlnaHQ6IHdyYXBwZXIub3V0ZXJIZWlnaHQoKSwNCgkJCQl0b3A6IHdyYXBwZXIuY3NzKCAidG9wIiApLA0KCQkJCWxlZnQ6IHdyYXBwZXIuY3NzKCAibGVmdCIgKQ0KCQkJfSApLmluc2VydEFmdGVyKCB3cmFwcGVyICk7DQoJCQl3cmFwcGVyLnJlbW92ZSgpOw0KCQl9DQoNCgkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCAicmVzaXplIiwgdGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlICk7DQoJCV9kZXN0cm95KCB0aGlzLm9yaWdpbmFsRWxlbWVudCApOw0KDQoJCXJldHVybiB0aGlzOw0KCX0sDQoNCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsNCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsNCg0KCQlzd2l0Y2ggKCBrZXkgKSB7DQoJCWNhc2UgImhhbmRsZXMiOg0KCQkJdGhpcy5fcmVtb3ZlSGFuZGxlcygpOw0KCQkJdGhpcy5fc2V0dXBIYW5kbGVzKCk7DQoJCQlicmVhazsNCgkJZGVmYXVsdDoNCgkJCWJyZWFrOw0KCQl9DQoJfSwNCg0KCV9zZXR1cEhhbmRsZXM6IGZ1bmN0aW9uKCkgew0KCQl2YXIgbyA9IHRoaXMub3B0aW9ucywgaGFuZGxlLCBpLCBuLCBobmFtZSwgYXhpcywgdGhhdCA9IHRoaXM7DQoJCXRoaXMuaGFuZGxlcyA9IG8uaGFuZGxlcyB8fA0KCQkJKCAhJCggIi51aS1yZXNpemFibGUtaGFuZGxlIiwgdGhpcy5lbGVtZW50ICkubGVuZ3RoID8NCgkJCQkiZSxzLHNlIiA6IHsNCgkJCQkJbjogIi51aS1yZXNpemFibGUtbiIsDQoJCQkJCWU6ICIudWktcmVzaXphYmxlLWUiLA0KCQkJCQlzOiAiLnVpLXJlc2l6YWJsZS1zIiwNCgkJCQkJdzogIi51aS1yZXNpemFibGUtdyIsDQoJCQkJCXNlOiAiLnVpLXJlc2l6YWJsZS1zZSIsDQoJCQkJCXN3OiAiLnVpLXJlc2l6YWJsZS1zdyIsDQoJCQkJCW5lOiAiLnVpLXJlc2l6YWJsZS1uZSIsDQoJCQkJCW53OiAiLnVpLXJlc2l6YWJsZS1udyINCgkJCQl9ICk7DQoNCgkJdGhpcy5faGFuZGxlcyA9ICQoKTsNCgkJaWYgKCB0aGlzLmhhbmRsZXMuY29uc3RydWN0b3IgPT09IFN0cmluZyApIHsNCg0KCQkJaWYgKCB0aGlzLmhhbmRsZXMgPT09ICJhbGwiICkgew0KCQkJCXRoaXMuaGFuZGxlcyA9ICJuLGUscyx3LHNlLHN3LG5lLG53IjsNCgkJCX0NCg0KCQkJbiA9IHRoaXMuaGFuZGxlcy5zcGxpdCggIiwiICk7DQoJCQl0aGlzLmhhbmRsZXMgPSB7fTsNCg0KCQkJZm9yICggaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrICkgew0KDQoJCQkJaGFuZGxlID0gJC50cmltKCBuWyBpIF0gKTsNCgkJCQlobmFtZSA9ICJ1aS1yZXNpemFibGUtIiArIGhhbmRsZTsNCgkJCQlheGlzID0gJCggIjxkaXY+IiApOw0KCQkJCXRoaXMuX2FkZENsYXNzKCBheGlzLCAidWktcmVzaXphYmxlLWhhbmRsZSAiICsgaG5hbWUgKTsNCg0KCQkJCWF4aXMuY3NzKCB7IHpJbmRleDogby56SW5kZXggfSApOw0KDQoJCQkJdGhpcy5oYW5kbGVzWyBoYW5kbGUgXSA9ICIudWktcmVzaXphYmxlLSIgKyBoYW5kbGU7DQoJCQkJdGhpcy5lbGVtZW50LmFwcGVuZCggYXhpcyApOw0KCQkJfQ0KDQoJCX0NCg0KCQl0aGlzLl9yZW5kZXJBeGlzID0gZnVuY3Rpb24oIHRhcmdldCApIHsNCg0KCQkJdmFyIGksIGF4aXMsIHBhZFBvcywgcGFkV3JhcHBlcjsNCg0KCQkJdGFyZ2V0ID0gdGFyZ2V0IHx8IHRoaXMuZWxlbWVudDsNCg0KCQkJZm9yICggaSBpbiB0aGlzLmhhbmRsZXMgKSB7DQoNCgkJCQlpZiAoIHRoaXMuaGFuZGxlc1sgaSBdLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgKSB7DQoJCQkJCXRoaXMuaGFuZGxlc1sgaSBdID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCB0aGlzLmhhbmRsZXNbIGkgXSApLmZpcnN0KCkuc2hvdygpOw0KCQkJCX0gZWxzZSBpZiAoIHRoaXMuaGFuZGxlc1sgaSBdLmpxdWVyeSB8fCB0aGlzLmhhbmRsZXNbIGkgXS5ub2RlVHlwZSApIHsNCgkJCQkJdGhpcy5oYW5kbGVzWyBpIF0gPSAkKCB0aGlzLmhhbmRsZXNbIGkgXSApOw0KCQkJCQl0aGlzLl9vbiggdGhpcy5oYW5kbGVzWyBpIF0sIHsgIm1vdXNlZG93biI6IHRoYXQuX21vdXNlRG93biB9ICk7DQoJCQkJfQ0KDQoJCQkJaWYgKCB0aGlzLmVsZW1lbnRJc1dyYXBwZXIgJiYNCgkJCQkJCXRoaXMub3JpZ2luYWxFbGVtZW50WyAwIF0NCgkJCQkJCQkubm9kZU5hbWUNCgkJCQkJCQkubWF0Y2goIC9eKHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b24pJC9pICkgKSB7DQoJCQkJCWF4aXMgPSAkKCB0aGlzLmhhbmRsZXNbIGkgXSwgdGhpcy5lbGVtZW50ICk7DQoNCgkJCQkJcGFkV3JhcHBlciA9IC9zd3xuZXxud3xzZXxufHMvLnRlc3QoIGkgKSA/DQoJCQkJCQlheGlzLm91dGVySGVpZ2h0KCkgOg0KCQkJCQkJYXhpcy5vdXRlcldpZHRoKCk7DQoNCgkJCQkJcGFkUG9zID0gWyAicGFkZGluZyIsDQoJCQkJCQkvbmV8bnd8bi8udGVzdCggaSApID8gIlRvcCIgOg0KCQkJCQkJL3NlfHN3fHMvLnRlc3QoIGkgKSA/ICJCb3R0b20iIDoNCgkJCQkJCS9eZSQvLnRlc3QoIGkgKSA/ICJSaWdodCIgOiAiTGVmdCIgXS5qb2luKCAiIiApOw0KDQoJCQkJCXRhcmdldC5jc3MoIHBhZFBvcywgcGFkV3JhcHBlciApOw0KDQoJCQkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7DQoJCQkJfQ0KDQoJCQkJdGhpcy5faGFuZGxlcyA9IHRoaXMuX2hhbmRsZXMuYWRkKCB0aGlzLmhhbmRsZXNbIGkgXSApOw0KCQkJfQ0KCQl9Ow0KDQoJCS8vIFRPRE86IG1ha2UgcmVuZGVyQXhpcyBhIHByb3RvdHlwZSBmdW5jdGlvbg0KCQl0aGlzLl9yZW5kZXJBeGlzKCB0aGlzLmVsZW1lbnQgKTsNCg0KCQl0aGlzLl9oYW5kbGVzID0gdGhpcy5faGFuZGxlcy5hZGQoIHRoaXMuZWxlbWVudC5maW5kKCAiLnVpLXJlc2l6YWJsZS1oYW5kbGUiICkgKTsNCgkJdGhpcy5faGFuZGxlcy5kaXNhYmxlU2VsZWN0aW9uKCk7DQoNCgkJdGhpcy5faGFuZGxlcy5vbiggIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCkgew0KCQkJaWYgKCAhdGhhdC5yZXNpemluZyApIHsNCgkJCQlpZiAoIHRoaXMuY2xhc3NOYW1lICkgew0KCQkJCQlheGlzID0gdGhpcy5jbGFzc05hbWUubWF0Y2goIC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kgKTsNCgkJCQl9DQoJCQkJdGhhdC5heGlzID0gYXhpcyAmJiBheGlzWyAxIF0gPyBheGlzWyAxIF0gOiAic2UiOw0KCQkJfQ0KCQl9ICk7DQoNCgkJaWYgKCBvLmF1dG9IaWRlICkgew0KCQkJdGhpcy5faGFuZGxlcy5oaWRlKCk7DQoJCQl0aGlzLl9hZGRDbGFzcyggInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIgKTsNCgkJfQ0KCX0sDQoNCglfcmVtb3ZlSGFuZGxlczogZnVuY3Rpb24oKSB7DQoJCXRoaXMuX2hhbmRsZXMucmVtb3ZlKCk7DQoJfSwNCg0KCV9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJdmFyIGksIGhhbmRsZSwNCgkJCWNhcHR1cmUgPSBmYWxzZTsNCg0KCQlmb3IgKCBpIGluIHRoaXMuaGFuZGxlcyApIHsNCgkJCWhhbmRsZSA9ICQoIHRoaXMuaGFuZGxlc1sgaSBdIClbIDAgXTsNCgkJCWlmICggaGFuZGxlID09PSBldmVudC50YXJnZXQgfHwgJC5jb250YWlucyggaGFuZGxlLCBldmVudC50YXJnZXQgKSApIHsNCgkJCQljYXB0dXJlID0gdHJ1ZTsNCgkJCX0NCgkJfQ0KDQoJCXJldHVybiAhdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIGNhcHR1cmU7DQoJfSwNCg0KCV9tb3VzZVN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7DQoNCgkJdmFyIGN1cmxlZnQsIGN1cnRvcCwgY3Vyc29yLA0KCQkJbyA9IHRoaXMub3B0aW9ucywNCgkJCWVsID0gdGhpcy5lbGVtZW50Ow0KDQoJCXRoaXMucmVzaXppbmcgPSB0cnVlOw0KDQoJCXRoaXMuX3JlbmRlclByb3h5KCk7DQoNCgkJY3VybGVmdCA9IHRoaXMuX251bSggdGhpcy5oZWxwZXIuY3NzKCAibGVmdCIgKSApOw0KCQljdXJ0b3AgPSB0aGlzLl9udW0oIHRoaXMuaGVscGVyLmNzcyggInRvcCIgKSApOw0KDQoJCWlmICggby5jb250YWlubWVudCApIHsNCgkJCWN1cmxlZnQgKz0gJCggby5jb250YWlubWVudCApLnNjcm9sbExlZnQoKSB8fCAwOw0KCQkJY3VydG9wICs9ICQoIG8uY29udGFpbm1lbnQgKS5zY3JvbGxUb3AoKSB8fCAwOw0KCQl9DQoNCgkJdGhpcy5vZmZzZXQgPSB0aGlzLmhlbHBlci5vZmZzZXQoKTsNCgkJdGhpcy5wb3NpdGlvbiA9IHsgbGVmdDogY3VybGVmdCwgdG9wOiBjdXJ0b3AgfTsNCg0KCQl0aGlzLnNpemUgPSB0aGlzLl9oZWxwZXIgPyB7DQoJCQkJd2lkdGg6IHRoaXMuaGVscGVyLndpZHRoKCksDQoJCQkJaGVpZ2h0OiB0aGlzLmhlbHBlci5oZWlnaHQoKQ0KCQkJfSA6IHsNCgkJCQl3aWR0aDogZWwud2lkdGgoKSwNCgkJCQloZWlnaHQ6IGVsLmhlaWdodCgpDQoJCQl9Ow0KDQoJCXRoaXMub3JpZ2luYWxTaXplID0gdGhpcy5faGVscGVyID8gew0KCQkJCXdpZHRoOiBlbC5vdXRlcldpZHRoKCksDQoJCQkJaGVpZ2h0OiBlbC5vdXRlckhlaWdodCgpDQoJCQl9IDogew0KCQkJCXdpZHRoOiBlbC53aWR0aCgpLA0KCQkJCWhlaWdodDogZWwuaGVpZ2h0KCkNCgkJCX07DQoNCgkJdGhpcy5zaXplRGlmZiA9IHsNCgkJCXdpZHRoOiBlbC5vdXRlcldpZHRoKCkgLSBlbC53aWR0aCgpLA0KCQkJaGVpZ2h0OiBlbC5vdXRlckhlaWdodCgpIC0gZWwuaGVpZ2h0KCkNCgkJfTsNCg0KCQl0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB7IGxlZnQ6IGN1cmxlZnQsIHRvcDogY3VydG9wIH07DQoJCXRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uID0geyBsZWZ0OiBldmVudC5wYWdlWCwgdG9wOiBldmVudC5wYWdlWSB9Ow0KDQoJCXRoaXMuYXNwZWN0UmF0aW8gPSAoIHR5cGVvZiBvLmFzcGVjdFJhdGlvID09PSAibnVtYmVyIiApID8NCgkJCW8uYXNwZWN0UmF0aW8gOg0KCQkJKCAoIHRoaXMub3JpZ2luYWxTaXplLndpZHRoIC8gdGhpcy5vcmlnaW5hbFNpemUuaGVpZ2h0ICkgfHwgMSApOw0KDQoJCWN1cnNvciA9ICQoICIudWktcmVzaXphYmxlLSIgKyB0aGlzLmF4aXMgKS5jc3MoICJjdXJzb3IiICk7DQoJCSQoICJib2R5IiApLmNzcyggImN1cnNvciIsIGN1cnNvciA9PT0gImF1dG8iID8gdGhpcy5heGlzICsgIi1yZXNpemUiIDogY3Vyc29yICk7DQoNCgkJdGhpcy5fYWRkQ2xhc3MoICJ1aS1yZXNpemFibGUtcmVzaXppbmciICk7DQoJCXRoaXMuX3Byb3BhZ2F0ZSggInN0YXJ0IiwgZXZlbnQgKTsNCgkJcmV0dXJuIHRydWU7DQoJfSwNCg0KCV9tb3VzZURyYWc6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQl2YXIgZGF0YSwgcHJvcHMsDQoJCQlzbXAgPSB0aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbiwNCgkJCWEgPSB0aGlzLmF4aXMsDQoJCQlkeCA9ICggZXZlbnQucGFnZVggLSBzbXAubGVmdCApIHx8IDAsDQoJCQlkeSA9ICggZXZlbnQucGFnZVkgLSBzbXAudG9wICkgfHwgMCwNCgkJCXRyaWdnZXIgPSB0aGlzLl9jaGFuZ2VbIGEgXTsNCg0KCQl0aGlzLl91cGRhdGVQcmV2UHJvcGVydGllcygpOw0KDQoJCWlmICggIXRyaWdnZXIgKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQlkYXRhID0gdHJpZ2dlci5hcHBseSggdGhpcywgWyBldmVudCwgZHgsIGR5IF0gKTsNCg0KCQl0aGlzLl91cGRhdGVWaXJ0dWFsQm91bmRhcmllcyggZXZlbnQuc2hpZnRLZXkgKTsNCgkJaWYgKCB0aGlzLl9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleSApIHsNCgkJCWRhdGEgPSB0aGlzLl91cGRhdGVSYXRpbyggZGF0YSwgZXZlbnQgKTsNCgkJfQ0KDQoJCWRhdGEgPSB0aGlzLl9yZXNwZWN0U2l6ZSggZGF0YSwgZXZlbnQgKTsNCg0KCQl0aGlzLl91cGRhdGVDYWNoZSggZGF0YSApOw0KDQoJCXRoaXMuX3Byb3BhZ2F0ZSggInJlc2l6ZSIsIGV2ZW50ICk7DQoNCgkJcHJvcHMgPSB0aGlzLl9hcHBseUNoYW5nZXMoKTsNCg0KCQlpZiAoICF0aGlzLl9oZWxwZXIgJiYgdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGggKSB7DQoJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOw0KCQl9DQoNCgkJaWYgKCAhJC5pc0VtcHR5T2JqZWN0KCBwcm9wcyApICkgew0KCQkJdGhpcy5fdXBkYXRlUHJldlByb3BlcnRpZXMoKTsNCgkJCXRoaXMuX3RyaWdnZXIoICJyZXNpemUiLCBldmVudCwgdGhpcy51aSgpICk7DQoJCQl0aGlzLl9hcHBseUNoYW5nZXMoKTsNCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCgl9LA0KDQoJX21vdXNlU3RvcDogZnVuY3Rpb24oIGV2ZW50ICkgew0KDQoJCXRoaXMucmVzaXppbmcgPSBmYWxzZTsNCgkJdmFyIHByLCBpc3RhLCBzb2Zmc2V0aCwgc29mZnNldHcsIHMsIGxlZnQsIHRvcCwNCgkJCW8gPSB0aGlzLm9wdGlvbnMsIHRoYXQgPSB0aGlzOw0KDQoJCWlmICggdGhpcy5faGVscGVyICkgew0KDQoJCQlwciA9IHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM7DQoJCQlpc3RhID0gcHIubGVuZ3RoICYmICggL3RleHRhcmVhL2kgKS50ZXN0KCBwclsgMCBdLm5vZGVOYW1lICk7DQoJCQlzb2Zmc2V0aCA9IGlzdGEgJiYgdGhpcy5faGFzU2Nyb2xsKCBwclsgMCBdLCAibGVmdCIgKSA/IDAgOiB0aGF0LnNpemVEaWZmLmhlaWdodDsNCgkJCXNvZmZzZXR3ID0gaXN0YSA/IDAgOiB0aGF0LnNpemVEaWZmLndpZHRoOw0KDQoJCQlzID0gew0KCQkJCXdpZHRoOiAoIHRoYXQuaGVscGVyLndpZHRoKCkgIC0gc29mZnNldHcgKSwNCgkJCQloZWlnaHQ6ICggdGhhdC5oZWxwZXIuaGVpZ2h0KCkgLSBzb2Zmc2V0aCApDQoJCQl9Ow0KCQkJbGVmdCA9ICggcGFyc2VGbG9hdCggdGhhdC5lbGVtZW50LmNzcyggImxlZnQiICkgKSArDQoJCQkJKCB0aGF0LnBvc2l0aW9uLmxlZnQgLSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24ubGVmdCApICkgfHwgbnVsbDsNCgkJCXRvcCA9ICggcGFyc2VGbG9hdCggdGhhdC5lbGVtZW50LmNzcyggInRvcCIgKSApICsNCgkJCQkoIHRoYXQucG9zaXRpb24udG9wIC0gdGhhdC5vcmlnaW5hbFBvc2l0aW9uLnRvcCApICkgfHwgbnVsbDsNCg0KCQkJaWYgKCAhby5hbmltYXRlICkgew0KCQkJCXRoaXMuZWxlbWVudC5jc3MoICQuZXh0ZW5kKCBzLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0gKSApOw0KCQkJfQ0KDQoJCQl0aGF0LmhlbHBlci5oZWlnaHQoIHRoYXQuc2l6ZS5oZWlnaHQgKTsNCgkJCXRoYXQuaGVscGVyLndpZHRoKCB0aGF0LnNpemUud2lkdGggKTsNCg0KCQkJaWYgKCB0aGlzLl9oZWxwZXIgJiYgIW8uYW5pbWF0ZSApIHsNCgkJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOw0KCQkJfQ0KCQl9DQoNCgkJJCggImJvZHkiICkuY3NzKCAiY3Vyc29yIiwgImF1dG8iICk7DQoNCgkJdGhpcy5fcmVtb3ZlQ2xhc3MoICJ1aS1yZXNpemFibGUtcmVzaXppbmciICk7DQoNCgkJdGhpcy5fcHJvcGFnYXRlKCAic3RvcCIsIGV2ZW50ICk7DQoNCgkJaWYgKCB0aGlzLl9oZWxwZXIgKSB7DQoJCQl0aGlzLmhlbHBlci5yZW1vdmUoKTsNCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCg0KCX0sDQoNCglfdXBkYXRlUHJldlByb3BlcnRpZXM6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLnByZXZQb3NpdGlvbiA9IHsNCgkJCXRvcDogdGhpcy5wb3NpdGlvbi50b3AsDQoJCQlsZWZ0OiB0aGlzLnBvc2l0aW9uLmxlZnQNCgkJfTsNCgkJdGhpcy5wcmV2U2l6ZSA9IHsNCgkJCXdpZHRoOiB0aGlzLnNpemUud2lkdGgsDQoJCQloZWlnaHQ6IHRoaXMuc2l6ZS5oZWlnaHQNCgkJfTsNCgl9LA0KDQoJX2FwcGx5Q2hhbmdlczogZnVuY3Rpb24oKSB7DQoJCXZhciBwcm9wcyA9IHt9Ow0KDQoJCWlmICggdGhpcy5wb3NpdGlvbi50b3AgIT09IHRoaXMucHJldlBvc2l0aW9uLnRvcCApIHsNCgkJCXByb3BzLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgInB4IjsNCgkJfQ0KCQlpZiAoIHRoaXMucG9zaXRpb24ubGVmdCAhPT0gdGhpcy5wcmV2UG9zaXRpb24ubGVmdCApIHsNCgkJCXByb3BzLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyAicHgiOw0KCQl9DQoJCWlmICggdGhpcy5zaXplLndpZHRoICE9PSB0aGlzLnByZXZTaXplLndpZHRoICkgew0KCQkJcHJvcHMud2lkdGggPSB0aGlzLnNpemUud2lkdGggKyAicHgiOw0KCQl9DQoJCWlmICggdGhpcy5zaXplLmhlaWdodCAhPT0gdGhpcy5wcmV2U2l6ZS5oZWlnaHQgKSB7DQoJCQlwcm9wcy5oZWlnaHQgPSB0aGlzLnNpemUuaGVpZ2h0ICsgInB4IjsNCgkJfQ0KDQoJCXRoaXMuaGVscGVyLmNzcyggcHJvcHMgKTsNCg0KCQlyZXR1cm4gcHJvcHM7DQoJfSwNCg0KCV91cGRhdGVWaXJ0dWFsQm91bmRhcmllczogZnVuY3Rpb24oIGZvcmNlQXNwZWN0UmF0aW8gKSB7DQoJCXZhciBwTWluV2lkdGgsIHBNYXhXaWR0aCwgcE1pbkhlaWdodCwgcE1heEhlaWdodCwgYiwNCgkJCW8gPSB0aGlzLm9wdGlvbnM7DQoNCgkJYiA9IHsNCgkJCW1pbldpZHRoOiB0aGlzLl9pc051bWJlciggby5taW5XaWR0aCApID8gby5taW5XaWR0aCA6IDAsDQoJCQltYXhXaWR0aDogdGhpcy5faXNOdW1iZXIoIG8ubWF4V2lkdGggKSA/IG8ubWF4V2lkdGggOiBJbmZpbml0eSwNCgkJCW1pbkhlaWdodDogdGhpcy5faXNOdW1iZXIoIG8ubWluSGVpZ2h0ICkgPyBvLm1pbkhlaWdodCA6IDAsDQoJCQltYXhIZWlnaHQ6IHRoaXMuX2lzTnVtYmVyKCBvLm1heEhlaWdodCApID8gby5tYXhIZWlnaHQgOiBJbmZpbml0eQ0KCQl9Ow0KDQoJCWlmICggdGhpcy5fYXNwZWN0UmF0aW8gfHwgZm9yY2VBc3BlY3RSYXRpbyApIHsNCgkJCXBNaW5XaWR0aCA9IGIubWluSGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbzsNCgkJCXBNaW5IZWlnaHQgPSBiLm1pbldpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbzsNCgkJCXBNYXhXaWR0aCA9IGIubWF4SGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbzsNCgkJCXBNYXhIZWlnaHQgPSBiLm1heFdpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbzsNCg0KCQkJaWYgKCBwTWluV2lkdGggPiBiLm1pbldpZHRoICkgew0KCQkJCWIubWluV2lkdGggPSBwTWluV2lkdGg7DQoJCQl9DQoJCQlpZiAoIHBNaW5IZWlnaHQgPiBiLm1pbkhlaWdodCApIHsNCgkJCQliLm1pbkhlaWdodCA9IHBNaW5IZWlnaHQ7DQoJCQl9DQoJCQlpZiAoIHBNYXhXaWR0aCA8IGIubWF4V2lkdGggKSB7DQoJCQkJYi5tYXhXaWR0aCA9IHBNYXhXaWR0aDsNCgkJCX0NCgkJCWlmICggcE1heEhlaWdodCA8IGIubWF4SGVpZ2h0ICkgew0KCQkJCWIubWF4SGVpZ2h0ID0gcE1heEhlaWdodDsNCgkJCX0NCgkJfQ0KCQl0aGlzLl92Qm91bmRhcmllcyA9IGI7DQoJfSwNCg0KCV91cGRhdGVDYWNoZTogZnVuY3Rpb24oIGRhdGEgKSB7DQoJCXRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCk7DQoJCWlmICggdGhpcy5faXNOdW1iZXIoIGRhdGEubGVmdCApICkgew0KCQkJdGhpcy5wb3NpdGlvbi5sZWZ0ID0gZGF0YS5sZWZ0Ow0KCQl9DQoJCWlmICggdGhpcy5faXNOdW1iZXIoIGRhdGEudG9wICkgKSB7DQoJCQl0aGlzLnBvc2l0aW9uLnRvcCA9IGRhdGEudG9wOw0KCQl9DQoJCWlmICggdGhpcy5faXNOdW1iZXIoIGRhdGEuaGVpZ2h0ICkgKSB7DQoJCQl0aGlzLnNpemUuaGVpZ2h0ID0gZGF0YS5oZWlnaHQ7DQoJCX0NCgkJaWYgKCB0aGlzLl9pc051bWJlciggZGF0YS53aWR0aCApICkgew0KCQkJdGhpcy5zaXplLndpZHRoID0gZGF0YS53aWR0aDsNCgkJfQ0KCX0sDQoNCglfdXBkYXRlUmF0aW86IGZ1bmN0aW9uKCBkYXRhICkgew0KDQoJCXZhciBjcG9zID0gdGhpcy5wb3NpdGlvbiwNCgkJCWNzaXplID0gdGhpcy5zaXplLA0KCQkJYSA9IHRoaXMuYXhpczsNCg0KCQlpZiAoIHRoaXMuX2lzTnVtYmVyKCBkYXRhLmhlaWdodCApICkgew0KCQkJZGF0YS53aWR0aCA9ICggZGF0YS5oZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvICk7DQoJCX0gZWxzZSBpZiAoIHRoaXMuX2lzTnVtYmVyKCBkYXRhLndpZHRoICkgKSB7DQoJCQlkYXRhLmhlaWdodCA9ICggZGF0YS53aWR0aCAvIHRoaXMuYXNwZWN0UmF0aW8gKTsNCgkJfQ0KDQoJCWlmICggYSA9PT0gInN3IiApIHsNCgkJCWRhdGEubGVmdCA9IGNwb3MubGVmdCArICggY3NpemUud2lkdGggLSBkYXRhLndpZHRoICk7DQoJCQlkYXRhLnRvcCA9IG51bGw7DQoJCX0NCgkJaWYgKCBhID09PSAibnciICkgew0KCQkJZGF0YS50b3AgPSBjcG9zLnRvcCArICggY3NpemUuaGVpZ2h0IC0gZGF0YS5oZWlnaHQgKTsNCgkJCWRhdGEubGVmdCA9IGNwb3MubGVmdCArICggY3NpemUud2lkdGggLSBkYXRhLndpZHRoICk7DQoJCX0NCg0KCQlyZXR1cm4gZGF0YTsNCgl9LA0KDQoJX3Jlc3BlY3RTaXplOiBmdW5jdGlvbiggZGF0YSApIHsNCg0KCQl2YXIgbyA9IHRoaXMuX3ZCb3VuZGFyaWVzLA0KCQkJYSA9IHRoaXMuYXhpcywNCgkJCWlzbWF4dyA9IHRoaXMuX2lzTnVtYmVyKCBkYXRhLndpZHRoICkgJiYgby5tYXhXaWR0aCAmJiAoIG8ubWF4V2lkdGggPCBkYXRhLndpZHRoICksDQoJCQlpc21heGggPSB0aGlzLl9pc051bWJlciggZGF0YS5oZWlnaHQgKSAmJiBvLm1heEhlaWdodCAmJiAoIG8ubWF4SGVpZ2h0IDwgZGF0YS5oZWlnaHQgKSwNCgkJCWlzbWludyA9IHRoaXMuX2lzTnVtYmVyKCBkYXRhLndpZHRoICkgJiYgby5taW5XaWR0aCAmJiAoIG8ubWluV2lkdGggPiBkYXRhLndpZHRoICksDQoJCQlpc21pbmggPSB0aGlzLl9pc051bWJlciggZGF0YS5oZWlnaHQgKSAmJiBvLm1pbkhlaWdodCAmJiAoIG8ubWluSGVpZ2h0ID4gZGF0YS5oZWlnaHQgKSwNCgkJCWR3ID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQgKyB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCwNCgkJCWRoID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uLnRvcCArIHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCwNCgkJCWN3ID0gL3N3fG53fHcvLnRlc3QoIGEgKSwgY2ggPSAvbnd8bmV8bi8udGVzdCggYSApOw0KCQlpZiAoIGlzbWludyApIHsNCgkJCWRhdGEud2lkdGggPSBvLm1pbldpZHRoOw0KCQl9DQoJCWlmICggaXNtaW5oICkgew0KCQkJZGF0YS5oZWlnaHQgPSBvLm1pbkhlaWdodDsNCgkJfQ0KCQlpZiAoIGlzbWF4dyApIHsNCgkJCWRhdGEud2lkdGggPSBvLm1heFdpZHRoOw0KCQl9DQoJCWlmICggaXNtYXhoICkgew0KCQkJZGF0YS5oZWlnaHQgPSBvLm1heEhlaWdodDsNCgkJfQ0KDQoJCWlmICggaXNtaW53ICYmIGN3ICkgew0KCQkJZGF0YS5sZWZ0ID0gZHcgLSBvLm1pbldpZHRoOw0KCQl9DQoJCWlmICggaXNtYXh3ICYmIGN3ICkgew0KCQkJZGF0YS5sZWZ0ID0gZHcgLSBvLm1heFdpZHRoOw0KCQl9DQoJCWlmICggaXNtaW5oICYmIGNoICkgew0KCQkJZGF0YS50b3AgPSBkaCAtIG8ubWluSGVpZ2h0Ow0KCQl9DQoJCWlmICggaXNtYXhoICYmIGNoICkgew0KCQkJZGF0YS50b3AgPSBkaCAtIG8ubWF4SGVpZ2h0Ow0KCQl9DQoNCgkJLy8gRml4aW5nIGp1bXAgZXJyb3Igb24gdG9wL2xlZnQgLSBidWcgIzIzMzANCgkJaWYgKCAhZGF0YS53aWR0aCAmJiAhZGF0YS5oZWlnaHQgJiYgIWRhdGEubGVmdCAmJiBkYXRhLnRvcCApIHsNCgkJCWRhdGEudG9wID0gbnVsbDsNCgkJfSBlbHNlIGlmICggIWRhdGEud2lkdGggJiYgIWRhdGEuaGVpZ2h0ICYmICFkYXRhLnRvcCAmJiBkYXRhLmxlZnQgKSB7DQoJCQlkYXRhLmxlZnQgPSBudWxsOw0KCQl9DQoNCgkJcmV0dXJuIGRhdGE7DQoJfSwNCg0KCV9nZXRQYWRkaW5nUGx1c0JvcmRlckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCBlbGVtZW50ICkgew0KCQl2YXIgaSA9IDAsDQoJCQl3aWR0aHMgPSBbXSwNCgkJCWJvcmRlcnMgPSBbDQoJCQkJZWxlbWVudC5jc3MoICJib3JkZXJUb3BXaWR0aCIgKSwNCgkJCQllbGVtZW50LmNzcyggImJvcmRlclJpZ2h0V2lkdGgiICksDQoJCQkJZWxlbWVudC5jc3MoICJib3JkZXJCb3R0b21XaWR0aCIgKSwNCgkJCQllbGVtZW50LmNzcyggImJvcmRlckxlZnRXaWR0aCIgKQ0KCQkJXSwNCgkJCXBhZGRpbmdzID0gWw0KCQkJCWVsZW1lbnQuY3NzKCAicGFkZGluZ1RvcCIgKSwNCgkJCQllbGVtZW50LmNzcyggInBhZGRpbmdSaWdodCIgKSwNCgkJCQllbGVtZW50LmNzcyggInBhZGRpbmdCb3R0b20iICksDQoJCQkJZWxlbWVudC5jc3MoICJwYWRkaW5nTGVmdCIgKQ0KCQkJXTsNCg0KCQlmb3IgKCA7IGkgPCA0OyBpKysgKSB7DQoJCQl3aWR0aHNbIGkgXSA9ICggcGFyc2VGbG9hdCggYm9yZGVyc1sgaSBdICkgfHwgMCApOw0KCQkJd2lkdGhzWyBpIF0gKz0gKCBwYXJzZUZsb2F0KCBwYWRkaW5nc1sgaSBdICkgfHwgMCApOw0KCQl9DQoNCgkJcmV0dXJuIHsNCgkJCWhlaWdodDogd2lkdGhzWyAwIF0gKyB3aWR0aHNbIDIgXSwNCgkJCXdpZHRoOiB3aWR0aHNbIDEgXSArIHdpZHRoc1sgMyBdDQoJCX07DQoJfSwNCg0KCV9wcm9wb3J0aW9uYWxseVJlc2l6ZTogZnVuY3Rpb24oKSB7DQoNCgkJaWYgKCAhdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGggKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl2YXIgcHJlbCwNCgkJCWkgPSAwLA0KCQkJZWxlbWVudCA9IHRoaXMuaGVscGVyIHx8IHRoaXMuZWxlbWVudDsNCg0KCQlmb3IgKCA7IGkgPCB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDsgaSsrICkgew0KDQoJCQlwcmVsID0gdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50c1sgaSBdOw0KDQoJCQkvLyBUT0RPOiBTZWVtcyBsaWtlIGEgYnVnIHRvIGNhY2hlIHRoaXMub3V0ZXJEaW1lbnNpb25zDQoJCQkvLyBjb25zaWRlcmluZyB0aGF0IHdlIGFyZSBpbiBhIGxvb3AuDQoJCQlpZiAoICF0aGlzLm91dGVyRGltZW5zaW9ucyApIHsNCgkJCQl0aGlzLm91dGVyRGltZW5zaW9ucyA9IHRoaXMuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyggcHJlbCApOw0KCQkJfQ0KDQoJCQlwcmVsLmNzcyggew0KCQkJCWhlaWdodDogKCBlbGVtZW50LmhlaWdodCgpIC0gdGhpcy5vdXRlckRpbWVuc2lvbnMuaGVpZ2h0ICkgfHwgMCwNCgkJCQl3aWR0aDogKCBlbGVtZW50LndpZHRoKCkgLSB0aGlzLm91dGVyRGltZW5zaW9ucy53aWR0aCApIHx8IDANCgkJCX0gKTsNCg0KCQl9DQoNCgl9LA0KDQoJX3JlbmRlclByb3h5OiBmdW5jdGlvbigpIHsNCg0KCQl2YXIgZWwgPSB0aGlzLmVsZW1lbnQsIG8gPSB0aGlzLm9wdGlvbnM7DQoJCXRoaXMuZWxlbWVudE9mZnNldCA9IGVsLm9mZnNldCgpOw0KDQoJCWlmICggdGhpcy5faGVscGVyICkgew0KDQoJCQl0aGlzLmhlbHBlciA9IHRoaXMuaGVscGVyIHx8ICQoICI8ZGl2IHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47Jz48L2Rpdj4iICk7DQoNCgkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmhlbHBlciwgdGhpcy5faGVscGVyICk7DQoJCQl0aGlzLmhlbHBlci5jc3MoIHsNCgkJCQl3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSwNCgkJCQloZWlnaHQ6IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLA0KCQkJCXBvc2l0aW9uOiAiYWJzb2x1dGUiLA0KCQkJCWxlZnQ6IHRoaXMuZWxlbWVudE9mZnNldC5sZWZ0ICsgInB4IiwNCgkJCQl0b3A6IHRoaXMuZWxlbWVudE9mZnNldC50b3AgKyAicHgiLA0KCQkJCXpJbmRleDogKytvLnpJbmRleCAvL1RPRE86IERvbid0IG1vZGlmeSBvcHRpb24NCgkJCX0gKTsNCg0KCQkJdGhpcy5oZWxwZXINCgkJCQkuYXBwZW5kVG8oICJib2R5IiApDQoJCQkJLmRpc2FibGVTZWxlY3Rpb24oKTsNCg0KCQl9IGVsc2Ugew0KCQkJdGhpcy5oZWxwZXIgPSB0aGlzLmVsZW1lbnQ7DQoJCX0NCg0KCX0sDQoNCglfY2hhbmdlOiB7DQoJCWU6IGZ1bmN0aW9uKCBldmVudCwgZHggKSB7DQoJCQlyZXR1cm4geyB3aWR0aDogdGhpcy5vcmlnaW5hbFNpemUud2lkdGggKyBkeCB9Ow0KCQl9LA0KCQl3OiBmdW5jdGlvbiggZXZlbnQsIGR4ICkgew0KCQkJdmFyIGNzID0gdGhpcy5vcmlnaW5hbFNpemUsIHNwID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uOw0KCQkJcmV0dXJuIHsgbGVmdDogc3AubGVmdCArIGR4LCB3aWR0aDogY3Mud2lkdGggLSBkeCB9Ow0KCQl9LA0KCQluOiBmdW5jdGlvbiggZXZlbnQsIGR4LCBkeSApIHsNCgkJCXZhciBjcyA9IHRoaXMub3JpZ2luYWxTaXplLCBzcCA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjsNCgkJCXJldHVybiB7IHRvcDogc3AudG9wICsgZHksIGhlaWdodDogY3MuaGVpZ2h0IC0gZHkgfTsNCgkJfSwNCgkJczogZnVuY3Rpb24oIGV2ZW50LCBkeCwgZHkgKSB7DQoJCQlyZXR1cm4geyBoZWlnaHQ6IHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCArIGR5IH07DQoJCX0sDQoJCXNlOiBmdW5jdGlvbiggZXZlbnQsIGR4LCBkeSApIHsNCgkJCXJldHVybiAkLmV4dGVuZCggdGhpcy5fY2hhbmdlLnMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLA0KCQkJCXRoaXMuX2NoYW5nZS5lLmFwcGx5KCB0aGlzLCBbIGV2ZW50LCBkeCwgZHkgXSApICk7DQoJCX0sDQoJCXN3OiBmdW5jdGlvbiggZXZlbnQsIGR4LCBkeSApIHsNCgkJCXJldHVybiAkLmV4dGVuZCggdGhpcy5fY2hhbmdlLnMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLA0KCQkJCXRoaXMuX2NoYW5nZS53LmFwcGx5KCB0aGlzLCBbIGV2ZW50LCBkeCwgZHkgXSApICk7DQoJCX0sDQoJCW5lOiBmdW5jdGlvbiggZXZlbnQsIGR4LCBkeSApIHsNCgkJCXJldHVybiAkLmV4dGVuZCggdGhpcy5fY2hhbmdlLm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLA0KCQkJCXRoaXMuX2NoYW5nZS5lLmFwcGx5KCB0aGlzLCBbIGV2ZW50LCBkeCwgZHkgXSApICk7DQoJCX0sDQoJCW53OiBmdW5jdGlvbiggZXZlbnQsIGR4LCBkeSApIHsNCgkJCXJldHVybiAkLmV4dGVuZCggdGhpcy5fY2hhbmdlLm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLA0KCQkJCXRoaXMuX2NoYW5nZS53LmFwcGx5KCB0aGlzLCBbIGV2ZW50LCBkeCwgZHkgXSApICk7DQoJCX0NCgl9LA0KDQoJX3Byb3BhZ2F0ZTogZnVuY3Rpb24oIG4sIGV2ZW50ICkgew0KCQkkLnVpLnBsdWdpbi5jYWxsKCB0aGlzLCBuLCBbIGV2ZW50LCB0aGlzLnVpKCkgXSApOw0KCQkoIG4gIT09ICJyZXNpemUiICYmIHRoaXMuX3RyaWdnZXIoIG4sIGV2ZW50LCB0aGlzLnVpKCkgKSApOw0KCX0sDQoNCglwbHVnaW5zOiB7fSwNCg0KCXVpOiBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHsNCgkJCW9yaWdpbmFsRWxlbWVudDogdGhpcy5vcmlnaW5hbEVsZW1lbnQsDQoJCQllbGVtZW50OiB0aGlzLmVsZW1lbnQsDQoJCQloZWxwZXI6IHRoaXMuaGVscGVyLA0KCQkJcG9zaXRpb246IHRoaXMucG9zaXRpb24sDQoJCQlzaXplOiB0aGlzLnNpemUsDQoJCQlvcmlnaW5hbFNpemU6IHRoaXMub3JpZ2luYWxTaXplLA0KCQkJb3JpZ2luYWxQb3NpdGlvbjogdGhpcy5vcmlnaW5hbFBvc2l0aW9uDQoJCX07DQoJfQ0KDQp9ICk7DQoNCi8qDQogKiBSZXNpemFibGUgRXh0ZW5zaW9ucw0KICovDQoNCiQudWkucGx1Z2luLmFkZCggInJlc2l6YWJsZSIsICJhbmltYXRlIiwgew0KDQoJc3RvcDogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwNCgkJCW8gPSB0aGF0Lm9wdGlvbnMsDQoJCQlwciA9IHRoYXQuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsDQoJCQlpc3RhID0gcHIubGVuZ3RoICYmICggL3RleHRhcmVhL2kgKS50ZXN0KCBwclsgMCBdLm5vZGVOYW1lICksDQoJCQlzb2Zmc2V0aCA9IGlzdGEgJiYgdGhhdC5faGFzU2Nyb2xsKCBwclsgMCBdLCAibGVmdCIgKSA/IDAgOiB0aGF0LnNpemVEaWZmLmhlaWdodCwNCgkJCXNvZmZzZXR3ID0gaXN0YSA/IDAgOiB0aGF0LnNpemVEaWZmLndpZHRoLA0KCQkJc3R5bGUgPSB7DQoJCQkJd2lkdGg6ICggdGhhdC5zaXplLndpZHRoIC0gc29mZnNldHcgKSwNCgkJCQloZWlnaHQ6ICggdGhhdC5zaXplLmhlaWdodCAtIHNvZmZzZXRoICkNCgkJCX0sDQoJCQlsZWZ0ID0gKCBwYXJzZUZsb2F0KCB0aGF0LmVsZW1lbnQuY3NzKCAibGVmdCIgKSApICsNCgkJCQkoIHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0ICkgKSB8fCBudWxsLA0KCQkJdG9wID0gKCBwYXJzZUZsb2F0KCB0aGF0LmVsZW1lbnQuY3NzKCAidG9wIiApICkgKw0KCQkJCSggdGhhdC5wb3NpdGlvbi50b3AgLSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24udG9wICkgKSB8fCBudWxsOw0KDQoJCXRoYXQuZWxlbWVudC5hbmltYXRlKA0KCQkJJC5leHRlbmQoIHN0eWxlLCB0b3AgJiYgbGVmdCA/IHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSA6IHt9ICksIHsNCgkJCQlkdXJhdGlvbjogby5hbmltYXRlRHVyYXRpb24sDQoJCQkJZWFzaW5nOiBvLmFuaW1hdGVFYXNpbmcsDQoJCQkJc3RlcDogZnVuY3Rpb24oKSB7DQoNCgkJCQkJdmFyIGRhdGEgPSB7DQoJCQkJCQl3aWR0aDogcGFyc2VGbG9hdCggdGhhdC5lbGVtZW50LmNzcyggIndpZHRoIiApICksDQoJCQkJCQloZWlnaHQ6IHBhcnNlRmxvYXQoIHRoYXQuZWxlbWVudC5jc3MoICJoZWlnaHQiICkgKSwNCgkJCQkJCXRvcDogcGFyc2VGbG9hdCggdGhhdC5lbGVtZW50LmNzcyggInRvcCIgKSApLA0KCQkJCQkJbGVmdDogcGFyc2VGbG9hdCggdGhhdC5lbGVtZW50LmNzcyggImxlZnQiICkgKQ0KCQkJCQl9Ow0KDQoJCQkJCWlmICggcHIgJiYgcHIubGVuZ3RoICkgew0KCQkJCQkJJCggcHJbIDAgXSApLmNzcyggeyB3aWR0aDogZGF0YS53aWR0aCwgaGVpZ2h0OiBkYXRhLmhlaWdodCB9ICk7DQoJCQkJCX0NCg0KCQkJCQkvLyBQcm9wYWdhdGluZyByZXNpemUsIGFuZCB1cGRhdGluZyB2YWx1ZXMgZm9yIGVhY2ggYW5pbWF0aW9uIHN0ZXANCgkJCQkJdGhhdC5fdXBkYXRlQ2FjaGUoIGRhdGEgKTsNCgkJCQkJdGhhdC5fcHJvcGFnYXRlKCAicmVzaXplIiwgZXZlbnQgKTsNCg0KCQkJCX0NCgkJCX0NCgkJKTsNCgl9DQoNCn0gKTsNCg0KJC51aS5wbHVnaW4uYWRkKCAicmVzaXphYmxlIiwgImNvbnRhaW5tZW50Iiwgew0KDQoJc3RhcnQ6IGZ1bmN0aW9uKCkgew0KCQl2YXIgZWxlbWVudCwgcCwgY28sIGNoLCBjdywgd2lkdGgsIGhlaWdodCwNCgkJCXRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCAiaW5zdGFuY2UiICksDQoJCQlvID0gdGhhdC5vcHRpb25zLA0KCQkJZWwgPSB0aGF0LmVsZW1lbnQsDQoJCQlvYyA9IG8uY29udGFpbm1lbnQsDQoJCQljZSA9ICggb2MgaW5zdGFuY2VvZiAkICkgPw0KCQkJCW9jLmdldCggMCApIDoNCgkJCQkoIC9wYXJlbnQvLnRlc3QoIG9jICkgKSA/IGVsLnBhcmVudCgpLmdldCggMCApIDogb2M7DQoNCgkJaWYgKCAhY2UgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGF0LmNvbnRhaW5lckVsZW1lbnQgPSAkKCBjZSApOw0KDQoJCWlmICggL2RvY3VtZW50Ly50ZXN0KCBvYyApIHx8IG9jID09PSBkb2N1bWVudCApIHsNCgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0gew0KCQkJCWxlZnQ6IDAsDQoJCQkJdG9wOiAwDQoJCQl9Ow0KCQkJdGhhdC5jb250YWluZXJQb3NpdGlvbiA9IHsNCgkJCQlsZWZ0OiAwLA0KCQkJCXRvcDogMA0KCQkJfTsNCg0KCQkJdGhhdC5wYXJlbnREYXRhID0gew0KCQkJCWVsZW1lbnQ6ICQoIGRvY3VtZW50ICksDQoJCQkJbGVmdDogMCwNCgkJCQl0b3A6IDAsDQoJCQkJd2lkdGg6ICQoIGRvY3VtZW50ICkud2lkdGgoKSwNCgkJCQloZWlnaHQ6ICQoIGRvY3VtZW50ICkuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodA0KCQkJfTsNCgkJfSBlbHNlIHsNCgkJCWVsZW1lbnQgPSAkKCBjZSApOw0KCQkJcCA9IFtdOw0KCQkJJCggWyAiVG9wIiwgIlJpZ2h0IiwgIkxlZnQiLCAiQm90dG9tIiBdICkuZWFjaCggZnVuY3Rpb24oIGksIG5hbWUgKSB7DQoJCQkJcFsgaSBdID0gdGhhdC5fbnVtKCBlbGVtZW50LmNzcyggInBhZGRpbmciICsgbmFtZSApICk7DQoJCQl9ICk7DQoNCgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKTsNCgkJCXRoYXQuY29udGFpbmVyUG9zaXRpb24gPSBlbGVtZW50LnBvc2l0aW9uKCk7DQoJCQl0aGF0LmNvbnRhaW5lclNpemUgPSB7DQoJCQkJaGVpZ2h0OiAoIGVsZW1lbnQuaW5uZXJIZWlnaHQoKSAtIHBbIDMgXSApLA0KCQkJCXdpZHRoOiAoIGVsZW1lbnQuaW5uZXJXaWR0aCgpIC0gcFsgMSBdICkNCgkJCX07DQoNCgkJCWNvID0gdGhhdC5jb250YWluZXJPZmZzZXQ7DQoJCQljaCA9IHRoYXQuY29udGFpbmVyU2l6ZS5oZWlnaHQ7DQoJCQljdyA9IHRoYXQuY29udGFpbmVyU2l6ZS53aWR0aDsNCgkJCXdpZHRoID0gKCB0aGF0Ll9oYXNTY3JvbGwgKCBjZSwgImxlZnQiICkgPyBjZS5zY3JvbGxXaWR0aCA6IGN3ICk7DQoJCQloZWlnaHQgPSAoIHRoYXQuX2hhc1Njcm9sbCAoIGNlICkgPyBjZS5zY3JvbGxIZWlnaHQgOiBjaCApIDsNCg0KCQkJdGhhdC5wYXJlbnREYXRhID0gew0KCQkJCWVsZW1lbnQ6IGNlLA0KCQkJCWxlZnQ6IGNvLmxlZnQsDQoJCQkJdG9wOiBjby50b3AsDQoJCQkJd2lkdGg6IHdpZHRoLA0KCQkJCWhlaWdodDogaGVpZ2h0DQoJCQl9Ow0KCQl9DQoJfSwNCg0KCXJlc2l6ZTogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgd29zZXQsIGhvc2V0LCBpc1BhcmVudCwgaXNPZmZzZXRSZWxhdGl2ZSwNCgkJCXRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCAiaW5zdGFuY2UiICksDQoJCQlvID0gdGhhdC5vcHRpb25zLA0KCQkJY28gPSB0aGF0LmNvbnRhaW5lck9mZnNldCwNCgkJCWNwID0gdGhhdC5wb3NpdGlvbiwNCgkJCXBSYXRpbyA9IHRoYXQuX2FzcGVjdFJhdGlvIHx8IGV2ZW50LnNoaWZ0S2V5LA0KCQkJY29wID0gew0KCQkJCXRvcDogMCwNCgkJCQlsZWZ0OiAwDQoJCQl9LA0KCQkJY2UgPSB0aGF0LmNvbnRhaW5lckVsZW1lbnQsDQoJCQljb250aW51ZVJlc2l6ZSA9IHRydWU7DQoNCgkJaWYgKCBjZVsgMCBdICE9PSBkb2N1bWVudCAmJiAoIC9zdGF0aWMvICkudGVzdCggY2UuY3NzKCAicG9zaXRpb24iICkgKSApIHsNCgkJCWNvcCA9IGNvOw0KCQl9DQoNCgkJaWYgKCBjcC5sZWZ0IDwgKCB0aGF0Ll9oZWxwZXIgPyBjby5sZWZ0IDogMCApICkgew0KCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLndpZHRoICsNCgkJCQkoIHRoYXQuX2hlbHBlciA/DQoJCQkJCSggdGhhdC5wb3NpdGlvbi5sZWZ0IC0gY28ubGVmdCApIDoNCgkJCQkJKCB0aGF0LnBvc2l0aW9uLmxlZnQgLSBjb3AubGVmdCApICk7DQoNCgkJCWlmICggcFJhdGlvICkgew0KCQkJCXRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnNpemUud2lkdGggLyB0aGF0LmFzcGVjdFJhdGlvOw0KCQkJCWNvbnRpbnVlUmVzaXplID0gZmFsc2U7DQoJCQl9DQoJCQl0aGF0LnBvc2l0aW9uLmxlZnQgPSBvLmhlbHBlciA/IGNvLmxlZnQgOiAwOw0KCQl9DQoNCgkJaWYgKCBjcC50b3AgPCAoIHRoYXQuX2hlbHBlciA/IGNvLnRvcCA6IDAgKSApIHsNCgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnNpemUuaGVpZ2h0ICsNCgkJCQkoIHRoYXQuX2hlbHBlciA/DQoJCQkJCSggdGhhdC5wb3NpdGlvbi50b3AgLSBjby50b3AgKSA6DQoJCQkJCXRoYXQucG9zaXRpb24udG9wICk7DQoNCgkJCWlmICggcFJhdGlvICkgew0KCQkJCXRoYXQuc2l6ZS53aWR0aCA9IHRoYXQuc2l6ZS5oZWlnaHQgKiB0aGF0LmFzcGVjdFJhdGlvOw0KCQkJCWNvbnRpbnVlUmVzaXplID0gZmFsc2U7DQoJCQl9DQoJCQl0aGF0LnBvc2l0aW9uLnRvcCA9IHRoYXQuX2hlbHBlciA/IGNvLnRvcCA6IDA7DQoJCX0NCg0KCQlpc1BhcmVudCA9IHRoYXQuY29udGFpbmVyRWxlbWVudC5nZXQoIDAgKSA9PT0gdGhhdC5lbGVtZW50LnBhcmVudCgpLmdldCggMCApOw0KCQlpc09mZnNldFJlbGF0aXZlID0gL3JlbGF0aXZlfGFic29sdXRlLy50ZXN0KCB0aGF0LmNvbnRhaW5lckVsZW1lbnQuY3NzKCAicG9zaXRpb24iICkgKTsNCg0KCQlpZiAoIGlzUGFyZW50ICYmIGlzT2Zmc2V0UmVsYXRpdmUgKSB7DQoJCQl0aGF0Lm9mZnNldC5sZWZ0ID0gdGhhdC5wYXJlbnREYXRhLmxlZnQgKyB0aGF0LnBvc2l0aW9uLmxlZnQ7DQoJCQl0aGF0Lm9mZnNldC50b3AgPSB0aGF0LnBhcmVudERhdGEudG9wICsgdGhhdC5wb3NpdGlvbi50b3A7DQoJCX0gZWxzZSB7DQoJCQl0aGF0Lm9mZnNldC5sZWZ0ID0gdGhhdC5lbGVtZW50Lm9mZnNldCgpLmxlZnQ7DQoJCQl0aGF0Lm9mZnNldC50b3AgPSB0aGF0LmVsZW1lbnQub2Zmc2V0KCkudG9wOw0KCQl9DQoNCgkJd29zZXQgPSBNYXRoLmFicyggdGhhdC5zaXplRGlmZi53aWR0aCArDQoJCQkoIHRoYXQuX2hlbHBlciA/DQoJCQkJdGhhdC5vZmZzZXQubGVmdCAtIGNvcC5sZWZ0IDoNCgkJCQkoIHRoYXQub2Zmc2V0LmxlZnQgLSBjby5sZWZ0ICkgKSApOw0KDQoJCWhvc2V0ID0gTWF0aC5hYnMoIHRoYXQuc2l6ZURpZmYuaGVpZ2h0ICsNCgkJCSggdGhhdC5faGVscGVyID8NCgkJCQl0aGF0Lm9mZnNldC50b3AgLSBjb3AudG9wIDoNCgkJCQkoIHRoYXQub2Zmc2V0LnRvcCAtIGNvLnRvcCApICkgKTsNCg0KCQlpZiAoIHdvc2V0ICsgdGhhdC5zaXplLndpZHRoID49IHRoYXQucGFyZW50RGF0YS53aWR0aCApIHsNCgkJCXRoYXQuc2l6ZS53aWR0aCA9IHRoYXQucGFyZW50RGF0YS53aWR0aCAtIHdvc2V0Ow0KCQkJaWYgKCBwUmF0aW8gKSB7DQoJCQkJdGhhdC5zaXplLmhlaWdodCA9IHRoYXQuc2l6ZS53aWR0aCAvIHRoYXQuYXNwZWN0UmF0aW87DQoJCQkJY29udGludWVSZXNpemUgPSBmYWxzZTsNCgkJCX0NCgkJfQ0KDQoJCWlmICggaG9zZXQgKyB0aGF0LnNpemUuaGVpZ2h0ID49IHRoYXQucGFyZW50RGF0YS5oZWlnaHQgKSB7DQoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5wYXJlbnREYXRhLmhlaWdodCAtIGhvc2V0Ow0KCQkJaWYgKCBwUmF0aW8gKSB7DQoJCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLmhlaWdodCAqIHRoYXQuYXNwZWN0UmF0aW87DQoJCQkJY29udGludWVSZXNpemUgPSBmYWxzZTsNCgkJCX0NCgkJfQ0KDQoJCWlmICggIWNvbnRpbnVlUmVzaXplICkgew0KCQkJdGhhdC5wb3NpdGlvbi5sZWZ0ID0gdGhhdC5wcmV2UG9zaXRpb24ubGVmdDsNCgkJCXRoYXQucG9zaXRpb24udG9wID0gdGhhdC5wcmV2UG9zaXRpb24udG9wOw0KCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5wcmV2U2l6ZS53aWR0aDsNCgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnByZXZTaXplLmhlaWdodDsNCgkJfQ0KCX0sDQoNCglzdG9wOiBmdW5jdGlvbigpIHsNCgkJdmFyIHRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCAiaW5zdGFuY2UiICksDQoJCQlvID0gdGhhdC5vcHRpb25zLA0KCQkJY28gPSB0aGF0LmNvbnRhaW5lck9mZnNldCwNCgkJCWNvcCA9IHRoYXQuY29udGFpbmVyUG9zaXRpb24sDQoJCQljZSA9IHRoYXQuY29udGFpbmVyRWxlbWVudCwNCgkJCWhlbHBlciA9ICQoIHRoYXQuaGVscGVyICksDQoJCQlobyA9IGhlbHBlci5vZmZzZXQoKSwNCgkJCXcgPSBoZWxwZXIub3V0ZXJXaWR0aCgpIC0gdGhhdC5zaXplRGlmZi53aWR0aCwNCgkJCWggPSBoZWxwZXIub3V0ZXJIZWlnaHQoKSAtIHRoYXQuc2l6ZURpZmYuaGVpZ2h0Ow0KDQoJCWlmICggdGhhdC5faGVscGVyICYmICFvLmFuaW1hdGUgJiYgKCAvcmVsYXRpdmUvICkudGVzdCggY2UuY3NzKCAicG9zaXRpb24iICkgKSApIHsNCgkJCSQoIHRoaXMgKS5jc3MoIHsNCgkJCQlsZWZ0OiBoby5sZWZ0IC0gY29wLmxlZnQgLSBjby5sZWZ0LA0KCQkJCXdpZHRoOiB3LA0KCQkJCWhlaWdodDogaA0KCQkJfSApOw0KCQl9DQoNCgkJaWYgKCB0aGF0Ll9oZWxwZXIgJiYgIW8uYW5pbWF0ZSAmJiAoIC9zdGF0aWMvICkudGVzdCggY2UuY3NzKCAicG9zaXRpb24iICkgKSApIHsNCgkJCSQoIHRoaXMgKS5jc3MoIHsNCgkJCQlsZWZ0OiBoby5sZWZ0IC0gY29wLmxlZnQgLSBjby5sZWZ0LA0KCQkJCXdpZHRoOiB3LA0KCQkJCWhlaWdodDogaA0KCQkJfSApOw0KCQl9DQoJfQ0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJyZXNpemFibGUiLCAiYWxzb1Jlc2l6ZSIsIHsNCg0KCXN0YXJ0OiBmdW5jdGlvbigpIHsNCgkJdmFyIHRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCAiaW5zdGFuY2UiICksDQoJCQlvID0gdGhhdC5vcHRpb25zOw0KDQoJCSQoIG8uYWxzb1Jlc2l6ZSApLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGVsID0gJCggdGhpcyApOw0KCQkJZWwuZGF0YSggInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplIiwgew0KCQkJCXdpZHRoOiBwYXJzZUZsb2F0KCBlbC53aWR0aCgpICksIGhlaWdodDogcGFyc2VGbG9hdCggZWwuaGVpZ2h0KCkgKSwNCgkJCQlsZWZ0OiBwYXJzZUZsb2F0KCBlbC5jc3MoICJsZWZ0IiApICksIHRvcDogcGFyc2VGbG9hdCggZWwuY3NzKCAidG9wIiApICkNCgkJCX0gKTsNCgkJfSApOw0KCX0sDQoNCglyZXNpemU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7DQoJCXZhciB0aGF0ID0gJCggdGhpcyApLnJlc2l6YWJsZSggImluc3RhbmNlIiApLA0KCQkJbyA9IHRoYXQub3B0aW9ucywNCgkJCW9zID0gdGhhdC5vcmlnaW5hbFNpemUsDQoJCQlvcCA9IHRoYXQub3JpZ2luYWxQb3NpdGlvbiwNCgkJCWRlbHRhID0gew0KCQkJCWhlaWdodDogKCB0aGF0LnNpemUuaGVpZ2h0IC0gb3MuaGVpZ2h0ICkgfHwgMCwNCgkJCQl3aWR0aDogKCB0aGF0LnNpemUud2lkdGggLSBvcy53aWR0aCApIHx8IDAsDQoJCQkJdG9wOiAoIHRoYXQucG9zaXRpb24udG9wIC0gb3AudG9wICkgfHwgMCwNCgkJCQlsZWZ0OiAoIHRoYXQucG9zaXRpb24ubGVmdCAtIG9wLmxlZnQgKSB8fCAwDQoJCQl9Ow0KDQoJCQkkKCBvLmFsc29SZXNpemUgKS5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQl2YXIgZWwgPSAkKCB0aGlzICksIHN0YXJ0ID0gJCggdGhpcyApLmRhdGEoICJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIgKSwgc3R5bGUgPSB7fSwNCgkJCQkJY3NzID0gZWwucGFyZW50cyggdWkub3JpZ2luYWxFbGVtZW50WyAwIF0gKS5sZW5ndGggPw0KCQkJCQkJCVsgIndpZHRoIiwgImhlaWdodCIgXSA6DQoJCQkJCQkJWyAid2lkdGgiLCAiaGVpZ2h0IiwgInRvcCIsICJsZWZ0IiBdOw0KDQoJCQkJJC5lYWNoKCBjc3MsIGZ1bmN0aW9uKCBpLCBwcm9wICkgew0KCQkJCQl2YXIgc3VtID0gKCBzdGFydFsgcHJvcCBdIHx8IDAgKSArICggZGVsdGFbIHByb3AgXSB8fCAwICk7DQoJCQkJCWlmICggc3VtICYmIHN1bSA+PSAwICkgew0KCQkJCQkJc3R5bGVbIHByb3AgXSA9IHN1bSB8fCBudWxsOw0KCQkJCQl9DQoJCQkJfSApOw0KDQoJCQkJZWwuY3NzKCBzdHlsZSApOw0KCQkJfSApOw0KCX0sDQoNCglzdG9wOiBmdW5jdGlvbigpIHsNCgkJJCggdGhpcyApLnJlbW92ZURhdGEoICJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIgKTsNCgl9DQp9ICk7DQoNCiQudWkucGx1Z2luLmFkZCggInJlc2l6YWJsZSIsICJnaG9zdCIsIHsNCg0KCXN0YXJ0OiBmdW5jdGlvbigpIHsNCg0KCQl2YXIgdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwgY3MgPSB0aGF0LnNpemU7DQoNCgkJdGhhdC5naG9zdCA9IHRoYXQub3JpZ2luYWxFbGVtZW50LmNsb25lKCk7DQoJCXRoYXQuZ2hvc3QuY3NzKCB7DQoJCQlvcGFjaXR5OiAwLjI1LA0KCQkJZGlzcGxheTogImJsb2NrIiwNCgkJCXBvc2l0aW9uOiAicmVsYXRpdmUiLA0KCQkJaGVpZ2h0OiBjcy5oZWlnaHQsDQoJCQl3aWR0aDogY3Mud2lkdGgsDQoJCQltYXJnaW46IDAsDQoJCQlsZWZ0OiAwLA0KCQkJdG9wOiAwDQoJCX0gKTsNCg0KCQl0aGF0Ll9hZGRDbGFzcyggdGhhdC5naG9zdCwgInVpLXJlc2l6YWJsZS1naG9zdCIgKTsNCg0KCQkvLyBERVBSRUNBVEVEDQoJCS8vIFRPRE86IHJlbW92ZSBhZnRlciAxLjEyDQoJCWlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICYmIHR5cGVvZiB0aGF0Lm9wdGlvbnMuZ2hvc3QgPT09ICJzdHJpbmciICkgew0KDQoJCQkvLyBHaG9zdCBvcHRpb24NCgkJCXRoYXQuZ2hvc3QuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5naG9zdCApOw0KCQl9DQoNCgkJdGhhdC5naG9zdC5hcHBlbmRUbyggdGhhdC5oZWxwZXIgKTsNCg0KCX0sDQoNCglyZXNpemU6IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKTsNCgkJaWYgKCB0aGF0Lmdob3N0ICkgew0KCQkJdGhhdC5naG9zdC5jc3MoIHsNCgkJCQlwb3NpdGlvbjogInJlbGF0aXZlIiwNCgkJCQloZWlnaHQ6IHRoYXQuc2l6ZS5oZWlnaHQsDQoJCQkJd2lkdGg6IHRoYXQuc2l6ZS53aWR0aA0KCQkJfSApOw0KCQl9DQoJfSwNCg0KCXN0b3A6IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKTsNCgkJaWYgKCB0aGF0Lmdob3N0ICYmIHRoYXQuaGVscGVyICkgew0KCQkJdGhhdC5oZWxwZXIuZ2V0KCAwICkucmVtb3ZlQ2hpbGQoIHRoYXQuZ2hvc3QuZ2V0KCAwICkgKTsNCgkJfQ0KCX0NCg0KfSApOw0KDQokLnVpLnBsdWdpbi5hZGQoICJyZXNpemFibGUiLCAiZ3JpZCIsIHsNCg0KCXJlc2l6ZTogZnVuY3Rpb24oKSB7DQoJCXZhciBvdXRlckRpbWVuc2lvbnMsDQoJCQl0aGF0ID0gJCggdGhpcyApLnJlc2l6YWJsZSggImluc3RhbmNlIiApLA0KCQkJbyA9IHRoYXQub3B0aW9ucywNCgkJCWNzID0gdGhhdC5zaXplLA0KCQkJb3MgPSB0aGF0Lm9yaWdpbmFsU2l6ZSwNCgkJCW9wID0gdGhhdC5vcmlnaW5hbFBvc2l0aW9uLA0KCQkJYSA9IHRoYXQuYXhpcywNCgkJCWdyaWQgPSB0eXBlb2Ygby5ncmlkID09PSAibnVtYmVyIiA/IFsgby5ncmlkLCBvLmdyaWQgXSA6IG8uZ3JpZCwNCgkJCWdyaWRYID0gKCBncmlkWyAwIF0gfHwgMSApLA0KCQkJZ3JpZFkgPSAoIGdyaWRbIDEgXSB8fCAxICksDQoJCQlveCA9IE1hdGgucm91bmQoICggY3Mud2lkdGggLSBvcy53aWR0aCApIC8gZ3JpZFggKSAqIGdyaWRYLA0KCQkJb3kgPSBNYXRoLnJvdW5kKCAoIGNzLmhlaWdodCAtIG9zLmhlaWdodCApIC8gZ3JpZFkgKSAqIGdyaWRZLA0KCQkJbmV3V2lkdGggPSBvcy53aWR0aCArIG94LA0KCQkJbmV3SGVpZ2h0ID0gb3MuaGVpZ2h0ICsgb3ksDQoJCQlpc01heFdpZHRoID0gby5tYXhXaWR0aCAmJiAoIG8ubWF4V2lkdGggPCBuZXdXaWR0aCApLA0KCQkJaXNNYXhIZWlnaHQgPSBvLm1heEhlaWdodCAmJiAoIG8ubWF4SGVpZ2h0IDwgbmV3SGVpZ2h0ICksDQoJCQlpc01pbldpZHRoID0gby5taW5XaWR0aCAmJiAoIG8ubWluV2lkdGggPiBuZXdXaWR0aCApLA0KCQkJaXNNaW5IZWlnaHQgPSBvLm1pbkhlaWdodCAmJiAoIG8ubWluSGVpZ2h0ID4gbmV3SGVpZ2h0ICk7DQoNCgkJby5ncmlkID0gZ3JpZDsNCg0KCQlpZiAoIGlzTWluV2lkdGggKSB7DQoJCQluZXdXaWR0aCArPSBncmlkWDsNCgkJfQ0KCQlpZiAoIGlzTWluSGVpZ2h0ICkgew0KCQkJbmV3SGVpZ2h0ICs9IGdyaWRZOw0KCQl9DQoJCWlmICggaXNNYXhXaWR0aCApIHsNCgkJCW5ld1dpZHRoIC09IGdyaWRYOw0KCQl9DQoJCWlmICggaXNNYXhIZWlnaHQgKSB7DQoJCQluZXdIZWlnaHQgLT0gZ3JpZFk7DQoJCX0NCg0KCQlpZiAoIC9eKHNlfHN8ZSkkLy50ZXN0KCBhICkgKSB7DQoJCQl0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDsNCgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7DQoJCX0gZWxzZSBpZiAoIC9eKG5lKSQvLnRlc3QoIGEgKSApIHsNCgkJCXRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoOw0KCQkJdGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDsNCgkJCXRoYXQucG9zaXRpb24udG9wID0gb3AudG9wIC0gb3k7DQoJCX0gZWxzZSBpZiAoIC9eKHN3KSQvLnRlc3QoIGEgKSApIHsNCgkJCXRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoOw0KCQkJdGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDsNCgkJCXRoYXQucG9zaXRpb24ubGVmdCA9IG9wLmxlZnQgLSBveDsNCgkJfSBlbHNlIHsNCgkJCWlmICggbmV3SGVpZ2h0IC0gZ3JpZFkgPD0gMCB8fCBuZXdXaWR0aCAtIGdyaWRYIDw9IDAgKSB7DQoJCQkJb3V0ZXJEaW1lbnNpb25zID0gdGhhdC5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKCB0aGlzICk7DQoJCQl9DQoNCgkJCWlmICggbmV3SGVpZ2h0IC0gZ3JpZFkgPiAwICkgew0KCQkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7DQoJCQkJdGhhdC5wb3NpdGlvbi50b3AgPSBvcC50b3AgLSBveTsNCgkJCX0gZWxzZSB7DQoJCQkJbmV3SGVpZ2h0ID0gZ3JpZFkgLSBvdXRlckRpbWVuc2lvbnMuaGVpZ2h0Ow0KCQkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7DQoJCQkJdGhhdC5wb3NpdGlvbi50b3AgPSBvcC50b3AgKyBvcy5oZWlnaHQgLSBuZXdIZWlnaHQ7DQoJCQl9DQoJCQlpZiAoIG5ld1dpZHRoIC0gZ3JpZFggPiAwICkgew0KCQkJCXRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoOw0KCQkJCXRoYXQucG9zaXRpb24ubGVmdCA9IG9wLmxlZnQgLSBveDsNCgkJCX0gZWxzZSB7DQoJCQkJbmV3V2lkdGggPSBncmlkWCAtIG91dGVyRGltZW5zaW9ucy53aWR0aDsNCgkJCQl0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDsNCgkJCQl0aGF0LnBvc2l0aW9uLmxlZnQgPSBvcC5sZWZ0ICsgb3Mud2lkdGggLSBuZXdXaWR0aDsNCgkJCX0NCgkJfQ0KCX0NCg0KfSApOw0KDQp2YXIgd2lkZ2V0c1Jlc2l6YWJsZSA9ICQudWkucmVzaXphYmxlOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIFNlbGVjdGFibGUgMS4xMi4xDQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqLw0KDQovLz4+bGFiZWw6IFNlbGVjdGFibGUNCi8vPj5ncm91cDogSW50ZXJhY3Rpb25zDQovLz4+ZGVzY3JpcHRpb246IEFsbG93cyBncm91cHMgb2YgZWxlbWVudHMgdG8gYmUgc2VsZWN0ZWQgd2l0aCB0aGUgbW91c2UuDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2VsZWN0YWJsZS8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9zZWxlY3RhYmxlLw0KLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL3NlbGVjdGFibGUuY3NzDQoNCg0KDQp2YXIgd2lkZ2V0c1NlbGVjdGFibGUgPSAkLndpZGdldCggInVpLnNlbGVjdGFibGUiLCAkLnVpLm1vdXNlLCB7DQoJdmVyc2lvbjogIjEuMTIuMSIsDQoJb3B0aW9uczogew0KCQlhcHBlbmRUbzogImJvZHkiLA0KCQlhdXRvUmVmcmVzaDogdHJ1ZSwNCgkJZGlzdGFuY2U6IDAsDQoJCWZpbHRlcjogIioiLA0KCQl0b2xlcmFuY2U6ICJ0b3VjaCIsDQoNCgkJLy8gQ2FsbGJhY2tzDQoJCXNlbGVjdGVkOiBudWxsLA0KCQlzZWxlY3Rpbmc6IG51bGwsDQoJCXN0YXJ0OiBudWxsLA0KCQlzdG9wOiBudWxsLA0KCQl1bnNlbGVjdGVkOiBudWxsLA0KCQl1bnNlbGVjdGluZzogbnVsbA0KCX0sDQoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQl0aGlzLl9hZGRDbGFzcyggInVpLXNlbGVjdGFibGUiICk7DQoNCgkJdGhpcy5kcmFnZ2VkID0gZmFsc2U7DQoNCgkJLy8gQ2FjaGUgc2VsZWN0ZWUgY2hpbGRyZW4gYmFzZWQgb24gZmlsdGVyDQoJCXRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0KCQkJdGhhdC5lbGVtZW50UG9zID0gJCggdGhhdC5lbGVtZW50WyAwIF0gKS5vZmZzZXQoKTsNCgkJCXRoYXQuc2VsZWN0ZWVzID0gJCggdGhhdC5vcHRpb25zLmZpbHRlciwgdGhhdC5lbGVtZW50WyAwIF0gKTsNCgkJCXRoYXQuX2FkZENsYXNzKCB0aGF0LnNlbGVjdGVlcywgInVpLXNlbGVjdGVlIiApOw0KCQkJdGhhdC5zZWxlY3RlZXMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQkJdmFyICR0aGlzID0gJCggdGhpcyApLA0KCQkJCQlzZWxlY3RlZU9mZnNldCA9ICR0aGlzLm9mZnNldCgpLA0KCQkJCQlwb3MgPSB7DQoJCQkJCQlsZWZ0OiBzZWxlY3RlZU9mZnNldC5sZWZ0IC0gdGhhdC5lbGVtZW50UG9zLmxlZnQsDQoJCQkJCQl0b3A6IHNlbGVjdGVlT2Zmc2V0LnRvcCAtIHRoYXQuZWxlbWVudFBvcy50b3ANCgkJCQkJfTsNCgkJCQkkLmRhdGEoIHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iLCB7DQoJCQkJCWVsZW1lbnQ6IHRoaXMsDQoJCQkJCSRlbGVtZW50OiAkdGhpcywNCgkJCQkJbGVmdDogcG9zLmxlZnQsDQoJCQkJCXRvcDogcG9zLnRvcCwNCgkJCQkJcmlnaHQ6IHBvcy5sZWZ0ICsgJHRoaXMub3V0ZXJXaWR0aCgpLA0KCQkJCQlib3R0b206IHBvcy50b3AgKyAkdGhpcy5vdXRlckhlaWdodCgpLA0KCQkJCQlzdGFydHNlbGVjdGVkOiBmYWxzZSwNCgkJCQkJc2VsZWN0ZWQ6ICR0aGlzLmhhc0NsYXNzKCAidWktc2VsZWN0ZWQiICksDQoJCQkJCXNlbGVjdGluZzogJHRoaXMuaGFzQ2xhc3MoICJ1aS1zZWxlY3RpbmciICksDQoJCQkJCXVuc2VsZWN0aW5nOiAkdGhpcy5oYXNDbGFzcyggInVpLXVuc2VsZWN0aW5nIiApDQoJCQkJfSApOw0KCQkJfSApOw0KCQl9Ow0KCQl0aGlzLnJlZnJlc2goKTsNCg0KCQl0aGlzLl9tb3VzZUluaXQoKTsNCg0KCQl0aGlzLmhlbHBlciA9ICQoICI8ZGl2PiIgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMuaGVscGVyLCAidWktc2VsZWN0YWJsZS1oZWxwZXIiICk7DQoJfSwNCg0KCV9kZXN0cm95OiBmdW5jdGlvbigpIHsNCgkJdGhpcy5zZWxlY3RlZXMucmVtb3ZlRGF0YSggInNlbGVjdGFibGUtaXRlbSIgKTsNCgkJdGhpcy5fbW91c2VEZXN0cm95KCk7DQoJfSwNCg0KCV9tb3VzZVN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXZhciB0aGF0ID0gdGhpcywNCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7DQoNCgkJdGhpcy5vcG9zID0gWyBldmVudC5wYWdlWCwgZXZlbnQucGFnZVkgXTsNCgkJdGhpcy5lbGVtZW50UG9zID0gJCggdGhpcy5lbGVtZW50WyAwIF0gKS5vZmZzZXQoKTsNCg0KCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCXRoaXMuc2VsZWN0ZWVzID0gJCggb3B0aW9ucy5maWx0ZXIsIHRoaXMuZWxlbWVudFsgMCBdICk7DQoNCgkJdGhpcy5fdHJpZ2dlciggInN0YXJ0IiwgZXZlbnQgKTsNCg0KCQkkKCBvcHRpb25zLmFwcGVuZFRvICkuYXBwZW5kKCB0aGlzLmhlbHBlciApOw0KDQoJCS8vIHBvc2l0aW9uIGhlbHBlciAobGFzc28pDQoJCXRoaXMuaGVscGVyLmNzcyggew0KCQkJImxlZnQiOiBldmVudC5wYWdlWCwNCgkJCSJ0b3AiOiBldmVudC5wYWdlWSwNCgkJCSJ3aWR0aCI6IDAsDQoJCQkiaGVpZ2h0IjogMA0KCQl9ICk7DQoNCgkJaWYgKCBvcHRpb25zLmF1dG9SZWZyZXNoICkgew0KCQkJdGhpcy5yZWZyZXNoKCk7DQoJCX0NCg0KCQl0aGlzLnNlbGVjdGVlcy5maWx0ZXIoICIudWktc2VsZWN0ZWQiICkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEoIHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iICk7DQoJCQlzZWxlY3RlZS5zdGFydHNlbGVjdGVkID0gdHJ1ZTsNCgkJCWlmICggIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgKSB7DQoJCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoIHNlbGVjdGVlLiRlbGVtZW50LCAidWktc2VsZWN0ZWQiICk7DQoJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSBmYWxzZTsNCgkJCQl0aGF0Ll9hZGRDbGFzcyggc2VsZWN0ZWUuJGVsZW1lbnQsICJ1aS11bnNlbGVjdGluZyIgKTsNCgkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7DQoNCgkJCQkvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrDQoJCQkJdGhhdC5fdHJpZ2dlciggInVuc2VsZWN0aW5nIiwgZXZlbnQsIHsNCgkJCQkJdW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQNCgkJCQl9ICk7DQoJCQl9DQoJCX0gKTsNCg0KCQkkKCBldmVudC50YXJnZXQgKS5wYXJlbnRzKCkuYWRkQmFjaygpLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGRvU2VsZWN0LA0KCQkJCXNlbGVjdGVlID0gJC5kYXRhKCB0aGlzLCAic2VsZWN0YWJsZS1pdGVtIiApOw0KCQkJaWYgKCBzZWxlY3RlZSApIHsNCgkJCQlkb1NlbGVjdCA9ICggIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgKSB8fA0KCQkJCQkhc2VsZWN0ZWUuJGVsZW1lbnQuaGFzQ2xhc3MoICJ1aS1zZWxlY3RlZCIgKTsNCgkJCQl0aGF0Ll9yZW1vdmVDbGFzcyggc2VsZWN0ZWUuJGVsZW1lbnQsIGRvU2VsZWN0ID8gInVpLXVuc2VsZWN0aW5nIiA6ICJ1aS1zZWxlY3RlZCIgKQ0KCQkJCQkuX2FkZENsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgZG9TZWxlY3QgPyAidWktc2VsZWN0aW5nIiA6ICJ1aS11bnNlbGVjdGluZyIgKTsNCgkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9ICFkb1NlbGVjdDsNCgkJCQlzZWxlY3RlZS5zZWxlY3RpbmcgPSBkb1NlbGVjdDsNCgkJCQlzZWxlY3RlZS5zZWxlY3RlZCA9IGRvU2VsZWN0Ow0KDQoJCQkJLy8gc2VsZWN0YWJsZSAoVU4pU0VMRUNUSU5HIGNhbGxiYWNrDQoJCQkJaWYgKCBkb1NlbGVjdCApIHsNCgkJCQkJdGhhdC5fdHJpZ2dlciggInNlbGVjdGluZyIsIGV2ZW50LCB7DQoJCQkJCQlzZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQNCgkJCQkJfSApOw0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoYXQuX3RyaWdnZXIoICJ1bnNlbGVjdGluZyIsIGV2ZW50LCB7DQoJCQkJCQl1bnNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudA0KCQkJCQl9ICk7DQoJCQkJfQ0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJfSApOw0KDQoJfSwNCg0KCV9tb3VzZURyYWc6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQl0aGlzLmRyYWdnZWQgPSB0cnVlOw0KDQoJCWlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIHRtcCwNCgkJCXRoYXQgPSB0aGlzLA0KCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9ucywNCgkJCXgxID0gdGhpcy5vcG9zWyAwIF0sDQoJCQl5MSA9IHRoaXMub3Bvc1sgMSBdLA0KCQkJeDIgPSBldmVudC5wYWdlWCwNCgkJCXkyID0gZXZlbnQucGFnZVk7DQoNCgkJaWYgKCB4MSA+IHgyICkgeyB0bXAgPSB4MjsgeDIgPSB4MTsgeDEgPSB0bXA7IH0NCgkJaWYgKCB5MSA+IHkyICkgeyB0bXAgPSB5MjsgeTIgPSB5MTsgeTEgPSB0bXA7IH0NCgkJdGhpcy5oZWxwZXIuY3NzKCB7IGxlZnQ6IHgxLCB0b3A6IHkxLCB3aWR0aDogeDIgLSB4MSwgaGVpZ2h0OiB5MiAtIHkxIH0gKTsNCg0KCQl0aGlzLnNlbGVjdGVlcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCXZhciBzZWxlY3RlZSA9ICQuZGF0YSggdGhpcywgInNlbGVjdGFibGUtaXRlbSIgKSwNCgkJCQloaXQgPSBmYWxzZSwNCgkJCQlvZmZzZXQgPSB7fTsNCg0KCQkJLy9wcmV2ZW50IGhlbHBlciBmcm9tIGJlaW5nIHNlbGVjdGVkIGlmIGFwcGVuZFRvOiBzZWxlY3RhYmxlDQoJCQlpZiAoICFzZWxlY3RlZSB8fCBzZWxlY3RlZS5lbGVtZW50ID09PSB0aGF0LmVsZW1lbnRbIDAgXSApIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCW9mZnNldC5sZWZ0ICAgPSBzZWxlY3RlZS5sZWZ0ICAgKyB0aGF0LmVsZW1lbnRQb3MubGVmdDsNCgkJCW9mZnNldC5yaWdodCAgPSBzZWxlY3RlZS5yaWdodCAgKyB0aGF0LmVsZW1lbnRQb3MubGVmdDsNCgkJCW9mZnNldC50b3AgICAgPSBzZWxlY3RlZS50b3AgICAgKyB0aGF0LmVsZW1lbnRQb3MudG9wOw0KCQkJb2Zmc2V0LmJvdHRvbSA9IHNlbGVjdGVlLmJvdHRvbSArIHRoYXQuZWxlbWVudFBvcy50b3A7DQoNCgkJCWlmICggb3B0aW9ucy50b2xlcmFuY2UgPT09ICJ0b3VjaCIgKSB7DQoJCQkJaGl0ID0gKCAhKCBvZmZzZXQubGVmdCA+IHgyIHx8IG9mZnNldC5yaWdodCA8IHgxIHx8IG9mZnNldC50b3AgPiB5MiB8fA0KICAgICAgICAgICAgICAgICAgICBvZmZzZXQuYm90dG9tIDwgeTEgKSApOw0KCQkJfSBlbHNlIGlmICggb3B0aW9ucy50b2xlcmFuY2UgPT09ICJmaXQiICkgew0KCQkJCWhpdCA9ICggb2Zmc2V0LmxlZnQgPiB4MSAmJiBvZmZzZXQucmlnaHQgPCB4MiAmJiBvZmZzZXQudG9wID4geTEgJiYNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LmJvdHRvbSA8IHkyICk7DQoJCQl9DQoNCgkJCWlmICggaGl0ICkgew0KDQoJCQkJLy8gU0VMRUNUDQoJCQkJaWYgKCBzZWxlY3RlZS5zZWxlY3RlZCApIHsNCgkJCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoIHNlbGVjdGVlLiRlbGVtZW50LCAidWktc2VsZWN0ZWQiICk7DQoJCQkJCXNlbGVjdGVlLnNlbGVjdGVkID0gZmFsc2U7DQoJCQkJfQ0KCQkJCWlmICggc2VsZWN0ZWUudW5zZWxlY3RpbmcgKSB7DQoJCQkJCXRoYXQuX3JlbW92ZUNsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXVuc2VsZWN0aW5nIiApOw0KCQkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IGZhbHNlOw0KCQkJCX0NCgkJCQlpZiAoICFzZWxlY3RlZS5zZWxlY3RpbmcgKSB7DQoJCQkJCXRoYXQuX2FkZENsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXNlbGVjdGluZyIgKTsNCgkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gdHJ1ZTsNCg0KCQkJCQkvLyBzZWxlY3RhYmxlIFNFTEVDVElORyBjYWxsYmFjaw0KCQkJCQl0aGF0Ll90cmlnZ2VyKCAic2VsZWN0aW5nIiwgZXZlbnQsIHsNCgkJCQkJCXNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudA0KCQkJCQl9ICk7DQoJCQkJfQ0KCQkJfSBlbHNlIHsNCg0KCQkJCS8vIFVOU0VMRUNUDQoJCQkJaWYgKCBzZWxlY3RlZS5zZWxlY3RpbmcgKSB7DQoJCQkJCWlmICggKCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkgKSAmJiBzZWxlY3RlZS5zdGFydHNlbGVjdGVkICkgew0KCQkJCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoIHNlbGVjdGVlLiRlbGVtZW50LCAidWktc2VsZWN0aW5nIiApOw0KCQkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gZmFsc2U7DQoJCQkJCQl0aGF0Ll9hZGRDbGFzcyggc2VsZWN0ZWUuJGVsZW1lbnQsICJ1aS1zZWxlY3RlZCIgKTsNCgkJCQkJCXNlbGVjdGVlLnNlbGVjdGVkID0gdHJ1ZTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCXRoYXQuX3JlbW92ZUNsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXNlbGVjdGluZyIgKTsNCgkJCQkJCXNlbGVjdGVlLnNlbGVjdGluZyA9IGZhbHNlOw0KCQkJCQkJaWYgKCBzZWxlY3RlZS5zdGFydHNlbGVjdGVkICkgew0KCQkJCQkJCXRoYXQuX2FkZENsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXVuc2VsZWN0aW5nIiApOw0KCQkJCQkJCXNlbGVjdGVlLnVuc2VsZWN0aW5nID0gdHJ1ZTsNCgkJCQkJCX0NCg0KCQkJCQkJLy8gc2VsZWN0YWJsZSBVTlNFTEVDVElORyBjYWxsYmFjaw0KCQkJCQkJdGhhdC5fdHJpZ2dlciggInVuc2VsZWN0aW5nIiwgZXZlbnQsIHsNCgkJCQkJCQl1bnNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudA0KCQkJCQkJfSApOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCWlmICggc2VsZWN0ZWUuc2VsZWN0ZWQgKSB7DQoJCQkJCWlmICggIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIXNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQgKSB7DQoJCQkJCQl0aGF0Ll9yZW1vdmVDbGFzcyggc2VsZWN0ZWUuJGVsZW1lbnQsICJ1aS1zZWxlY3RlZCIgKTsNCgkJCQkJCXNlbGVjdGVlLnNlbGVjdGVkID0gZmFsc2U7DQoNCgkJCQkJCXRoYXQuX2FkZENsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXVuc2VsZWN0aW5nIiApOw0KCQkJCQkJc2VsZWN0ZWUudW5zZWxlY3RpbmcgPSB0cnVlOw0KDQoJCQkJCQkvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrDQoJCQkJCQl0aGF0Ll90cmlnZ2VyKCAidW5zZWxlY3RpbmciLCBldmVudCwgew0KCQkJCQkJCXVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50DQoJCQkJCQl9ICk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0gKTsNCg0KCQlyZXR1cm4gZmFsc2U7DQoJfSwNCg0KCV9tb3VzZVN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJdmFyIHRoYXQgPSB0aGlzOw0KDQoJCXRoaXMuZHJhZ2dlZCA9IGZhbHNlOw0KDQoJCSQoICIudWktdW5zZWxlY3RpbmciLCB0aGlzLmVsZW1lbnRbIDAgXSApLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJdmFyIHNlbGVjdGVlID0gJC5kYXRhKCB0aGlzLCAic2VsZWN0YWJsZS1pdGVtIiApOw0KCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoIHNlbGVjdGVlLiRlbGVtZW50LCAidWktdW5zZWxlY3RpbmciICk7DQoJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IGZhbHNlOw0KCQkJc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCA9IGZhbHNlOw0KCQkJdGhhdC5fdHJpZ2dlciggInVuc2VsZWN0ZWQiLCBldmVudCwgew0KCQkJCXVuc2VsZWN0ZWQ6IHNlbGVjdGVlLmVsZW1lbnQNCgkJCX0gKTsNCgkJfSApOw0KCQkkKCAiLnVpLXNlbGVjdGluZyIsIHRoaXMuZWxlbWVudFsgMCBdICkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEoIHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iICk7DQoJCQl0aGF0Ll9yZW1vdmVDbGFzcyggc2VsZWN0ZWUuJGVsZW1lbnQsICJ1aS1zZWxlY3RpbmciICkNCgkJCQkuX2FkZENsYXNzKCBzZWxlY3RlZS4kZWxlbWVudCwgInVpLXNlbGVjdGVkIiApOw0KCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gZmFsc2U7DQoJCQlzZWxlY3RlZS5zZWxlY3RlZCA9IHRydWU7DQoJCQlzZWxlY3RlZS5zdGFydHNlbGVjdGVkID0gdHJ1ZTsNCgkJCXRoYXQuX3RyaWdnZXIoICJzZWxlY3RlZCIsIGV2ZW50LCB7DQoJCQkJc2VsZWN0ZWQ6IHNlbGVjdGVlLmVsZW1lbnQNCgkJCX0gKTsNCgkJfSApOw0KCQl0aGlzLl90cmlnZ2VyKCAic3RvcCIsIGV2ZW50ICk7DQoNCgkJdGhpcy5oZWxwZXIucmVtb3ZlKCk7DQoNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KfSApOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIFNvcnRhYmxlIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBTb3J0YWJsZQ0KLy8+Pmdyb3VwOiBJbnRlcmFjdGlvbnMNCi8vPj5kZXNjcmlwdGlvbjogRW5hYmxlcyBpdGVtcyBpbiBhIGxpc3QgdG8gYmUgc29ydGVkIHVzaW5nIHRoZSBtb3VzZS4NCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9zb3J0YWJsZS8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9zb3J0YWJsZS8NCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9zb3J0YWJsZS5jc3MNCg0KDQoNCnZhciB3aWRnZXRzU29ydGFibGUgPSAkLndpZGdldCggInVpLnNvcnRhYmxlIiwgJC51aS5tb3VzZSwgew0KCXZlcnNpb246ICIxLjEyLjEiLA0KCXdpZGdldEV2ZW50UHJlZml4OiAic29ydCIsDQoJcmVhZHk6IGZhbHNlLA0KCW9wdGlvbnM6IHsNCgkJYXBwZW5kVG86ICJwYXJlbnQiLA0KCQlheGlzOiBmYWxzZSwNCgkJY29ubmVjdFdpdGg6IGZhbHNlLA0KCQljb250YWlubWVudDogZmFsc2UsDQoJCWN1cnNvcjogImF1dG8iLA0KCQljdXJzb3JBdDogZmFsc2UsDQoJCWRyb3BPbkVtcHR5OiB0cnVlLA0KCQlmb3JjZVBsYWNlaG9sZGVyU2l6ZTogZmFsc2UsDQoJCWZvcmNlSGVscGVyU2l6ZTogZmFsc2UsDQoJCWdyaWQ6IGZhbHNlLA0KCQloYW5kbGU6IGZhbHNlLA0KCQloZWxwZXI6ICJvcmlnaW5hbCIsDQoJCWl0ZW1zOiAiPiAqIiwNCgkJb3BhY2l0eTogZmFsc2UsDQoJCXBsYWNlaG9sZGVyOiBmYWxzZSwNCgkJcmV2ZXJ0OiBmYWxzZSwNCgkJc2Nyb2xsOiB0cnVlLA0KCQlzY3JvbGxTZW5zaXRpdml0eTogMjAsDQoJCXNjcm9sbFNwZWVkOiAyMCwNCgkJc2NvcGU6ICJkZWZhdWx0IiwNCgkJdG9sZXJhbmNlOiAiaW50ZXJzZWN0IiwNCgkJekluZGV4OiAxMDAwLA0KDQoJCS8vIENhbGxiYWNrcw0KCQlhY3RpdmF0ZTogbnVsbCwNCgkJYmVmb3JlU3RvcDogbnVsbCwNCgkJY2hhbmdlOiBudWxsLA0KCQlkZWFjdGl2YXRlOiBudWxsLA0KCQlvdXQ6IG51bGwsDQoJCW92ZXI6IG51bGwsDQoJCXJlY2VpdmU6IG51bGwsDQoJCXJlbW92ZTogbnVsbCwNCgkJc29ydDogbnVsbCwNCgkJc3RhcnQ6IG51bGwsDQoJCXN0b3A6IG51bGwsDQoJCXVwZGF0ZTogbnVsbA0KCX0sDQoNCglfaXNPdmVyQXhpczogZnVuY3Rpb24oIHgsIHJlZmVyZW5jZSwgc2l6ZSApIHsNCgkJcmV0dXJuICggeCA+PSByZWZlcmVuY2UgKSAmJiAoIHggPCAoIHJlZmVyZW5jZSArIHNpemUgKSApOw0KCX0sDQoNCglfaXNGbG9hdGluZzogZnVuY3Rpb24oIGl0ZW0gKSB7DQoJCXJldHVybiAoIC9sZWZ0fHJpZ2h0LyApLnRlc3QoIGl0ZW0uY3NzKCAiZmxvYXQiICkgKSB8fA0KCQkJKCAvaW5saW5lfHRhYmxlLWNlbGwvICkudGVzdCggaXRlbS5jc3MoICJkaXNwbGF5IiApICk7DQoJfSwNCg0KCV9jcmVhdGU6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLmNvbnRhaW5lckNhY2hlID0ge307DQoJCXRoaXMuX2FkZENsYXNzKCAidWktc29ydGFibGUiICk7DQoNCgkJLy9HZXQgdGhlIGl0ZW1zDQoJCXRoaXMucmVmcmVzaCgpOw0KDQoJCS8vTGV0J3MgZGV0ZXJtaW5lIHRoZSBwYXJlbnQncyBvZmZzZXQNCgkJdGhpcy5vZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7DQoNCgkJLy9Jbml0aWFsaXplIG1vdXNlIGV2ZW50cyBmb3IgaW50ZXJhY3Rpb24NCgkJdGhpcy5fbW91c2VJbml0KCk7DQoNCgkJdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7DQoNCgkJLy9XZSdyZSByZWFkeSB0byBnbw0KCQl0aGlzLnJlYWR5ID0gdHJ1ZTsNCg0KCX0sDQoNCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsNCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsNCg0KCQlpZiAoIGtleSA9PT0gImhhbmRsZSIgKSB7DQoJCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsNCgkJfQ0KCX0sDQoNCglfc2V0SGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbigpIHsNCgkJdmFyIHRoYXQgPSB0aGlzOw0KCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5lbGVtZW50LmZpbmQoICIudWktc29ydGFibGUtaGFuZGxlIiApLCAidWktc29ydGFibGUtaGFuZGxlIiApOw0KCQkkLmVhY2goIHRoaXMuaXRlbXMsIGZ1bmN0aW9uKCkgew0KCQkJdGhhdC5fYWRkQ2xhc3MoDQoJCQkJdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhhbmRsZSA/DQoJCQkJCXRoaXMuaXRlbS5maW5kKCB0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGFuZGxlICkgOg0KCQkJCQl0aGlzLml0ZW0sDQoJCQkJInVpLXNvcnRhYmxlLWhhbmRsZSINCgkJCSk7DQoJCX0gKTsNCgl9LA0KDQoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsNCg0KCQlmb3IgKCB2YXIgaSA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQl0aGlzLml0ZW1zWyBpIF0uaXRlbS5yZW1vdmVEYXRhKCB0aGlzLndpZGdldE5hbWUgKyAiLWl0ZW0iICk7DQoJCX0NCg0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oIGV2ZW50LCBvdmVycmlkZUhhbmRsZSApIHsNCgkJdmFyIGN1cnJlbnRJdGVtID0gbnVsbCwNCgkJCXZhbGlkSGFuZGxlID0gZmFsc2UsDQoJCQl0aGF0ID0gdGhpczsNCg0KCQlpZiAoIHRoaXMucmV2ZXJ0aW5nICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5vcHRpb25zLnR5cGUgPT09ICJzdGF0aWMiICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJLy9XZSBoYXZlIHRvIHJlZnJlc2ggdGhlIGl0ZW1zIGRhdGEgb25jZSBmaXJzdA0KCQl0aGlzLl9yZWZyZXNoSXRlbXMoIGV2ZW50ICk7DQoNCgkJLy9GaW5kIG91dCBpZiB0aGUgY2xpY2tlZCBub2RlIChvciBvbmUgb2YgaXRzIHBhcmVudHMpIGlzIGEgYWN0dWFsIGl0ZW0gaW4gdGhpcy5pdGVtcw0KCQkkKCBldmVudC50YXJnZXQgKS5wYXJlbnRzKCkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQlpZiAoICQuZGF0YSggdGhpcywgdGhhdC53aWRnZXROYW1lICsgIi1pdGVtIiApID09PSB0aGF0ICkgew0KCQkJCWN1cnJlbnRJdGVtID0gJCggdGhpcyApOw0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJfSApOw0KCQlpZiAoICQuZGF0YSggZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAiLWl0ZW0iICkgPT09IHRoYXQgKSB7DQoJCQljdXJyZW50SXRlbSA9ICQoIGV2ZW50LnRhcmdldCApOw0KCQl9DQoNCgkJaWYgKCAhY3VycmVudEl0ZW0gKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgkJaWYgKCB0aGlzLm9wdGlvbnMuaGFuZGxlICYmICFvdmVycmlkZUhhbmRsZSApIHsNCgkJCSQoIHRoaXMub3B0aW9ucy5oYW5kbGUsIGN1cnJlbnRJdGVtICkuZmluZCggIioiICkuYWRkQmFjaygpLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJCWlmICggdGhpcyA9PT0gZXZlbnQudGFyZ2V0ICkgew0KCQkJCQl2YWxpZEhhbmRsZSA9IHRydWU7DQoJCQkJfQ0KCQkJfSApOw0KCQkJaWYgKCAhdmFsaWRIYW5kbGUgKSB7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQl9DQoNCgkJdGhpcy5jdXJyZW50SXRlbSA9IGN1cnJlbnRJdGVtOw0KCQl0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpOw0KCQlyZXR1cm4gdHJ1ZTsNCg0KCX0sDQoNCglfbW91c2VTdGFydDogZnVuY3Rpb24oIGV2ZW50LCBvdmVycmlkZUhhbmRsZSwgbm9BY3RpdmF0aW9uICkgew0KDQoJCXZhciBpLCBib2R5LA0KCQkJbyA9IHRoaXMub3B0aW9uczsNCg0KCQl0aGlzLmN1cnJlbnRDb250YWluZXIgPSB0aGlzOw0KDQoJCS8vV2Ugb25seSBuZWVkIHRvIGNhbGwgcmVmcmVzaFBvc2l0aW9ucywgYmVjYXVzZSB0aGUgcmVmcmVzaEl0ZW1zIGNhbGwgaGFzIGJlZW4gbW92ZWQgdG8NCgkJLy8gbW91c2VDYXB0dXJlDQoJCXRoaXMucmVmcmVzaFBvc2l0aW9ucygpOw0KDQoJCS8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyDQoJCXRoaXMuaGVscGVyID0gdGhpcy5fY3JlYXRlSGVscGVyKCBldmVudCApOw0KDQoJCS8vQ2FjaGUgdGhlIGhlbHBlciBzaXplDQoJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsNCg0KCQkvKg0KCQkgKiAtIFBvc2l0aW9uIGdlbmVyYXRpb24gLQ0KCQkgKiBUaGlzIGJsb2NrIGdlbmVyYXRlcyBldmVyeXRoaW5nIHBvc2l0aW9uIHJlbGF0ZWQgLSBpdCdzIHRoZSBjb3JlIG9mIGRyYWdnYWJsZXMuDQoJCSAqLw0KDQoJCS8vQ2FjaGUgdGhlIG1hcmdpbnMgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnQNCgkJdGhpcy5fY2FjaGVNYXJnaW5zKCk7DQoNCgkJLy9HZXQgdGhlIG5leHQgc2Nyb2xsaW5nIHBhcmVudA0KCQl0aGlzLnNjcm9sbFBhcmVudCA9IHRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpOw0KDQoJCS8vVGhlIGVsZW1lbnQncyBhYnNvbHV0ZSBwb3NpdGlvbiBvbiB0aGUgcGFnZSBtaW51cyBtYXJnaW5zDQoJCXRoaXMub2Zmc2V0ID0gdGhpcy5jdXJyZW50SXRlbS5vZmZzZXQoKTsNCgkJdGhpcy5vZmZzZXQgPSB7DQoJCQl0b3A6IHRoaXMub2Zmc2V0LnRvcCAtIHRoaXMubWFyZ2lucy50b3AsDQoJCQlsZWZ0OiB0aGlzLm9mZnNldC5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQNCgkJfTsNCg0KCQkkLmV4dGVuZCggdGhpcy5vZmZzZXQsIHsNCgkJCWNsaWNrOiB7IC8vV2hlcmUgdGhlIGNsaWNrIGhhcHBlbmVkLCByZWxhdGl2ZSB0byB0aGUgZWxlbWVudA0KCQkJCWxlZnQ6IGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQubGVmdCwNCgkJCQl0b3A6IGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQudG9wDQoJCQl9LA0KCQkJcGFyZW50OiB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSwNCg0KCQkJLy8gVGhpcyBpcyBhIHJlbGF0aXZlIHRvIGFic29sdXRlIHBvc2l0aW9uIG1pbnVzIHRoZSBhY3R1YWwgcG9zaXRpb24gY2FsY3VsYXRpb24gLQ0KCQkJLy8gb25seSB1c2VkIGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIGhlbHBlcg0KCQkJcmVsYXRpdmU6IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCkNCgkJfSApOw0KDQoJCS8vIE9ubHkgYWZ0ZXIgd2UgZ290IHRoZSBvZmZzZXQsIHdlIGNhbiBjaGFuZ2UgdGhlIGhlbHBlcidzIHBvc2l0aW9uIHRvIGFic29sdXRlDQoJCS8vIFRPRE86IFN0aWxsIG5lZWQgdG8gZmlndXJlIG91dCBhIHdheSB0byBtYWtlIHJlbGF0aXZlIHNvcnRpbmcgcG9zc2libGUNCgkJdGhpcy5oZWxwZXIuY3NzKCAicG9zaXRpb24iLCAiYWJzb2x1dGUiICk7DQoJCXRoaXMuY3NzUG9zaXRpb24gPSB0aGlzLmhlbHBlci5jc3MoICJwb3NpdGlvbiIgKTsNCg0KCQkvL0dlbmVyYXRlIHRoZSBvcmlnaW5hbCBwb3NpdGlvbg0KCQl0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKCBldmVudCApOw0KCQl0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDsNCgkJdGhpcy5vcmlnaW5hbFBhZ2VZID0gZXZlbnQucGFnZVk7DQoNCgkJLy9BZGp1c3QgdGhlIG1vdXNlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgaGVscGVyIGlmICJjdXJzb3JBdCIgaXMgc3VwcGxpZWQNCgkJKCBvLmN1cnNvckF0ICYmIHRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoIG8uY3Vyc29yQXQgKSApOw0KDQoJCS8vQ2FjaGUgdGhlIGZvcm1lciBET00gcG9zaXRpb24NCgkJdGhpcy5kb21Qb3NpdGlvbiA9IHsNCgkJCXByZXY6IHRoaXMuY3VycmVudEl0ZW0ucHJldigpWyAwIF0sDQoJCQlwYXJlbnQ6IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbIDAgXQ0KCQl9Ow0KDQoJCS8vIElmIHRoZSBoZWxwZXIgaXMgbm90IHRoZSBvcmlnaW5hbCwgaGlkZSB0aGUgb3JpZ2luYWwgc28gaXQncyBub3QgcGxheWluZyBhbnkgcm9sZSBkdXJpbmcNCgkJLy8gdGhlIGRyYWcsIHdvbid0IGNhdXNlIGFueXRoaW5nIGJhZCB0aGlzIHdheQ0KCQlpZiAoIHRoaXMuaGVscGVyWyAwIF0gIT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSApIHsNCgkJCXRoaXMuY3VycmVudEl0ZW0uaGlkZSgpOw0KCQl9DQoNCgkJLy9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyDQoJCXRoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCk7DQoNCgkJLy9TZXQgYSBjb250YWlubWVudCBpZiBnaXZlbiBpbiB0aGUgb3B0aW9ucw0KCQlpZiAoIG8uY29udGFpbm1lbnQgKSB7DQoJCQl0aGlzLl9zZXRDb250YWlubWVudCgpOw0KCQl9DQoNCgkJaWYgKCBvLmN1cnNvciAmJiBvLmN1cnNvciAhPT0gImF1dG8iICkgeyAvLyBjdXJzb3Igb3B0aW9uDQoJCQlib2R5ID0gdGhpcy5kb2N1bWVudC5maW5kKCAiYm9keSIgKTsNCg0KCQkJLy8gU3VwcG9ydDogSUUNCgkJCXRoaXMuc3RvcmVkQ3Vyc29yID0gYm9keS5jc3MoICJjdXJzb3IiICk7DQoJCQlib2R5LmNzcyggImN1cnNvciIsIG8uY3Vyc29yICk7DQoNCgkJCXRoaXMuc3RvcmVkU3R5bGVzaGVldCA9DQoJCQkJJCggIjxzdHlsZT4qeyBjdXJzb3I6ICIgKyBvLmN1cnNvciArICIgIWltcG9ydGFudDsgfTwvc3R5bGU+IiApLmFwcGVuZFRvKCBib2R5ICk7DQoJCX0NCg0KCQlpZiAoIG8ub3BhY2l0eSApIHsgLy8gb3BhY2l0eSBvcHRpb24NCgkJCWlmICggdGhpcy5oZWxwZXIuY3NzKCAib3BhY2l0eSIgKSApIHsNCgkJCQl0aGlzLl9zdG9yZWRPcGFjaXR5ID0gdGhpcy5oZWxwZXIuY3NzKCAib3BhY2l0eSIgKTsNCgkJCX0NCgkJCXRoaXMuaGVscGVyLmNzcyggIm9wYWNpdHkiLCBvLm9wYWNpdHkgKTsNCgkJfQ0KDQoJCWlmICggby56SW5kZXggKSB7IC8vIHpJbmRleCBvcHRpb24NCgkJCWlmICggdGhpcy5oZWxwZXIuY3NzKCAiekluZGV4IiApICkgew0KCQkJCXRoaXMuX3N0b3JlZFpJbmRleCA9IHRoaXMuaGVscGVyLmNzcyggInpJbmRleCIgKTsNCgkJCX0NCgkJCXRoaXMuaGVscGVyLmNzcyggInpJbmRleCIsIG8uekluZGV4ICk7DQoJCX0NCg0KCQkvL1ByZXBhcmUgc2Nyb2xsaW5nDQoJCWlmICggdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSAhPT0gdGhpcy5kb2N1bWVudFsgMCBdICYmDQoJCQkJdGhpcy5zY3JvbGxQYXJlbnRbIDAgXS50YWdOYW1lICE9PSAiSFRNTCIgKSB7DQoJCQl0aGlzLm92ZXJmbG93T2Zmc2V0ID0gdGhpcy5zY3JvbGxQYXJlbnQub2Zmc2V0KCk7DQoJCX0NCg0KCQkvL0NhbGwgY2FsbGJhY2tzDQoJCXRoaXMuX3RyaWdnZXIoICJzdGFydCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApOw0KDQoJCS8vUmVjYWNoZSB0aGUgaGVscGVyIHNpemUNCgkJaWYgKCAhdGhpcy5fcHJlc2VydmVIZWxwZXJQcm9wb3J0aW9ucyApIHsNCgkJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsNCgkJfQ0KDQoJCS8vUG9zdCAiYWN0aXZhdGUiIGV2ZW50cyB0byBwb3NzaWJsZSBjb250YWluZXJzDQoJCWlmICggIW5vQWN0aXZhdGlvbiApIHsNCgkJCWZvciAoIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQkJdGhpcy5jb250YWluZXJzWyBpIF0uX3RyaWdnZXIoICJhY3RpdmF0ZSIsIGV2ZW50LCB0aGlzLl91aUhhc2goIHRoaXMgKSApOw0KCQkJfQ0KCQl9DQoNCgkJLy9QcmVwYXJlIHBvc3NpYmxlIGRyb3BwYWJsZXMNCgkJaWYgKCAkLnVpLmRkbWFuYWdlciApIHsNCgkJCSQudWkuZGRtYW5hZ2VyLmN1cnJlbnQgPSB0aGlzOw0KCQl9DQoNCgkJaWYgKCAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyICkgew0KCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoIHRoaXMsIGV2ZW50ICk7DQoJCX0NCg0KCQl0aGlzLmRyYWdnaW5nID0gdHJ1ZTsNCg0KCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5oZWxwZXIsICJ1aS1zb3J0YWJsZS1oZWxwZXIiICk7DQoNCgkJLy8gRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZWJlZm9yZSBnZXR0aW5nIGl0cw0KCQkvLyBjb3JyZWN0IHBvc2l0aW9uDQoJCXRoaXMuX21vdXNlRHJhZyggZXZlbnQgKTsNCgkJcmV0dXJuIHRydWU7DQoNCgl9LA0KDQoJX21vdXNlRHJhZzogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgaSwgaXRlbSwgaXRlbUVsZW1lbnQsIGludGVyc2VjdGlvbiwNCgkJCW8gPSB0aGlzLm9wdGlvbnMsDQoJCQlzY3JvbGxlZCA9IGZhbHNlOw0KDQoJCS8vQ29tcHV0ZSB0aGUgaGVscGVycyBwb3NpdGlvbg0KCQl0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbiggZXZlbnQgKTsNCgkJdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCAiYWJzb2x1dGUiICk7DQoNCgkJaWYgKCAhdGhpcy5sYXN0UG9zaXRpb25BYnMgKSB7DQoJCQl0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7DQoJCX0NCg0KCQkvL0RvIHNjcm9sbGluZw0KCQlpZiAoIHRoaXMub3B0aW9ucy5zY3JvbGwgKSB7DQoJCQlpZiAoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gIT09IHRoaXMuZG9jdW1lbnRbIDAgXSAmJg0KCQkJCQl0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnRhZ05hbWUgIT09ICJIVE1MIiApIHsNCg0KCQkJCWlmICggKCB0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCArIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0ub2Zmc2V0SGVpZ2h0ICkgLQ0KCQkJCQkJZXZlbnQucGFnZVkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkgew0KCQkJCQl0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnNjcm9sbFRvcCA9DQoJCQkJCQlzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsVG9wICsgby5zY3JvbGxTcGVlZDsNCgkJCQl9IGVsc2UgaWYgKCBldmVudC5wYWdlWSAtIHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wIDwgby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJdGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5zY3JvbGxUb3AgPQ0KCQkJCQkJc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQ7DQoJCQkJfQ0KDQoJCQkJaWYgKCAoIHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCArIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0ub2Zmc2V0V2lkdGggKSAtDQoJCQkJCQlldmVudC5wYWdlWCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7DQoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID0NCgkJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsTGVmdCArIG8uc2Nyb2xsU3BlZWQ7DQoJCQkJfSBlbHNlIGlmICggZXZlbnQucGFnZVggLSB0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkgew0KCQkJCQl0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9DQoJCQkJCQl0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnNjcm9sbExlZnQgLSBvLnNjcm9sbFNwZWVkOw0KCQkJCX0NCg0KCQkJfSBlbHNlIHsNCg0KCQkJCWlmICggZXZlbnQucGFnZVkgLSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCggdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQgKTsNCgkJCQl9IGVsc2UgaWYgKCB0aGlzLndpbmRvdy5oZWlnaHQoKSAtICggZXZlbnQucGFnZVkgLSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpICkgPA0KCQkJCQkJby5zY3JvbGxTZW5zaXRpdml0eSApIHsNCgkJCQkJc2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCggdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSArIG8uc2Nyb2xsU3BlZWQgKTsNCgkJCQl9DQoNCgkJCQlpZiAoIGV2ZW50LnBhZ2VYIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkgew0KCQkJCQlzY3JvbGxlZCA9IHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgNCgkJCQkJCXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpIC0gby5zY3JvbGxTcGVlZA0KCQkJCQkpOw0KCQkJCX0gZWxzZSBpZiAoIHRoaXMud2luZG93LndpZHRoKCkgLSAoIGV2ZW50LnBhZ2VYIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCkgKSA8DQoJCQkJCQlvLnNjcm9sbFNlbnNpdGl2aXR5ICkgew0KCQkJCQlzY3JvbGxlZCA9IHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgNCgkJCQkJCXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZA0KCQkJCQkpOw0KCQkJCX0NCg0KCQkJfQ0KDQoJCQlpZiAoIHNjcm9sbGVkICE9PSBmYWxzZSAmJiAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyICkgew0KCQkJCSQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKCB0aGlzLCBldmVudCApOw0KCQkJfQ0KCQl9DQoNCgkJLy9SZWdlbmVyYXRlIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB1c2VkIGZvciBwb3NpdGlvbiBjaGVja3MNCgkJdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCAiYWJzb2x1dGUiICk7DQoNCgkJLy9TZXQgdGhlIGhlbHBlciBwb3NpdGlvbg0KCQlpZiAoICF0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLm9wdGlvbnMuYXhpcyAhPT0gInkiICkgew0KCQkJdGhpcy5oZWxwZXJbIDAgXS5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NpdGlvbi5sZWZ0ICsgInB4IjsNCgkJfQ0KCQlpZiAoICF0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLm9wdGlvbnMuYXhpcyAhPT0gIngiICkgew0KCQkJdGhpcy5oZWxwZXJbIDAgXS5zdHlsZS50b3AgPSB0aGlzLnBvc2l0aW9uLnRvcCArICJweCI7DQoJCX0NCg0KCQkvL1JlYXJyYW5nZQ0KCQlmb3IgKCBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHsNCg0KCQkJLy9DYWNoZSB2YXJpYWJsZXMgYW5kIGludGVyc2VjdGlvbiwgY29udGludWUgaWYgbm8gaW50ZXJzZWN0aW9uDQoJCQlpdGVtID0gdGhpcy5pdGVtc1sgaSBdOw0KCQkJaXRlbUVsZW1lbnQgPSBpdGVtLml0ZW1bIDAgXTsNCgkJCWludGVyc2VjdGlvbiA9IHRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlciggaXRlbSApOw0KCQkJaWYgKCAhaW50ZXJzZWN0aW9uICkgew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KDQoJCQkvLyBPbmx5IHB1dCB0aGUgcGxhY2Vob2xkZXIgaW5zaWRlIHRoZSBjdXJyZW50IENvbnRhaW5lciwgc2tpcCBhbGwNCgkJCS8vIGl0ZW1zIGZyb20gb3RoZXIgY29udGFpbmVycy4gVGhpcyB3b3JrcyBiZWNhdXNlIHdoZW4gbW92aW5nDQoJCQkvLyBhbiBpdGVtIGZyb20gb25lIGNvbnRhaW5lciB0byBhbm90aGVyIHRoZQ0KCQkJLy8gY3VycmVudENvbnRhaW5lciBpcyBzd2l0Y2hlZCBiZWZvcmUgdGhlIHBsYWNlaG9sZGVyIGlzIG1vdmVkLg0KCQkJLy8NCgkJCS8vIFdpdGhvdXQgdGhpcywgbW92aW5nIGl0ZW1zIGluICJzdWItc29ydGFibGVzIiBjYW4gY2F1c2UNCgkJCS8vIHRoZSBwbGFjZWhvbGRlciB0byBqaXR0ZXIgYmV0d2VlbiB0aGUgb3V0ZXIgYW5kIGlubmVyIGNvbnRhaW5lci4NCgkJCWlmICggaXRlbS5pbnN0YW5jZSAhPT0gdGhpcy5jdXJyZW50Q29udGFpbmVyICkgew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KDQoJCQkvLyBDYW5ub3QgaW50ZXJzZWN0IHdpdGggaXRzZWxmDQoJCQkvLyBubyB1c2VsZXNzIGFjdGlvbnMgdGhhdCBoYXZlIGJlZW4gZG9uZSBiZWZvcmUNCgkJCS8vIG5vIGFjdGlvbiBpZiB0aGUgaXRlbSBtb3ZlZCBpcyB0aGUgcGFyZW50IG9mIHRoZSBpdGVtIGNoZWNrZWQNCgkJCWlmICggaXRlbUVsZW1lbnQgIT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSAmJg0KCQkJCXRoaXMucGxhY2Vob2xkZXJbIGludGVyc2VjdGlvbiA9PT0gMSA/ICJuZXh0IiA6ICJwcmV2IiBdKClbIDAgXSAhPT0gaXRlbUVsZW1lbnQgJiYNCgkJCQkhJC5jb250YWlucyggdGhpcy5wbGFjZWhvbGRlclsgMCBdLCBpdGVtRWxlbWVudCApICYmDQoJCQkJKCB0aGlzLm9wdGlvbnMudHlwZSA9PT0gInNlbWktZHluYW1pYyIgPw0KCQkJCQkhJC5jb250YWlucyggdGhpcy5lbGVtZW50WyAwIF0sIGl0ZW1FbGVtZW50ICkgOg0KCQkJCQl0cnVlDQoJCQkJKQ0KCQkJKSB7DQoNCgkJCQl0aGlzLmRpcmVjdGlvbiA9IGludGVyc2VjdGlvbiA9PT0gMSA/ICJkb3duIiA6ICJ1cCI7DQoNCgkJCQlpZiAoIHRoaXMub3B0aW9ucy50b2xlcmFuY2UgPT09ICJwb2ludGVyIiB8fCB0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKCBpdGVtICkgKSB7DQoJCQkJCXRoaXMuX3JlYXJyYW5nZSggZXZlbnQsIGl0ZW0gKTsNCgkJCQl9IGVsc2Ugew0KCQkJCQlicmVhazsNCgkJCQl9DQoNCgkJCQl0aGlzLl90cmlnZ2VyKCAiY2hhbmdlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCX0NCg0KCQkvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnMNCgkJdGhpcy5fY29udGFjdENvbnRhaW5lcnMoIGV2ZW50ICk7DQoNCgkJLy9JbnRlcmNvbm5lY3Qgd2l0aCBkcm9wcGFibGVzDQoJCWlmICggJC51aS5kZG1hbmFnZXIgKSB7DQoJCQkkLnVpLmRkbWFuYWdlci5kcmFnKCB0aGlzLCBldmVudCApOw0KCQl9DQoNCgkJLy9DYWxsIGNhbGxiYWNrcw0KCQl0aGlzLl90cmlnZ2VyKCAic29ydCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApOw0KDQoJCXRoaXMubGFzdFBvc2l0aW9uQWJzID0gdGhpcy5wb3NpdGlvbkFiczsNCgkJcmV0dXJuIGZhbHNlOw0KDQoJfSwNCg0KCV9tb3VzZVN0b3A6IGZ1bmN0aW9uKCBldmVudCwgbm9Qcm9wYWdhdGlvbiApIHsNCg0KCQlpZiAoICFldmVudCApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCS8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcA0KCQlpZiAoICQudWkuZGRtYW5hZ2VyICYmICF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciApIHsNCgkJCSQudWkuZGRtYW5hZ2VyLmRyb3AoIHRoaXMsIGV2ZW50ICk7DQoJCX0NCg0KCQlpZiAoIHRoaXMub3B0aW9ucy5yZXZlcnQgKSB7DQoJCQl2YXIgdGhhdCA9IHRoaXMsDQoJCQkJY3VyID0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKSwNCgkJCQlheGlzID0gdGhpcy5vcHRpb25zLmF4aXMsDQoJCQkJYW5pbWF0aW9uID0ge307DQoNCgkJCWlmICggIWF4aXMgfHwgYXhpcyA9PT0gIngiICkgew0KCQkJCWFuaW1hdGlvbi5sZWZ0ID0gY3VyLmxlZnQgLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAtIHRoaXMubWFyZ2lucy5sZWZ0ICsNCgkJCQkJKCB0aGlzLm9mZnNldFBhcmVudFsgMCBdID09PSB0aGlzLmRvY3VtZW50WyAwIF0uYm9keSA/DQoJCQkJCQkwIDoNCgkJCQkJCXRoaXMub2Zmc2V0UGFyZW50WyAwIF0uc2Nyb2xsTGVmdA0KCQkJCQkpOw0KCQkJfQ0KCQkJaWYgKCAhYXhpcyB8fCBheGlzID09PSAieSIgKSB7DQoJCQkJYW5pbWF0aW9uLnRvcCA9IGN1ci50b3AgLSB0aGlzLm9mZnNldC5wYXJlbnQudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCArDQoJCQkJCSggdGhpcy5vZmZzZXRQYXJlbnRbIDAgXSA9PT0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkgPw0KCQkJCQkJMCA6DQoJCQkJCQl0aGlzLm9mZnNldFBhcmVudFsgMCBdLnNjcm9sbFRvcA0KCQkJCQkpOw0KCQkJfQ0KCQkJdGhpcy5yZXZlcnRpbmcgPSB0cnVlOw0KCQkJJCggdGhpcy5oZWxwZXIgKS5hbmltYXRlKA0KCQkJCWFuaW1hdGlvbiwNCgkJCQlwYXJzZUludCggdGhpcy5vcHRpb25zLnJldmVydCwgMTAgKSB8fCA1MDAsDQoJCQkJZnVuY3Rpb24oKSB7DQoJCQkJCXRoYXQuX2NsZWFyKCBldmVudCApOw0KCQkJCX0NCgkJCSk7DQoJCX0gZWxzZSB7DQoJCQl0aGlzLl9jbGVhciggZXZlbnQsIG5vUHJvcGFnYXRpb24gKTsNCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCg0KCX0sDQoNCgljYW5jZWw6IGZ1bmN0aW9uKCkgew0KDQoJCWlmICggdGhpcy5kcmFnZ2luZyApIHsNCg0KCQkJdGhpcy5fbW91c2VVcCggbmV3ICQuRXZlbnQoICJtb3VzZXVwIiwgeyB0YXJnZXQ6IG51bGwgfSApICk7DQoNCgkJCWlmICggdGhpcy5vcHRpb25zLmhlbHBlciA9PT0gIm9yaWdpbmFsIiApIHsNCgkJCQl0aGlzLmN1cnJlbnRJdGVtLmNzcyggdGhpcy5fc3RvcmVkQ1NTICk7DQoJCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMuY3VycmVudEl0ZW0sICJ1aS1zb3J0YWJsZS1oZWxwZXIiICk7DQoJCQl9IGVsc2Ugew0KCQkJCXRoaXMuY3VycmVudEl0ZW0uc2hvdygpOw0KCQkJfQ0KDQoJCQkvL1Bvc3QgZGVhY3RpdmF0aW5nIGV2ZW50cyB0byBjb250YWluZXJzDQoJCQlmb3IgKCB2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHsNCgkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5fdHJpZ2dlciggImRlYWN0aXZhdGUiLCBudWxsLCB0aGlzLl91aUhhc2goIHRoaXMgKSApOw0KCQkJCWlmICggdGhpcy5jb250YWluZXJzWyBpIF0uY29udGFpbmVyQ2FjaGUub3ZlciApIHsNCgkJCQkJdGhpcy5jb250YWluZXJzWyBpIF0uX3RyaWdnZXIoICJvdXQiLCBudWxsLCB0aGlzLl91aUhhc2goIHRoaXMgKSApOw0KCQkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDsNCgkJCQl9DQoJCQl9DQoNCgkJfQ0KDQoJCWlmICggdGhpcy5wbGFjZWhvbGRlciApIHsNCg0KCQkJLy8kKHRoaXMucGxhY2Vob2xkZXJbMF0pLnJlbW92ZSgpOyB3b3VsZCBoYXZlIGJlZW4gdGhlIGpRdWVyeSB3YXkgLSB1bmZvcnR1bmF0ZWx5LA0KCQkJLy8gaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhDQoJCQlpZiAoIHRoaXMucGxhY2Vob2xkZXJbIDAgXS5wYXJlbnROb2RlICkgew0KCQkJCXRoaXMucGxhY2Vob2xkZXJbIDAgXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0gKTsNCgkJCX0NCgkJCWlmICggdGhpcy5vcHRpb25zLmhlbHBlciAhPT0gIm9yaWdpbmFsIiAmJiB0aGlzLmhlbHBlciAmJg0KCQkJCQl0aGlzLmhlbHBlclsgMCBdLnBhcmVudE5vZGUgKSB7DQoJCQkJdGhpcy5oZWxwZXIucmVtb3ZlKCk7DQoJCQl9DQoNCgkJCSQuZXh0ZW5kKCB0aGlzLCB7DQoJCQkJaGVscGVyOiBudWxsLA0KCQkJCWRyYWdnaW5nOiBmYWxzZSwNCgkJCQlyZXZlcnRpbmc6IGZhbHNlLA0KCQkJCV9ub0ZpbmFsU29ydDogbnVsbA0KCQkJfSApOw0KDQoJCQlpZiAoIHRoaXMuZG9tUG9zaXRpb24ucHJldiApIHsNCgkJCQkkKCB0aGlzLmRvbVBvc2l0aW9uLnByZXYgKS5hZnRlciggdGhpcy5jdXJyZW50SXRlbSApOw0KCQkJfSBlbHNlIHsNCgkJCQkkKCB0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCApLnByZXBlbmQoIHRoaXMuY3VycmVudEl0ZW0gKTsNCgkJCX0NCgkJfQ0KDQoJCXJldHVybiB0aGlzOw0KDQoJfSwNCg0KCXNlcmlhbGl6ZTogZnVuY3Rpb24oIG8gKSB7DQoNCgkJdmFyIGl0ZW1zID0gdGhpcy5fZ2V0SXRlbXNBc2pRdWVyeSggbyAmJiBvLmNvbm5lY3RlZCApLA0KCQkJc3RyID0gW107DQoJCW8gPSBvIHx8IHt9Ow0KDQoJCSQoIGl0ZW1zICkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQl2YXIgcmVzID0gKCAkKCBvLml0ZW0gfHwgdGhpcyApLmF0dHIoIG8uYXR0cmlidXRlIHx8ICJpZCIgKSB8fCAiIiApDQoJCQkJLm1hdGNoKCBvLmV4cHJlc3Npb24gfHwgKCAvKC4rKVtcLT1fXSguKykvICkgKTsNCgkJCWlmICggcmVzICkgew0KCQkJCXN0ci5wdXNoKA0KCQkJCQkoIG8ua2V5IHx8IHJlc1sgMSBdICsgIltdIiApICsNCgkJCQkJIj0iICsgKCBvLmtleSAmJiBvLmV4cHJlc3Npb24gPyByZXNbIDEgXSA6IHJlc1sgMiBdICkgKTsNCgkJCX0NCgkJfSApOw0KDQoJCWlmICggIXN0ci5sZW5ndGggJiYgby5rZXkgKSB7DQoJCQlzdHIucHVzaCggby5rZXkgKyAiPSIgKTsNCgkJfQ0KDQoJCXJldHVybiBzdHIuam9pbiggIiYiICk7DQoNCgl9LA0KDQoJdG9BcnJheTogZnVuY3Rpb24oIG8gKSB7DQoNCgkJdmFyIGl0ZW1zID0gdGhpcy5fZ2V0SXRlbXNBc2pRdWVyeSggbyAmJiBvLmNvbm5lY3RlZCApLA0KCQkJcmV0ID0gW107DQoNCgkJbyA9IG8gfHwge307DQoNCgkJaXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQlyZXQucHVzaCggJCggby5pdGVtIHx8IHRoaXMgKS5hdHRyKCBvLmF0dHJpYnV0ZSB8fCAiaWQiICkgfHwgIiIgKTsNCgkJfSApOw0KCQlyZXR1cm4gcmV0Ow0KDQoJfSwNCg0KCS8qIEJlIGNhcmVmdWwgd2l0aCB0aGUgZm9sbG93aW5nIGNvcmUgZnVuY3Rpb25zICovDQoJX2ludGVyc2VjdHNXaXRoOiBmdW5jdGlvbiggaXRlbSApIHsNCg0KCQl2YXIgeDEgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQsDQoJCQl4MiA9IHgxICsgdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCwNCgkJCXkxID0gdGhpcy5wb3NpdGlvbkFicy50b3AsDQoJCQl5MiA9IHkxICsgdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsDQoJCQlsID0gaXRlbS5sZWZ0LA0KCQkJciA9IGwgKyBpdGVtLndpZHRoLA0KCQkJdCA9IGl0ZW0udG9wLA0KCQkJYiA9IHQgKyBpdGVtLmhlaWdodCwNCgkJCWR5Q2xpY2sgPSB0aGlzLm9mZnNldC5jbGljay50b3AsDQoJCQlkeENsaWNrID0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCwNCgkJCWlzT3ZlckVsZW1lbnRIZWlnaHQgPSAoIHRoaXMub3B0aW9ucy5heGlzID09PSAieCIgKSB8fCAoICggeTEgKyBkeUNsaWNrICkgPiB0ICYmDQoJCQkJKCB5MSArIGR5Q2xpY2sgKSA8IGIgKSwNCgkJCWlzT3ZlckVsZW1lbnRXaWR0aCA9ICggdGhpcy5vcHRpb25zLmF4aXMgPT09ICJ5IiApIHx8ICggKCB4MSArIGR4Q2xpY2sgKSA+IGwgJiYNCgkJCQkoIHgxICsgZHhDbGljayApIDwgciApLA0KCQkJaXNPdmVyRWxlbWVudCA9IGlzT3ZlckVsZW1lbnRIZWlnaHQgJiYgaXNPdmVyRWxlbWVudFdpZHRoOw0KDQoJCWlmICggdGhpcy5vcHRpb25zLnRvbGVyYW5jZSA9PT0gInBvaW50ZXIiIHx8DQoJCQl0aGlzLm9wdGlvbnMuZm9yY2VQb2ludGVyRm9yQ29udGFpbmVycyB8fA0KCQkJKCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlICE9PSAicG9pbnRlciIgJiYNCgkJCQl0aGlzLmhlbHBlclByb3BvcnRpb25zWyB0aGlzLmZsb2F0aW5nID8gIndpZHRoIiA6ICJoZWlnaHQiIF0gPg0KCQkJCWl0ZW1bIHRoaXMuZmxvYXRpbmcgPyAid2lkdGgiIDogImhlaWdodCIgXSApDQoJCSkgew0KCQkJcmV0dXJuIGlzT3ZlckVsZW1lbnQ7DQoJCX0gZWxzZSB7DQoNCgkJCXJldHVybiAoIGwgPCB4MSArICggdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSAmJiAvLyBSaWdodCBIYWxmDQoJCQkJeDIgLSAoIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyICkgPCByICYmIC8vIExlZnQgSGFsZg0KCQkJCXQgPCB5MSArICggdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyICkgJiYgLy8gQm90dG9tIEhhbGYNCgkJCQl5MiAtICggdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyICkgPCBiICk7IC8vIFRvcCBIYWxmDQoNCgkJfQ0KCX0sDQoNCglfaW50ZXJzZWN0c1dpdGhQb2ludGVyOiBmdW5jdGlvbiggaXRlbSApIHsNCgkJdmFyIHZlcnRpY2FsRGlyZWN0aW9uLCBob3Jpem9udGFsRGlyZWN0aW9uLA0KCQkJaXNPdmVyRWxlbWVudEhlaWdodCA9ICggdGhpcy5vcHRpb25zLmF4aXMgPT09ICJ4IiApIHx8DQoJCQkJdGhpcy5faXNPdmVyQXhpcygNCgkJCQkJdGhpcy5wb3NpdGlvbkFicy50b3AgKyB0aGlzLm9mZnNldC5jbGljay50b3AsIGl0ZW0udG9wLCBpdGVtLmhlaWdodCApLA0KCQkJaXNPdmVyRWxlbWVudFdpZHRoID0gKCB0aGlzLm9wdGlvbnMuYXhpcyA9PT0gInkiICkgfHwNCgkJCQl0aGlzLl9pc092ZXJBeGlzKA0KCQkJCQl0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0LCBpdGVtLmxlZnQsIGl0ZW0ud2lkdGggKSwNCgkJCWlzT3ZlckVsZW1lbnQgPSBpc092ZXJFbGVtZW50SGVpZ2h0ICYmIGlzT3ZlckVsZW1lbnRXaWR0aDsNCg0KCQlpZiAoICFpc092ZXJFbGVtZW50ICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJdmVydGljYWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKTsNCgkJaG9yaXpvbnRhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7DQoNCgkJcmV0dXJuIHRoaXMuZmxvYXRpbmcgPw0KCQkJKCAoIGhvcml6b250YWxEaXJlY3Rpb24gPT09ICJyaWdodCIgfHwgdmVydGljYWxEaXJlY3Rpb24gPT09ICJkb3duIiApID8gMiA6IDEgKQ0KCQkJOiAoIHZlcnRpY2FsRGlyZWN0aW9uICYmICggdmVydGljYWxEaXJlY3Rpb24gPT09ICJkb3duIiA/IDIgOiAxICkgKTsNCg0KCX0sDQoNCglfaW50ZXJzZWN0c1dpdGhTaWRlczogZnVuY3Rpb24oIGl0ZW0gKSB7DQoNCgkJdmFyIGlzT3ZlckJvdHRvbUhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKCB0aGlzLnBvc2l0aW9uQWJzLnRvcCArDQoJCQkJdGhpcy5vZmZzZXQuY2xpY2sudG9wLCBpdGVtLnRvcCArICggaXRlbS5oZWlnaHQgLyAyICksIGl0ZW0uaGVpZ2h0ICksDQoJCQlpc092ZXJSaWdodEhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKCB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKw0KCQkJCXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsIGl0ZW0ubGVmdCArICggaXRlbS53aWR0aCAvIDIgKSwgaXRlbS53aWR0aCApLA0KCQkJdmVydGljYWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSwNCgkJCWhvcml6b250YWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpOw0KDQoJCWlmICggdGhpcy5mbG9hdGluZyAmJiBob3Jpem9udGFsRGlyZWN0aW9uICkgew0KCQkJcmV0dXJuICggKCBob3Jpem9udGFsRGlyZWN0aW9uID09PSAicmlnaHQiICYmIGlzT3ZlclJpZ2h0SGFsZiApIHx8DQoJCQkJKCBob3Jpem9udGFsRGlyZWN0aW9uID09PSAibGVmdCIgJiYgIWlzT3ZlclJpZ2h0SGFsZiApICk7DQoJCX0gZWxzZSB7DQoJCQlyZXR1cm4gdmVydGljYWxEaXJlY3Rpb24gJiYgKCAoIHZlcnRpY2FsRGlyZWN0aW9uID09PSAiZG93biIgJiYgaXNPdmVyQm90dG9tSGFsZiApIHx8DQoJCQkJKCB2ZXJ0aWNhbERpcmVjdGlvbiA9PT0gInVwIiAmJiAhaXNPdmVyQm90dG9tSGFsZiApICk7DQoJCX0NCg0KCX0sDQoNCglfZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uOiBmdW5jdGlvbigpIHsNCgkJdmFyIGRlbHRhID0gdGhpcy5wb3NpdGlvbkFicy50b3AgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7DQoJCXJldHVybiBkZWx0YSAhPT0gMCAmJiAoIGRlbHRhID4gMCA/ICJkb3duIiA6ICJ1cCIgKTsNCgl9LA0KDQoJX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uOiBmdW5jdGlvbigpIHsNCgkJdmFyIGRlbHRhID0gdGhpcy5wb3NpdGlvbkFicy5sZWZ0IC0gdGhpcy5sYXN0UG9zaXRpb25BYnMubGVmdDsNCgkJcmV0dXJuIGRlbHRhICE9PSAwICYmICggZGVsdGEgPiAwID8gInJpZ2h0IiA6ICJsZWZ0IiApOw0KCX0sDQoNCglyZWZyZXNoOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXRoaXMuX3JlZnJlc2hJdGVtcyggZXZlbnQgKTsNCgkJdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7DQoJCXRoaXMucmVmcmVzaFBvc2l0aW9ucygpOw0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJX2Nvbm5lY3RXaXRoOiBmdW5jdGlvbigpIHsNCgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7DQoJCXJldHVybiBvcHRpb25zLmNvbm5lY3RXaXRoLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPw0KCQkJWyBvcHRpb25zLmNvbm5lY3RXaXRoIF0gOg0KCQkJb3B0aW9ucy5jb25uZWN0V2l0aDsNCgl9LA0KDQoJX2dldEl0ZW1zQXNqUXVlcnk6IGZ1bmN0aW9uKCBjb25uZWN0ZWQgKSB7DQoNCgkJdmFyIGksIGosIGN1ciwgaW5zdCwNCgkJCWl0ZW1zID0gW10sDQoJCQlxdWVyaWVzID0gW10sDQoJCQljb25uZWN0V2l0aCA9IHRoaXMuX2Nvbm5lY3RXaXRoKCk7DQoNCgkJaWYgKCBjb25uZWN0V2l0aCAmJiBjb25uZWN0ZWQgKSB7DQoJCQlmb3IgKCBpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQkJY3VyID0gJCggY29ubmVjdFdpdGhbIGkgXSwgdGhpcy5kb2N1bWVudFsgMCBdICk7DQoJCQkJZm9yICggaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSApIHsNCgkJCQkJaW5zdCA9ICQuZGF0YSggY3VyWyBqIF0sIHRoaXMud2lkZ2V0RnVsbE5hbWUgKTsNCgkJCQkJaWYgKCBpbnN0ICYmIGluc3QgIT09IHRoaXMgJiYgIWluc3Qub3B0aW9ucy5kaXNhYmxlZCApIHsNCgkJCQkJCXF1ZXJpZXMucHVzaCggWyAkLmlzRnVuY3Rpb24oIGluc3Qub3B0aW9ucy5pdGVtcyApID8NCgkJCQkJCQlpbnN0Lm9wdGlvbnMuaXRlbXMuY2FsbCggaW5zdC5lbGVtZW50ICkgOg0KCQkJCQkJCSQoIGluc3Qub3B0aW9ucy5pdGVtcywgaW5zdC5lbGVtZW50ICkNCgkJCQkJCQkJLm5vdCggIi51aS1zb3J0YWJsZS1oZWxwZXIiICkNCgkJCQkJCQkJLm5vdCggIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIgKSwgaW5zdCBdICk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCg0KCQlxdWVyaWVzLnB1c2goIFsgJC5pc0Z1bmN0aW9uKCB0aGlzLm9wdGlvbnMuaXRlbXMgKSA/DQoJCQl0aGlzLm9wdGlvbnMuaXRlbXMNCgkJCQkuY2FsbCggdGhpcy5lbGVtZW50LCBudWxsLCB7IG9wdGlvbnM6IHRoaXMub3B0aW9ucywgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9ICkgOg0KCQkJJCggdGhpcy5vcHRpb25zLml0ZW1zLCB0aGlzLmVsZW1lbnQgKQ0KCQkJCS5ub3QoICIudWktc29ydGFibGUtaGVscGVyIiApDQoJCQkJLm5vdCggIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIgKSwgdGhpcyBdICk7DQoNCgkJZnVuY3Rpb24gYWRkSXRlbXMoKSB7DQoJCQlpdGVtcy5wdXNoKCB0aGlzICk7DQoJCX0NCgkJZm9yICggaSA9IHF1ZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQlxdWVyaWVzWyBpIF1bIDAgXS5lYWNoKCBhZGRJdGVtcyApOw0KCQl9DQoNCgkJcmV0dXJuICQoIGl0ZW1zICk7DQoNCgl9LA0KDQoJX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOiBmdW5jdGlvbigpIHsNCg0KCQl2YXIgbGlzdCA9IHRoaXMuY3VycmVudEl0ZW0uZmluZCggIjpkYXRhKCIgKyB0aGlzLndpZGdldE5hbWUgKyAiLWl0ZW0pIiApOw0KDQoJCXRoaXMuaXRlbXMgPSAkLmdyZXAoIHRoaXMuaXRlbXMsIGZ1bmN0aW9uKCBpdGVtICkgew0KCQkJZm9yICggdmFyIGogPSAwOyBqIDwgbGlzdC5sZW5ndGg7IGorKyApIHsNCgkJCQlpZiAoIGxpc3RbIGogXSA9PT0gaXRlbS5pdGVtWyAwIF0gKSB7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfSApOw0KDQoJfSwNCg0KCV9yZWZyZXNoSXRlbXM6IGZ1bmN0aW9uKCBldmVudCApIHsNCg0KCQl0aGlzLml0ZW1zID0gW107DQoJCXRoaXMuY29udGFpbmVycyA9IFsgdGhpcyBdOw0KDQoJCXZhciBpLCBqLCBjdXIsIGluc3QsIHRhcmdldERhdGEsIF9xdWVyaWVzLCBpdGVtLCBxdWVyaWVzTGVuZ3RoLA0KCQkJaXRlbXMgPSB0aGlzLml0ZW1zLA0KCQkJcXVlcmllcyA9IFsgWyAkLmlzRnVuY3Rpb24oIHRoaXMub3B0aW9ucy5pdGVtcyApID8NCgkJCQl0aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sIGV2ZW50LCB7IGl0ZW06IHRoaXMuY3VycmVudEl0ZW0gfSApIDoNCgkJCQkkKCB0aGlzLm9wdGlvbnMuaXRlbXMsIHRoaXMuZWxlbWVudCApLCB0aGlzIF0gXSwNCgkJCWNvbm5lY3RXaXRoID0gdGhpcy5fY29ubmVjdFdpdGgoKTsNCg0KCQkvL1Nob3VsZG4ndCBiZSBydW4gdGhlIGZpcnN0IHRpbWUgdGhyb3VnaCBkdWUgdG8gbWFzc2l2ZSBzbG93LWRvd24NCgkJaWYgKCBjb25uZWN0V2l0aCAmJiB0aGlzLnJlYWR5ICkgew0KCQkJZm9yICggaSA9IGNvbm5lY3RXaXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkgew0KCQkJCWN1ciA9ICQoIGNvbm5lY3RXaXRoWyBpIF0sIHRoaXMuZG9jdW1lbnRbIDAgXSApOw0KCQkJCWZvciAoIGogPSBjdXIubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0gKSB7DQoJCQkJCWluc3QgPSAkLmRhdGEoIGN1clsgaiBdLCB0aGlzLndpZGdldEZ1bGxOYW1lICk7DQoJCQkJCWlmICggaW5zdCAmJiBpbnN0ICE9PSB0aGlzICYmICFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQgKSB7DQoJCQkJCQlxdWVyaWVzLnB1c2goIFsgJC5pc0Z1bmN0aW9uKCBpbnN0Lm9wdGlvbnMuaXRlbXMgKSA/DQoJCQkJCQkJaW5zdC5vcHRpb25zLml0ZW1zDQoJCQkJCQkJCS5jYWxsKCBpbnN0LmVsZW1lbnRbIDAgXSwgZXZlbnQsIHsgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9ICkgOg0KCQkJCQkJCSQoIGluc3Qub3B0aW9ucy5pdGVtcywgaW5zdC5lbGVtZW50ICksIGluc3QgXSApOw0KCQkJCQkJdGhpcy5jb250YWluZXJzLnB1c2goIGluc3QgKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCWZvciAoIGkgPSBxdWVyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkgew0KCQkJdGFyZ2V0RGF0YSA9IHF1ZXJpZXNbIGkgXVsgMSBdOw0KCQkJX3F1ZXJpZXMgPSBxdWVyaWVzWyBpIF1bIDAgXTsNCg0KCQkJZm9yICggaiA9IDAsIHF1ZXJpZXNMZW5ndGggPSBfcXVlcmllcy5sZW5ndGg7IGogPCBxdWVyaWVzTGVuZ3RoOyBqKysgKSB7DQoJCQkJaXRlbSA9ICQoIF9xdWVyaWVzWyBqIF0gKTsNCg0KCQkJCS8vIERhdGEgZm9yIHRhcmdldCBjaGVja2luZyAobW91c2UgbWFuYWdlcikNCgkJCQlpdGVtLmRhdGEoIHRoaXMud2lkZ2V0TmFtZSArICItaXRlbSIsIHRhcmdldERhdGEgKTsNCg0KCQkJCWl0ZW1zLnB1c2goIHsNCgkJCQkJaXRlbTogaXRlbSwNCgkJCQkJaW5zdGFuY2U6IHRhcmdldERhdGEsDQoJCQkJCXdpZHRoOiAwLCBoZWlnaHQ6IDAsDQoJCQkJCWxlZnQ6IDAsIHRvcDogMA0KCQkJCX0gKTsNCgkJCX0NCgkJfQ0KDQoJfSwNCg0KCXJlZnJlc2hQb3NpdGlvbnM6IGZ1bmN0aW9uKCBmYXN0ICkgew0KDQoJCS8vIERldGVybWluZSB3aGV0aGVyIGl0ZW1zIGFyZSBiZWluZyBkaXNwbGF5ZWQgaG9yaXpvbnRhbGx5DQoJCXRoaXMuZmxvYXRpbmcgPSB0aGlzLml0ZW1zLmxlbmd0aCA/DQoJCQl0aGlzLm9wdGlvbnMuYXhpcyA9PT0gIngiIHx8IHRoaXMuX2lzRmxvYXRpbmcoIHRoaXMuaXRlbXNbIDAgXS5pdGVtICkgOg0KCQkJZmFsc2U7DQoNCgkJLy9UaGlzIGhhcyB0byBiZSByZWRvbmUgYmVjYXVzZSBkdWUgdG8gdGhlIGl0ZW0gYmVpbmcgbW92ZWQgb3V0L2ludG8gdGhlIG9mZnNldFBhcmVudCwNCgkJLy8gdGhlIG9mZnNldFBhcmVudCdzIHBvc2l0aW9uIHdpbGwgY2hhbmdlDQoJCWlmICggdGhpcy5vZmZzZXRQYXJlbnQgJiYgdGhpcy5oZWxwZXIgKSB7DQoJCQl0aGlzLm9mZnNldC5wYXJlbnQgPSB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKTsNCgkJfQ0KDQoJCXZhciBpLCBpdGVtLCB0LCBwOw0KDQoJCWZvciAoIGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkgew0KCQkJaXRlbSA9IHRoaXMuaXRlbXNbIGkgXTsNCg0KCQkJLy9XZSBpZ25vcmUgY2FsY3VsYXRpbmcgcG9zaXRpb25zIG9mIGFsbCBjb25uZWN0ZWQgY29udGFpbmVycyB3aGVuIHdlJ3JlIG5vdCBvdmVyIHRoZW0NCgkJCWlmICggaXRlbS5pbnN0YW5jZSAhPT0gdGhpcy5jdXJyZW50Q29udGFpbmVyICYmIHRoaXMuY3VycmVudENvbnRhaW5lciAmJg0KCQkJCQlpdGVtLml0ZW1bIDAgXSAhPT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkgew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KDQoJCQl0ID0gdGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQgPw0KCQkJCSQoIHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LCBpdGVtLml0ZW0gKSA6DQoJCQkJaXRlbS5pdGVtOw0KDQoJCQlpZiAoICFmYXN0ICkgew0KCQkJCWl0ZW0ud2lkdGggPSB0Lm91dGVyV2lkdGgoKTsNCgkJCQlpdGVtLmhlaWdodCA9IHQub3V0ZXJIZWlnaHQoKTsNCgkJCX0NCg0KCQkJcCA9IHQub2Zmc2V0KCk7DQoJCQlpdGVtLmxlZnQgPSBwLmxlZnQ7DQoJCQlpdGVtLnRvcCA9IHAudG9wOw0KCQl9DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuY3VzdG9tICYmIHRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMgKSB7DQoJCQl0aGlzLm9wdGlvbnMuY3VzdG9tLnJlZnJlc2hDb250YWluZXJzLmNhbGwoIHRoaXMgKTsNCgkJfSBlbHNlIHsNCgkJCWZvciAoIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQkJcCA9IHRoaXMuY29udGFpbmVyc1sgaSBdLmVsZW1lbnQub2Zmc2V0KCk7DQoJCQkJdGhpcy5jb250YWluZXJzWyBpIF0uY29udGFpbmVyQ2FjaGUubGVmdCA9IHAubGVmdDsNCgkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS50b3AgPSBwLnRvcDsNCgkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS53aWR0aCA9DQoJCQkJCXRoaXMuY29udGFpbmVyc1sgaSBdLmVsZW1lbnQub3V0ZXJXaWR0aCgpOw0KCQkJCXRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlLmhlaWdodCA9DQoJCQkJCXRoaXMuY29udGFpbmVyc1sgaSBdLmVsZW1lbnQub3V0ZXJIZWlnaHQoKTsNCgkJCX0NCgkJfQ0KDQoJCXJldHVybiB0aGlzOw0KCX0sDQoNCglfY3JlYXRlUGxhY2Vob2xkZXI6IGZ1bmN0aW9uKCB0aGF0ICkgew0KCQl0aGF0ID0gdGhhdCB8fCB0aGlzOw0KCQl2YXIgY2xhc3NOYW1lLA0KCQkJbyA9IHRoYXQub3B0aW9uczsNCg0KCQlpZiAoICFvLnBsYWNlaG9sZGVyIHx8IG8ucGxhY2Vob2xkZXIuY29uc3RydWN0b3IgPT09IFN0cmluZyApIHsNCgkJCWNsYXNzTmFtZSA9IG8ucGxhY2Vob2xkZXI7DQoJCQlvLnBsYWNlaG9sZGVyID0gew0KCQkJCWVsZW1lbnQ6IGZ1bmN0aW9uKCkgew0KDQoJCQkJCXZhciBub2RlTmFtZSA9IHRoYXQuY3VycmVudEl0ZW1bIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLA0KCQkJCQkJZWxlbWVudCA9ICQoICI8IiArIG5vZGVOYW1lICsgIj4iLCB0aGF0LmRvY3VtZW50WyAwIF0gKTsNCg0KCQkJCQkJdGhhdC5fYWRkQ2xhc3MoIGVsZW1lbnQsICJ1aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIsDQoJCQkJCQkJCWNsYXNzTmFtZSB8fCB0aGF0LmN1cnJlbnRJdGVtWyAwIF0uY2xhc3NOYW1lICkNCgkJCQkJCQkuX3JlbW92ZUNsYXNzKCBlbGVtZW50LCAidWktc29ydGFibGUtaGVscGVyIiApOw0KDQoJCQkJCWlmICggbm9kZU5hbWUgPT09ICJ0Ym9keSIgKSB7DQoJCQkJCQl0aGF0Ll9jcmVhdGVUclBsYWNlaG9sZGVyKA0KCQkJCQkJCXRoYXQuY3VycmVudEl0ZW0uZmluZCggInRyIiApLmVxKCAwICksDQoJCQkJCQkJJCggIjx0cj4iLCB0aGF0LmRvY3VtZW50WyAwIF0gKS5hcHBlbmRUbyggZWxlbWVudCApDQoJCQkJCQkpOw0KCQkJCQl9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gInRyIiApIHsNCgkJCQkJCXRoYXQuX2NyZWF0ZVRyUGxhY2Vob2xkZXIoIHRoYXQuY3VycmVudEl0ZW0sIGVsZW1lbnQgKTsNCgkJCQkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbWciICkgew0KCQkJCQkJZWxlbWVudC5hdHRyKCAic3JjIiwgdGhhdC5jdXJyZW50SXRlbS5hdHRyKCAic3JjIiApICk7DQoJCQkJCX0NCg0KCQkJCQlpZiAoICFjbGFzc05hbWUgKSB7DQoJCQkJCQllbGVtZW50LmNzcyggInZpc2liaWxpdHkiLCAiaGlkZGVuIiApOw0KCQkJCQl9DQoNCgkJCQkJcmV0dXJuIGVsZW1lbnQ7DQoJCQkJfSwNCgkJCQl1cGRhdGU6IGZ1bmN0aW9uKCBjb250YWluZXIsIHAgKSB7DQoNCgkJCQkJLy8gMS4gSWYgYSBjbGFzc05hbWUgaXMgc2V0IGFzICdwbGFjZWhvbGRlciBvcHRpb24sIHdlIGRvbid0IGZvcmNlIHNpemVzIC0NCgkJCQkJLy8gdGhlIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGF0DQoJCQkJCS8vIDIuIFRoZSBvcHRpb24gJ2ZvcmNlUGxhY2Vob2xkZXJTaXplIGNhbiBiZSBlbmFibGVkIHRvIGZvcmNlIGl0IGV2ZW4gaWYgYQ0KCQkJCQkvLyBjbGFzcyBuYW1lIGlzIHNwZWNpZmllZA0KCQkJCQlpZiAoIGNsYXNzTmFtZSAmJiAhby5mb3JjZVBsYWNlaG9sZGVyU2l6ZSApIHsNCgkJCQkJCXJldHVybjsNCgkJCQkJfQ0KDQoJCQkJCS8vSWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIGEgYWN0dWFsIGhlaWdodCBieSBpdHNlbGYgKHdpdGhvdXQgc3R5bGVzIGNvbWluZw0KCQkJCQkvLyBmcm9tIGEgc3R5bGVzaGVldCksIGl0IHJlY2VpdmVzIHRoZSBpbmxpbmUgaGVpZ2h0IGZyb20gdGhlIGRyYWdnZWQgaXRlbQ0KCQkJCQlpZiAoICFwLmhlaWdodCgpICkgew0KCQkJCQkJcC5oZWlnaHQoDQoJCQkJCQkJdGhhdC5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpIC0NCgkJCQkJCQlwYXJzZUludCggdGhhdC5jdXJyZW50SXRlbS5jc3MoICJwYWRkaW5nVG9wIiApIHx8IDAsIDEwICkgLQ0KCQkJCQkJCXBhcnNlSW50KCB0aGF0LmN1cnJlbnRJdGVtLmNzcyggInBhZGRpbmdCb3R0b20iICkgfHwgMCwgMTAgKSApOw0KCQkJCQl9DQoJCQkJCWlmICggIXAud2lkdGgoKSApIHsNCgkJCQkJCXAud2lkdGgoDQoJCQkJCQkJdGhhdC5jdXJyZW50SXRlbS5pbm5lcldpZHRoKCkgLQ0KCQkJCQkJCXBhcnNlSW50KCB0aGF0LmN1cnJlbnRJdGVtLmNzcyggInBhZGRpbmdMZWZ0IiApIHx8IDAsIDEwICkgLQ0KCQkJCQkJCXBhcnNlSW50KCB0aGF0LmN1cnJlbnRJdGVtLmNzcyggInBhZGRpbmdSaWdodCIgKSB8fCAwLCAxMCApICk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9Ow0KCQl9DQoNCgkJLy9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyDQoJCXRoYXQucGxhY2Vob2xkZXIgPSAkKCBvLnBsYWNlaG9sZGVyLmVsZW1lbnQuY2FsbCggdGhhdC5lbGVtZW50LCB0aGF0LmN1cnJlbnRJdGVtICkgKTsNCg0KCQkvL0FwcGVuZCBpdCBhZnRlciB0aGUgYWN0dWFsIGN1cnJlbnQgaXRlbQ0KCQl0aGF0LmN1cnJlbnRJdGVtLmFmdGVyKCB0aGF0LnBsYWNlaG9sZGVyICk7DQoNCgkJLy9VcGRhdGUgdGhlIHNpemUgb2YgdGhlIHBsYWNlaG9sZGVyIChUT0RPOiBMb2dpYyB0byBmdXp6eSwgc2VlIGxpbmUgMzE2LzMxNykNCgkJby5wbGFjZWhvbGRlci51cGRhdGUoIHRoYXQsIHRoYXQucGxhY2Vob2xkZXIgKTsNCg0KCX0sDQoNCglfY3JlYXRlVHJQbGFjZWhvbGRlcjogZnVuY3Rpb24oIHNvdXJjZVRyLCB0YXJnZXRUciApIHsNCgkJdmFyIHRoYXQgPSB0aGlzOw0KDQoJCXNvdXJjZVRyLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQkkKCAiPHRkPiYjMTYwOzwvdGQ+IiwgdGhhdC5kb2N1bWVudFsgMCBdICkNCgkJCQkuYXR0ciggImNvbHNwYW4iLCAkKCB0aGlzICkuYXR0ciggImNvbHNwYW4iICkgfHwgMSApDQoJCQkJLmFwcGVuZFRvKCB0YXJnZXRUciApOw0KCQl9ICk7DQoJfSwNCg0KCV9jb250YWN0Q29udGFpbmVyczogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgaSwgaiwgZGlzdCwgaXRlbVdpdGhMZWFzdERpc3RhbmNlLCBwb3NQcm9wZXJ0eSwgc2l6ZVByb3BlcnR5LCBjdXIsIG5lYXJCb3R0b20sDQoJCQlmbG9hdGluZywgYXhpcywNCgkJCWlubmVybW9zdENvbnRhaW5lciA9IG51bGwsDQoJCQlpbm5lcm1vc3RJbmRleCA9IG51bGw7DQoNCgkJLy8gR2V0IGlubmVybW9zdCBjb250YWluZXIgdGhhdCBpbnRlcnNlY3RzIHdpdGggaXRlbQ0KCQlmb3IgKCBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkgew0KDQoJCQkvLyBOZXZlciBjb25zaWRlciBhIGNvbnRhaW5lciB0aGF0J3MgbG9jYXRlZCB3aXRoaW4gdGhlIGl0ZW0gaXRzZWxmDQoJCQlpZiAoICQuY29udGFpbnMoIHRoaXMuY3VycmVudEl0ZW1bIDAgXSwgdGhpcy5jb250YWluZXJzWyBpIF0uZWxlbWVudFsgMCBdICkgKSB7DQoJCQkJY29udGludWU7DQoJCQl9DQoNCgkJCWlmICggdGhpcy5faW50ZXJzZWN0c1dpdGgoIHRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlICkgKSB7DQoNCgkJCQkvLyBJZiB3ZSd2ZSBhbHJlYWR5IGZvdW5kIGEgY29udGFpbmVyIGFuZCBpdCdzIG1vcmUgImlubmVyIiB0aGFuIHRoaXMsIHRoZW4gY29udGludWUNCgkJCQlpZiAoIGlubmVybW9zdENvbnRhaW5lciAmJg0KCQkJCQkJJC5jb250YWlucygNCgkJCQkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5lbGVtZW50WyAwIF0sDQoJCQkJCQkJaW5uZXJtb3N0Q29udGFpbmVyLmVsZW1lbnRbIDAgXSApICkgew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoNCgkJCQlpbm5lcm1vc3RDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcnNbIGkgXTsNCgkJCQlpbm5lcm1vc3RJbmRleCA9IGk7DQoNCgkJCX0gZWxzZSB7DQoNCgkJCQkvLyBjb250YWluZXIgZG9lc24ndCBpbnRlcnNlY3QuIHRyaWdnZXIgIm91dCIgZXZlbnQgaWYgbmVjZXNzYXJ5DQoJCQkJaWYgKCB0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyICkgew0KCQkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5fdHJpZ2dlciggIm91dCIsIGV2ZW50LCB0aGlzLl91aUhhc2goIHRoaXMgKSApOw0KCQkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDsNCgkJCQl9DQoJCQl9DQoNCgkJfQ0KDQoJCS8vIElmIG5vIGludGVyc2VjdGluZyBjb250YWluZXJzIGZvdW5kLCByZXR1cm4NCgkJaWYgKCAhaW5uZXJtb3N0Q29udGFpbmVyICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJLy8gTW92ZSB0aGUgaXRlbSBpbnRvIHRoZSBjb250YWluZXIgaWYgaXQncyBub3QgdGhlcmUgYWxyZWFkeQ0KCQlpZiAoIHRoaXMuY29udGFpbmVycy5sZW5ndGggPT09IDEgKSB7DQoJCQlpZiAoICF0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0uY29udGFpbmVyQ2FjaGUub3ZlciApIHsNCgkJCQl0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0uX3RyaWdnZXIoICJvdmVyIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7DQoJCQkJdGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxOw0KCQkJfQ0KCQl9IGVsc2Ugew0KDQoJCQkvLyBXaGVuIGVudGVyaW5nIGEgbmV3IGNvbnRhaW5lciwgd2Ugd2lsbCBmaW5kIHRoZSBpdGVtIHdpdGggdGhlIGxlYXN0IGRpc3RhbmNlIGFuZA0KCQkJLy8gYXBwZW5kIG91ciBpdGVtIG5lYXIgaXQNCgkJCWRpc3QgPSAxMDAwMDsNCgkJCWl0ZW1XaXRoTGVhc3REaXN0YW5jZSA9IG51bGw7DQoJCQlmbG9hdGluZyA9IGlubmVybW9zdENvbnRhaW5lci5mbG9hdGluZyB8fCB0aGlzLl9pc0Zsb2F0aW5nKCB0aGlzLmN1cnJlbnRJdGVtICk7DQoJCQlwb3NQcm9wZXJ0eSA9IGZsb2F0aW5nID8gImxlZnQiIDogInRvcCI7DQoJCQlzaXplUHJvcGVydHkgPSBmbG9hdGluZyA/ICJ3aWR0aCIgOiAiaGVpZ2h0IjsNCgkJCWF4aXMgPSBmbG9hdGluZyA/ICJwYWdlWCIgOiAicGFnZVkiOw0KDQoJCQlmb3IgKCBqID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBqID49IDA7IGotLSApIHsNCgkJCQlpZiAoICEkLmNvbnRhaW5zKA0KCQkJCQkJdGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmVsZW1lbnRbIDAgXSwgdGhpcy5pdGVtc1sgaiBdLml0ZW1bIDAgXSApDQoJCQkJKSB7DQoJCQkJCWNvbnRpbnVlOw0KCQkJCX0NCgkJCQlpZiAoIHRoaXMuaXRlbXNbIGogXS5pdGVtWyAwIF0gPT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSApIHsNCgkJCQkJY29udGludWU7DQoJCQkJfQ0KDQoJCQkJY3VyID0gdGhpcy5pdGVtc1sgaiBdLml0ZW0ub2Zmc2V0KClbIHBvc1Byb3BlcnR5IF07DQoJCQkJbmVhckJvdHRvbSA9IGZhbHNlOw0KCQkJCWlmICggZXZlbnRbIGF4aXMgXSAtIGN1ciA+IHRoaXMuaXRlbXNbIGogXVsgc2l6ZVByb3BlcnR5IF0gLyAyICkgew0KCQkJCQluZWFyQm90dG9tID0gdHJ1ZTsNCgkJCQl9DQoNCgkJCQlpZiAoIE1hdGguYWJzKCBldmVudFsgYXhpcyBdIC0gY3VyICkgPCBkaXN0ICkgew0KCQkJCQlkaXN0ID0gTWF0aC5hYnMoIGV2ZW50WyBheGlzIF0gLSBjdXIgKTsNCgkJCQkJaXRlbVdpdGhMZWFzdERpc3RhbmNlID0gdGhpcy5pdGVtc1sgaiBdOw0KCQkJCQl0aGlzLmRpcmVjdGlvbiA9IG5lYXJCb3R0b20gPyAidXAiIDogImRvd24iOw0KCQkJCX0NCgkJCX0NCg0KCQkJLy9DaGVjayBpZiBkcm9wT25FbXB0eSBpcyBlbmFibGVkDQoJCQlpZiAoICFpdGVtV2l0aExlYXN0RGlzdGFuY2UgJiYgIXRoaXMub3B0aW9ucy5kcm9wT25FbXB0eSApIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCWlmICggdGhpcy5jdXJyZW50Q29udGFpbmVyID09PSB0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0gKSB7DQoJCQkJaWYgKCAhdGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXIgKSB7DQoJCQkJCXRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXS5fdHJpZ2dlciggIm92ZXIiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkgKTsNCgkJCQkJdGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxOw0KCQkJCX0NCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCWl0ZW1XaXRoTGVhc3REaXN0YW5jZSA/DQoJCQkJdGhpcy5fcmVhcnJhbmdlKCBldmVudCwgaXRlbVdpdGhMZWFzdERpc3RhbmNlLCBudWxsLCB0cnVlICkgOg0KCQkJCXRoaXMuX3JlYXJyYW5nZSggZXZlbnQsIG51bGwsIHRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXS5lbGVtZW50LCB0cnVlICk7DQoJCQl0aGlzLl90cmlnZ2VyKCAiY2hhbmdlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7DQoJCQl0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0uX3RyaWdnZXIoICJjaGFuZ2UiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTsNCgkJCXRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXTsNCg0KCQkJLy9VcGRhdGUgdGhlIHBsYWNlaG9sZGVyDQoJCQl0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIudXBkYXRlKCB0aGlzLmN1cnJlbnRDb250YWluZXIsIHRoaXMucGxhY2Vob2xkZXIgKTsNCg0KCQkJdGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLl90cmlnZ2VyKCAib3ZlciIsIGV2ZW50LCB0aGlzLl91aUhhc2goIHRoaXMgKSApOw0KCQkJdGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxOw0KCQl9DQoNCgl9LA0KDQoJX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oIGV2ZW50ICkgew0KDQoJCXZhciBvID0gdGhpcy5vcHRpb25zLA0KCQkJaGVscGVyID0gJC5pc0Z1bmN0aW9uKCBvLmhlbHBlciApID8NCgkJCQkkKCBvLmhlbHBlci5hcHBseSggdGhpcy5lbGVtZW50WyAwIF0sIFsgZXZlbnQsIHRoaXMuY3VycmVudEl0ZW0gXSApICkgOg0KCQkJCSggby5oZWxwZXIgPT09ICJjbG9uZSIgPyB0aGlzLmN1cnJlbnRJdGVtLmNsb25lKCkgOiB0aGlzLmN1cnJlbnRJdGVtICk7DQoNCgkJLy9BZGQgdGhlIGhlbHBlciB0byB0aGUgRE9NIGlmIHRoYXQgZGlkbid0IGhhcHBlbiBhbHJlYWR5DQoJCWlmICggIWhlbHBlci5wYXJlbnRzKCAiYm9keSIgKS5sZW5ndGggKSB7DQoJCQkkKCBvLmFwcGVuZFRvICE9PSAicGFyZW50IiA/DQoJCQkJby5hcHBlbmRUbyA6DQoJCQkJdGhpcy5jdXJyZW50SXRlbVsgMCBdLnBhcmVudE5vZGUgKVsgMCBdLmFwcGVuZENoaWxkKCBoZWxwZXJbIDAgXSApOw0KCQl9DQoNCgkJaWYgKCBoZWxwZXJbIDAgXSA9PT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkgew0KCQkJdGhpcy5fc3RvcmVkQ1NTID0gew0KCQkJCXdpZHRoOiB0aGlzLmN1cnJlbnRJdGVtWyAwIF0uc3R5bGUud2lkdGgsDQoJCQkJaGVpZ2h0OiB0aGlzLmN1cnJlbnRJdGVtWyAwIF0uc3R5bGUuaGVpZ2h0LA0KCQkJCXBvc2l0aW9uOiB0aGlzLmN1cnJlbnRJdGVtLmNzcyggInBvc2l0aW9uIiApLA0KCQkJCXRvcDogdGhpcy5jdXJyZW50SXRlbS5jc3MoICJ0b3AiICksDQoJCQkJbGVmdDogdGhpcy5jdXJyZW50SXRlbS5jc3MoICJsZWZ0IiApDQoJCQl9Ow0KCQl9DQoNCgkJaWYgKCAhaGVscGVyWyAwIF0uc3R5bGUud2lkdGggfHwgby5mb3JjZUhlbHBlclNpemUgKSB7DQoJCQloZWxwZXIud2lkdGgoIHRoaXMuY3VycmVudEl0ZW0ud2lkdGgoKSApOw0KCQl9DQoJCWlmICggIWhlbHBlclsgMCBdLnN0eWxlLmhlaWdodCB8fCBvLmZvcmNlSGVscGVyU2l6ZSApIHsNCgkJCWhlbHBlci5oZWlnaHQoIHRoaXMuY3VycmVudEl0ZW0uaGVpZ2h0KCkgKTsNCgkJfQ0KDQoJCXJldHVybiBoZWxwZXI7DQoNCgl9LA0KDQoJX2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uKCBvYmogKSB7DQoJCWlmICggdHlwZW9mIG9iaiA9PT0gInN0cmluZyIgKSB7DQoJCQlvYmogPSBvYmouc3BsaXQoICIgIiApOw0KCQl9DQoJCWlmICggJC5pc0FycmF5KCBvYmogKSApIHsNCgkJCW9iaiA9IHsgbGVmdDogK29ialsgMCBdLCB0b3A6ICtvYmpbIDEgXSB8fCAwIH07DQoJCX0NCgkJaWYgKCAibGVmdCIgaW4gb2JqICkgew0KCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IG9iai5sZWZ0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7DQoJCX0NCgkJaWYgKCAicmlnaHQiIGluIG9iaiApIHsNCgkJCXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gb2JqLnJpZ2h0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7DQoJCX0NCgkJaWYgKCAidG9wIiBpbiBvYmogKSB7DQoJCQl0aGlzLm9mZnNldC5jbGljay50b3AgPSBvYmoudG9wICsgdGhpcy5tYXJnaW5zLnRvcDsNCgkJfQ0KCQlpZiAoICJib3R0b20iIGluIG9iaiApIHsNCgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gb2JqLmJvdHRvbSArIHRoaXMubWFyZ2lucy50b3A7DQoJCX0NCgl9LA0KDQoJX2dldFBhcmVudE9mZnNldDogZnVuY3Rpb24oKSB7DQoNCgkJLy9HZXQgdGhlIG9mZnNldFBhcmVudCBhbmQgY2FjaGUgaXRzIHBvc2l0aW9uDQoJCXRoaXMub2Zmc2V0UGFyZW50ID0gdGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCk7DQoJCXZhciBwbyA9IHRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpOw0KDQoJCS8vIFRoaXMgaXMgYSBzcGVjaWFsIGNhc2Ugd2hlcmUgd2UgbmVlZCB0byBtb2RpZnkgYSBvZmZzZXQgY2FsY3VsYXRlZCBvbiBzdGFydCwgc2luY2UgdGhlDQoJCS8vIGZvbGxvd2luZyBoYXBwZW5lZDoNCgkJLy8gMS4gVGhlIHBvc2l0aW9uIG9mIHRoZSBoZWxwZXIgaXMgYWJzb2x1dGUsIHNvIGl0J3MgcG9zaXRpb24gaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUNCgkJLy8gbmV4dCBwb3NpdGlvbmVkIHBhcmVudA0KCQkvLyAyLiBUaGUgYWN0dWFsIG9mZnNldCBwYXJlbnQgaXMgYSBjaGlsZCBvZiB0aGUgc2Nyb2xsIHBhcmVudCwgYW5kIHRoZSBzY3JvbGwgcGFyZW50IGlzbid0DQoJCS8vIHRoZSBkb2N1bWVudCwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgc2Nyb2xsIGlzIGluY2x1ZGVkIGluIHRoZSBpbml0aWFsIGNhbGN1bGF0aW9uIG9mIHRoZQ0KCQkvLyBvZmZzZXQgb2YgdGhlIHBhcmVudCwgYW5kIG5ldmVyIHJlY2FsY3VsYXRlZCB1cG9uIGRyYWcNCgkJaWYgKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiYWJzb2x1dGUiICYmIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gIT09IHRoaXMuZG9jdW1lbnRbIDAgXSAmJg0KCQkJCSQuY29udGFpbnMoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0sIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gKSApIHsNCgkJCXBvLmxlZnQgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOw0KCQkJcG8udG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOw0KCQl9DQoNCgkJLy8gVGhpcyBuZWVkcyB0byBiZSBhY3R1YWxseSBkb25lIGZvciBhbGwgYnJvd3NlcnMsIHNpbmNlIHBhZ2VYL3BhZ2VZIGluY2x1ZGVzIHRoaXMNCgkJLy8gaW5mb3JtYXRpb24gd2l0aCBhbiB1Z2x5IElFIGZpeA0KCQlpZiAoIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gPT09IHRoaXMuZG9jdW1lbnRbIDAgXS5ib2R5IHx8DQoJCQkJKCB0aGlzLm9mZnNldFBhcmVudFsgMCBdLnRhZ05hbWUgJiYNCgkJCQl0aGlzLm9mZnNldFBhcmVudFsgMCBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImh0bWwiICYmICQudWkuaWUgKSApIHsNCgkJCXBvID0geyB0b3A6IDAsIGxlZnQ6IDAgfTsNCgkJfQ0KDQoJCXJldHVybiB7DQoJCQl0b3A6IHBvLnRvcCArICggcGFyc2VJbnQoIHRoaXMub2Zmc2V0UGFyZW50LmNzcyggImJvcmRlclRvcFdpZHRoIiApLCAxMCApIHx8IDAgKSwNCgkJCWxlZnQ6IHBvLmxlZnQgKyAoIHBhcnNlSW50KCB0aGlzLm9mZnNldFBhcmVudC5jc3MoICJib3JkZXJMZWZ0V2lkdGgiICksIDEwICkgfHwgMCApDQoJCX07DQoNCgl9LA0KDQoJX2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHsNCg0KCQlpZiAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJyZWxhdGl2ZSIgKSB7DQoJCQl2YXIgcCA9IHRoaXMuY3VycmVudEl0ZW0ucG9zaXRpb24oKTsNCgkJCXJldHVybiB7DQoJCQkJdG9wOiBwLnRvcCAtICggcGFyc2VJbnQoIHRoaXMuaGVscGVyLmNzcyggInRvcCIgKSwgMTAgKSB8fCAwICkgKw0KCQkJCQl0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSwNCgkJCQlsZWZ0OiBwLmxlZnQgLSAoIHBhcnNlSW50KCB0aGlzLmhlbHBlci5jc3MoICJsZWZ0IiApLCAxMCApIHx8IDAgKSArDQoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKQ0KCQkJfTsNCgkJfSBlbHNlIHsNCgkJCXJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9Ow0KCQl9DQoNCgl9LA0KDQoJX2NhY2hlTWFyZ2luczogZnVuY3Rpb24oKSB7DQoJCXRoaXMubWFyZ2lucyA9IHsNCgkJCWxlZnQ6ICggcGFyc2VJbnQoIHRoaXMuY3VycmVudEl0ZW0uY3NzKCAibWFyZ2luTGVmdCIgKSwgMTAgKSB8fCAwICksDQoJCQl0b3A6ICggcGFyc2VJbnQoIHRoaXMuY3VycmVudEl0ZW0uY3NzKCAibWFyZ2luVG9wIiApLCAxMCApIHx8IDAgKQ0KCQl9Ow0KCX0sDQoNCglfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24oKSB7DQoJCXRoaXMuaGVscGVyUHJvcG9ydGlvbnMgPSB7DQoJCQl3aWR0aDogdGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLA0KCQkJaGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpDQoJCX07DQoJfSwNCg0KCV9zZXRDb250YWlubWVudDogZnVuY3Rpb24oKSB7DQoNCgkJdmFyIGNlLCBjbywgb3ZlciwNCgkJCW8gPSB0aGlzLm9wdGlvbnM7DQoJCWlmICggby5jb250YWlubWVudCA9PT0gInBhcmVudCIgKSB7DQoJCQlvLmNvbnRhaW5tZW50ID0gdGhpcy5oZWxwZXJbIDAgXS5wYXJlbnROb2RlOw0KCQl9DQoJCWlmICggby5jb250YWlubWVudCA9PT0gImRvY3VtZW50IiB8fCBvLmNvbnRhaW5tZW50ID09PSAid2luZG93IiApIHsNCgkJCXRoaXMuY29udGFpbm1lbnQgPSBbDQoJCQkJMCAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdCwNCgkJCQkwIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCwNCgkJCQlvLmNvbnRhaW5tZW50ID09PSAiZG9jdW1lbnQiID8NCgkJCQkJdGhpcy5kb2N1bWVudC53aWR0aCgpIDoNCgkJCQkJdGhpcy53aW5kb3cud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwNCgkJCQkoIG8uY29udGFpbm1lbnQgPT09ICJkb2N1bWVudCIgPw0KCQkJCQkoIHRoaXMuZG9jdW1lbnQuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCApIDoNCgkJCQkJdGhpcy53aW5kb3cuaGVpZ2h0KCkgfHwgdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQNCgkJCQkpIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wDQoJCQldOw0KCQl9DQoNCgkJaWYgKCAhKCAvXihkb2N1bWVudHx3aW5kb3d8cGFyZW50KSQvICkudGVzdCggby5jb250YWlubWVudCApICkgew0KCQkJY2UgPSAkKCBvLmNvbnRhaW5tZW50IClbIDAgXTsNCgkJCWNvID0gJCggby5jb250YWlubWVudCApLm9mZnNldCgpOw0KCQkJb3ZlciA9ICggJCggY2UgKS5jc3MoICJvdmVyZmxvdyIgKSAhPT0gImhpZGRlbiIgKTsNCg0KCQkJdGhpcy5jb250YWlubWVudCA9IFsNCgkJCQljby5sZWZ0ICsgKCBwYXJzZUludCggJCggY2UgKS5jc3MoICJib3JkZXJMZWZ0V2lkdGgiICksIDEwICkgfHwgMCApICsNCgkJCQkJKCBwYXJzZUludCggJCggY2UgKS5jc3MoICJwYWRkaW5nTGVmdCIgKSwgMTAgKSB8fCAwICkgLSB0aGlzLm1hcmdpbnMubGVmdCwNCgkJCQljby50b3AgKyAoIHBhcnNlSW50KCAkKCBjZSApLmNzcyggImJvcmRlclRvcFdpZHRoIiApLCAxMCApIHx8IDAgKSArDQoJCQkJCSggcGFyc2VJbnQoICQoIGNlICkuY3NzKCAicGFkZGluZ1RvcCIgKSwgMTAgKSB8fCAwICkgLSB0aGlzLm1hcmdpbnMudG9wLA0KCQkJCWNvLmxlZnQgKyAoIG92ZXIgPyBNYXRoLm1heCggY2Uuc2Nyb2xsV2lkdGgsIGNlLm9mZnNldFdpZHRoICkgOiBjZS5vZmZzZXRXaWR0aCApIC0NCgkJCQkJKCBwYXJzZUludCggJCggY2UgKS5jc3MoICJib3JkZXJMZWZ0V2lkdGgiICksIDEwICkgfHwgMCApIC0NCgkJCQkJKCBwYXJzZUludCggJCggY2UgKS5jc3MoICJwYWRkaW5nUmlnaHQiICksIDEwICkgfHwgMCApIC0NCgkJCQkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LA0KCQkJCWNvLnRvcCArICggb3ZlciA/IE1hdGgubWF4KCBjZS5zY3JvbGxIZWlnaHQsIGNlLm9mZnNldEhlaWdodCApIDogY2Uub2Zmc2V0SGVpZ2h0ICkgLQ0KCQkJCQkoIHBhcnNlSW50KCAkKCBjZSApLmNzcyggImJvcmRlclRvcFdpZHRoIiApLCAxMCApIHx8IDAgKSAtDQoJCQkJCSggcGFyc2VJbnQoICQoIGNlICkuY3NzKCAicGFkZGluZ0JvdHRvbSIgKSwgMTAgKSB8fCAwICkgLQ0KCQkJCQl0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3ANCgkJCV07DQoJCX0NCg0KCX0sDQoNCglfY29udmVydFBvc2l0aW9uVG86IGZ1bmN0aW9uKCBkLCBwb3MgKSB7DQoNCgkJaWYgKCAhcG9zICkgew0KCQkJcG9zID0gdGhpcy5wb3NpdGlvbjsNCgkJfQ0KCQl2YXIgbW9kID0gZCA9PT0gImFic29sdXRlIiA/IDEgOiAtMSwNCgkJCXNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgJiYNCgkJCQkhKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLmRvY3VtZW50WyAwIF0gJiYNCgkJCQkkLmNvbnRhaW5zKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdLCB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSA/DQoJCQkJCXRoaXMub2Zmc2V0UGFyZW50IDoNCgkJCQkJdGhpcy5zY3JvbGxQYXJlbnQsDQoJCQlzY3JvbGxJc1Jvb3ROb2RlID0gKCAvKGh0bWx8Ym9keSkvaSApLnRlc3QoIHNjcm9sbFsgMCBdLnRhZ05hbWUgKTsNCg0KCQlyZXR1cm4gew0KCQkJdG9wOiAoDQoNCgkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24NCgkJCQlwb3MudG9wCSsNCg0KCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudA0KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAqIG1vZCArDQoNCgkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQ0KCQkJCXRoaXMub2Zmc2V0LnBhcmVudC50b3AgKiBtb2QgLQ0KCQkJCSggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8NCgkJCQkJLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDoNCgkJCQkJKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkgKiBtb2QgKQ0KCQkJKSwNCgkJCWxlZnQ6ICgNCg0KCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbg0KCQkJCXBvcy5sZWZ0ICsNCg0KCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudA0KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgKiBtb2QgKw0KDQoJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikNCgkJCQl0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAqIG1vZAktDQoJCQkJKCAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPw0KCQkJCQktdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOg0KCQkJCQlzY3JvbGwuc2Nyb2xsTGVmdCgpICkgKiBtb2QgKQ0KCQkJKQ0KCQl9Ow0KDQoJfSwNCg0KCV9nZW5lcmF0ZVBvc2l0aW9uOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoNCgkJdmFyIHRvcCwgbGVmdCwNCgkJCW8gPSB0aGlzLm9wdGlvbnMsDQoJCQlwYWdlWCA9IGV2ZW50LnBhZ2VYLA0KCQkJcGFnZVkgPSBldmVudC5wYWdlWSwNCgkJCXNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgJiYNCgkJCQkhKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLmRvY3VtZW50WyAwIF0gJiYNCgkJCQkkLmNvbnRhaW5zKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdLCB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSA/DQoJCQkJCXRoaXMub2Zmc2V0UGFyZW50IDoNCgkJCQkJdGhpcy5zY3JvbGxQYXJlbnQsDQoJCQkJc2Nyb2xsSXNSb290Tm9kZSA9ICggLyhodG1sfGJvZHkpL2kgKS50ZXN0KCBzY3JvbGxbIDAgXS50YWdOYW1lICk7DQoNCgkJLy8gVGhpcyBpcyBhbm90aGVyIHZlcnkgd2VpcmQgc3BlY2lhbCBjYXNlIHRoYXQgb25seSBoYXBwZW5zIGZvciByZWxhdGl2ZSBlbGVtZW50czoNCgkJLy8gMS4gSWYgdGhlIGNzcyBwb3NpdGlvbiBpcyByZWxhdGl2ZQ0KCQkvLyAyLiBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXMgdGhlIGRvY3VtZW50IG9yIHNpbWlsYXIgdG8gdGhlIG9mZnNldCBwYXJlbnQNCgkJLy8gd2UgaGF2ZSB0byByZWZyZXNoIHRoZSByZWxhdGl2ZSBvZmZzZXQgZHVyaW5nIHRoZSBzY3JvbGwgc28gdGhlcmUgYXJlIG5vIGp1bXBzDQoJCWlmICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gInJlbGF0aXZlIiAmJiAhKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLmRvY3VtZW50WyAwIF0gJiYNCgkJCQl0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSB7DQoJCQl0aGlzLm9mZnNldC5yZWxhdGl2ZSA9IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCk7DQoJCX0NCg0KCQkvKg0KCQkgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtDQoJCSAqIENvbnN0cmFpbiB0aGUgcG9zaXRpb24gdG8gYSBtaXggb2YgZ3JpZCwgY29udGFpbm1lbnQuDQoJCSAqLw0KDQoJCWlmICggdGhpcy5vcmlnaW5hbFBvc2l0aW9uICkgeyAvL0lmIHdlIGFyZSBub3QgZHJhZ2dpbmcgeWV0LCB3ZSB3b24ndCBjaGVjayBmb3Igb3B0aW9ucw0KDQoJCQlpZiAoIHRoaXMuY29udGFpbm1lbnQgKSB7DQoJCQkJaWYgKCBldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPCB0aGlzLmNvbnRhaW5tZW50WyAwIF0gKSB7DQoJCQkJCXBhZ2VYID0gdGhpcy5jb250YWlubWVudFsgMCBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDsNCgkJCQl9DQoJCQkJaWYgKCBldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8IHRoaXMuY29udGFpbm1lbnRbIDEgXSApIHsNCgkJCQkJcGFnZVkgPSB0aGlzLmNvbnRhaW5tZW50WyAxIF0gKyB0aGlzLm9mZnNldC5jbGljay50b3A7DQoJCQkJfQ0KCQkJCWlmICggZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gdGhpcy5jb250YWlubWVudFsgMiBdICkgew0KCQkJCQlwYWdlWCA9IHRoaXMuY29udGFpbm1lbnRbIDIgXSArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7DQoJCQkJfQ0KCQkJCWlmICggZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPiB0aGlzLmNvbnRhaW5tZW50WyAzIF0gKSB7DQoJCQkJCXBhZ2VZID0gdGhpcy5jb250YWlubWVudFsgMyBdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wOw0KCQkJCX0NCgkJCX0NCg0KCQkJaWYgKCBvLmdyaWQgKSB7DQoJCQkJdG9wID0gdGhpcy5vcmlnaW5hbFBhZ2VZICsgTWF0aC5yb3VuZCggKCBwYWdlWSAtIHRoaXMub3JpZ2luYWxQYWdlWSApIC8NCgkJCQkJby5ncmlkWyAxIF0gKSAqIG8uZ3JpZFsgMSBdOw0KCQkJCXBhZ2VZID0gdGhpcy5jb250YWlubWVudCA/DQoJCQkJCSggKCB0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPj0gdGhpcy5jb250YWlubWVudFsgMSBdICYmDQoJCQkJCQl0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPD0gdGhpcy5jb250YWlubWVudFsgMyBdICkgPw0KCQkJCQkJCXRvcCA6DQoJCQkJCQkJKCAoIHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSB0aGlzLmNvbnRhaW5tZW50WyAxIF0gKSA/DQoJCQkJCQkJCXRvcCAtIG8uZ3JpZFsgMSBdIDogdG9wICsgby5ncmlkWyAxIF0gKSApIDoNCgkJCQkJCQkJdG9wOw0KDQoJCQkJbGVmdCA9IHRoaXMub3JpZ2luYWxQYWdlWCArIE1hdGgucm91bmQoICggcGFnZVggLSB0aGlzLm9yaWdpbmFsUGFnZVggKSAvDQoJCQkJCW8uZ3JpZFsgMCBdICkgKiBvLmdyaWRbIDAgXTsNCgkJCQlwYWdlWCA9IHRoaXMuY29udGFpbm1lbnQgPw0KCQkJCQkoICggbGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gdGhpcy5jb250YWlubWVudFsgMCBdICYmDQoJCQkJCQlsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8PSB0aGlzLmNvbnRhaW5tZW50WyAyIF0gKSA/DQoJCQkJCQkJbGVmdCA6DQoJCQkJCQkJKCAoIGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IHRoaXMuY29udGFpbm1lbnRbIDAgXSApID8NCgkJCQkJCQkJbGVmdCAtIG8uZ3JpZFsgMCBdIDogbGVmdCArIG8uZ3JpZFsgMCBdICkgKSA6DQoJCQkJCQkJCWxlZnQ7DQoJCQl9DQoNCgkJfQ0KDQoJCXJldHVybiB7DQoJCQl0b3A6ICgNCg0KCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbg0KCQkJCXBhZ2VZIC0NCg0KCQkJCS8vIENsaWNrIG9mZnNldCAocmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQpDQoJCQkJdGhpcy5vZmZzZXQuY2xpY2sudG9wIC0NCg0KCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudA0KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAtDQoNCgkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQ0KCQkJCXRoaXMub2Zmc2V0LnBhcmVudC50b3AgKw0KCQkJCSggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8NCgkJCQkJLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDoNCgkJCQkJKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkgKQ0KCQkJKSwNCgkJCWxlZnQ6ICgNCg0KCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbg0KCQkJCXBhZ2VYIC0NCg0KCQkJCS8vIENsaWNrIG9mZnNldCAocmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQpDQoJCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCAtDQoNCgkJCQkvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnQNCgkJCQl0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0IC0NCg0KCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpDQoJCQkJdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKw0KCQkJCSggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8NCgkJCQkJLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6DQoJCQkJCXNjcm9sbElzUm9vdE5vZGUgPyAwIDogc2Nyb2xsLnNjcm9sbExlZnQoKSApICkNCgkJCSkNCgkJfTsNCg0KCX0sDQoNCglfcmVhcnJhbmdlOiBmdW5jdGlvbiggZXZlbnQsIGksIGEsIGhhcmRSZWZyZXNoICkgew0KDQoJCWEgPyBhWyAwIF0uYXBwZW5kQ2hpbGQoIHRoaXMucGxhY2Vob2xkZXJbIDAgXSApIDoNCgkJCWkuaXRlbVsgMCBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0sDQoJCQkJKCB0aGlzLmRpcmVjdGlvbiA9PT0gImRvd24iID8gaS5pdGVtWyAwIF0gOiBpLml0ZW1bIDAgXS5uZXh0U2libGluZyApICk7DQoNCgkJLy9WYXJpb3VzIHRoaW5ncyBkb25lIGhlcmUgdG8gaW1wcm92ZSB0aGUgcGVyZm9ybWFuY2U6DQoJCS8vIDEuIHdlIGNyZWF0ZSBhIHNldFRpbWVvdXQsIHRoYXQgY2FsbHMgcmVmcmVzaFBvc2l0aW9ucw0KCQkvLyAyLiBvbiB0aGUgaW5zdGFuY2UsIHdlIGhhdmUgYSBjb3VudGVyIHZhcmlhYmxlLCB0aGF0IGdldCdzIGhpZ2hlciBhZnRlciBldmVyeSBhcHBlbmQNCgkJLy8gMy4gb24gdGhlIGxvY2FsIHNjb3BlLCB3ZSBjb3B5IHRoZSBjb3VudGVyIHZhcmlhYmxlLCBhbmQgY2hlY2sgaW4gdGhlIHRpbWVvdXQsDQoJCS8vIGlmIGl0J3Mgc3RpbGwgdGhlIHNhbWUNCgkJLy8gNC4gdGhpcyBsZXRzIG9ubHkgdGhlIGxhc3QgYWRkaXRpb24gdG8gdGhlIHRpbWVvdXQgc3RhY2sgdGhyb3VnaA0KCQl0aGlzLmNvdW50ZXIgPSB0aGlzLmNvdW50ZXIgPyArK3RoaXMuY291bnRlciA6IDE7DQoJCXZhciBjb3VudGVyID0gdGhpcy5jb3VudGVyOw0KDQoJCXRoaXMuX2RlbGF5KCBmdW5jdGlvbigpIHsNCgkJCWlmICggY291bnRlciA9PT0gdGhpcy5jb3VudGVyICkgew0KDQoJCQkJLy9QcmVjb21wdXRlIGFmdGVyIGVhY2ggRE9NIGluc2VydGlvbiwgTk9UIG9uIG1vdXNlbW92ZQ0KCQkJCXRoaXMucmVmcmVzaFBvc2l0aW9ucyggIWhhcmRSZWZyZXNoICk7DQoJCQl9DQoJCX0gKTsNCg0KCX0sDQoNCglfY2xlYXI6IGZ1bmN0aW9uKCBldmVudCwgbm9Qcm9wYWdhdGlvbiApIHsNCg0KCQl0aGlzLnJldmVydGluZyA9IGZhbHNlOw0KDQoJCS8vIFdlIGRlbGF5IGFsbCBldmVudHMgdGhhdCBoYXZlIHRvIGJlIHRyaWdnZXJlZCB0byBhZnRlciB0aGUgcG9pbnQgd2hlcmUgdGhlIHBsYWNlaG9sZGVyDQoJCS8vIGhhcyBiZWVuIHJlbW92ZWQgYW5kIGV2ZXJ5dGhpbmcgZWxzZSBub3JtYWxpemVkIGFnYWluDQoJCXZhciBpLA0KCQkJZGVsYXllZFRyaWdnZXJzID0gW107DQoNCgkJLy8gV2UgZmlyc3QgaGF2ZSB0byB1cGRhdGUgdGhlIGRvbSBwb3NpdGlvbiBvZiB0aGUgYWN0dWFsIGN1cnJlbnRJdGVtDQoJCS8vIE5vdGU6IGRvbid0IGRvIGl0IGlmIHRoZSBjdXJyZW50IGl0ZW0gaXMgYWxyZWFkeSByZW1vdmVkIChieSBhIHVzZXIpLCBvciBpdCBnZXRzDQoJCS8vIHJlYXBwZW5kZWQgKHNlZSAjNDA4OCkNCgkJaWYgKCAhdGhpcy5fbm9GaW5hbFNvcnQgJiYgdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5sZW5ndGggKSB7DQoJCQl0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSggdGhpcy5jdXJyZW50SXRlbSApOw0KCQl9DQoJCXRoaXMuX25vRmluYWxTb3J0ID0gbnVsbDsNCg0KCQlpZiAoIHRoaXMuaGVscGVyWyAwIF0gPT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSApIHsNCgkJCWZvciAoIGkgaW4gdGhpcy5fc3RvcmVkQ1NTICkgew0KCQkJCWlmICggdGhpcy5fc3RvcmVkQ1NTWyBpIF0gPT09ICJhdXRvIiB8fCB0aGlzLl9zdG9yZWRDU1NbIGkgXSA9PT0gInN0YXRpYyIgKSB7DQoJCQkJCXRoaXMuX3N0b3JlZENTU1sgaSBdID0gIiI7DQoJCQkJfQ0KCQkJfQ0KCQkJdGhpcy5jdXJyZW50SXRlbS5jc3MoIHRoaXMuX3N0b3JlZENTUyApOw0KCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMuY3VycmVudEl0ZW0sICJ1aS1zb3J0YWJsZS1oZWxwZXIiICk7DQoJCX0gZWxzZSB7DQoJCQl0aGlzLmN1cnJlbnRJdGVtLnNob3coKTsNCgkJfQ0KDQoJCWlmICggdGhpcy5mcm9tT3V0c2lkZSAmJiAhbm9Qcm9wYWdhdGlvbiApIHsNCgkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJdGhpcy5fdHJpZ2dlciggInJlY2VpdmUiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzLmZyb21PdXRzaWRlICkgKTsNCgkJCX0gKTsNCgkJfQ0KCQlpZiAoICggdGhpcy5mcm9tT3V0c2lkZSB8fA0KCQkJCXRoaXMuZG9tUG9zaXRpb24ucHJldiAhPT0NCgkJCQl0aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoICIudWktc29ydGFibGUtaGVscGVyIiApWyAwIF0gfHwNCgkJCQl0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCAhPT0gdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVsgMCBdICkgJiYgIW5vUHJvcGFnYXRpb24gKSB7DQoNCgkJCS8vIFRyaWdnZXIgdXBkYXRlIGNhbGxiYWNrIGlmIHRoZSBET00gcG9zaXRpb24gaGFzIGNoYW5nZWQNCgkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJdGhpcy5fdHJpZ2dlciggInVwZGF0ZSIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApOw0KCQkJfSApOw0KCQl9DQoNCgkJLy8gQ2hlY2sgaWYgdGhlIGl0ZW1zIENvbnRhaW5lciBoYXMgQ2hhbmdlZCBhbmQgdHJpZ2dlciBhcHByb3ByaWF0ZQ0KCQkvLyBldmVudHMuDQoJCWlmICggdGhpcyAhPT0gdGhpcy5jdXJyZW50Q29udGFpbmVyICkgew0KCQkJaWYgKCAhbm9Qcm9wYWdhdGlvbiApIHsNCgkJCQlkZWxheWVkVHJpZ2dlcnMucHVzaCggZnVuY3Rpb24oIGV2ZW50ICkgew0KCQkJCQl0aGlzLl90cmlnZ2VyKCAicmVtb3ZlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7DQoJCQkJfSApOw0KCQkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCAoIGZ1bmN0aW9uKCBjICkgew0KCQkJCQlyZXR1cm4gZnVuY3Rpb24oIGV2ZW50ICkgew0KCQkJCQkJYy5fdHJpZ2dlciggInJlY2VpdmUiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTsNCgkJCQkJfTsNCgkJCQl9ICkuY2FsbCggdGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyICkgKTsNCgkJCQlkZWxheWVkVHJpZ2dlcnMucHVzaCggKCBmdW5jdGlvbiggYyApIHsNCgkJCQkJcmV0dXJuIGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQkJCWMuX3RyaWdnZXIoICJ1cGRhdGUiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTsNCgkJCQkJfTsNCgkJCQl9ICkuY2FsbCggdGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyICkgKTsNCgkJCX0NCgkJfQ0KDQoJCS8vUG9zdCBldmVudHMgdG8gY29udGFpbmVycw0KCQlmdW5jdGlvbiBkZWxheUV2ZW50KCB0eXBlLCBpbnN0YW5jZSwgY29udGFpbmVyICkgew0KCQkJcmV0dXJuIGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQljb250YWluZXIuX3RyaWdnZXIoIHR5cGUsIGV2ZW50LCBpbnN0YW5jZS5fdWlIYXNoKCBpbnN0YW5jZSApICk7DQoJCQl9Ow0KCQl9DQoJCWZvciAoIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7DQoJCQlpZiAoICFub1Byb3BhZ2F0aW9uICkgew0KCQkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBkZWxheUV2ZW50KCAiZGVhY3RpdmF0ZSIsIHRoaXMsIHRoaXMuY29udGFpbmVyc1sgaSBdICkgKTsNCgkJCX0NCgkJCWlmICggdGhpcy5jb250YWluZXJzWyBpIF0uY29udGFpbmVyQ2FjaGUub3ZlciApIHsNCgkJCQlkZWxheWVkVHJpZ2dlcnMucHVzaCggZGVsYXlFdmVudCggIm91dCIsIHRoaXMsIHRoaXMuY29udGFpbmVyc1sgaSBdICkgKTsNCgkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDsNCgkJCX0NCgkJfQ0KDQoJCS8vRG8gd2hhdCB3YXMgb3JpZ2luYWxseSBpbiBwbHVnaW5zDQoJCWlmICggdGhpcy5zdG9yZWRDdXJzb3IgKSB7DQoJCQl0aGlzLmRvY3VtZW50LmZpbmQoICJib2R5IiApLmNzcyggImN1cnNvciIsIHRoaXMuc3RvcmVkQ3Vyc29yICk7DQoJCQl0aGlzLnN0b3JlZFN0eWxlc2hlZXQucmVtb3ZlKCk7DQoJCX0NCgkJaWYgKCB0aGlzLl9zdG9yZWRPcGFjaXR5ICkgew0KCQkJdGhpcy5oZWxwZXIuY3NzKCAib3BhY2l0eSIsIHRoaXMuX3N0b3JlZE9wYWNpdHkgKTsNCgkJfQ0KCQlpZiAoIHRoaXMuX3N0b3JlZFpJbmRleCApIHsNCgkJCXRoaXMuaGVscGVyLmNzcyggInpJbmRleCIsIHRoaXMuX3N0b3JlZFpJbmRleCA9PT0gImF1dG8iID8gIiIgOiB0aGlzLl9zdG9yZWRaSW5kZXggKTsNCgkJfQ0KDQoJCXRoaXMuZHJhZ2dpbmcgPSBmYWxzZTsNCg0KCQlpZiAoICFub1Byb3BhZ2F0aW9uICkgew0KCQkJdGhpcy5fdHJpZ2dlciggImJlZm9yZVN0b3AiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkgKTsNCgkJfQ0KDQoJCS8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSwNCgkJLy8gaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhDQoJCXRoaXMucGxhY2Vob2xkZXJbIDAgXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0gKTsNCg0KCQlpZiAoICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwgKSB7DQoJCQlpZiAoIHRoaXMuaGVscGVyWyAwIF0gIT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSApIHsNCgkJCQl0aGlzLmhlbHBlci5yZW1vdmUoKTsNCgkJCX0NCgkJCXRoaXMuaGVscGVyID0gbnVsbDsNCgkJfQ0KDQoJCWlmICggIW5vUHJvcGFnYXRpb24gKSB7DQoJCQlmb3IgKCBpID0gMDsgaSA8IGRlbGF5ZWRUcmlnZ2Vycy5sZW5ndGg7IGkrKyApIHsNCg0KCQkJCS8vIFRyaWdnZXIgYWxsIGRlbGF5ZWQgZXZlbnRzDQoJCQkJZGVsYXllZFRyaWdnZXJzWyBpIF0uY2FsbCggdGhpcywgZXZlbnQgKTsNCgkJCX0NCgkJCXRoaXMuX3RyaWdnZXIoICJzdG9wIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7DQoJCX0NCg0KCQl0aGlzLmZyb21PdXRzaWRlID0gZmFsc2U7DQoJCXJldHVybiAhdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsOw0KDQoJfSwNCg0KCV90cmlnZ2VyOiBmdW5jdGlvbigpIHsNCgkJaWYgKCAkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApID09PSBmYWxzZSApIHsNCgkJCXRoaXMuY2FuY2VsKCk7DQoJCX0NCgl9LA0KDQoJX3VpSGFzaDogZnVuY3Rpb24oIF9pbnN0ICkgew0KCQl2YXIgaW5zdCA9IF9pbnN0IHx8IHRoaXM7DQoJCXJldHVybiB7DQoJCQloZWxwZXI6IGluc3QuaGVscGVyLA0KCQkJcGxhY2Vob2xkZXI6IGluc3QucGxhY2Vob2xkZXIgfHwgJCggW10gKSwNCgkJCXBvc2l0aW9uOiBpbnN0LnBvc2l0aW9uLA0KCQkJb3JpZ2luYWxQb3NpdGlvbjogaW5zdC5vcmlnaW5hbFBvc2l0aW9uLA0KCQkJb2Zmc2V0OiBpbnN0LnBvc2l0aW9uQWJzLA0KCQkJaXRlbTogaW5zdC5jdXJyZW50SXRlbSwNCgkJCXNlbmRlcjogX2luc3QgPyBfaW5zdC5lbGVtZW50IDogbnVsbA0KCQl9Ow0KCX0NCg0KfSApOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIENvbnRyb2xncm91cCAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogQ29udHJvbGdyb3VwDQovLz4+Z3JvdXA6IFdpZGdldHMNCi8vPj5kZXNjcmlwdGlvbjogVmlzdWFsbHkgZ3JvdXBzIGZvcm0gY29udHJvbCB3aWRnZXRzDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY29udHJvbGdyb3VwLw0KLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL2NvbnRyb2xncm91cC8NCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9jb3JlLmNzcw0KLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL2NvbnRyb2xncm91cC5jc3MNCi8vPj5jc3MudGhlbWU6IC4uLy4uL3RoZW1lcy9iYXNlL3RoZW1lLmNzcw0KDQoNCnZhciBjb250cm9sZ3JvdXBDb3JuZXJSZWdleCA9IC91aS1jb3JuZXItKFthLXpdKXsyLDZ9L2c7DQoNCnZhciB3aWRnZXRzQ29udHJvbGdyb3VwID0gJC53aWRnZXQoICJ1aS5jb250cm9sZ3JvdXAiLCB7DQoJdmVyc2lvbjogIjEuMTIuMSIsDQoJZGVmYXVsdEVsZW1lbnQ6ICI8ZGl2PiIsDQoJb3B0aW9uczogew0KCQlkaXJlY3Rpb246ICJob3Jpem9udGFsIiwNCgkJZGlzYWJsZWQ6IG51bGwsDQoJCW9ubHlWaXNpYmxlOiB0cnVlLA0KCQlpdGVtczogew0KCQkJImJ1dHRvbiI6ICJpbnB1dFt0eXBlPWJ1dHRvbl0sIGlucHV0W3R5cGU9c3VibWl0XSwgaW5wdXRbdHlwZT1yZXNldF0sIGJ1dHRvbiwgYSIsDQoJCQkiY29udHJvbGdyb3VwTGFiZWwiOiAiLnVpLWNvbnRyb2xncm91cC1sYWJlbCIsDQoJCQkiY2hlY2tib3hyYWRpbyI6ICJpbnB1dFt0eXBlPSdjaGVja2JveCddLCBpbnB1dFt0eXBlPSdyYWRpbyddIiwNCgkJCSJzZWxlY3RtZW51IjogInNlbGVjdCIsDQoJCQkic3Bpbm5lciI6ICIudWktc3Bpbm5lci1pbnB1dCINCgkJfQ0KCX0sDQoNCglfY3JlYXRlOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fZW5oYW5jZSgpOw0KCX0sDQoNCgkvLyBUbyBzdXBwb3J0IHRoZSBlbmhhbmNlZCBvcHRpb24gaW4galF1ZXJ5IE1vYmlsZSwgd2UgaXNvbGF0ZSBET00gbWFuaXB1bGF0aW9uDQoJX2VuaGFuY2U6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLmVsZW1lbnQuYXR0ciggInJvbGUiLCAidG9vbGJhciIgKTsNCgkJdGhpcy5yZWZyZXNoKCk7DQoJfSwNCg0KCV9kZXN0cm95OiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fY2FsbENoaWxkTWV0aG9kKCAiZGVzdHJveSIgKTsNCgkJdGhpcy5jaGlsZFdpZGdldHMucmVtb3ZlRGF0YSggInVpLWNvbnRyb2xncm91cC1kYXRhIiApOw0KCQl0aGlzLmVsZW1lbnQucmVtb3ZlQXR0ciggInJvbGUiICk7DQoJCWlmICggdGhpcy5vcHRpb25zLml0ZW1zLmNvbnRyb2xncm91cExhYmVsICkgew0KCQkJdGhpcy5lbGVtZW50DQoJCQkJLmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcy5jb250cm9sZ3JvdXBMYWJlbCApDQoJCQkJLmZpbmQoICIudWktY29udHJvbGdyb3VwLWxhYmVsLWNvbnRlbnRzIiApDQoJCQkJLmNvbnRlbnRzKCkudW53cmFwKCk7DQoJCX0NCgl9LA0KDQoJX2luaXRXaWRnZXRzOiBmdW5jdGlvbigpIHsNCgkJdmFyIHRoYXQgPSB0aGlzLA0KCQkJY2hpbGRXaWRnZXRzID0gW107DQoNCgkJLy8gRmlyc3Qgd2UgaXRlcmF0ZSBvdmVyIGVhY2ggb2YgdGhlIGl0ZW1zIG9wdGlvbnMNCgkJJC5lYWNoKCB0aGlzLm9wdGlvbnMuaXRlbXMsIGZ1bmN0aW9uKCB3aWRnZXQsIHNlbGVjdG9yICkgew0KCQkJdmFyIGxhYmVsczsNCgkJCXZhciBvcHRpb25zID0ge307DQoNCgkJCS8vIE1ha2Ugc3VyZSB0aGUgd2lkZ2V0IGhhcyBhIHNlbGVjdG9yIHNldA0KCQkJaWYgKCAhc2VsZWN0b3IgKSB7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQlpZiAoIHdpZGdldCA9PT0gImNvbnRyb2xncm91cExhYmVsIiApIHsNCgkJCQlsYWJlbHMgPSB0aGF0LmVsZW1lbnQuZmluZCggc2VsZWN0b3IgKTsNCgkJCQlsYWJlbHMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQkJCXZhciBlbGVtZW50ID0gJCggdGhpcyApOw0KDQoJCQkJCWlmICggZWxlbWVudC5jaGlsZHJlbiggIi51aS1jb250cm9sZ3JvdXAtbGFiZWwtY29udGVudHMiICkubGVuZ3RoICkgew0KCQkJCQkJcmV0dXJuOw0KCQkJCQl9DQoJCQkJCWVsZW1lbnQuY29udGVudHMoKQ0KCQkJCQkJLndyYXBBbGwoICI8c3BhbiBjbGFzcz0ndWktY29udHJvbGdyb3VwLWxhYmVsLWNvbnRlbnRzJz48L3NwYW4+IiApOw0KCQkJCX0gKTsNCgkJCQl0aGF0Ll9hZGRDbGFzcyggbGFiZWxzLCBudWxsLCAidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLXN0YXRlLWRlZmF1bHQiICk7DQoJCQkJY2hpbGRXaWRnZXRzID0gY2hpbGRXaWRnZXRzLmNvbmNhdCggbGFiZWxzLmdldCgpICk7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQkvLyBNYWtlIHN1cmUgdGhlIHdpZGdldCBhY3R1YWxseSBleGlzdHMNCgkJCWlmICggISQuZm5bIHdpZGdldCBdICkgew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJLy8gV2UgYXNzdW1lIGV2ZXJ5dGhpbmcgaXMgaW4gdGhlIG1pZGRsZSB0byBzdGFydCBiZWNhdXNlIHdlIGNhbid0IGRldGVybWluZQ0KCQkJLy8gZmlyc3QgLyBsYXN0IGVsZW1lbnRzIHVudGlsIGFsbCBlbmhhbmNtZW50cyBhcmUgZG9uZS4NCgkJCWlmICggdGhhdFsgIl8iICsgd2lkZ2V0ICsgIk9wdGlvbnMiIF0gKSB7DQoJCQkJb3B0aW9ucyA9IHRoYXRbICJfIiArIHdpZGdldCArICJPcHRpb25zIiBdKCAibWlkZGxlIiApOw0KCQkJfSBlbHNlIHsNCgkJCQlvcHRpb25zID0geyBjbGFzc2VzOiB7fSB9Ow0KCQkJfQ0KDQoJCQkvLyBGaW5kIGluc3RhbmNlcyBvZiB0aGlzIHdpZGdldCBpbnNpZGUgY29udHJvbGdyb3VwIGFuZCBpbml0IHRoZW0NCgkJCXRoYXQuZWxlbWVudA0KCQkJCS5maW5kKCBzZWxlY3RvciApDQoJCQkJLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJCQl2YXIgZWxlbWVudCA9ICQoIHRoaXMgKTsNCgkJCQkJdmFyIGluc3RhbmNlID0gZWxlbWVudFsgd2lkZ2V0IF0oICJpbnN0YW5jZSIgKTsNCg0KCQkJCQkvLyBXZSBuZWVkIHRvIGNsb25lIHRoZSBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoaXMgdHlwZSBvZiB3aWRnZXQgdG8gYXZvaWQNCgkJCQkJLy8gcG9sbHV0aW5nIHRoZSB2YXJpYWJsZSBvcHRpb25zIHdoaWNoIGhhcyBhIHdpZGVyIHNjb3BlIHRoYW4gYSBzaW5nbGUgd2lkZ2V0Lg0KCQkJCQl2YXIgaW5zdGFuY2VPcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApOw0KDQoJCQkJCS8vIElmIHRoZSBidXR0b24gaXMgdGhlIGNoaWxkIG9mIGEgc3Bpbm5lciBpZ25vcmUgaXQNCgkJCQkJLy8gVE9ETzogRmluZCBhIG1vcmUgZ2VuZXJpYyBzb2x1dGlvbg0KCQkJCQlpZiAoIHdpZGdldCA9PT0gImJ1dHRvbiIgJiYgZWxlbWVudC5wYXJlbnQoICIudWktc3Bpbm5lciIgKS5sZW5ndGggKSB7DQoJCQkJCQlyZXR1cm47DQoJCQkJCX0NCg0KCQkJCQkvLyBDcmVhdGUgdGhlIHdpZGdldCBpZiBpdCBkb2Vzbid0IGV4aXN0DQoJCQkJCWlmICggIWluc3RhbmNlICkgew0KCQkJCQkJaW5zdGFuY2UgPSBlbGVtZW50WyB3aWRnZXQgXSgpWyB3aWRnZXQgXSggImluc3RhbmNlIiApOw0KCQkJCQl9DQoJCQkJCWlmICggaW5zdGFuY2UgKSB7DQoJCQkJCQlpbnN0YW5jZU9wdGlvbnMuY2xhc3NlcyA9DQoJCQkJCQkJdGhhdC5fcmVzb2x2ZUNsYXNzZXNWYWx1ZXMoIGluc3RhbmNlT3B0aW9ucy5jbGFzc2VzLCBpbnN0YW5jZSApOw0KCQkJCQl9DQoJCQkJCWVsZW1lbnRbIHdpZGdldCBdKCBpbnN0YW5jZU9wdGlvbnMgKTsNCg0KCQkJCQkvLyBTdG9yZSBhbiBpbnN0YW5jZSBvZiB0aGUgY29udHJvbGdyb3VwIHRvIGJlIGFibGUgdG8gcmVmZXJlbmNlDQoJCQkJCS8vIGZyb20gdGhlIG91dGVybW9zdCBlbGVtZW50IGZvciBjaGFuZ2luZyBvcHRpb25zIGFuZCByZWZyZXNoDQoJCQkJCXZhciB3aWRnZXRFbGVtZW50ID0gZWxlbWVudFsgd2lkZ2V0IF0oICJ3aWRnZXQiICk7DQoJCQkJCSQuZGF0YSggd2lkZ2V0RWxlbWVudFsgMCBdLCAidWktY29udHJvbGdyb3VwLWRhdGEiLA0KCQkJCQkJaW5zdGFuY2UgPyBpbnN0YW5jZSA6IGVsZW1lbnRbIHdpZGdldCBdKCAiaW5zdGFuY2UiICkgKTsNCg0KCQkJCQljaGlsZFdpZGdldHMucHVzaCggd2lkZ2V0RWxlbWVudFsgMCBdICk7DQoJCQkJfSApOw0KCQl9ICk7DQoNCgkJdGhpcy5jaGlsZFdpZGdldHMgPSAkKCAkLnVuaXF1ZSggY2hpbGRXaWRnZXRzICkgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMuY2hpbGRXaWRnZXRzLCAidWktY29udHJvbGdyb3VwLWl0ZW0iICk7DQoJfSwNCg0KCV9jYWxsQ2hpbGRNZXRob2Q6IGZ1bmN0aW9uKCBtZXRob2QgKSB7DQoJCXRoaXMuY2hpbGRXaWRnZXRzLmVhY2goIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGVsZW1lbnQgPSAkKCB0aGlzICksDQoJCQkJZGF0YSA9IGVsZW1lbnQuZGF0YSggInVpLWNvbnRyb2xncm91cC1kYXRhIiApOw0KCQkJaWYgKCBkYXRhICYmIGRhdGFbIG1ldGhvZCBdICkgew0KCQkJCWRhdGFbIG1ldGhvZCBdKCk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KDQoJX3VwZGF0ZUNvcm5lckNsYXNzOiBmdW5jdGlvbiggZWxlbWVudCwgcG9zaXRpb24gKSB7DQoJCXZhciByZW1vdmUgPSAidWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodCB1aS1jb3JuZXItYWxsIjsNCgkJdmFyIGFkZCA9IHRoaXMuX2J1aWxkU2ltcGxlT3B0aW9ucyggcG9zaXRpb24sICJsYWJlbCIgKS5jbGFzc2VzLmxhYmVsOw0KDQoJCXRoaXMuX3JlbW92ZUNsYXNzKCBlbGVtZW50LCBudWxsLCByZW1vdmUgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIGVsZW1lbnQsIG51bGwsIGFkZCApOw0KCX0sDQoNCglfYnVpbGRTaW1wbGVPcHRpb25zOiBmdW5jdGlvbiggcG9zaXRpb24sIGtleSApIHsNCgkJdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09ICJ2ZXJ0aWNhbCI7DQoJCXZhciByZXN1bHQgPSB7DQoJCQljbGFzc2VzOiB7fQ0KCQl9Ow0KCQlyZXN1bHQuY2xhc3Nlc1sga2V5IF0gPSB7DQoJCQkibWlkZGxlIjogIiIsDQoJCQkiZmlyc3QiOiAidWktY29ybmVyLSIgKyAoIGRpcmVjdGlvbiA/ICJ0b3AiIDogImxlZnQiICksDQoJCQkibGFzdCI6ICJ1aS1jb3JuZXItIiArICggZGlyZWN0aW9uID8gImJvdHRvbSIgOiAicmlnaHQiICksDQoJCQkib25seSI6ICJ1aS1jb3JuZXItYWxsIg0KCQl9WyBwb3NpdGlvbiBdOw0KDQoJCXJldHVybiByZXN1bHQ7DQoJfSwNCg0KCV9zcGlubmVyT3B0aW9uczogZnVuY3Rpb24oIHBvc2l0aW9uICkgew0KCQl2YXIgb3B0aW9ucyA9IHRoaXMuX2J1aWxkU2ltcGxlT3B0aW9ucyggcG9zaXRpb24sICJ1aS1zcGlubmVyIiApOw0KDQoJCW9wdGlvbnMuY2xhc3Nlc1sgInVpLXNwaW5uZXItdXAiIF0gPSAiIjsNCgkJb3B0aW9ucy5jbGFzc2VzWyAidWktc3Bpbm5lci1kb3duIiBdID0gIiI7DQoNCgkJcmV0dXJuIG9wdGlvbnM7DQoJfSwNCg0KCV9idXR0b25PcHRpb25zOiBmdW5jdGlvbiggcG9zaXRpb24gKSB7DQoJCXJldHVybiB0aGlzLl9idWlsZFNpbXBsZU9wdGlvbnMoIHBvc2l0aW9uLCAidWktYnV0dG9uIiApOw0KCX0sDQoNCglfY2hlY2tib3hyYWRpb09wdGlvbnM6IGZ1bmN0aW9uKCBwb3NpdGlvbiApIHsNCgkJcmV0dXJuIHRoaXMuX2J1aWxkU2ltcGxlT3B0aW9ucyggcG9zaXRpb24sICJ1aS1jaGVja2JveHJhZGlvLWxhYmVsIiApOw0KCX0sDQoNCglfc2VsZWN0bWVudU9wdGlvbnM6IGZ1bmN0aW9uKCBwb3NpdGlvbiApIHsNCgkJdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09ICJ2ZXJ0aWNhbCI7DQoJCXJldHVybiB7DQoJCQl3aWR0aDogZGlyZWN0aW9uID8gImF1dG8iIDogZmFsc2UsDQoJCQljbGFzc2VzOiB7DQoJCQkJbWlkZGxlOiB7DQoJCQkJCSJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1vcGVuIjogIiIsDQoJCQkJCSJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1jbG9zZWQiOiAiIg0KCQkJCX0sDQoJCQkJZmlyc3Q6IHsNCgkJCQkJInVpLXNlbGVjdG1lbnUtYnV0dG9uLW9wZW4iOiAidWktY29ybmVyLSIgKyAoIGRpcmVjdGlvbiA/ICJ0b3AiIDogInRsIiApLA0KCQkJCQkidWktc2VsZWN0bWVudS1idXR0b24tY2xvc2VkIjogInVpLWNvcm5lci0iICsgKCBkaXJlY3Rpb24gPyAidG9wIiA6ICJsZWZ0IiApDQoJCQkJfSwNCgkJCQlsYXN0OiB7DQoJCQkJCSJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1vcGVuIjogZGlyZWN0aW9uID8gIiIgOiAidWktY29ybmVyLXRyIiwNCgkJCQkJInVpLXNlbGVjdG1lbnUtYnV0dG9uLWNsb3NlZCI6ICJ1aS1jb3JuZXItIiArICggZGlyZWN0aW9uID8gImJvdHRvbSIgOiAicmlnaHQiICkNCgkJCQl9LA0KCQkJCW9ubHk6IHsNCgkJCQkJInVpLXNlbGVjdG1lbnUtYnV0dG9uLW9wZW4iOiAidWktY29ybmVyLXRvcCIsDQoJCQkJCSJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1jbG9zZWQiOiAidWktY29ybmVyLWFsbCINCgkJCQl9DQoNCgkJCX1bIHBvc2l0aW9uIF0NCgkJfTsNCgl9LA0KDQoJX3Jlc29sdmVDbGFzc2VzVmFsdWVzOiBmdW5jdGlvbiggY2xhc3NlcywgaW5zdGFuY2UgKSB7DQoJCXZhciByZXN1bHQgPSB7fTsNCgkJJC5lYWNoKCBjbGFzc2VzLCBmdW5jdGlvbigga2V5ICkgew0KCQkJdmFyIGN1cnJlbnQgPSBpbnN0YW5jZS5vcHRpb25zLmNsYXNzZXNbIGtleSBdIHx8ICIiOw0KCQkJY3VycmVudCA9ICQudHJpbSggY3VycmVudC5yZXBsYWNlKCBjb250cm9sZ3JvdXBDb3JuZXJSZWdleCwgIiIgKSApOw0KCQkJcmVzdWx0WyBrZXkgXSA9ICggY3VycmVudCArICIgIiArIGNsYXNzZXNbIGtleSBdICkucmVwbGFjZSggL1xzKy9nLCAiICIgKTsNCgkJfSApOw0KCQlyZXR1cm4gcmVzdWx0Ow0KCX0sDQoNCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsNCgkJaWYgKCBrZXkgPT09ICJkaXJlY3Rpb24iICkgew0KCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoICJ1aS1jb250cm9sZ3JvdXAtIiArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gKTsNCgkJfQ0KDQoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7DQoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgew0KCQkJdGhpcy5fY2FsbENoaWxkTWV0aG9kKCB2YWx1ZSA/ICJkaXNhYmxlIiA6ICJlbmFibGUiICk7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLnJlZnJlc2goKTsNCgl9LA0KDQoJcmVmcmVzaDogZnVuY3Rpb24oKSB7DQoJCXZhciBjaGlsZHJlbiwNCgkJCXRoYXQgPSB0aGlzOw0KDQoJCXRoaXMuX2FkZENsYXNzKCAidWktY29udHJvbGdyb3VwIHVpLWNvbnRyb2xncm91cC0iICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiApOw0KDQoJCWlmICggdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gImhvcml6b250YWwiICkgew0KCQkJdGhpcy5fYWRkQ2xhc3MoIG51bGwsICJ1aS1oZWxwZXItY2xlYXJmaXgiICk7DQoJCX0NCgkJdGhpcy5faW5pdFdpZGdldHMoKTsNCg0KCQljaGlsZHJlbiA9IHRoaXMuY2hpbGRXaWRnZXRzOw0KDQoJCS8vIFdlIGZpbHRlciBoZXJlIGJlY2F1c2Ugd2UgbmVlZCB0byB0cmFjayBhbGwgY2hpbGRXaWRnZXRzIG5vdCBqdXN0IHRoZSB2aXNpYmxlIG9uZXMNCgkJaWYgKCB0aGlzLm9wdGlvbnMub25seVZpc2libGUgKSB7DQoJCQljaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlciggIjp2aXNpYmxlIiApOw0KCQl9DQoNCgkJaWYgKCBjaGlsZHJlbi5sZW5ndGggKSB7DQoNCgkJCS8vIFdlIGRvIHRoaXMgbGFzdCBiZWNhdXNlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCBlbmhhbmNtZW50IGlzIGRvbmUNCgkJCS8vIGJlZm9yZSBkZXRlcm1pbmluZyBmaXJzdCBhbmQgbGFzdA0KCQkJJC5lYWNoKCBbICJmaXJzdCIsICJsYXN0IiBdLCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkgew0KCQkJCXZhciBpbnN0YW5jZSA9IGNoaWxkcmVuWyB2YWx1ZSBdKCkuZGF0YSggInVpLWNvbnRyb2xncm91cC1kYXRhIiApOw0KDQoJCQkJaWYgKCBpbnN0YW5jZSAmJiB0aGF0WyAiXyIgKyBpbnN0YW5jZS53aWRnZXROYW1lICsgIk9wdGlvbnMiIF0gKSB7DQoJCQkJCXZhciBvcHRpb25zID0gdGhhdFsgIl8iICsgaW5zdGFuY2Uud2lkZ2V0TmFtZSArICJPcHRpb25zIiBdKA0KCQkJCQkJY2hpbGRyZW4ubGVuZ3RoID09PSAxID8gIm9ubHkiIDogdmFsdWUNCgkJCQkJKTsNCgkJCQkJb3B0aW9ucy5jbGFzc2VzID0gdGhhdC5fcmVzb2x2ZUNsYXNzZXNWYWx1ZXMoIG9wdGlvbnMuY2xhc3NlcywgaW5zdGFuY2UgKTsNCgkJCQkJaW5zdGFuY2UuZWxlbWVudFsgaW5zdGFuY2Uud2lkZ2V0TmFtZSBdKCBvcHRpb25zICk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJdGhhdC5fdXBkYXRlQ29ybmVyQ2xhc3MoIGNoaWxkcmVuWyB2YWx1ZSBdKCksIHZhbHVlICk7DQoJCQkJfQ0KCQkJfSApOw0KDQoJCQkvLyBGaW5hbGx5IGNhbGwgdGhlIHJlZnJlc2ggbWV0aG9kIG9uIGVhY2ggb2YgdGhlIGNoaWxkIHdpZGdldHMuDQoJCQl0aGlzLl9jYWxsQ2hpbGRNZXRob2QoICJyZWZyZXNoIiApOw0KCQl9DQoJfQ0KfSApOw0KDQovKiENCiAqIGpRdWVyeSBVSSBDaGVja2JveHJhZGlvIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBDaGVja2JveHJhZGlvDQovLz4+Z3JvdXA6IFdpZGdldHMNCi8vPj5kZXNjcmlwdGlvbjogRW5oYW5jZXMgYSBmb3JtIHdpdGggbXVsdGlwbGUgdGhlbWVhYmxlIGNoZWNrYm94ZXMgb3IgcmFkaW8gYnV0dG9ucy4NCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jaGVja2JveHJhZGlvLw0KLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL2NoZWNrYm94cmFkaW8vDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY29yZS5jc3MNCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9idXR0b24uY3NzDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY2hlY2tib3hyYWRpby5jc3MNCi8vPj5jc3MudGhlbWU6IC4uLy4uL3RoZW1lcy9iYXNlL3RoZW1lLmNzcw0KDQoNCg0KJC53aWRnZXQoICJ1aS5jaGVja2JveHJhZGlvIiwgWyAkLnVpLmZvcm1SZXNldE1peGluLCB7DQoJdmVyc2lvbjogIjEuMTIuMSIsDQoJb3B0aW9uczogew0KCQlkaXNhYmxlZDogbnVsbCwNCgkJbGFiZWw6IG51bGwsDQoJCWljb246IHRydWUsDQoJCWNsYXNzZXM6IHsNCgkJCSJ1aS1jaGVja2JveHJhZGlvLWxhYmVsIjogInVpLWNvcm5lci1hbGwiLA0KCQkJInVpLWNoZWNrYm94cmFkaW8taWNvbiI6ICJ1aS1jb3JuZXItYWxsIg0KCQl9DQoJfSwNCg0KCV9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHsNCgkJdmFyIGRpc2FibGVkLCBsYWJlbHM7DQoJCXZhciB0aGF0ID0gdGhpczsNCgkJdmFyIG9wdGlvbnMgPSB0aGlzLl9zdXBlcigpIHx8IHt9Ow0KDQoJCS8vIFdlIHJlYWQgdGhlIHR5cGUgaGVyZSwgYmVjYXVzZSBpdCBtYWtlcyBtb3JlIHNlbnNlIHRvIHRocm93IGEgZWxlbWVudCB0eXBlIGVycm9yIGZpcnN0LA0KCQkvLyByYXRoZXIgdGhlbiB0aGUgZXJyb3IgZm9yIGxhY2sgb2YgYSBsYWJlbC4gT2Z0ZW4gaWYgaXRzIHRoZSB3cm9uZyB0eXBlLCBpdA0KCQkvLyB3b24ndCBoYXZlIGEgbGFiZWwgKGUuZy4gY2FsbGluZyBvbiBhIGRpdiwgYnRuLCBldGMpDQoJCXRoaXMuX3JlYWRUeXBlKCk7DQoNCgkJbGFiZWxzID0gdGhpcy5lbGVtZW50LmxhYmVscygpOw0KDQoJCS8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBsYWJlbHMsIHVzZSB0aGUgbGFzdCBvbmUNCgkJdGhpcy5sYWJlbCA9ICQoIGxhYmVsc1sgbGFiZWxzLmxlbmd0aCAtIDEgXSApOw0KCQlpZiAoICF0aGlzLmxhYmVsLmxlbmd0aCApIHsNCgkJCSQuZXJyb3IoICJObyBsYWJlbCBmb3VuZCBmb3IgY2hlY2tib3hyYWRpbyB3aWRnZXQiICk7DQoJCX0NCg0KCQl0aGlzLm9yaWdpbmFsTGFiZWwgPSAiIjsNCg0KCQkvLyBXZSBuZWVkIHRvIGdldCB0aGUgbGFiZWwgdGV4dCBidXQgdGhpcyBtYXkgYWxzbyBuZWVkIHRvIG1ha2Ugc3VyZSBpdCBkb2VzIG5vdCBjb250YWluIHRoZQ0KCQkvLyBpbnB1dCBpdHNlbGYuDQoJCXRoaXMubGFiZWwuY29udGVudHMoKS5ub3QoIHRoaXMuZWxlbWVudFsgMCBdICkuZWFjaCggZnVuY3Rpb24oKSB7DQoNCgkJCS8vIFRoZSBsYWJlbCBjb250ZW50cyBjb3VsZCBiZSB0ZXh0LCBodG1sLCBvciBhIG1peC4gV2UgY29uY2F0IGVhY2ggZWxlbWVudCB0byBnZXQgYQ0KCQkJLy8gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBsYWJlbCwgd2l0aG91dCB0aGUgaW5wdXQgYXMgcGFydCBvZiBpdC4NCgkJCXRoYXQub3JpZ2luYWxMYWJlbCArPSB0aGlzLm5vZGVUeXBlID09PSAzID8gJCggdGhpcyApLnRleHQoKSA6IHRoaXMub3V0ZXJIVE1MOw0KCQl9ICk7DQoNCgkJLy8gU2V0IHRoZSBsYWJlbCBvcHRpb24gaWYgd2UgZm91bmQgbGFiZWwgdGV4dA0KCQlpZiAoIHRoaXMub3JpZ2luYWxMYWJlbCApIHsNCgkJCW9wdGlvbnMubGFiZWwgPSB0aGlzLm9yaWdpbmFsTGFiZWw7DQoJCX0NCg0KCQlkaXNhYmxlZCA9IHRoaXMuZWxlbWVudFsgMCBdLmRpc2FibGVkOw0KCQlpZiAoIGRpc2FibGVkICE9IG51bGwgKSB7DQoJCQlvcHRpb25zLmRpc2FibGVkID0gZGlzYWJsZWQ7DQoJCX0NCgkJcmV0dXJuIG9wdGlvbnM7DQoJfSwNCg0KCV9jcmVhdGU6IGZ1bmN0aW9uKCkgew0KCQl2YXIgY2hlY2tlZCA9IHRoaXMuZWxlbWVudFsgMCBdLmNoZWNrZWQ7DQoNCgkJdGhpcy5fYmluZEZvcm1SZXNldEhhbmRsZXIoKTsNCg0KCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9PSBudWxsICkgew0KCQkJdGhpcy5vcHRpb25zLmRpc2FibGVkID0gdGhpcy5lbGVtZW50WyAwIF0uZGlzYWJsZWQ7DQoJCX0NCg0KCQl0aGlzLl9zZXRPcHRpb24oICJkaXNhYmxlZCIsIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApOw0KCQl0aGlzLl9hZGRDbGFzcyggInVpLWNoZWNrYm94cmFkaW8iLCAidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiApOw0KCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5sYWJlbCwgInVpLWNoZWNrYm94cmFkaW8tbGFiZWwiLCAidWktYnV0dG9uIHVpLXdpZGdldCIgKTsNCg0KCQlpZiAoIHRoaXMudHlwZSA9PT0gInJhZGlvIiApIHsNCgkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmxhYmVsLCAidWktY2hlY2tib3hyYWRpby1yYWRpby1sYWJlbCIgKTsNCgkJfQ0KDQoJCWlmICggdGhpcy5vcHRpb25zLmxhYmVsICYmIHRoaXMub3B0aW9ucy5sYWJlbCAhPT0gdGhpcy5vcmlnaW5hbExhYmVsICkgew0KCQkJdGhpcy5fdXBkYXRlTGFiZWwoKTsNCgkJfSBlbHNlIGlmICggdGhpcy5vcmlnaW5hbExhYmVsICkgew0KCQkJdGhpcy5vcHRpb25zLmxhYmVsID0gdGhpcy5vcmlnaW5hbExhYmVsOw0KCQl9DQoNCgkJdGhpcy5fZW5oYW5jZSgpOw0KDQoJCWlmICggY2hlY2tlZCApIHsNCgkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmxhYmVsLCAidWktY2hlY2tib3hyYWRpby1jaGVja2VkIiwgInVpLXN0YXRlLWFjdGl2ZSIgKTsNCgkJCWlmICggdGhpcy5pY29uICkgew0KCQkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmljb24sIG51bGwsICJ1aS1zdGF0ZS1ob3ZlciIgKTsNCgkJCX0NCgkJfQ0KDQoJCXRoaXMuX29uKCB7DQoJCQljaGFuZ2U6ICJfdG9nZ2xlQ2xhc3NlcyIsDQoJCQlmb2N1czogZnVuY3Rpb24oKSB7DQoJCQkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMubGFiZWwsIG51bGwsICJ1aS1zdGF0ZS1mb2N1cyB1aS12aXN1YWwtZm9jdXMiICk7DQoJCQl9LA0KCQkJYmx1cjogZnVuY3Rpb24oKSB7DQoJCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMubGFiZWwsIG51bGwsICJ1aS1zdGF0ZS1mb2N1cyB1aS12aXN1YWwtZm9jdXMiICk7DQoJCQl9DQoJCX0gKTsNCgl9LA0KDQoJX3JlYWRUeXBlOiBmdW5jdGlvbigpIHsNCgkJdmFyIG5vZGVOYW1lID0gdGhpcy5lbGVtZW50WyAwIF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCgkJdGhpcy50eXBlID0gdGhpcy5lbGVtZW50WyAwIF0udHlwZTsNCgkJaWYgKCBub2RlTmFtZSAhPT0gImlucHV0IiB8fCAhL3JhZGlvfGNoZWNrYm94Ly50ZXN0KCB0aGlzLnR5cGUgKSApIHsNCgkJCSQuZXJyb3IoICJDYW4ndCBjcmVhdGUgY2hlY2tib3hyYWRpbyBvbiBlbGVtZW50Lm5vZGVOYW1lPSIgKyBub2RlTmFtZSArDQoJCQkJIiBhbmQgZWxlbWVudC50eXBlPSIgKyB0aGlzLnR5cGUgKTsNCgkJfQ0KCX0sDQoNCgkvLyBTdXBwb3J0IGpRdWVyeSBNb2JpbGUgZW5oYW5jZWQgb3B0aW9uDQoJX2VuaGFuY2U6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLl91cGRhdGVJY29uKCB0aGlzLmVsZW1lbnRbIDAgXS5jaGVja2VkICk7DQoJfSwNCg0KCXdpZGdldDogZnVuY3Rpb24oKSB7DQoJCXJldHVybiB0aGlzLmxhYmVsOw0KCX0sDQoNCglfZ2V0UmFkaW9Hcm91cDogZnVuY3Rpb24oKSB7DQoJCXZhciBncm91cDsNCgkJdmFyIG5hbWUgPSB0aGlzLmVsZW1lbnRbIDAgXS5uYW1lOw0KCQl2YXIgbmFtZVNlbGVjdG9yID0gImlucHV0W25hbWU9JyIgKyAkLnVpLmVzY2FwZVNlbGVjdG9yKCBuYW1lICkgKyAiJ10iOw0KDQoJCWlmICggIW5hbWUgKSB7DQoJCQlyZXR1cm4gJCggW10gKTsNCgkJfQ0KDQoJCWlmICggdGhpcy5mb3JtLmxlbmd0aCApIHsNCgkJCWdyb3VwID0gJCggdGhpcy5mb3JtWyAwIF0uZWxlbWVudHMgKS5maWx0ZXIoIG5hbWVTZWxlY3RvciApOw0KCQl9IGVsc2Ugew0KDQoJCQkvLyBOb3QgaW5zaWRlIGEgZm9ybSwgY2hlY2sgYWxsIGlucHV0cyB0aGF0IGFsc28gYXJlIG5vdCBpbnNpZGUgYSBmb3JtDQoJCQlncm91cCA9ICQoIG5hbWVTZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7DQoJCQkJcmV0dXJuICQoIHRoaXMgKS5mb3JtKCkubGVuZ3RoID09PSAwOw0KCQkJfSApOw0KCQl9DQoNCgkJcmV0dXJuIGdyb3VwLm5vdCggdGhpcy5lbGVtZW50ICk7DQoJfSwNCg0KCV90b2dnbGVDbGFzc2VzOiBmdW5jdGlvbigpIHsNCgkJdmFyIGNoZWNrZWQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jaGVja2VkOw0KCQl0aGlzLl90b2dnbGVDbGFzcyggdGhpcy5sYWJlbCwgInVpLWNoZWNrYm94cmFkaW8tY2hlY2tlZCIsICJ1aS1zdGF0ZS1hY3RpdmUiLCBjaGVja2VkICk7DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuaWNvbiAmJiB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgKSB7DQoJCQl0aGlzLl90b2dnbGVDbGFzcyggdGhpcy5pY29uLCBudWxsLCAidWktaWNvbi1jaGVjayB1aS1zdGF0ZS1jaGVja2VkIiwgY2hlY2tlZCApDQoJCQkJLl90b2dnbGVDbGFzcyggdGhpcy5pY29uLCBudWxsLCAidWktaWNvbi1ibGFuayIsICFjaGVja2VkICk7DQoJCX0NCg0KCQlpZiAoIHRoaXMudHlwZSA9PT0gInJhZGlvIiApIHsNCgkJCXRoaXMuX2dldFJhZGlvR3JvdXAoKQ0KCQkJCS5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQkJdmFyIGluc3RhbmNlID0gJCggdGhpcyApLmNoZWNrYm94cmFkaW8oICJpbnN0YW5jZSIgKTsNCg0KCQkJCQlpZiAoIGluc3RhbmNlICkgew0KCQkJCQkJaW5zdGFuY2UuX3JlbW92ZUNsYXNzKCBpbnN0YW5jZS5sYWJlbCwNCgkJCQkJCQkidWktY2hlY2tib3hyYWRpby1jaGVja2VkIiwgInVpLXN0YXRlLWFjdGl2ZSIgKTsNCgkJCQkJfQ0KCQkJCX0gKTsNCgkJfQ0KCX0sDQoNCglfZGVzdHJveTogZnVuY3Rpb24oKSB7DQoJCXRoaXMuX3VuYmluZEZvcm1SZXNldEhhbmRsZXIoKTsNCg0KCQlpZiAoIHRoaXMuaWNvbiApIHsNCgkJCXRoaXMuaWNvbi5yZW1vdmUoKTsNCgkJCXRoaXMuaWNvblNwYWNlLnJlbW92ZSgpOw0KCQl9DQoJfSwNCg0KCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KDQoJCS8vIFdlIGRvbid0IGFsbG93IHRoZSB2YWx1ZSB0byBiZSBzZXQgdG8gbm90aGluZw0KCQlpZiAoIGtleSA9PT0gImxhYmVsIiAmJiAhdmFsdWUgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOw0KDQoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgew0KCQkJdGhpcy5fdG9nZ2xlQ2xhc3MoIHRoaXMubGFiZWwsIG51bGwsICJ1aS1zdGF0ZS1kaXNhYmxlZCIsIHZhbHVlICk7DQoJCQl0aGlzLmVsZW1lbnRbIDAgXS5kaXNhYmxlZCA9IHZhbHVlOw0KDQoJCQkvLyBEb24ndCByZWZyZXNoIHdoZW4gc2V0dGluZyBkaXNhYmxlZA0KCQkJcmV0dXJuOw0KCQl9DQoJCXRoaXMucmVmcmVzaCgpOw0KCX0sDQoNCglfdXBkYXRlSWNvbjogZnVuY3Rpb24oIGNoZWNrZWQgKSB7DQoJCXZhciB0b0FkZCA9ICJ1aS1pY29uIHVpLWljb24tYmFja2dyb3VuZCAiOw0KDQoJCWlmICggdGhpcy5vcHRpb25zLmljb24gKSB7DQoJCQlpZiAoICF0aGlzLmljb24gKSB7DQoJCQkJdGhpcy5pY29uID0gJCggIjxzcGFuPiIgKTsNCgkJCQl0aGlzLmljb25TcGFjZSA9ICQoICI8c3Bhbj4gPC9zcGFuPiIgKTsNCgkJCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5pY29uU3BhY2UsICJ1aS1jaGVja2JveHJhZGlvLWljb24tc3BhY2UiICk7DQoJCQl9DQoNCgkJCWlmICggdGhpcy50eXBlID09PSAiY2hlY2tib3giICkgew0KCQkJCXRvQWRkICs9IGNoZWNrZWQgPyAidWktaWNvbi1jaGVjayB1aS1zdGF0ZS1jaGVja2VkIiA6ICJ1aS1pY29uLWJsYW5rIjsNCgkJCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5pY29uLCBudWxsLCBjaGVja2VkID8gInVpLWljb24tYmxhbmsiIDogInVpLWljb24tY2hlY2siICk7DQoJCQl9IGVsc2Ugew0KCQkJCXRvQWRkICs9ICJ1aS1pY29uLWJsYW5rIjsNCgkJCX0NCgkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmljb24sICJ1aS1jaGVja2JveHJhZGlvLWljb24iLCB0b0FkZCApOw0KCQkJaWYgKCAhY2hlY2tlZCApIHsNCgkJCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5pY29uLCBudWxsLCAidWktaWNvbi1jaGVjayB1aS1zdGF0ZS1jaGVja2VkIiApOw0KCQkJfQ0KCQkJdGhpcy5pY29uLnByZXBlbmRUbyggdGhpcy5sYWJlbCApLmFmdGVyKCB0aGlzLmljb25TcGFjZSApOw0KCQl9IGVsc2UgaWYgKCB0aGlzLmljb24gIT09IHVuZGVmaW5lZCApIHsNCgkJCXRoaXMuaWNvbi5yZW1vdmUoKTsNCgkJCXRoaXMuaWNvblNwYWNlLnJlbW92ZSgpOw0KCQkJZGVsZXRlIHRoaXMuaWNvbjsNCgkJfQ0KCX0sDQoNCglfdXBkYXRlTGFiZWw6IGZ1bmN0aW9uKCkgew0KDQoJCS8vIFJlbW92ZSB0aGUgY29udGVudHMgb2YgdGhlIGxhYmVsICggbWludXMgdGhlIGljb24sIGljb24gc3BhY2UsIGFuZCBpbnB1dCApDQoJCXZhciBjb250ZW50cyA9IHRoaXMubGFiZWwuY29udGVudHMoKS5ub3QoIHRoaXMuZWxlbWVudFsgMCBdICk7DQoJCWlmICggdGhpcy5pY29uICkgew0KCQkJY29udGVudHMgPSBjb250ZW50cy5ub3QoIHRoaXMuaWNvblsgMCBdICk7DQoJCX0NCgkJaWYgKCB0aGlzLmljb25TcGFjZSApIHsNCgkJCWNvbnRlbnRzID0gY29udGVudHMubm90KCB0aGlzLmljb25TcGFjZVsgMCBdICk7DQoJCX0NCgkJY29udGVudHMucmVtb3ZlKCk7DQoNCgkJdGhpcy5sYWJlbC5hcHBlbmQoIHRoaXMub3B0aW9ucy5sYWJlbCApOw0KCX0sDQoNCglyZWZyZXNoOiBmdW5jdGlvbigpIHsNCgkJdmFyIGNoZWNrZWQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jaGVja2VkLA0KCQkJaXNEaXNhYmxlZCA9IHRoaXMuZWxlbWVudFsgMCBdLmRpc2FibGVkOw0KDQoJCXRoaXMuX3VwZGF0ZUljb24oIGNoZWNrZWQgKTsNCgkJdGhpcy5fdG9nZ2xlQ2xhc3MoIHRoaXMubGFiZWwsICJ1aS1jaGVja2JveHJhZGlvLWNoZWNrZWQiLCAidWktc3RhdGUtYWN0aXZlIiwgY2hlY2tlZCApOw0KCQlpZiAoIHRoaXMub3B0aW9ucy5sYWJlbCAhPT0gbnVsbCApIHsNCgkJCXRoaXMuX3VwZGF0ZUxhYmVsKCk7DQoJCX0NCg0KCQlpZiAoIGlzRGlzYWJsZWQgIT09IHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsNCgkJCXRoaXMuX3NldE9wdGlvbnMoIHsgImRpc2FibGVkIjogaXNEaXNhYmxlZCB9ICk7DQoJCX0NCgl9DQoNCn0gXSApOw0KDQp2YXIgd2lkZ2V0c0NoZWNrYm94cmFkaW8gPSAkLnVpLmNoZWNrYm94cmFkaW87DQoNCg0KLyohDQogKiBqUXVlcnkgVUkgQnV0dG9uIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBCdXR0b24NCi8vPj5ncm91cDogV2lkZ2V0cw0KLy8+PmRlc2NyaXB0aW9uOiBFbmhhbmNlcyBhIGZvcm0gd2l0aCB0aGVtZWFibGUgYnV0dG9ucy4NCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9idXR0b24vDQovLz4+ZGVtb3M6IGh0dHA6Ly9qcXVlcnl1aS5jb20vYnV0dG9uLw0KLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL2NvcmUuY3NzDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvYnV0dG9uLmNzcw0KLy8+PmNzcy50aGVtZTogLi4vLi4vdGhlbWVzL2Jhc2UvdGhlbWUuY3NzDQoNCg0KDQokLndpZGdldCggInVpLmJ1dHRvbiIsIHsNCgl2ZXJzaW9uOiAiMS4xMi4xIiwNCglkZWZhdWx0RWxlbWVudDogIjxidXR0b24+IiwNCglvcHRpb25zOiB7DQoJCWNsYXNzZXM6IHsNCgkJCSJ1aS1idXR0b24iOiAidWktY29ybmVyLWFsbCINCgkJfSwNCgkJZGlzYWJsZWQ6IG51bGwsDQoJCWljb246IG51bGwsDQoJCWljb25Qb3NpdGlvbjogImJlZ2lubmluZyIsDQoJCWxhYmVsOiBudWxsLA0KCQlzaG93TGFiZWw6IHRydWUNCgl9LA0KDQoJX2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uKCkgew0KCQl2YXIgZGlzYWJsZWQsDQoNCgkJCS8vIFRoaXMgaXMgdG8gc3VwcG9ydCBjYXNlcyBsaWtlIGluIGpRdWVyeSBNb2JpbGUgd2hlcmUgdGhlIGJhc2Ugd2lkZ2V0IGRvZXMgaGF2ZQ0KCQkJLy8gYW4gaW1wbGVtZW50YXRpb24gb2YgX2dldENyZWF0ZU9wdGlvbnMNCgkJCW9wdGlvbnMgPSB0aGlzLl9zdXBlcigpIHx8IHt9Ow0KDQoJCXRoaXMuaXNJbnB1dCA9IHRoaXMuZWxlbWVudC5pcyggImlucHV0IiApOw0KDQoJCWRpc2FibGVkID0gdGhpcy5lbGVtZW50WyAwIF0uZGlzYWJsZWQ7DQoJCWlmICggZGlzYWJsZWQgIT0gbnVsbCApIHsNCgkJCW9wdGlvbnMuZGlzYWJsZWQgPSBkaXNhYmxlZDsNCgkJfQ0KDQoJCXRoaXMub3JpZ2luYWxMYWJlbCA9IHRoaXMuaXNJbnB1dCA/IHRoaXMuZWxlbWVudC52YWwoKSA6IHRoaXMuZWxlbWVudC5odG1sKCk7DQoJCWlmICggdGhpcy5vcmlnaW5hbExhYmVsICkgew0KCQkJb3B0aW9ucy5sYWJlbCA9IHRoaXMub3JpZ2luYWxMYWJlbDsNCgkJfQ0KDQoJCXJldHVybiBvcHRpb25zOw0KCX0sDQoNCglfY3JlYXRlOiBmdW5jdGlvbigpIHsNCgkJaWYgKCAhdGhpcy5vcHRpb24uc2hvd0xhYmVsICYgIXRoaXMub3B0aW9ucy5pY29uICkgew0KCQkJdGhpcy5vcHRpb25zLnNob3dMYWJlbCA9IHRydWU7DQoJCX0NCg0KCQkvLyBXZSBoYXZlIHRvIGNoZWNrIHRoZSBvcHRpb24gYWdhaW4gaGVyZSBldmVuIHRob3VnaCB3ZSBkaWQgaW4gX2dldENyZWF0ZU9wdGlvbnMsDQoJCS8vIGJlY2F1c2UgbnVsbCBtYXkgaGF2ZSBiZWVuIHBhc3NlZCBvbiBpbml0IHdoaWNoIHdvdWxkIG92ZXJyaWRlIHdoYXQgd2FzIHNldCBpbg0KCQkvLyBfZ2V0Q3JlYXRlT3B0aW9ucw0KCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9PSBudWxsICkgew0KCQkJdGhpcy5vcHRpb25zLmRpc2FibGVkID0gdGhpcy5lbGVtZW50WyAwIF0uZGlzYWJsZWQgfHwgZmFsc2U7DQoJCX0NCg0KCQl0aGlzLmhhc1RpdGxlID0gISF0aGlzLmVsZW1lbnQuYXR0ciggInRpdGxlIiApOw0KDQoJCS8vIENoZWNrIHRvIHNlZSBpZiB0aGUgbGFiZWwgbmVlZHMgdG8gYmUgc2V0IG9yIGlmIGl0cyBhbHJlYWR5IGNvcnJlY3QNCgkJaWYgKCB0aGlzLm9wdGlvbnMubGFiZWwgJiYgdGhpcy5vcHRpb25zLmxhYmVsICE9PSB0aGlzLm9yaWdpbmFsTGFiZWwgKSB7DQoJCQlpZiAoIHRoaXMuaXNJbnB1dCApIHsNCgkJCQl0aGlzLmVsZW1lbnQudmFsKCB0aGlzLm9wdGlvbnMubGFiZWwgKTsNCgkJCX0gZWxzZSB7DQoJCQkJdGhpcy5lbGVtZW50Lmh0bWwoIHRoaXMub3B0aW9ucy5sYWJlbCApOw0KCQkJfQ0KCQl9DQoJCXRoaXMuX2FkZENsYXNzKCAidWktYnV0dG9uIiwgInVpLXdpZGdldCIgKTsNCgkJdGhpcy5fc2V0T3B0aW9uKCAiZGlzYWJsZWQiLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTsNCgkJdGhpcy5fZW5oYW5jZSgpOw0KDQoJCWlmICggdGhpcy5lbGVtZW50LmlzKCAiYSIgKSApIHsNCgkJCXRoaXMuX29uKCB7DQoJCQkJImtleXVwIjogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQkJCQlpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5TUEFDRSApIHsNCgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQoNCgkJCQkJCS8vIFN1cHBvcnQ6IFBoYW50b21KUyA8PSAxLjksIElFIDggT25seQ0KCQkJCQkJLy8gSWYgYSBuYXRpdmUgY2xpY2sgaXMgYXZhaWxhYmxlIHVzZSBpdCBzbyB3ZSBhY3R1YWxseSBjYXVzZSBuYXZpZ2F0aW9uDQoJCQkJCQkvLyBvdGhlcndpc2UganVzdCB0cmlnZ2VyIGEgY2xpY2sgZXZlbnQNCgkJCQkJCWlmICggdGhpcy5lbGVtZW50WyAwIF0uY2xpY2sgKSB7DQoJCQkJCQkJdGhpcy5lbGVtZW50WyAwIF0uY2xpY2soKTsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJdGhpcy5lbGVtZW50LnRyaWdnZXIoICJjbGljayIgKTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCX0gKTsNCgkJfQ0KCX0sDQoNCglfZW5oYW5jZTogZnVuY3Rpb24oKSB7DQoJCWlmICggIXRoaXMuZWxlbWVudC5pcyggImJ1dHRvbiIgKSApIHsNCgkJCXRoaXMuZWxlbWVudC5hdHRyKCAicm9sZSIsICJidXR0b24iICk7DQoJCX0NCg0KCQlpZiAoIHRoaXMub3B0aW9ucy5pY29uICkgew0KCQkJdGhpcy5fdXBkYXRlSWNvbiggImljb24iLCB0aGlzLm9wdGlvbnMuaWNvbiApOw0KCQkJdGhpcy5fdXBkYXRlVG9vbHRpcCgpOw0KCQl9DQoJfSwNCg0KCV91cGRhdGVUb29sdGlwOiBmdW5jdGlvbigpIHsNCgkJdGhpcy50aXRsZSA9IHRoaXMuZWxlbWVudC5hdHRyKCAidGl0bGUiICk7DQoNCgkJaWYgKCAhdGhpcy5vcHRpb25zLnNob3dMYWJlbCAmJiAhdGhpcy50aXRsZSApIHsNCgkJCXRoaXMuZWxlbWVudC5hdHRyKCAidGl0bGUiLCB0aGlzLm9wdGlvbnMubGFiZWwgKTsNCgkJfQ0KCX0sDQoNCglfdXBkYXRlSWNvbjogZnVuY3Rpb24oIG9wdGlvbiwgdmFsdWUgKSB7DQoJCXZhciBpY29uID0gb3B0aW9uICE9PSAiaWNvblBvc2l0aW9uIiwNCgkJCXBvc2l0aW9uID0gaWNvbiA/IHRoaXMub3B0aW9ucy5pY29uUG9zaXRpb24gOiB2YWx1ZSwNCgkJCWRpc3BsYXlCbG9jayA9IHBvc2l0aW9uID09PSAidG9wIiB8fCBwb3NpdGlvbiA9PT0gImJvdHRvbSI7DQoNCgkJLy8gQ3JlYXRlIGljb24NCgkJaWYgKCAhdGhpcy5pY29uICkgew0KCQkJdGhpcy5pY29uID0gJCggIjxzcGFuPiIgKTsNCg0KCQkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMuaWNvbiwgInVpLWJ1dHRvbi1pY29uIiwgInVpLWljb24iICk7DQoNCgkJCWlmICggIXRoaXMub3B0aW9ucy5zaG93TGFiZWwgKSB7DQoJCQkJdGhpcy5fYWRkQ2xhc3MoICJ1aS1idXR0b24taWNvbi1vbmx5IiApOw0KCQkJfQ0KCQl9IGVsc2UgaWYgKCBpY29uICkgew0KDQoJCQkvLyBJZiB3ZSBhcmUgdXBkYXRpbmcgdGhlIGljb24gcmVtb3ZlIHRoZSBvbGQgaWNvbiBjbGFzcw0KCQkJdGhpcy5fcmVtb3ZlQ2xhc3MoIHRoaXMuaWNvbiwgbnVsbCwgdGhpcy5vcHRpb25zLmljb24gKTsNCgkJfQ0KDQoJCS8vIElmIHdlIGFyZSB1cGRhdGluZyB0aGUgaWNvbiBhZGQgdGhlIG5ldyBpY29uIGNsYXNzDQoJCWlmICggaWNvbiApIHsNCgkJCXRoaXMuX2FkZENsYXNzKCB0aGlzLmljb24sIG51bGwsIHZhbHVlICk7DQoJCX0NCg0KCQl0aGlzLl9hdHRhY2hJY29uKCBwb3NpdGlvbiApOw0KDQoJCS8vIElmIHRoZSBpY29uIGlzIG9uIHRvcCBvciBib3R0b20gd2UgbmVlZCB0byBhZGQgdGhlIHVpLXdpZGdldC1pY29uLWJsb2NrIGNsYXNzIGFuZCByZW1vdmUNCgkJLy8gdGhlIGljb25TcGFjZSBpZiB0aGVyZSBpcyBvbmUuDQoJCWlmICggZGlzcGxheUJsb2NrICkgew0KCQkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMuaWNvbiwgbnVsbCwgInVpLXdpZGdldC1pY29uLWJsb2NrIiApOw0KCQkJaWYgKCB0aGlzLmljb25TcGFjZSApIHsNCgkJCQl0aGlzLmljb25TcGFjZS5yZW1vdmUoKTsNCgkJCX0NCgkJfSBlbHNlIHsNCg0KCQkJLy8gUG9zaXRpb24gaXMgYmVnaW5uaW5nIG9yIGVuZCBzbyByZW1vdmUgdGhlIHVpLXdpZGdldC1pY29uLWJsb2NrIGNsYXNzIGFuZCBhZGQgdGhlDQoJCQkvLyBzcGFjZSBpZiBpdCBkb2VzIG5vdCBleGlzdA0KCQkJaWYgKCAhdGhpcy5pY29uU3BhY2UgKSB7DQoJCQkJdGhpcy5pY29uU3BhY2UgPSAkKCAiPHNwYW4+IDwvc3Bhbj4iICk7DQoJCQkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMuaWNvblNwYWNlLCAidWktYnV0dG9uLWljb24tc3BhY2UiICk7DQoJCQl9DQoJCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5pY29uLCBudWxsLCAidWktd2lnZXQtaWNvbi1ibG9jayIgKTsNCgkJCXRoaXMuX2F0dGFjaEljb25TcGFjZSggcG9zaXRpb24gKTsNCgkJfQ0KCX0sDQoNCglfZGVzdHJveTogZnVuY3Rpb24oKSB7DQoJCXRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCAicm9sZSIgKTsNCg0KCQlpZiAoIHRoaXMuaWNvbiApIHsNCgkJCXRoaXMuaWNvbi5yZW1vdmUoKTsNCgkJfQ0KCQlpZiAoIHRoaXMuaWNvblNwYWNlICkgew0KCQkJdGhpcy5pY29uU3BhY2UucmVtb3ZlKCk7DQoJCX0NCgkJaWYgKCAhdGhpcy5oYXNUaXRsZSApIHsNCgkJCXRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCAidGl0bGUiICk7DQoJCX0NCgl9LA0KDQoJX2F0dGFjaEljb25TcGFjZTogZnVuY3Rpb24oIGljb25Qb3NpdGlvbiApIHsNCgkJdGhpcy5pY29uWyAvXig/OmVuZHxib3R0b20pLy50ZXN0KCBpY29uUG9zaXRpb24gKSA/ICJiZWZvcmUiIDogImFmdGVyIiBdKCB0aGlzLmljb25TcGFjZSApOw0KCX0sDQoNCglfYXR0YWNoSWNvbjogZnVuY3Rpb24oIGljb25Qb3NpdGlvbiApIHsNCgkJdGhpcy5lbGVtZW50WyAvXig/OmVuZHxib3R0b20pLy50ZXN0KCBpY29uUG9zaXRpb24gKSA/ICJhcHBlbmQiIDogInByZXBlbmQiIF0oIHRoaXMuaWNvbiApOw0KCX0sDQoNCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7DQoJCXZhciBuZXdTaG93TGFiZWwgPSBvcHRpb25zLnNob3dMYWJlbCA9PT0gdW5kZWZpbmVkID8NCgkJCQl0aGlzLm9wdGlvbnMuc2hvd0xhYmVsIDoNCgkJCQlvcHRpb25zLnNob3dMYWJlbCwNCgkJCW5ld0ljb24gPSBvcHRpb25zLmljb24gPT09IHVuZGVmaW5lZCA/IHRoaXMub3B0aW9ucy5pY29uIDogb3B0aW9ucy5pY29uOw0KDQoJCWlmICggIW5ld1Nob3dMYWJlbCAmJiAhbmV3SWNvbiApIHsNCgkJCW9wdGlvbnMuc2hvd0xhYmVsID0gdHJ1ZTsNCgkJfQ0KCQl0aGlzLl9zdXBlciggb3B0aW9ucyApOw0KCX0sDQoNCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsNCgkJaWYgKCBrZXkgPT09ICJpY29uIiApIHsNCgkJCWlmICggdmFsdWUgKSB7DQoJCQkJdGhpcy5fdXBkYXRlSWNvbigga2V5LCB2YWx1ZSApOw0KCQkJfSBlbHNlIGlmICggdGhpcy5pY29uICkgew0KCQkJCXRoaXMuaWNvbi5yZW1vdmUoKTsNCgkJCQlpZiAoIHRoaXMuaWNvblNwYWNlICkgew0KCQkJCQl0aGlzLmljb25TcGFjZS5yZW1vdmUoKTsNCgkJCQl9DQoJCQl9DQoJCX0NCg0KCQlpZiAoIGtleSA9PT0gImljb25Qb3NpdGlvbiIgKSB7DQoJCQl0aGlzLl91cGRhdGVJY29uKCBrZXksIHZhbHVlICk7DQoJCX0NCg0KCQkvLyBNYWtlIHN1cmUgd2UgY2FuJ3QgZW5kIHVwIHdpdGggYSBidXR0b24gdGhhdCBoYXMgbmVpdGhlciB0ZXh0IG5vciBpY29uDQoJCWlmICgga2V5ID09PSAic2hvd0xhYmVsIiApIHsNCgkJCQl0aGlzLl90b2dnbGVDbGFzcyggInVpLWJ1dHRvbi1pY29uLW9ubHkiLCBudWxsLCAhdmFsdWUgKTsNCgkJCQl0aGlzLl91cGRhdGVUb29sdGlwKCk7DQoJCX0NCg0KCQlpZiAoIGtleSA9PT0gImxhYmVsIiApIHsNCgkJCWlmICggdGhpcy5pc0lucHV0ICkgew0KCQkJCXRoaXMuZWxlbWVudC52YWwoIHZhbHVlICk7DQoJCQl9IGVsc2Ugew0KDQoJCQkJLy8gSWYgdGhlcmUgaXMgYW4gaWNvbiwgYXBwZW5kIGl0LCBlbHNlIG5vdGhpbmcgdGhlbiBhcHBlbmQgdGhlIHZhbHVlDQoJCQkJLy8gdGhpcyBhdm9pZHMgcmVtb3ZhbCBvZiB0aGUgaWNvbiB3aGVuIHNldHRpbmcgbGFiZWwgdGV4dA0KCQkJCXRoaXMuZWxlbWVudC5odG1sKCB2YWx1ZSApOw0KCQkJCWlmICggdGhpcy5pY29uICkgew0KCQkJCQl0aGlzLl9hdHRhY2hJY29uKCB0aGlzLm9wdGlvbnMuaWNvblBvc2l0aW9uICk7DQoJCQkJCXRoaXMuX2F0dGFjaEljb25TcGFjZSggdGhpcy5vcHRpb25zLmljb25Qb3NpdGlvbiApOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7DQoNCgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7DQoJCQl0aGlzLl90b2dnbGVDbGFzcyggbnVsbCwgInVpLXN0YXRlLWRpc2FibGVkIiwgdmFsdWUgKTsNCgkJCXRoaXMuZWxlbWVudFsgMCBdLmRpc2FibGVkID0gdmFsdWU7DQoJCQlpZiAoIHZhbHVlICkgew0KCQkJCXRoaXMuZWxlbWVudC5ibHVyKCk7DQoJCQl9DQoJCX0NCgl9LA0KDQoJcmVmcmVzaDogZnVuY3Rpb24oKSB7DQoNCgkJLy8gTWFrZSBzdXJlIHRvIG9ubHkgY2hlY2sgZGlzYWJsZWQgaWYgaXRzIGFuIGVsZW1lbnQgdGhhdCBzdXBwb3J0cyB0aGlzIG90aGVyd2lzZQ0KCQkvLyBjaGVjayBmb3IgdGhlIGRpc2FibGVkIGNsYXNzIHRvIGRldGVybWluZSBzdGF0ZQ0KCQl2YXIgaXNEaXNhYmxlZCA9IHRoaXMuZWxlbWVudC5pcyggImlucHV0LCBidXR0b24iICkgPw0KCQkJdGhpcy5lbGVtZW50WyAwIF0uZGlzYWJsZWQgOiB0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoICJ1aS1idXR0b24tZGlzYWJsZWQiICk7DQoNCgkJaWYgKCBpc0Rpc2FibGVkICE9PSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7DQoJCQl0aGlzLl9zZXRPcHRpb25zKCB7IGRpc2FibGVkOiBpc0Rpc2FibGVkIH0gKTsNCgkJfQ0KDQoJCXRoaXMuX3VwZGF0ZVRvb2x0aXAoKTsNCgl9DQp9ICk7DQoNCi8vIERFUFJFQ0FURUQNCmlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICkgew0KDQoJLy8gVGV4dCBhbmQgSWNvbnMgb3B0aW9ucw0KCSQud2lkZ2V0KCAidWkuYnV0dG9uIiwgJC51aS5idXR0b24sIHsNCgkJb3B0aW9uczogew0KCQkJdGV4dDogdHJ1ZSwNCgkJCWljb25zOiB7DQoJCQkJcHJpbWFyeTogbnVsbCwNCgkJCQlzZWNvbmRhcnk6IG51bGwNCgkJCX0NCgkJfSwNCg0KCQlfY3JlYXRlOiBmdW5jdGlvbigpIHsNCgkJCWlmICggdGhpcy5vcHRpb25zLnNob3dMYWJlbCAmJiAhdGhpcy5vcHRpb25zLnRleHQgKSB7DQoJCQkJdGhpcy5vcHRpb25zLnNob3dMYWJlbCA9IHRoaXMub3B0aW9ucy50ZXh0Ow0KCQkJfQ0KCQkJaWYgKCAhdGhpcy5vcHRpb25zLnNob3dMYWJlbCAmJiB0aGlzLm9wdGlvbnMudGV4dCApIHsNCgkJCQl0aGlzLm9wdGlvbnMudGV4dCA9IHRoaXMub3B0aW9ucy5zaG93TGFiZWw7DQoJCQl9DQoJCQlpZiAoICF0aGlzLm9wdGlvbnMuaWNvbiAmJiAoIHRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5IHx8DQoJCQkJCXRoaXMub3B0aW9ucy5pY29ucy5zZWNvbmRhcnkgKSApIHsNCgkJCQlpZiAoIHRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5ICkgew0KCQkJCQl0aGlzLm9wdGlvbnMuaWNvbiA9IHRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5Ow0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoaXMub3B0aW9ucy5pY29uID0gdGhpcy5vcHRpb25zLmljb25zLnNlY29uZGFyeTsNCgkJCQkJdGhpcy5vcHRpb25zLmljb25Qb3NpdGlvbiA9ICJlbmQiOw0KCQkJCX0NCgkJCX0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy5pY29uICkgew0KCQkJCXRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5ID0gdGhpcy5vcHRpb25zLmljb247DQoJCQl9DQoJCQl0aGlzLl9zdXBlcigpOw0KCQl9LA0KDQoJCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KCQkJaWYgKCBrZXkgPT09ICJ0ZXh0IiApIHsNCgkJCQl0aGlzLl9zdXBlciggInNob3dMYWJlbCIsIHZhbHVlICk7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KCQkJaWYgKCBrZXkgPT09ICJzaG93TGFiZWwiICkgew0KCQkJCXRoaXMub3B0aW9ucy50ZXh0ID0gdmFsdWU7DQoJCQl9DQoJCQlpZiAoIGtleSA9PT0gImljb24iICkgew0KCQkJCXRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5ID0gdmFsdWU7DQoJCQl9DQoJCQlpZiAoIGtleSA9PT0gImljb25zIiApIHsNCgkJCQlpZiAoIHZhbHVlLnByaW1hcnkgKSB7DQoJCQkJCXRoaXMuX3N1cGVyKCAiaWNvbiIsIHZhbHVlLnByaW1hcnkgKTsNCgkJCQkJdGhpcy5fc3VwZXIoICJpY29uUG9zaXRpb24iLCAiYmVnaW5uaW5nIiApOw0KCQkJCX0gZWxzZSBpZiAoIHZhbHVlLnNlY29uZGFyeSApIHsNCgkJCQkJdGhpcy5fc3VwZXIoICJpY29uIiwgdmFsdWUuc2Vjb25kYXJ5ICk7DQoJCQkJCXRoaXMuX3N1cGVyKCAiaWNvblBvc2l0aW9uIiwgImVuZCIgKTsNCgkJCQl9DQoJCQl9DQoJCQl0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTsNCgkJfQ0KCX0gKTsNCg0KCSQuZm4uYnV0dG9uID0gKCBmdW5jdGlvbiggb3JpZyApIHsNCgkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCQkJaWYgKCAhdGhpcy5sZW5ndGggfHwgKCB0aGlzLmxlbmd0aCAmJiB0aGlzWyAwIF0udGFnTmFtZSAhPT0gIklOUFVUIiApIHx8DQoJCQkJCSggdGhpcy5sZW5ndGggJiYgdGhpc1sgMCBdLnRhZ05hbWUgPT09ICJJTlBVVCIgJiYgKA0KCQkJCQkJdGhpcy5hdHRyKCAidHlwZSIgKSAhPT0gImNoZWNrYm94IiAmJiB0aGlzLmF0dHIoICJ0eXBlIiApICE9PSAicmFkaW8iDQoJCQkJCSkgKSApIHsNCgkJCQlyZXR1cm4gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7DQoJCQl9DQoJCQlpZiAoICEkLnVpLmNoZWNrYm94cmFkaW8gKSB7DQoJCQkJJC5lcnJvciggIkNoZWNrYm94cmFkaW8gd2lkZ2V0IG1pc3NpbmciICk7DQoJCQl9DQoJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7DQoJCQkJcmV0dXJuIHRoaXMuY2hlY2tib3hyYWRpbyggew0KCQkJCQkiaWNvbiI6IGZhbHNlDQoJCQkJfSApOw0KCQkJfQ0KCQkJcmV0dXJuIHRoaXMuY2hlY2tib3hyYWRpby5hcHBseSggdGhpcywgYXJndW1lbnRzICk7DQoJCX07DQoJfSApKCAkLmZuLmJ1dHRvbiApOw0KDQoJJC5mbi5idXR0b25zZXQgPSBmdW5jdGlvbigpIHsNCgkJaWYgKCAhJC51aS5jb250cm9sZ3JvdXAgKSB7DQoJCQkkLmVycm9yKCAiQ29udHJvbGdyb3VwIHdpZGdldCBtaXNzaW5nIiApOw0KCQl9DQoJCWlmICggYXJndW1lbnRzWyAwIF0gPT09ICJvcHRpb24iICYmIGFyZ3VtZW50c1sgMSBdID09PSAiaXRlbXMiICYmIGFyZ3VtZW50c1sgMiBdICkgew0KCQkJcmV0dXJuIHRoaXMuY29udHJvbGdyb3VwLmFwcGx5KCB0aGlzLA0KCQkJCVsgYXJndW1lbnRzWyAwIF0sICJpdGVtcy5idXR0b24iLCBhcmd1bWVudHNbIDIgXSBdICk7DQoJCX0NCgkJaWYgKCBhcmd1bWVudHNbIDAgXSA9PT0gIm9wdGlvbiIgJiYgYXJndW1lbnRzWyAxIF0gPT09ICJpdGVtcyIgKSB7DQoJCQlyZXR1cm4gdGhpcy5jb250cm9sZ3JvdXAuYXBwbHkoIHRoaXMsIFsgYXJndW1lbnRzWyAwIF0sICJpdGVtcy5idXR0b24iIF0gKTsNCgkJfQ0KCQlpZiAoIHR5cGVvZiBhcmd1bWVudHNbIDAgXSA9PT0gIm9iamVjdCIgJiYgYXJndW1lbnRzWyAwIF0uaXRlbXMgKSB7DQoJCQlhcmd1bWVudHNbIDAgXS5pdGVtcyA9IHsNCgkJCQlidXR0b246IGFyZ3VtZW50c1sgMCBdLml0ZW1zDQoJCQl9Ow0KCQl9DQoJCXJldHVybiB0aGlzLmNvbnRyb2xncm91cC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7DQoJfTsNCn0NCg0KdmFyIHdpZGdldHNCdXR0b24gPSAkLnVpLmJ1dHRvbjsNCg0KDQovLyBqc2NzOmRpc2FibGUgbWF4aW11bUxpbmVMZW5ndGgNCi8qIGpzY3M6ZGlzYWJsZSByZXF1aXJlQ2FtZWxDYXNlT3JVcHBlckNhc2VJZGVudGlmaWVycyAqLw0KLyohDQogKiBqUXVlcnkgVUkgRGF0ZXBpY2tlciAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogRGF0ZXBpY2tlcg0KLy8+Pmdyb3VwOiBXaWRnZXRzDQovLz4+ZGVzY3JpcHRpb246IERpc3BsYXlzIGEgY2FsZW5kYXIgZnJvbSBhbiBpbnB1dCBvciBpbmxpbmUgZm9yIHNlbGVjdGluZyBkYXRlcy4NCi8vPj5kb2NzOiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kYXRlcGlja2VyLw0KLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL2RhdGVwaWNrZXIvDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY29yZS5jc3MNCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9kYXRlcGlja2VyLmNzcw0KLy8+PmNzcy50aGVtZTogLi4vLi4vdGhlbWVzL2Jhc2UvdGhlbWUuY3NzDQoNCg0KDQokLmV4dGVuZCggJC51aSwgeyBkYXRlcGlja2VyOiB7IHZlcnNpb246ICIxLjEyLjEiIH0gfSApOw0KDQp2YXIgZGF0ZXBpY2tlcl9pbnN0QWN0aXZlOw0KDQpmdW5jdGlvbiBkYXRlcGlja2VyX2dldFppbmRleCggZWxlbSApIHsNCgl2YXIgcG9zaXRpb24sIHZhbHVlOw0KCXdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHsNCg0KCQkvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXINCgkJLy8gVGhpcyBtYWtlcyBiZWhhdmlvciBvZiB0aGlzIGZ1bmN0aW9uIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzDQoJCS8vIFdlYktpdCBhbHdheXMgcmV0dXJucyBhdXRvIGlmIHRoZSBlbGVtZW50IGlzIHBvc2l0aW9uZWQNCgkJcG9zaXRpb24gPSBlbGVtLmNzcyggInBvc2l0aW9uIiApOw0KCQlpZiAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAicmVsYXRpdmUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgew0KDQoJCQkvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZA0KCQkJLy8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nDQoJCQkvLyB3ZSBpZ25vcmUgdGhlIGNhc2Ugb2YgbmVzdGVkIGVsZW1lbnRzIHdpdGggYW4gZXhwbGljaXQgdmFsdWUgb2YgMA0KCQkJLy8gPGRpdiBzdHlsZT0iei1pbmRleDogLTEwOyI+PGRpdiBzdHlsZT0iei1pbmRleDogMDsiPjwvZGl2PjwvZGl2Pg0KCQkJdmFsdWUgPSBwYXJzZUludCggZWxlbS5jc3MoICJ6SW5kZXgiICksIDEwICk7DQoJCQlpZiAoICFpc05hTiggdmFsdWUgKSAmJiB2YWx1ZSAhPT0gMCApIHsNCgkJCQlyZXR1cm4gdmFsdWU7DQoJCQl9DQoJCX0NCgkJZWxlbSA9IGVsZW0ucGFyZW50KCk7DQoJfQ0KDQoJcmV0dXJuIDA7DQp9DQovKiBEYXRlIHBpY2tlciBtYW5hZ2VyLg0KICAgVXNlIHRoZSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcywgJC5kYXRlcGlja2VyLCB0byBpbnRlcmFjdCB3aXRoIHRoZSBkYXRlIHBpY2tlci4NCiAgIFNldHRpbmdzIGZvciAoZ3JvdXBzIG9mKSBkYXRlIHBpY2tlcnMgYXJlIG1haW50YWluZWQgaW4gYW4gaW5zdGFuY2Ugb2JqZWN0LA0KICAgYWxsb3dpbmcgbXVsdGlwbGUgZGlmZmVyZW50IHNldHRpbmdzIG9uIHRoZSBzYW1lIHBhZ2UuICovDQoNCmZ1bmN0aW9uIERhdGVwaWNrZXIoKSB7DQoJdGhpcy5fY3VySW5zdCA9IG51bGw7IC8vIFRoZSBjdXJyZW50IGluc3RhbmNlIGluIHVzZQ0KCXRoaXMuX2tleUV2ZW50ID0gZmFsc2U7IC8vIElmIHRoZSBsYXN0IGV2ZW50IHdhcyBhIGtleSBldmVudA0KCXRoaXMuX2Rpc2FibGVkSW5wdXRzID0gW107IC8vIExpc3Qgb2YgZGF0ZSBwaWNrZXIgaW5wdXRzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkDQoJdGhpcy5fZGF0ZXBpY2tlclNob3dpbmcgPSBmYWxzZTsgLy8gVHJ1ZSBpZiB0aGUgcG9wdXAgcGlja2VyIGlzIHNob3dpbmcgLCBmYWxzZSBpZiBub3QNCgl0aGlzLl9pbkRpYWxvZyA9IGZhbHNlOyAvLyBUcnVlIGlmIHNob3dpbmcgd2l0aGluIGEgImRpYWxvZyIsIGZhbHNlIGlmIG5vdA0KCXRoaXMuX21haW5EaXZJZCA9ICJ1aS1kYXRlcGlja2VyLWRpdiI7IC8vIFRoZSBJRCBvZiB0aGUgbWFpbiBkYXRlcGlja2VyIGRpdmlzaW9uDQoJdGhpcy5faW5saW5lQ2xhc3MgPSAidWktZGF0ZXBpY2tlci1pbmxpbmUiOyAvLyBUaGUgbmFtZSBvZiB0aGUgaW5saW5lIG1hcmtlciBjbGFzcw0KCXRoaXMuX2FwcGVuZENsYXNzID0gInVpLWRhdGVwaWNrZXItYXBwZW5kIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGFwcGVuZCBtYXJrZXIgY2xhc3MNCgl0aGlzLl90cmlnZ2VyQ2xhc3MgPSAidWktZGF0ZXBpY2tlci10cmlnZ2VyIjsgLy8gVGhlIG5hbWUgb2YgdGhlIHRyaWdnZXIgbWFya2VyIGNsYXNzDQoJdGhpcy5fZGlhbG9nQ2xhc3MgPSAidWktZGF0ZXBpY2tlci1kaWFsb2ciOyAvLyBUaGUgbmFtZSBvZiB0aGUgZGlhbG9nIG1hcmtlciBjbGFzcw0KCXRoaXMuX2Rpc2FibGVDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLWRpc2FibGVkIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRpc2FibGVkIGNvdmVyaW5nIG1hcmtlciBjbGFzcw0KCXRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzID0gInVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjsgLy8gVGhlIG5hbWUgb2YgdGhlIHVuc2VsZWN0YWJsZSBjZWxsIG1hcmtlciBjbGFzcw0KCXRoaXMuX2N1cnJlbnRDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5IjsgLy8gVGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgZGF5IG1hcmtlciBjbGFzcw0KCXRoaXMuX2RheU92ZXJDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRheSBob3ZlciBtYXJrZXIgY2xhc3MNCgl0aGlzLnJlZ2lvbmFsID0gW107IC8vIEF2YWlsYWJsZSByZWdpb25hbCBzZXR0aW5ncywgaW5kZXhlZCBieSBsYW5ndWFnZSBjb2RlDQoJdGhpcy5yZWdpb25hbFsgIiIgXSA9IHsgLy8gRGVmYXVsdCByZWdpb25hbCBzZXR0aW5ncw0KCQljbG9zZVRleHQ6ICJEb25lIiwgLy8gRGlzcGxheSB0ZXh0IGZvciBjbG9zZSBsaW5rDQoJCXByZXZUZXh0OiAiUHJldiIsIC8vIERpc3BsYXkgdGV4dCBmb3IgcHJldmlvdXMgbW9udGggbGluaw0KCQluZXh0VGV4dDogIk5leHQiLCAvLyBEaXNwbGF5IHRleHQgZm9yIG5leHQgbW9udGggbGluaw0KCQljdXJyZW50VGV4dDogIlRvZGF5IiwgLy8gRGlzcGxheSB0ZXh0IGZvciBjdXJyZW50IG1vbnRoIGxpbmsNCgkJbW9udGhOYW1lczogWyAiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLA0KCQkJIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciIgXSwgLy8gTmFtZXMgb2YgbW9udGhzIGZvciBkcm9wLWRvd24gYW5kIGZvcm1hdHRpbmcNCgkJbW9udGhOYW1lc1Nob3J0OiBbICJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcCIsICJPY3QiLCAiTm92IiwgIkRlYyIgXSwgLy8gRm9yIGZvcm1hdHRpbmcNCgkJZGF5TmFtZXM6IFsgIlN1bmRheSIsICJNb25kYXkiLCAiVHVlc2RheSIsICJXZWRuZXNkYXkiLCAiVGh1cnNkYXkiLCAiRnJpZGF5IiwgIlNhdHVyZGF5IiBdLCAvLyBGb3IgZm9ybWF0dGluZw0KCQlkYXlOYW1lc1Nob3J0OiBbICJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiIF0sIC8vIEZvciBmb3JtYXR0aW5nDQoJCWRheU5hbWVzTWluOiBbICJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSIgXSwgLy8gQ29sdW1uIGhlYWRpbmdzIGZvciBkYXlzIHN0YXJ0aW5nIGF0IFN1bmRheQ0KCQl3ZWVrSGVhZGVyOiAiV2siLCAvLyBDb2x1bW4gaGVhZGVyIGZvciB3ZWVrIG9mIHRoZSB5ZWFyDQoJCWRhdGVGb3JtYXQ6ICJtbS9kZC95eSIsIC8vIFNlZSBmb3JtYXQgb3B0aW9ucyBvbiBwYXJzZURhdGUNCgkJZmlyc3REYXk6IDAsIC8vIFRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIFN1biA9IDAsIE1vbiA9IDEsIC4uLg0KCQlpc1JUTDogZmFsc2UsIC8vIFRydWUgaWYgcmlnaHQtdG8tbGVmdCBsYW5ndWFnZSwgZmFsc2UgaWYgbGVmdC10by1yaWdodA0KCQlzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLCAvLyBUcnVlIGlmIHRoZSB5ZWFyIHNlbGVjdCBwcmVjZWRlcyBtb250aCwgZmFsc2UgZm9yIG1vbnRoIHRoZW4geWVhcg0KCQl5ZWFyU3VmZml4OiAiIiAvLyBBZGRpdGlvbmFsIHRleHQgdG8gYXBwZW5kIHRvIHRoZSB5ZWFyIGluIHRoZSBtb250aCBoZWFkZXJzDQoJfTsNCgl0aGlzLl9kZWZhdWx0cyA9IHsgLy8gR2xvYmFsIGRlZmF1bHRzIGZvciBhbGwgdGhlIGRhdGUgcGlja2VyIGluc3RhbmNlcw0KCQlzaG93T246ICJmb2N1cyIsIC8vICJmb2N1cyIgZm9yIHBvcHVwIG9uIGZvY3VzLA0KCQkJLy8gImJ1dHRvbiIgZm9yIHRyaWdnZXIgYnV0dG9uLCBvciAiYm90aCIgZm9yIGVpdGhlcg0KCQlzaG93QW5pbTogImZhZGVJbiIsIC8vIE5hbWUgb2YgalF1ZXJ5IGFuaW1hdGlvbiBmb3IgcG9wdXANCgkJc2hvd09wdGlvbnM6IHt9LCAvLyBPcHRpb25zIGZvciBlbmhhbmNlZCBhbmltYXRpb25zDQoJCWRlZmF1bHREYXRlOiBudWxsLCAvLyBVc2VkIHdoZW4gZmllbGQgaXMgYmxhbms6IGFjdHVhbCBkYXRlLA0KCQkJLy8gKy8tbnVtYmVyIGZvciBvZmZzZXQgZnJvbSB0b2RheSwgbnVsbCBmb3IgdG9kYXkNCgkJYXBwZW5kVGV4dDogIiIsIC8vIERpc3BsYXkgdGV4dCBmb2xsb3dpbmcgdGhlIGlucHV0IGJveCwgZS5nLiBzaG93aW5nIHRoZSBmb3JtYXQNCgkJYnV0dG9uVGV4dDogIi4uLiIsIC8vIFRleHQgZm9yIHRyaWdnZXIgYnV0dG9uDQoJCWJ1dHRvbkltYWdlOiAiIiwgLy8gVVJMIGZvciB0cmlnZ2VyIGJ1dHRvbiBpbWFnZQ0KCQlidXR0b25JbWFnZU9ubHk6IGZhbHNlLCAvLyBUcnVlIGlmIHRoZSBpbWFnZSBhcHBlYXJzIGFsb25lLCBmYWxzZSBpZiBpdCBhcHBlYXJzIG9uIGEgYnV0dG9uDQoJCWhpZGVJZk5vUHJldk5leHQ6IGZhbHNlLCAvLyBUcnVlIHRvIGhpZGUgbmV4dC9wcmV2aW91cyBtb250aCBsaW5rcw0KCQkJLy8gaWYgbm90IGFwcGxpY2FibGUsIGZhbHNlIHRvIGp1c3QgZGlzYWJsZSB0aGVtDQoJCW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6IGZhbHNlLCAvLyBUcnVlIGlmIGRhdGUgZm9ybWF0dGluZyBhcHBsaWVkIHRvIHByZXYvdG9kYXkvbmV4dCBsaW5rcw0KCQlnb3RvQ3VycmVudDogZmFsc2UsIC8vIFRydWUgaWYgdG9kYXkgbGluayBnb2VzIGJhY2sgdG8gY3VycmVudCBzZWxlY3Rpb24gaW5zdGVhZA0KCQljaGFuZ2VNb250aDogZmFsc2UsIC8vIFRydWUgaWYgbW9udGggY2FuIGJlIHNlbGVjdGVkIGRpcmVjdGx5LCBmYWxzZSBpZiBvbmx5IHByZXYvbmV4dA0KCQljaGFuZ2VZZWFyOiBmYWxzZSwgLy8gVHJ1ZSBpZiB5ZWFyIGNhbiBiZSBzZWxlY3RlZCBkaXJlY3RseSwgZmFsc2UgaWYgb25seSBwcmV2L25leHQNCgkJeWVhclJhbmdlOiAiYy0xMDpjKzEwIiwgLy8gUmFuZ2Ugb2YgeWVhcnMgdG8gZGlzcGxheSBpbiBkcm9wLWRvd24sDQoJCQkvLyBlaXRoZXIgcmVsYXRpdmUgdG8gdG9kYXkncyB5ZWFyICgtbm46K25uKSwgcmVsYXRpdmUgdG8gY3VycmVudGx5IGRpc3BsYXllZCB5ZWFyDQoJCQkvLyAoYy1ubjpjK25uKSwgYWJzb2x1dGUgKG5ubm46bm5ubiksIG9yIGEgY29tYmluYXRpb24gb2YgdGhlIGFib3ZlIChubm5uOi1uKQ0KCQlzaG93T3RoZXJNb250aHM6IGZhbHNlLCAvLyBUcnVlIHRvIHNob3cgZGF0ZXMgaW4gb3RoZXIgbW9udGhzLCBmYWxzZSB0byBsZWF2ZSBibGFuaw0KCQlzZWxlY3RPdGhlck1vbnRoczogZmFsc2UsIC8vIFRydWUgdG8gYWxsb3cgc2VsZWN0aW9uIG9mIGRhdGVzIGluIG90aGVyIG1vbnRocywgZmFsc2UgZm9yIHVuc2VsZWN0YWJsZQ0KCQlzaG93V2VlazogZmFsc2UsIC8vIFRydWUgdG8gc2hvdyB3ZWVrIG9mIHRoZSB5ZWFyLCBmYWxzZSB0byBub3Qgc2hvdyBpdA0KCQljYWxjdWxhdGVXZWVrOiB0aGlzLmlzbzg2MDFXZWVrLCAvLyBIb3cgdG8gY2FsY3VsYXRlIHRoZSB3ZWVrIG9mIHRoZSB5ZWFyLA0KCQkJLy8gdGFrZXMgYSBEYXRlIGFuZCByZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIHdlZWsgZm9yIGl0DQoJCXNob3J0WWVhckN1dG9mZjogIisxMCIsIC8vIFNob3J0IHllYXIgdmFsdWVzIDwgdGhpcyBhcmUgaW4gdGhlIGN1cnJlbnQgY2VudHVyeSwNCgkJCS8vID4gdGhpcyBhcmUgaW4gdGhlIHByZXZpb3VzIGNlbnR1cnksDQoJCQkvLyBzdHJpbmcgdmFsdWUgc3RhcnRpbmcgd2l0aCAiKyIgZm9yIGN1cnJlbnQgeWVhciArIHZhbHVlDQoJCW1pbkRhdGU6IG51bGwsIC8vIFRoZSBlYXJsaWVzdCBzZWxlY3RhYmxlIGRhdGUsIG9yIG51bGwgZm9yIG5vIGxpbWl0DQoJCW1heERhdGU6IG51bGwsIC8vIFRoZSBsYXRlc3Qgc2VsZWN0YWJsZSBkYXRlLCBvciBudWxsIGZvciBubyBsaW1pdA0KCQlkdXJhdGlvbjogImZhc3QiLCAvLyBEdXJhdGlvbiBvZiBkaXNwbGF5L2Nsb3N1cmUNCgkJYmVmb3JlU2hvd0RheTogbnVsbCwgLy8gRnVuY3Rpb24gdGhhdCB0YWtlcyBhIGRhdGUgYW5kIHJldHVybnMgYW4gYXJyYXkgd2l0aA0KCQkJLy8gWzBdID0gdHJ1ZSBpZiBzZWxlY3RhYmxlLCBmYWxzZSBpZiBub3QsIFsxXSA9IGN1c3RvbSBDU1MgY2xhc3MgbmFtZShzKSBvciAiIiwNCgkJCS8vIFsyXSA9IGNlbGwgdGl0bGUgKG9wdGlvbmFsKSwgZS5nLiAkLmRhdGVwaWNrZXIubm9XZWVrZW5kcw0KCQliZWZvcmVTaG93OiBudWxsLCAvLyBGdW5jdGlvbiB0aGF0IHRha2VzIGFuIGlucHV0IGZpZWxkIGFuZA0KCQkJLy8gcmV0dXJucyBhIHNldCBvZiBjdXN0b20gc2V0dGluZ3MgZm9yIHRoZSBkYXRlIHBpY2tlcg0KCQlvblNlbGVjdDogbnVsbCwgLy8gRGVmaW5lIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQNCgkJb25DaGFuZ2VNb250aFllYXI6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG1vbnRoIG9yIHllYXIgaXMgY2hhbmdlZA0KCQlvbkNsb3NlOiBudWxsLCAvLyBEZWZpbmUgYSBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIHRoZSBkYXRlcGlja2VyIGlzIGNsb3NlZA0KCQludW1iZXJPZk1vbnRoczogMSwgLy8gTnVtYmVyIG9mIG1vbnRocyB0byBzaG93IGF0IGEgdGltZQ0KCQlzaG93Q3VycmVudEF0UG9zOiAwLCAvLyBUaGUgcG9zaXRpb24gaW4gbXVsdGlwZSBtb250aHMgYXQgd2hpY2ggdG8gc2hvdyB0aGUgY3VycmVudCBtb250aCAoc3RhcnRpbmcgYXQgMCkNCgkJc3RlcE1vbnRoczogMSwgLy8gTnVtYmVyIG9mIG1vbnRocyB0byBzdGVwIGJhY2svZm9yd2FyZA0KCQlzdGVwQmlnTW9udGhzOiAxMiwgLy8gTnVtYmVyIG9mIG1vbnRocyB0byBzdGVwIGJhY2svZm9yd2FyZCBmb3IgdGhlIGJpZyBsaW5rcw0KCQlhbHRGaWVsZDogIiIsIC8vIFNlbGVjdG9yIGZvciBhbiBhbHRlcm5hdGUgZmllbGQgdG8gc3RvcmUgc2VsZWN0ZWQgZGF0ZXMgaW50bw0KCQlhbHRGb3JtYXQ6ICIiLCAvLyBUaGUgZGF0ZSBmb3JtYXQgdG8gdXNlIGZvciB0aGUgYWx0ZXJuYXRlIGZpZWxkDQoJCWNvbnN0cmFpbklucHV0OiB0cnVlLCAvLyBUaGUgaW5wdXQgaXMgY29uc3RyYWluZWQgYnkgdGhlIGN1cnJlbnQgZGF0ZSBmb3JtYXQNCgkJc2hvd0J1dHRvblBhbmVsOiBmYWxzZSwgLy8gVHJ1ZSB0byBzaG93IGJ1dHRvbiBwYW5lbCwgZmFsc2UgdG8gbm90IHNob3cgaXQNCgkJYXV0b1NpemU6IGZhbHNlLCAvLyBUcnVlIHRvIHNpemUgdGhlIGlucHV0IGZvciB0aGUgZGF0ZSBmb3JtYXQsIGZhbHNlIHRvIGxlYXZlIGFzIGlzDQoJCWRpc2FibGVkOiBmYWxzZSAvLyBUaGUgaW5pdGlhbCBkaXNhYmxlZCBzdGF0ZQ0KCX07DQoJJC5leHRlbmQoIHRoaXMuX2RlZmF1bHRzLCB0aGlzLnJlZ2lvbmFsWyAiIiBdICk7DQoJdGhpcy5yZWdpb25hbC5lbiA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgdGhpcy5yZWdpb25hbFsgIiIgXSApOw0KCXRoaXMucmVnaW9uYWxbICJlbi1VUyIgXSA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgdGhpcy5yZWdpb25hbC5lbiApOw0KCXRoaXMuZHBEaXYgPSBkYXRlcGlja2VyX2JpbmRIb3ZlciggJCggIjxkaXYgaWQ9JyIgKyB0aGlzLl9tYWluRGl2SWQgKyAiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIgKSApOw0KfQ0KDQokLmV4dGVuZCggRGF0ZXBpY2tlci5wcm90b3R5cGUsIHsNCgkvKiBDbGFzcyBuYW1lIGFkZGVkIHRvIGVsZW1lbnRzIHRvIGluZGljYXRlIGFscmVhZHkgY29uZmlndXJlZCB3aXRoIGEgZGF0ZSBwaWNrZXIuICovDQoJbWFya2VyQ2xhc3NOYW1lOiAiaGFzRGF0ZXBpY2tlciIsDQoNCgkvL0tlZXAgdHJhY2sgb2YgdGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgZGlzcGxheWVkIChzZWUgIzcwNDMpDQoJbWF4Um93czogNCwNCg0KCS8vIFRPRE8gcmVuYW1lIHRvICJ3aWRnZXQiIHdoZW4gc3dpdGNoaW5nIHRvIHdpZGdldCBmYWN0b3J5DQoJX3dpZGdldERhdGVwaWNrZXI6IGZ1bmN0aW9uKCkgew0KCQlyZXR1cm4gdGhpcy5kcERpdjsNCgl9LA0KDQoJLyogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2V0dGluZ3MgZm9yIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGRhdGUgcGlja2VyLg0KCSAqIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGFzIGRlZmF1bHRzIChhbm9ueW1vdXMgb2JqZWN0KQ0KCSAqIEByZXR1cm4gdGhlIG1hbmFnZXIgb2JqZWN0DQoJICovDQoJc2V0RGVmYXVsdHM6IGZ1bmN0aW9uKCBzZXR0aW5ncyApIHsNCgkJZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUoIHRoaXMuX2RlZmF1bHRzLCBzZXR0aW5ncyB8fCB7fSApOw0KCQlyZXR1cm4gdGhpczsNCgl9LA0KDQoJLyogQXR0YWNoIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uDQoJICogQHBhcmFtICB0YXJnZXQJZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3Bhbg0KCSAqIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGZvciB0aGlzIGRhdGUgcGlja2VyIGluc3RhbmNlIChhbm9ueW1vdXMpDQoJICovDQoJX2F0dGFjaERhdGVwaWNrZXI6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkgew0KCQl2YXIgbm9kZU5hbWUsIGlubGluZSwgaW5zdDsNCgkJbm9kZU5hbWUgPSB0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCgkJaW5saW5lID0gKCBub2RlTmFtZSA9PT0gImRpdiIgfHwgbm9kZU5hbWUgPT09ICJzcGFuIiApOw0KCQlpZiAoICF0YXJnZXQuaWQgKSB7DQoJCQl0aGlzLnV1aWQgKz0gMTsNCgkJCXRhcmdldC5pZCA9ICJkcCIgKyB0aGlzLnV1aWQ7DQoJCX0NCgkJaW5zdCA9IHRoaXMuX25ld0luc3QoICQoIHRhcmdldCApLCBpbmxpbmUgKTsNCgkJaW5zdC5zZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgc2V0dGluZ3MgfHwge30gKTsNCgkJaWYgKCBub2RlTmFtZSA9PT0gImlucHV0IiApIHsNCgkJCXRoaXMuX2Nvbm5lY3REYXRlcGlja2VyKCB0YXJnZXQsIGluc3QgKTsNCgkJfSBlbHNlIGlmICggaW5saW5lICkgew0KCQkJdGhpcy5faW5saW5lRGF0ZXBpY2tlciggdGFyZ2V0LCBpbnN0ICk7DQoJCX0NCgl9LA0KDQoJLyogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9iamVjdC4gKi8NCglfbmV3SW5zdDogZnVuY3Rpb24oIHRhcmdldCwgaW5saW5lICkgew0KCQl2YXIgaWQgPSB0YXJnZXRbIDAgXS5pZC5yZXBsYWNlKCAvKFteQS1aYS16MC05X1wtXSkvZywgIlxcXFwkMSIgKTsgLy8gZXNjYXBlIGpRdWVyeSBtZXRhIGNoYXJzDQoJCXJldHVybiB7IGlkOiBpZCwgaW5wdXQ6IHRhcmdldCwgLy8gYXNzb2NpYXRlZCB0YXJnZXQNCgkJCXNlbGVjdGVkRGF5OiAwLCBzZWxlY3RlZE1vbnRoOiAwLCBzZWxlY3RlZFllYXI6IDAsIC8vIGN1cnJlbnQgc2VsZWN0aW9uDQoJCQlkcmF3TW9udGg6IDAsIGRyYXdZZWFyOiAwLCAvLyBtb250aCBiZWluZyBkcmF3bg0KCQkJaW5saW5lOiBpbmxpbmUsIC8vIGlzIGRhdGVwaWNrZXIgaW5saW5lIG9yIG5vdA0KCQkJZHBEaXY6ICggIWlubGluZSA/IHRoaXMuZHBEaXYgOiAvLyBwcmVzZW50YXRpb24gZGl2DQoJCQlkYXRlcGlja2VyX2JpbmRIb3ZlciggJCggIjxkaXYgY2xhc3M9JyIgKyB0aGlzLl9pbmxpbmVDbGFzcyArICIgdWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIgKSApICkgfTsNCgl9LA0KDQoJLyogQXR0YWNoIHRoZSBkYXRlIHBpY2tlciB0byBhbiBpbnB1dCBmaWVsZC4gKi8NCglfY29ubmVjdERhdGVwaWNrZXI6IGZ1bmN0aW9uKCB0YXJnZXQsIGluc3QgKSB7DQoJCXZhciBpbnB1dCA9ICQoIHRhcmdldCApOw0KCQlpbnN0LmFwcGVuZCA9ICQoIFtdICk7DQoJCWluc3QudHJpZ2dlciA9ICQoIFtdICk7DQoJCWlmICggaW5wdXQuaGFzQ2xhc3MoIHRoaXMubWFya2VyQ2xhc3NOYW1lICkgKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJdGhpcy5fYXR0YWNobWVudHMoIGlucHV0LCBpbnN0ICk7DQoJCWlucHV0LmFkZENsYXNzKCB0aGlzLm1hcmtlckNsYXNzTmFtZSApLm9uKCAia2V5ZG93biIsIHRoaXMuX2RvS2V5RG93biApLg0KCQkJb24oICJrZXlwcmVzcyIsIHRoaXMuX2RvS2V5UHJlc3MgKS5vbiggImtleXVwIiwgdGhpcy5fZG9LZXlVcCApOw0KCQl0aGlzLl9hdXRvU2l6ZSggaW5zdCApOw0KCQkkLmRhdGEoIHRhcmdldCwgImRhdGVwaWNrZXIiLCBpbnN0ICk7DQoNCgkJLy9JZiBkaXNhYmxlZCBvcHRpb24gaXMgdHJ1ZSwgZGlzYWJsZSB0aGUgZGF0ZXBpY2tlciBvbmNlIGl0IGhhcyBiZWVuIGF0dGFjaGVkIHRvIHRoZSBpbnB1dCAoc2VlIHRpY2tldCAjNTY2NSkNCgkJaWYgKCBpbnN0LnNldHRpbmdzLmRpc2FibGVkICkgew0KCQkJdGhpcy5fZGlzYWJsZURhdGVwaWNrZXIoIHRhcmdldCApOw0KCQl9DQoJfSwNCg0KCS8qIE1ha2UgYXR0YWNobWVudHMgYmFzZWQgb24gc2V0dGluZ3MuICovDQoJX2F0dGFjaG1lbnRzOiBmdW5jdGlvbiggaW5wdXQsIGluc3QgKSB7DQoJCXZhciBzaG93T24sIGJ1dHRvblRleHQsIGJ1dHRvbkltYWdlLA0KCQkJYXBwZW5kVGV4dCA9IHRoaXMuX2dldCggaW5zdCwgImFwcGVuZFRleHQiICksDQoJCQlpc1JUTCA9IHRoaXMuX2dldCggaW5zdCwgImlzUlRMIiApOw0KDQoJCWlmICggaW5zdC5hcHBlbmQgKSB7DQoJCQlpbnN0LmFwcGVuZC5yZW1vdmUoKTsNCgkJfQ0KCQlpZiAoIGFwcGVuZFRleHQgKSB7DQoJCQlpbnN0LmFwcGVuZCA9ICQoICI8c3BhbiBjbGFzcz0nIiArIHRoaXMuX2FwcGVuZENsYXNzICsgIic+IiArIGFwcGVuZFRleHQgKyAiPC9zcGFuPiIgKTsNCgkJCWlucHV0WyBpc1JUTCA/ICJiZWZvcmUiIDogImFmdGVyIiBdKCBpbnN0LmFwcGVuZCApOw0KCQl9DQoNCgkJaW5wdXQub2ZmKCAiZm9jdXMiLCB0aGlzLl9zaG93RGF0ZXBpY2tlciApOw0KDQoJCWlmICggaW5zdC50cmlnZ2VyICkgew0KCQkJaW5zdC50cmlnZ2VyLnJlbW92ZSgpOw0KCQl9DQoNCgkJc2hvd09uID0gdGhpcy5fZ2V0KCBpbnN0LCAic2hvd09uIiApOw0KCQlpZiAoIHNob3dPbiA9PT0gImZvY3VzIiB8fCBzaG93T24gPT09ICJib3RoIiApIHsgLy8gcG9wLXVwIGRhdGUgcGlja2VyIHdoZW4gaW4gdGhlIG1hcmtlZCBmaWVsZA0KCQkJaW5wdXQub24oICJmb2N1cyIsIHRoaXMuX3Nob3dEYXRlcGlja2VyICk7DQoJCX0NCgkJaWYgKCBzaG93T24gPT09ICJidXR0b24iIHx8IHNob3dPbiA9PT0gImJvdGgiICkgeyAvLyBwb3AtdXAgZGF0ZSBwaWNrZXIgd2hlbiBidXR0b24gY2xpY2tlZA0KCQkJYnV0dG9uVGV4dCA9IHRoaXMuX2dldCggaW5zdCwgImJ1dHRvblRleHQiICk7DQoJCQlidXR0b25JbWFnZSA9IHRoaXMuX2dldCggaW5zdCwgImJ1dHRvbkltYWdlIiApOw0KCQkJaW5zdC50cmlnZ2VyID0gJCggdGhpcy5fZ2V0KCBpbnN0LCAiYnV0dG9uSW1hZ2VPbmx5IiApID8NCgkJCQkkKCAiPGltZy8+IiApLmFkZENsYXNzKCB0aGlzLl90cmlnZ2VyQ2xhc3MgKS4NCgkJCQkJYXR0ciggeyBzcmM6IGJ1dHRvbkltYWdlLCBhbHQ6IGJ1dHRvblRleHQsIHRpdGxlOiBidXR0b25UZXh0IH0gKSA6DQoJCQkJJCggIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj4iICkuYWRkQ2xhc3MoIHRoaXMuX3RyaWdnZXJDbGFzcyApLg0KCQkJCQlodG1sKCAhYnV0dG9uSW1hZ2UgPyBidXR0b25UZXh0IDogJCggIjxpbWcvPiIgKS5hdHRyKA0KCQkJCQl7IHNyYzpidXR0b25JbWFnZSwgYWx0OmJ1dHRvblRleHQsIHRpdGxlOmJ1dHRvblRleHQgfSApICkgKTsNCgkJCWlucHV0WyBpc1JUTCA/ICJiZWZvcmUiIDogImFmdGVyIiBdKCBpbnN0LnRyaWdnZXIgKTsNCgkJCWluc3QudHJpZ2dlci5vbiggImNsaWNrIiwgZnVuY3Rpb24oKSB7DQoJCQkJaWYgKCAkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmICQuZGF0ZXBpY2tlci5fbGFzdElucHV0ID09PSBpbnB1dFsgMCBdICkgew0KCQkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7DQoJCQkJfSBlbHNlIGlmICggJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiAkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCAhPT0gaW5wdXRbIDAgXSApIHsNCgkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOw0KCQkJCQkkLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKCBpbnB1dFsgMCBdICk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJJC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlciggaW5wdXRbIDAgXSApOw0KCQkJCX0NCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9ICk7DQoJCX0NCgl9LA0KDQoJLyogQXBwbHkgdGhlIG1heGltdW0gbGVuZ3RoIGZvciB0aGUgZGF0ZSBmb3JtYXQuICovDQoJX2F1dG9TaXplOiBmdW5jdGlvbiggaW5zdCApIHsNCgkJaWYgKCB0aGlzLl9nZXQoIGluc3QsICJhdXRvU2l6ZSIgKSAmJiAhaW5zdC5pbmxpbmUgKSB7DQoJCQl2YXIgZmluZE1heCwgbWF4LCBtYXhJLCBpLA0KCQkJCWRhdGUgPSBuZXcgRGF0ZSggMjAwOSwgMTIgLSAxLCAyMCApLCAvLyBFbnN1cmUgZG91YmxlIGRpZ2l0cw0KCQkJCWRhdGVGb3JtYXQgPSB0aGlzLl9nZXQoIGluc3QsICJkYXRlRm9ybWF0IiApOw0KDQoJCQlpZiAoIGRhdGVGb3JtYXQubWF0Y2goIC9bRE1dLyApICkgew0KCQkJCWZpbmRNYXggPSBmdW5jdGlvbiggbmFtZXMgKSB7DQoJCQkJCW1heCA9IDA7DQoJCQkJCW1heEkgPSAwOw0KCQkJCQlmb3IgKCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrICkgew0KCQkJCQkJaWYgKCBuYW1lc1sgaSBdLmxlbmd0aCA+IG1heCApIHsNCgkJCQkJCQltYXggPSBuYW1lc1sgaSBdLmxlbmd0aDsNCgkJCQkJCQltYXhJID0gaTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQlyZXR1cm4gbWF4STsNCgkJCQl9Ow0KCQkJCWRhdGUuc2V0TW9udGgoIGZpbmRNYXgoIHRoaXMuX2dldCggaW5zdCwgKCBkYXRlRm9ybWF0Lm1hdGNoKCAvTU0vICkgPw0KCQkJCQkibW9udGhOYW1lcyIgOiAibW9udGhOYW1lc1Nob3J0IiApICkgKSApOw0KCQkJCWRhdGUuc2V0RGF0ZSggZmluZE1heCggdGhpcy5fZ2V0KCBpbnN0LCAoIGRhdGVGb3JtYXQubWF0Y2goIC9ERC8gKSA/DQoJCQkJCSJkYXlOYW1lcyIgOiAiZGF5TmFtZXNTaG9ydCIgKSApICkgKyAyMCAtIGRhdGUuZ2V0RGF5KCkgKTsNCgkJCX0NCgkJCWluc3QuaW5wdXQuYXR0ciggInNpemUiLCB0aGlzLl9mb3JtYXREYXRlKCBpbnN0LCBkYXRlICkubGVuZ3RoICk7DQoJCX0NCgl9LA0KDQoJLyogQXR0YWNoIGFuIGlubGluZSBkYXRlIHBpY2tlciB0byBhIGRpdi4gKi8NCglfaW5saW5lRGF0ZXBpY2tlcjogZnVuY3Rpb24oIHRhcmdldCwgaW5zdCApIHsNCgkJdmFyIGRpdlNwYW4gPSAkKCB0YXJnZXQgKTsNCgkJaWYgKCBkaXZTcGFuLmhhc0NsYXNzKCB0aGlzLm1hcmtlckNsYXNzTmFtZSApICkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCWRpdlNwYW4uYWRkQ2xhc3MoIHRoaXMubWFya2VyQ2xhc3NOYW1lICkuYXBwZW5kKCBpbnN0LmRwRGl2ICk7DQoJCSQuZGF0YSggdGFyZ2V0LCAiZGF0ZXBpY2tlciIsIGluc3QgKTsNCgkJdGhpcy5fc2V0RGF0ZSggaW5zdCwgdGhpcy5fZ2V0RGVmYXVsdERhdGUoIGluc3QgKSwgdHJ1ZSApOw0KCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKCBpbnN0ICk7DQoJCXRoaXMuX3VwZGF0ZUFsdGVybmF0ZSggaW5zdCApOw0KDQoJCS8vSWYgZGlzYWJsZWQgb3B0aW9uIGlzIHRydWUsIGRpc2FibGUgdGhlIGRhdGVwaWNrZXIgYmVmb3JlIHNob3dpbmcgaXQgKHNlZSB0aWNrZXQgIzU2NjUpDQoJCWlmICggaW5zdC5zZXR0aW5ncy5kaXNhYmxlZCApIHsNCgkJCXRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKCB0YXJnZXQgKTsNCgkJfQ0KDQoJCS8vIFNldCBkaXNwbGF5OmJsb2NrIGluIHBsYWNlIG9mIGluc3QuZHBEaXYuc2hvdygpIHdoaWNoIHdvbid0IHdvcmsgb24gZGlzY29ubmVjdGVkIGVsZW1lbnRzDQoJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeXVpLmNvbS90aWNrZXQvNzU1MiAtIEEgRGF0ZXBpY2tlciBjcmVhdGVkIG9uIGEgZGV0YWNoZWQgZGl2IGhhcyB6ZXJvIGhlaWdodA0KCQlpbnN0LmRwRGl2LmNzcyggImRpc3BsYXkiLCAiYmxvY2siICk7DQoJfSwNCg0KCS8qIFBvcC11cCB0aGUgZGF0ZSBwaWNrZXIgaW4gYSAiZGlhbG9nIiBib3guDQoJICogQHBhcmFtICBpbnB1dCBlbGVtZW50IC0gaWdub3JlZA0KCSAqIEBwYXJhbSAgZGF0ZQlzdHJpbmcgb3IgRGF0ZSAtIHRoZSBpbml0aWFsIGRhdGUgdG8gZGlzcGxheQ0KCSAqIEBwYXJhbSAgb25TZWxlY3QgIGZ1bmN0aW9uIC0gdGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQNCgkgKiBAcGFyYW0gIHNldHRpbmdzICBvYmplY3QgLSB1cGRhdGUgdGhlIGRpYWxvZyBkYXRlIHBpY2tlciBpbnN0YW5jZSdzIHNldHRpbmdzIChhbm9ueW1vdXMgb2JqZWN0KQ0KCSAqIEBwYXJhbSAgcG9zIGludFsyXSAtIGNvb3JkaW5hdGVzIGZvciB0aGUgZGlhbG9nJ3MgcG9zaXRpb24gd2l0aGluIHRoZSBzY3JlZW4gb3INCgkgKgkJCQkJZXZlbnQgLSB3aXRoIHgveSBjb29yZGluYXRlcyBvcg0KCSAqCQkJCQlsZWF2ZSBlbXB0eSBmb3IgZGVmYXVsdCAoc2NyZWVuIGNlbnRyZSkNCgkgKiBAcmV0dXJuIHRoZSBtYW5hZ2VyIG9iamVjdA0KCSAqLw0KCV9kaWFsb2dEYXRlcGlja2VyOiBmdW5jdGlvbiggaW5wdXQsIGRhdGUsIG9uU2VsZWN0LCBzZXR0aW5ncywgcG9zICkgew0KCQl2YXIgaWQsIGJyb3dzZXJXaWR0aCwgYnJvd3NlckhlaWdodCwgc2Nyb2xsWCwgc2Nyb2xsWSwNCgkJCWluc3QgPSB0aGlzLl9kaWFsb2dJbnN0OyAvLyBpbnRlcm5hbCBpbnN0YW5jZQ0KDQoJCWlmICggIWluc3QgKSB7DQoJCQl0aGlzLnV1aWQgKz0gMTsNCgkJCWlkID0gImRwIiArIHRoaXMudXVpZDsNCgkJCXRoaXMuX2RpYWxvZ0lucHV0ID0gJCggIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nIiArIGlkICsNCgkJCQkiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz4iICk7DQoJCQl0aGlzLl9kaWFsb2dJbnB1dC5vbiggImtleWRvd24iLCB0aGlzLl9kb0tleURvd24gKTsNCgkJCSQoICJib2R5IiApLmFwcGVuZCggdGhpcy5fZGlhbG9nSW5wdXQgKTsNCgkJCWluc3QgPSB0aGlzLl9kaWFsb2dJbnN0ID0gdGhpcy5fbmV3SW5zdCggdGhpcy5fZGlhbG9nSW5wdXQsIGZhbHNlICk7DQoJCQlpbnN0LnNldHRpbmdzID0ge307DQoJCQkkLmRhdGEoIHRoaXMuX2RpYWxvZ0lucHV0WyAwIF0sICJkYXRlcGlja2VyIiwgaW5zdCApOw0KCQl9DQoJCWRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKCBpbnN0LnNldHRpbmdzLCBzZXR0aW5ncyB8fCB7fSApOw0KCQlkYXRlID0gKCBkYXRlICYmIGRhdGUuY29uc3RydWN0b3IgPT09IERhdGUgPyB0aGlzLl9mb3JtYXREYXRlKCBpbnN0LCBkYXRlICkgOiBkYXRlICk7DQoJCXRoaXMuX2RpYWxvZ0lucHV0LnZhbCggZGF0ZSApOw0KDQoJCXRoaXMuX3BvcyA9ICggcG9zID8gKCBwb3MubGVuZ3RoID8gcG9zIDogWyBwb3MucGFnZVgsIHBvcy5wYWdlWSBdICkgOiBudWxsICk7DQoJCWlmICggIXRoaXMuX3BvcyApIHsNCgkJCWJyb3dzZXJXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsNCgkJCWJyb3dzZXJIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KCQkJc2Nyb2xsWCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsNCgkJCXNjcm9sbFkgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOw0KCQkJdGhpcy5fcG9zID0gLy8gc2hvdWxkIHVzZSBhY3R1YWwgd2lkdGgvaGVpZ2h0IGJlbG93DQoJCQkJWyAoIGJyb3dzZXJXaWR0aCAvIDIgKSAtIDEwMCArIHNjcm9sbFgsICggYnJvd3NlckhlaWdodCAvIDIgKSAtIDE1MCArIHNjcm9sbFkgXTsNCgkJfQ0KDQoJCS8vIE1vdmUgaW5wdXQgb24gc2NyZWVuIGZvciBmb2N1cywgYnV0IGhpZGRlbiBiZWhpbmQgZGlhbG9nDQoJCXRoaXMuX2RpYWxvZ0lucHV0LmNzcyggImxlZnQiLCAoIHRoaXMuX3Bvc1sgMCBdICsgMjAgKSArICJweCIgKS5jc3MoICJ0b3AiLCB0aGlzLl9wb3NbIDEgXSArICJweCIgKTsNCgkJaW5zdC5zZXR0aW5ncy5vblNlbGVjdCA9IG9uU2VsZWN0Ow0KCQl0aGlzLl9pbkRpYWxvZyA9IHRydWU7DQoJCXRoaXMuZHBEaXYuYWRkQ2xhc3MoIHRoaXMuX2RpYWxvZ0NsYXNzICk7DQoJCXRoaXMuX3Nob3dEYXRlcGlja2VyKCB0aGlzLl9kaWFsb2dJbnB1dFsgMCBdICk7DQoJCWlmICggJC5ibG9ja1VJICkgew0KCQkJJC5ibG9ja1VJKCB0aGlzLmRwRGl2ICk7DQoJCX0NCgkJJC5kYXRhKCB0aGlzLl9kaWFsb2dJbnB1dFsgMCBdLCAiZGF0ZXBpY2tlciIsIGluc3QgKTsNCgkJcmV0dXJuIHRoaXM7DQoJfSwNCg0KCS8qIERldGFjaCBhIGRhdGVwaWNrZXIgZnJvbSBpdHMgY29udHJvbC4NCgkgKiBAcGFyYW0gIHRhcmdldAllbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuDQoJICovDQoJX2Rlc3Ryb3lEYXRlcGlja2VyOiBmdW5jdGlvbiggdGFyZ2V0ICkgew0KCQl2YXIgbm9kZU5hbWUsDQoJCQkkdGFyZ2V0ID0gJCggdGFyZ2V0ICksDQoJCQlpbnN0ID0gJC5kYXRhKCB0YXJnZXQsICJkYXRlcGlja2VyIiApOw0KDQoJCWlmICggISR0YXJnZXQuaGFzQ2xhc3MoIHRoaXMubWFya2VyQ2xhc3NOYW1lICkgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQlub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOw0KCQkkLnJlbW92ZURhdGEoIHRhcmdldCwgImRhdGVwaWNrZXIiICk7DQoJCWlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgKSB7DQoJCQlpbnN0LmFwcGVuZC5yZW1vdmUoKTsNCgkJCWluc3QudHJpZ2dlci5yZW1vdmUoKTsNCgkJCSR0YXJnZXQucmVtb3ZlQ2xhc3MoIHRoaXMubWFya2VyQ2xhc3NOYW1lICkuDQoJCQkJb2ZmKCAiZm9jdXMiLCB0aGlzLl9zaG93RGF0ZXBpY2tlciApLg0KCQkJCW9mZiggImtleWRvd24iLCB0aGlzLl9kb0tleURvd24gKS4NCgkJCQlvZmYoICJrZXlwcmVzcyIsIHRoaXMuX2RvS2V5UHJlc3MgKS4NCgkJCQlvZmYoICJrZXl1cCIsIHRoaXMuX2RvS2V5VXAgKTsNCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJkaXYiIHx8IG5vZGVOYW1lID09PSAic3BhbiIgKSB7DQoJCQkkdGFyZ2V0LnJlbW92ZUNsYXNzKCB0aGlzLm1hcmtlckNsYXNzTmFtZSApLmVtcHR5KCk7DQoJCX0NCg0KCQlpZiAoIGRhdGVwaWNrZXJfaW5zdEFjdGl2ZSA9PT0gaW5zdCApIHsNCgkJCWRhdGVwaWNrZXJfaW5zdEFjdGl2ZSA9IG51bGw7DQoJCX0NCgl9LA0KDQoJLyogRW5hYmxlIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uDQoJICogQHBhcmFtICB0YXJnZXQJZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3Bhbg0KCSAqLw0KCV9lbmFibGVEYXRlcGlja2VyOiBmdW5jdGlvbiggdGFyZ2V0ICkgew0KCQl2YXIgbm9kZU5hbWUsIGlubGluZSwNCgkJCSR0YXJnZXQgPSAkKCB0YXJnZXQgKSwNCgkJCWluc3QgPSAkLmRhdGEoIHRhcmdldCwgImRhdGVwaWNrZXIiICk7DQoNCgkJaWYgKCAhJHRhcmdldC5oYXNDbGFzcyggdGhpcy5tYXJrZXJDbGFzc05hbWUgKSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCW5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7DQoJCWlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgKSB7DQoJCQl0YXJnZXQuZGlzYWJsZWQgPSBmYWxzZTsNCgkJCWluc3QudHJpZ2dlci5maWx0ZXIoICJidXR0b24iICkuDQoJCQkJZWFjaCggZnVuY3Rpb24oKSB7IHRoaXMuZGlzYWJsZWQgPSBmYWxzZTsgfSApLmVuZCgpLg0KCQkJCWZpbHRlciggImltZyIgKS5jc3MoIHsgb3BhY2l0eTogIjEuMCIsIGN1cnNvcjogIiIgfSApOw0KCQl9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gImRpdiIgfHwgbm9kZU5hbWUgPT09ICJzcGFuIiApIHsNCgkJCWlubGluZSA9ICR0YXJnZXQuY2hpbGRyZW4oICIuIiArIHRoaXMuX2lubGluZUNsYXNzICk7DQoJCQlpbmxpbmUuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApOw0KCQkJaW5saW5lLmZpbmQoICJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIgKS4NCgkJCQlwcm9wKCAiZGlzYWJsZWQiLCBmYWxzZSApOw0KCQl9DQoJCXRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAoIHRoaXMuX2Rpc2FibGVkSW5wdXRzLA0KCQkJZnVuY3Rpb24oIHZhbHVlICkgeyByZXR1cm4gKCB2YWx1ZSA9PT0gdGFyZ2V0ID8gbnVsbCA6IHZhbHVlICk7IH0gKTsgLy8gZGVsZXRlIGVudHJ5DQoJfSwNCg0KCS8qIERpc2FibGUgdGhlIGRhdGUgcGlja2VyIHRvIGEgalF1ZXJ5IHNlbGVjdGlvbi4NCgkgKiBAcGFyYW0gIHRhcmdldAllbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuDQoJICovDQoJX2Rpc2FibGVEYXRlcGlja2VyOiBmdW5jdGlvbiggdGFyZ2V0ICkgew0KCQl2YXIgbm9kZU5hbWUsIGlubGluZSwNCgkJCSR0YXJnZXQgPSAkKCB0YXJnZXQgKSwNCgkJCWluc3QgPSAkLmRhdGEoIHRhcmdldCwgImRhdGVwaWNrZXIiICk7DQoNCgkJaWYgKCAhJHRhcmdldC5oYXNDbGFzcyggdGhpcy5tYXJrZXJDbGFzc05hbWUgKSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCW5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7DQoJCWlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgKSB7DQoJCQl0YXJnZXQuZGlzYWJsZWQgPSB0cnVlOw0KCQkJaW5zdC50cmlnZ2VyLmZpbHRlciggImJ1dHRvbiIgKS4NCgkJCQllYWNoKCBmdW5jdGlvbigpIHsgdGhpcy5kaXNhYmxlZCA9IHRydWU7IH0gKS5lbmQoKS4NCgkJCQlmaWx0ZXIoICJpbWciICkuY3NzKCB7IG9wYWNpdHk6ICIwLjUiLCBjdXJzb3I6ICJkZWZhdWx0IiB9ICk7DQoJCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAiZGl2IiB8fCBub2RlTmFtZSA9PT0gInNwYW4iICkgew0KCQkJaW5saW5lID0gJHRhcmdldC5jaGlsZHJlbiggIi4iICsgdGhpcy5faW5saW5lQ2xhc3MgKTsNCgkJCWlubGluZS5jaGlsZHJlbigpLmFkZENsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICk7DQoJCQlpbmxpbmUuZmluZCggInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIiApLg0KCQkJCXByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCgkJfQ0KCQl0aGlzLl9kaXNhYmxlZElucHV0cyA9ICQubWFwKCB0aGlzLl9kaXNhYmxlZElucHV0cywNCgkJCWZ1bmN0aW9uKCB2YWx1ZSApIHsgcmV0dXJuICggdmFsdWUgPT09IHRhcmdldCA/IG51bGwgOiB2YWx1ZSApOyB9ICk7IC8vIGRlbGV0ZSBlbnRyeQ0KCQl0aGlzLl9kaXNhYmxlZElucHV0c1sgdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoIF0gPSB0YXJnZXQ7DQoJfSwNCg0KCS8qIElzIHRoZSBmaXJzdCBmaWVsZCBpbiBhIGpRdWVyeSBjb2xsZWN0aW9uIGRpc2FibGVkIGFzIGEgZGF0ZXBpY2tlcj8NCgkgKiBAcGFyYW0gIHRhcmdldAllbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuDQoJICogQHJldHVybiBib29sZWFuIC0gdHJ1ZSBpZiBkaXNhYmxlZCwgZmFsc2UgaWYgZW5hYmxlZA0KCSAqLw0KCV9pc0Rpc2FibGVkRGF0ZXBpY2tlcjogZnVuY3Rpb24oIHRhcmdldCApIHsNCgkJaWYgKCAhdGFyZ2V0ICkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJCWZvciAoIHZhciBpID0gMDsgaSA8IHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDsgaSsrICkgew0KCQkJaWYgKCB0aGlzLl9kaXNhYmxlZElucHV0c1sgaSBdID09PSB0YXJnZXQgKSB7DQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9DQoJCX0NCgkJcmV0dXJuIGZhbHNlOw0KCX0sDQoNCgkvKiBSZXRyaWV2ZSB0aGUgaW5zdGFuY2UgZGF0YSBmb3IgdGhlIHRhcmdldCBjb250cm9sLg0KCSAqIEBwYXJhbSAgdGFyZ2V0ICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuDQoJICogQHJldHVybiAgb2JqZWN0IC0gdGhlIGFzc29jaWF0ZWQgaW5zdGFuY2UgZGF0YQ0KCSAqIEB0aHJvd3MgIGVycm9yIGlmIGEgalF1ZXJ5IHByb2JsZW0gZ2V0dGluZyBkYXRhDQoJICovDQoJX2dldEluc3Q6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7DQoJCXRyeSB7DQoJCQlyZXR1cm4gJC5kYXRhKCB0YXJnZXQsICJkYXRlcGlja2VyIiApOw0KCQl9DQoJCWNhdGNoICggZXJyICkgew0KCQkJdGhyb3cgIk1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIjsNCgkJfQ0KCX0sDQoNCgkvKiBVcGRhdGUgb3IgcmV0cmlldmUgdGhlIHNldHRpbmdzIGZvciBhIGRhdGUgcGlja2VyIGF0dGFjaGVkIHRvIGFuIGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uLg0KCSAqIEBwYXJhbSAgdGFyZ2V0ICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuDQoJICogQHBhcmFtICBuYW1lCW9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXBkYXRlIG9yDQoJICoJCQkJc3RyaW5nIC0gdGhlIG5hbWUgb2YgdGhlIHNldHRpbmcgdG8gY2hhbmdlIG9yIHJldHJpZXZlLA0KCSAqCQkJCXdoZW4gcmV0cmlldmluZyBhbHNvICJhbGwiIGZvciBhbGwgaW5zdGFuY2Ugc2V0dGluZ3Mgb3INCgkgKgkJCQkiZGVmYXVsdHMiIGZvciBhbGwgZ2xvYmFsIGRlZmF1bHRzDQoJICogQHBhcmFtICB2YWx1ZSAgIGFueSAtIHRoZSBuZXcgdmFsdWUgZm9yIHRoZSBzZXR0aW5nDQoJICoJCQkJKG9taXQgaWYgYWJvdmUgaXMgYW4gb2JqZWN0IG9yIHRvIHJldHJpZXZlIGEgdmFsdWUpDQoJICovDQoJX29wdGlvbkRhdGVwaWNrZXI6IGZ1bmN0aW9uKCB0YXJnZXQsIG5hbWUsIHZhbHVlICkgew0KCQl2YXIgc2V0dGluZ3MsIGRhdGUsIG1pbkRhdGUsIG1heERhdGUsDQoJCQlpbnN0ID0gdGhpcy5fZ2V0SW5zdCggdGFyZ2V0ICk7DQoNCgkJaWYgKCBhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAic3RyaW5nIiApIHsNCgkJCXJldHVybiAoIG5hbWUgPT09ICJkZWZhdWx0cyIgPyAkLmV4dGVuZCgge30sICQuZGF0ZXBpY2tlci5fZGVmYXVsdHMgKSA6DQoJCQkJKCBpbnN0ID8gKCBuYW1lID09PSAiYWxsIiA/ICQuZXh0ZW5kKCB7fSwgaW5zdC5zZXR0aW5ncyApIDoNCgkJCQl0aGlzLl9nZXQoIGluc3QsIG5hbWUgKSApIDogbnVsbCApICk7DQoJCX0NCg0KCQlzZXR0aW5ncyA9IG5hbWUgfHwge307DQoJCWlmICggdHlwZW9mIG5hbWUgPT09ICJzdHJpbmciICkgew0KCQkJc2V0dGluZ3MgPSB7fTsNCgkJCXNldHRpbmdzWyBuYW1lIF0gPSB2YWx1ZTsNCgkJfQ0KDQoJCWlmICggaW5zdCApIHsNCgkJCWlmICggdGhpcy5fY3VySW5zdCA9PT0gaW5zdCApIHsNCgkJCQl0aGlzLl9oaWRlRGF0ZXBpY2tlcigpOw0KCQkJfQ0KDQoJCQlkYXRlID0gdGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIoIHRhcmdldCwgdHJ1ZSApOw0KCQkJbWluRGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoIGluc3QsICJtaW4iICk7DQoJCQltYXhEYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZSggaW5zdCwgIm1heCIgKTsNCgkJCWRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKCBpbnN0LnNldHRpbmdzLCBzZXR0aW5ncyApOw0KDQoJCQkvLyByZWZvcm1hdCB0aGUgb2xkIG1pbkRhdGUvbWF4RGF0ZSB2YWx1ZXMgaWYgZGF0ZUZvcm1hdCBjaGFuZ2VzIGFuZCBhIG5ldyBtaW5EYXRlL21heERhdGUgaXNuJ3QgcHJvdmlkZWQNCgkJCWlmICggbWluRGF0ZSAhPT0gbnVsbCAmJiBzZXR0aW5ncy5kYXRlRm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3MubWluRGF0ZSA9PT0gdW5kZWZpbmVkICkgew0KCQkJCWluc3Quc2V0dGluZ3MubWluRGF0ZSA9IHRoaXMuX2Zvcm1hdERhdGUoIGluc3QsIG1pbkRhdGUgKTsNCgkJCX0NCgkJCWlmICggbWF4RGF0ZSAhPT0gbnVsbCAmJiBzZXR0aW5ncy5kYXRlRm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3MubWF4RGF0ZSA9PT0gdW5kZWZpbmVkICkgew0KCQkJCWluc3Quc2V0dGluZ3MubWF4RGF0ZSA9IHRoaXMuX2Zvcm1hdERhdGUoIGluc3QsIG1heERhdGUgKTsNCgkJCX0NCgkJCWlmICggImRpc2FibGVkIiBpbiBzZXR0aW5ncyApIHsNCgkJCQlpZiAoIHNldHRpbmdzLmRpc2FibGVkICkgew0KCQkJCQl0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlciggdGFyZ2V0ICk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJdGhpcy5fZW5hYmxlRGF0ZXBpY2tlciggdGFyZ2V0ICk7DQoJCQkJfQ0KCQkJfQ0KCQkJdGhpcy5fYXR0YWNobWVudHMoICQoIHRhcmdldCApLCBpbnN0ICk7DQoJCQl0aGlzLl9hdXRvU2l6ZSggaW5zdCApOw0KCQkJdGhpcy5fc2V0RGF0ZSggaW5zdCwgZGF0ZSApOw0KCQkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKCBpbnN0ICk7DQoJCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKCBpbnN0ICk7DQoJCX0NCgl9LA0KDQoJLy8gQ2hhbmdlIG1ldGhvZCBkZXByZWNhdGVkDQoJX2NoYW5nZURhdGVwaWNrZXI6IGZ1bmN0aW9uKCB0YXJnZXQsIG5hbWUsIHZhbHVlICkgew0KCQl0aGlzLl9vcHRpb25EYXRlcGlja2VyKCB0YXJnZXQsIG5hbWUsIHZhbHVlICk7DQoJfSwNCg0KCS8qIFJlZHJhdyB0aGUgZGF0ZSBwaWNrZXIgYXR0YWNoZWQgdG8gYW4gaW5wdXQgZmllbGQgb3IgZGl2aXNpb24uDQoJICogQHBhcmFtICB0YXJnZXQgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4NCgkgKi8NCglfcmVmcmVzaERhdGVwaWNrZXI6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7DQoJCXZhciBpbnN0ID0gdGhpcy5fZ2V0SW5zdCggdGFyZ2V0ICk7DQoJCWlmICggaW5zdCApIHsNCgkJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoIGluc3QgKTsNCgkJfQ0KCX0sDQoNCgkvKiBTZXQgdGhlIGRhdGVzIGZvciBhIGpRdWVyeSBzZWxlY3Rpb24uDQoJICogQHBhcmFtICB0YXJnZXQgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3Bhbg0KCSAqIEBwYXJhbSAgZGF0ZQlEYXRlIC0gdGhlIG5ldyBkYXRlDQoJICovDQoJX3NldERhdGVEYXRlcGlja2VyOiBmdW5jdGlvbiggdGFyZ2V0LCBkYXRlICkgew0KCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QoIHRhcmdldCApOw0KCQlpZiAoIGluc3QgKSB7DQoJCQl0aGlzLl9zZXREYXRlKCBpbnN0LCBkYXRlICk7DQoJCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKCBpbnN0ICk7DQoJCQl0aGlzLl91cGRhdGVBbHRlcm5hdGUoIGluc3QgKTsNCgkJfQ0KCX0sDQoNCgkvKiBHZXQgdGhlIGRhdGUocykgZm9yIHRoZSBmaXJzdCBlbnRyeSBpbiBhIGpRdWVyeSBzZWxlY3Rpb24uDQoJICogQHBhcmFtICB0YXJnZXQgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3Bhbg0KCSAqIEBwYXJhbSAgbm9EZWZhdWx0IGJvb2xlYW4gLSB0cnVlIGlmIG5vIGRlZmF1bHQgZGF0ZSBpcyB0byBiZSB1c2VkDQoJICogQHJldHVybiBEYXRlIC0gdGhlIGN1cnJlbnQgZGF0ZQ0KCSAqLw0KCV9nZXREYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24oIHRhcmdldCwgbm9EZWZhdWx0ICkgew0KCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QoIHRhcmdldCApOw0KCQlpZiAoIGluc3QgJiYgIWluc3QuaW5saW5lICkgew0KCQkJdGhpcy5fc2V0RGF0ZUZyb21GaWVsZCggaW5zdCwgbm9EZWZhdWx0ICk7DQoJCX0NCgkJcmV0dXJuICggaW5zdCA/IHRoaXMuX2dldERhdGUoIGluc3QgKSA6IG51bGwgKTsNCgl9LA0KDQoJLyogSGFuZGxlIGtleXN0cm9rZXMuICovDQoJX2RvS2V5RG93bjogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgb25TZWxlY3QsIGRhdGVTdHIsIHNlbCwNCgkJCWluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoIGV2ZW50LnRhcmdldCApLA0KCQkJaGFuZGxlZCA9IHRydWUsDQoJCQlpc1JUTCA9IGluc3QuZHBEaXYuaXMoICIudWktZGF0ZXBpY2tlci1ydGwiICk7DQoNCgkJaW5zdC5fa2V5RXZlbnQgPSB0cnVlOw0KCQlpZiAoICQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgKSB7DQoJCQlzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkgew0KCQkJCWNhc2UgOTogJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOw0KCQkJCQkJaGFuZGxlZCA9IGZhbHNlOw0KCQkJCQkJYnJlYWs7IC8vIGhpZGUgb24gdGFiIG91dA0KCQkJCWNhc2UgMTM6IHNlbCA9ICQoICJ0ZC4iICsgJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MgKyAiOm5vdCguIiArDQoJCQkJCQkJCQkkLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcyArICIpIiwgaW5zdC5kcERpdiApOw0KCQkJCQkJaWYgKCBzZWxbIDAgXSApIHsNCgkJCQkJCQkkLmRhdGVwaWNrZXIuX3NlbGVjdERheSggZXZlbnQudGFyZ2V0LCBpbnN0LnNlbGVjdGVkTW9udGgsIGluc3Quc2VsZWN0ZWRZZWFyLCBzZWxbIDAgXSApOw0KCQkJCQkJfQ0KDQoJCQkJCQlvblNlbGVjdCA9ICQuZGF0ZXBpY2tlci5fZ2V0KCBpbnN0LCAib25TZWxlY3QiICk7DQoJCQkJCQlpZiAoIG9uU2VsZWN0ICkgew0KCQkJCQkJCWRhdGVTdHIgPSAkLmRhdGVwaWNrZXIuX2Zvcm1hdERhdGUoIGluc3QgKTsNCg0KCQkJCQkJCS8vIFRyaWdnZXIgY3VzdG9tIGNhbGxiYWNrDQoJCQkJCQkJb25TZWxlY3QuYXBwbHkoICggaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbIDAgXSA6IG51bGwgKSwgWyBkYXRlU3RyLCBpbnN0IF0gKTsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOw0KCQkJCQkJfQ0KDQoJCQkJCQlyZXR1cm4gZmFsc2U7IC8vIGRvbid0IHN1Ym1pdCB0aGUgZm9ybQ0KCQkJCWNhc2UgMjc6ICQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTsNCgkJCQkJCWJyZWFrOyAvLyBoaWRlIG9uIGVzY2FwZQ0KCQkJCWNhc2UgMzM6ICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSggZXZlbnQudGFyZ2V0LCAoIGV2ZW50LmN0cmxLZXkgPw0KCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBCaWdNb250aHMiICkgOg0KCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBNb250aHMiICkgKSwgIk0iICk7DQoJCQkJCQlicmVhazsgLy8gcHJldmlvdXMgbW9udGgveWVhciBvbiBwYWdlIHVwLysgY3RybA0KCQkJCWNhc2UgMzQ6ICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSggZXZlbnQudGFyZ2V0LCAoIGV2ZW50LmN0cmxLZXkgPw0KCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBCaWdNb250aHMiICkgOg0KCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBNb250aHMiICkgKSwgIk0iICk7DQoJCQkJCQlicmVhazsgLy8gbmV4dCBtb250aC95ZWFyIG9uIHBhZ2UgZG93bi8rIGN0cmwNCgkJCQljYXNlIDM1OiBpZiAoIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSApIHsNCgkJCQkJCQkkLmRhdGVwaWNrZXIuX2NsZWFyRGF0ZSggZXZlbnQudGFyZ2V0ICk7DQoJCQkJCQl9DQoJCQkJCQloYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5Ow0KCQkJCQkJYnJlYWs7IC8vIGNsZWFyIG9uIGN0cmwgb3IgY29tbWFuZCArZW5kDQoJCQkJY2FzZSAzNjogaWYgKCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoIGV2ZW50LnRhcmdldCApOw0KCQkJCQkJfQ0KCQkJCQkJaGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTsNCgkJCQkJCWJyZWFrOyAvLyBjdXJyZW50IG9uIGN0cmwgb3IgY29tbWFuZCAraG9tZQ0KCQkJCWNhc2UgMzc6IGlmICggZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5ICkgew0KCQkJCQkJCSQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSggZXZlbnQudGFyZ2V0LCAoIGlzUlRMID8gKzEgOiAtMSApLCAiRCIgKTsNCgkJCQkJCX0NCgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7DQoNCgkJCQkJCS8vIC0xIGRheSBvbiBjdHJsIG9yIGNvbW1hbmQgK2xlZnQNCgkJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudC5hbHRLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCBldmVudC50YXJnZXQsICggZXZlbnQuY3RybEtleSA/DQoJCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBCaWdNb250aHMiICkgOg0KCQkJCQkJCQktJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJzdGVwTW9udGhzIiApICksICJNIiApOw0KCQkJCQkJfQ0KDQoJCQkJCQkvLyBuZXh0IG1vbnRoL3llYXIgb24gYWx0ICtsZWZ0IG9uIE1hYw0KCQkJCQkJYnJlYWs7DQoJCQkJY2FzZSAzODogaWYgKCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCBldmVudC50YXJnZXQsIC03LCAiRCIgKTsNCgkJCQkJCX0NCgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7DQoJCQkJCQlicmVhazsgLy8gLTEgd2VlayBvbiBjdHJsIG9yIGNvbW1hbmQgK3VwDQoJCQkJY2FzZSAzOTogaWYgKCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCBldmVudC50YXJnZXQsICggaXNSVEwgPyAtMSA6ICsxICksICJEIiApOw0KCQkJCQkJfQ0KCQkJCQkJaGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTsNCg0KCQkJCQkJLy8gKzEgZGF5IG9uIGN0cmwgb3IgY29tbWFuZCArcmlnaHQNCgkJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudC5hbHRLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCBldmVudC50YXJnZXQsICggZXZlbnQuY3RybEtleSA/DQoJCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInN0ZXBCaWdNb250aHMiICkgOg0KCQkJCQkJCQkrJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJzdGVwTW9udGhzIiApICksICJNIiApOw0KCQkJCQkJfQ0KDQoJCQkJCQkvLyBuZXh0IG1vbnRoL3llYXIgb24gYWx0ICtyaWdodA0KCQkJCQkJYnJlYWs7DQoJCQkJY2FzZSA0MDogaWYgKCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgKSB7DQoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCBldmVudC50YXJnZXQsICs3LCAiRCIgKTsNCgkJCQkJCX0NCgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7DQoJCQkJCQlicmVhazsgLy8gKzEgd2VlayBvbiBjdHJsIG9yIGNvbW1hbmQgK2Rvd24NCgkJCQlkZWZhdWx0OiBoYW5kbGVkID0gZmFsc2U7DQoJCQl9DQoJCX0gZWxzZSBpZiAoIGV2ZW50LmtleUNvZGUgPT09IDM2ICYmIGV2ZW50LmN0cmxLZXkgKSB7IC8vIGRpc3BsYXkgdGhlIGRhdGUgcGlja2VyIG9uIGN0cmwraG9tZQ0KCQkJJC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlciggdGhpcyApOw0KCQl9IGVsc2Ugew0KCQkJaGFuZGxlZCA9IGZhbHNlOw0KCQl9DQoNCgkJaWYgKCBoYW5kbGVkICkgew0KCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KCQl9DQoJfSwNCg0KCS8qIEZpbHRlciBlbnRlcmVkIGNoYXJhY3RlcnMgLSBiYXNlZCBvbiBkYXRlIGZvcm1hdC4gKi8NCglfZG9LZXlQcmVzczogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgY2hhcnMsIGNociwNCgkJCWluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoIGV2ZW50LnRhcmdldCApOw0KDQoJCWlmICggJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJjb25zdHJhaW5JbnB1dCIgKSApIHsNCgkJCWNoYXJzID0gJC5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKCAkLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgImRhdGVGb3JtYXQiICkgKTsNCgkJCWNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGV2ZW50LmNoYXJDb2RlID09IG51bGwgPyBldmVudC5rZXlDb2RlIDogZXZlbnQuY2hhckNvZGUgKTsNCgkJCXJldHVybiBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgKCBjaHIgPCAiICIgfHwgIWNoYXJzIHx8IGNoYXJzLmluZGV4T2YoIGNociApID4gLTEgKTsNCgkJfQ0KCX0sDQoNCgkvKiBTeW5jaHJvbmlzZSBtYW51YWwgZW50cnkgYW5kIGZpZWxkL2FsdGVybmF0ZSBmaWVsZC4gKi8NCglfZG9LZXlVcDogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgZGF0ZSwNCgkJCWluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoIGV2ZW50LnRhcmdldCApOw0KDQoJCWlmICggaW5zdC5pbnB1dC52YWwoKSAhPT0gaW5zdC5sYXN0VmFsICkgew0KCQkJdHJ5IHsNCgkJCQlkYXRlID0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSggJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJkYXRlRm9ybWF0IiApLA0KCQkJCQkoIGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogbnVsbCApLA0KCQkJCQkkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyggaW5zdCApICk7DQoNCgkJCQlpZiAoIGRhdGUgKSB7IC8vIG9ubHkgaWYgdmFsaWQNCgkJCQkJJC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKCBpbnN0ICk7DQoJCQkJCSQuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKCBpbnN0ICk7DQoJCQkJCSQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlciggaW5zdCApOw0KCQkJCX0NCgkJCX0NCgkJCWNhdGNoICggZXJyICkgew0KCQkJfQ0KCQl9DQoJCXJldHVybiB0cnVlOw0KCX0sDQoNCgkvKiBQb3AtdXAgdGhlIGRhdGUgcGlja2VyIGZvciBhIGdpdmVuIGlucHV0IGZpZWxkLg0KCSAqIElmIGZhbHNlIHJldHVybmVkIGZyb20gYmVmb3JlU2hvdyBldmVudCBoYW5kbGVyIGRvIG5vdCBzaG93Lg0KCSAqIEBwYXJhbSAgaW5wdXQgIGVsZW1lbnQgLSB0aGUgaW5wdXQgZmllbGQgYXR0YWNoZWQgdG8gdGhlIGRhdGUgcGlja2VyIG9yDQoJICoJCQkJCWV2ZW50IC0gaWYgdHJpZ2dlcmVkIGJ5IGZvY3VzDQoJICovDQoJX3Nob3dEYXRlcGlja2VyOiBmdW5jdGlvbiggaW5wdXQgKSB7DQoJCWlucHV0ID0gaW5wdXQudGFyZ2V0IHx8IGlucHV0Ow0KCQlpZiAoIGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJpbnB1dCIgKSB7IC8vIGZpbmQgZnJvbSBidXR0b24vaW1hZ2UgdHJpZ2dlcg0KCQkJaW5wdXQgPSAkKCAiaW5wdXQiLCBpbnB1dC5wYXJlbnROb2RlIClbIDAgXTsNCgkJfQ0KDQoJCWlmICggJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlciggaW5wdXQgKSB8fCAkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9PT0gaW5wdXQgKSB7IC8vIGFscmVhZHkgaGVyZQ0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIGluc3QsIGJlZm9yZVNob3csIGJlZm9yZVNob3dTZXR0aW5ncywgaXNGaXhlZCwNCgkJCW9mZnNldCwgc2hvd0FuaW0sIGR1cmF0aW9uOw0KDQoJCWluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoIGlucHV0ICk7DQoJCWlmICggJC5kYXRlcGlja2VyLl9jdXJJbnN0ICYmICQuZGF0ZXBpY2tlci5fY3VySW5zdCAhPT0gaW5zdCApIHsNCgkJCSQuZGF0ZXBpY2tlci5fY3VySW5zdC5kcERpdi5zdG9wKCB0cnVlLCB0cnVlICk7DQoJCQlpZiAoIGluc3QgJiYgJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyApIHsNCgkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCAkLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbIDAgXSApOw0KCQkJfQ0KCQl9DQoNCgkJYmVmb3JlU2hvdyA9ICQuZGF0ZXBpY2tlci5fZ2V0KCBpbnN0LCAiYmVmb3JlU2hvdyIgKTsNCgkJYmVmb3JlU2hvd1NldHRpbmdzID0gYmVmb3JlU2hvdyA/IGJlZm9yZVNob3cuYXBwbHkoIGlucHV0LCBbIGlucHV0LCBpbnN0IF0gKSA6IHt9Ow0KCQlpZiAoIGJlZm9yZVNob3dTZXR0aW5ncyA9PT0gZmFsc2UgKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUoIGluc3Quc2V0dGluZ3MsIGJlZm9yZVNob3dTZXR0aW5ncyApOw0KDQoJCWluc3QubGFzdFZhbCA9IG51bGw7DQoJCSQuZGF0ZXBpY2tlci5fbGFzdElucHV0ID0gaW5wdXQ7DQoJCSQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZCggaW5zdCApOw0KDQoJCWlmICggJC5kYXRlcGlja2VyLl9pbkRpYWxvZyApIHsgLy8gaGlkZSBjdXJzb3INCgkJCWlucHV0LnZhbHVlID0gIiI7DQoJCX0NCgkJaWYgKCAhJC5kYXRlcGlja2VyLl9wb3MgKSB7IC8vIHBvc2l0aW9uIGJlbG93IGlucHV0DQoJCQkkLmRhdGVwaWNrZXIuX3BvcyA9ICQuZGF0ZXBpY2tlci5fZmluZFBvcyggaW5wdXQgKTsNCgkJCSQuZGF0ZXBpY2tlci5fcG9zWyAxIF0gKz0gaW5wdXQub2Zmc2V0SGVpZ2h0OyAvLyBhZGQgdGhlIGhlaWdodA0KCQl9DQoNCgkJaXNGaXhlZCA9IGZhbHNlOw0KCQkkKCBpbnB1dCApLnBhcmVudHMoKS5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCWlzRml4ZWQgfD0gJCggdGhpcyApLmNzcyggInBvc2l0aW9uIiApID09PSAiZml4ZWQiOw0KCQkJcmV0dXJuICFpc0ZpeGVkOw0KCQl9ICk7DQoNCgkJb2Zmc2V0ID0geyBsZWZ0OiAkLmRhdGVwaWNrZXIuX3Bvc1sgMCBdLCB0b3A6ICQuZGF0ZXBpY2tlci5fcG9zWyAxIF0gfTsNCgkJJC5kYXRlcGlja2VyLl9wb3MgPSBudWxsOw0KDQoJCS8vdG8gYXZvaWQgZmxhc2hlcyBvbiBGaXJlZm94DQoJCWluc3QuZHBEaXYuZW1wdHkoKTsNCg0KCQkvLyBkZXRlcm1pbmUgc2l6aW5nIG9mZnNjcmVlbg0KCQlpbnN0LmRwRGl2LmNzcyggeyBwb3NpdGlvbjogImFic29sdXRlIiwgZGlzcGxheTogImJsb2NrIiwgdG9wOiAiLTEwMDBweCIgfSApOw0KCQkkLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoIGluc3QgKTsNCg0KCQkvLyBmaXggd2lkdGggZm9yIGR5bmFtaWMgbnVtYmVyIG9mIGRhdGUgcGlja2Vycw0KCQkvLyBhbmQgYWRqdXN0IHBvc2l0aW9uIGJlZm9yZSBzaG93aW5nDQoJCW9mZnNldCA9ICQuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQoIGluc3QsIG9mZnNldCwgaXNGaXhlZCApOw0KCQlpbnN0LmRwRGl2LmNzcyggeyBwb3NpdGlvbjogKCAkLmRhdGVwaWNrZXIuX2luRGlhbG9nICYmICQuYmxvY2tVSSA/DQoJCQkic3RhdGljIiA6ICggaXNGaXhlZCA/ICJmaXhlZCIgOiAiYWJzb2x1dGUiICkgKSwgZGlzcGxheTogIm5vbmUiLA0KCQkJbGVmdDogb2Zmc2V0LmxlZnQgKyAicHgiLCB0b3A6IG9mZnNldC50b3AgKyAicHgiIH0gKTsNCg0KCQlpZiAoICFpbnN0LmlubGluZSApIHsNCgkJCXNob3dBbmltID0gJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJzaG93QW5pbSIgKTsNCgkJCWR1cmF0aW9uID0gJC5kYXRlcGlja2VyLl9nZXQoIGluc3QsICJkdXJhdGlvbiIgKTsNCgkJCWluc3QuZHBEaXYuY3NzKCAiei1pbmRleCIsIGRhdGVwaWNrZXJfZ2V0WmluZGV4KCAkKCBpbnB1dCApICkgKyAxICk7DQoJCQkkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nID0gdHJ1ZTsNCg0KCQkJaWYgKCAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgc2hvd0FuaW0gXSApIHsNCgkJCQlpbnN0LmRwRGl2LnNob3coIHNob3dBbmltLCAkLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgInNob3dPcHRpb25zIiApLCBkdXJhdGlvbiApOw0KCQkJfSBlbHNlIHsNCgkJCQlpbnN0LmRwRGl2WyBzaG93QW5pbSB8fCAic2hvdyIgXSggc2hvd0FuaW0gPyBkdXJhdGlvbiA6IG51bGwgKTsNCgkJCX0NCg0KCQkJaWYgKCAkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoIGluc3QgKSApIHsNCgkJCQlpbnN0LmlucHV0LnRyaWdnZXIoICJmb2N1cyIgKTsNCgkJCX0NCg0KCQkJJC5kYXRlcGlja2VyLl9jdXJJbnN0ID0gaW5zdDsNCgkJfQ0KCX0sDQoNCgkvKiBHZW5lcmF0ZSB0aGUgZGF0ZSBwaWNrZXIgY29udGVudC4gKi8NCglfdXBkYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24oIGluc3QgKSB7DQoJCXRoaXMubWF4Um93cyA9IDQ7IC8vUmVzZXQgdGhlIG1heCBudW1iZXIgb2Ygcm93cyBiZWluZyBkaXNwbGF5ZWQgKHNlZSAjNzA0MykNCgkJZGF0ZXBpY2tlcl9pbnN0QWN0aXZlID0gaW5zdDsgLy8gZm9yIGRlbGVnYXRlIGhvdmVyIGV2ZW50cw0KCQlpbnN0LmRwRGl2LmVtcHR5KCkuYXBwZW5kKCB0aGlzLl9nZW5lcmF0ZUhUTUwoIGluc3QgKSApOw0KCQl0aGlzLl9hdHRhY2hIYW5kbGVycyggaW5zdCApOw0KDQoJCXZhciBvcmlneWVhcnNodG1sLA0KCQkJbnVtTW9udGhzID0gdGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoIGluc3QgKSwNCgkJCWNvbHMgPSBudW1Nb250aHNbIDEgXSwNCgkJCXdpZHRoID0gMTcsDQoJCQlhY3RpdmVDZWxsID0gaW5zdC5kcERpdi5maW5kKCAiLiIgKyB0aGlzLl9kYXlPdmVyQ2xhc3MgKyAiIGEiICk7DQoNCgkJaWYgKCBhY3RpdmVDZWxsLmxlbmd0aCA+IDAgKSB7DQoJCQlkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3Zlci5hcHBseSggYWN0aXZlQ2VsbC5nZXQoIDAgKSApOw0KCQl9DQoNCgkJaW5zdC5kcERpdi5yZW1vdmVDbGFzcyggInVpLWRhdGVwaWNrZXItbXVsdGktMiB1aS1kYXRlcGlja2VyLW11bHRpLTMgdWktZGF0ZXBpY2tlci1tdWx0aS00IiApLndpZHRoKCAiIiApOw0KCQlpZiAoIGNvbHMgPiAxICkgew0KCQkJaW5zdC5kcERpdi5hZGRDbGFzcyggInVpLWRhdGVwaWNrZXItbXVsdGktIiArIGNvbHMgKS5jc3MoICJ3aWR0aCIsICggd2lkdGggKiBjb2xzICkgKyAiZW0iICk7DQoJCX0NCgkJaW5zdC5kcERpdlsgKCBudW1Nb250aHNbIDAgXSAhPT0gMSB8fCBudW1Nb250aHNbIDEgXSAhPT0gMSA/ICJhZGQiIDogInJlbW92ZSIgKSArDQoJCQkiQ2xhc3MiIF0oICJ1aS1kYXRlcGlja2VyLW11bHRpIiApOw0KCQlpbnN0LmRwRGl2WyAoIHRoaXMuX2dldCggaW5zdCwgImlzUlRMIiApID8gImFkZCIgOiAicmVtb3ZlIiApICsNCgkJCSJDbGFzcyIgXSggInVpLWRhdGVwaWNrZXItcnRsIiApOw0KDQoJCWlmICggaW5zdCA9PT0gJC5kYXRlcGlja2VyLl9jdXJJbnN0ICYmICQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgJC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KCBpbnN0ICkgKSB7DQoJCQlpbnN0LmlucHV0LnRyaWdnZXIoICJmb2N1cyIgKTsNCgkJfQ0KDQoJCS8vIERlZmZlcmVkIHJlbmRlciBvZiB0aGUgeWVhcnMgc2VsZWN0ICh0byBhdm9pZCBmbGFzaGVzIG9uIEZpcmVmb3gpDQoJCWlmICggaW5zdC55ZWFyc2h0bWwgKSB7DQoJCQlvcmlneWVhcnNodG1sID0gaW5zdC55ZWFyc2h0bWw7DQoJCQlzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsNCg0KCQkJCS8vYXNzdXJlIHRoYXQgaW5zdC55ZWFyc2h0bWwgZGlkbid0IGNoYW5nZS4NCgkJCQlpZiAoIG9yaWd5ZWFyc2h0bWwgPT09IGluc3QueWVhcnNodG1sICYmIGluc3QueWVhcnNodG1sICkgew0KCQkJCQlpbnN0LmRwRGl2LmZpbmQoICJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0IiApLnJlcGxhY2VXaXRoKCBpbnN0LnllYXJzaHRtbCApOw0KCQkJCX0NCgkJCQlvcmlneWVhcnNodG1sID0gaW5zdC55ZWFyc2h0bWwgPSBudWxsOw0KCQkJfSwgMCApOw0KCQl9DQoJfSwNCg0KCS8vICM2Njk0IC0gZG9uJ3QgZm9jdXMgdGhlIGlucHV0IGlmIGl0J3MgYWxyZWFkeSBmb2N1c2VkDQoJLy8gdGhpcyBicmVha3MgdGhlIGNoYW5nZSBldmVudCBpbiBJRQ0KCS8vIFN1cHBvcnQ6IElFIGFuZCBqUXVlcnkgPDEuOQ0KCV9zaG91bGRGb2N1c0lucHV0OiBmdW5jdGlvbiggaW5zdCApIHsNCgkJcmV0dXJuIGluc3QuaW5wdXQgJiYgaW5zdC5pbnB1dC5pcyggIjp2aXNpYmxlIiApICYmICFpbnN0LmlucHV0LmlzKCAiOmRpc2FibGVkIiApICYmICFpbnN0LmlucHV0LmlzKCAiOmZvY3VzIiApOw0KCX0sDQoNCgkvKiBDaGVjayBwb3NpdGlvbmluZyB0byByZW1haW4gb24gc2NyZWVuLiAqLw0KCV9jaGVja09mZnNldDogZnVuY3Rpb24oIGluc3QsIG9mZnNldCwgaXNGaXhlZCApIHsNCgkJdmFyIGRwV2lkdGggPSBpbnN0LmRwRGl2Lm91dGVyV2lkdGgoKSwNCgkJCWRwSGVpZ2h0ID0gaW5zdC5kcERpdi5vdXRlckhlaWdodCgpLA0KCQkJaW5wdXRXaWR0aCA9IGluc3QuaW5wdXQgPyBpbnN0LmlucHV0Lm91dGVyV2lkdGgoKSA6IDAsDQoJCQlpbnB1dEhlaWdodCA9IGluc3QuaW5wdXQgPyBpbnN0LmlucHV0Lm91dGVySGVpZ2h0KCkgOiAwLA0KCQkJdmlld1dpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICsgKCBpc0ZpeGVkID8gMCA6ICQoIGRvY3VtZW50ICkuc2Nyb2xsTGVmdCgpICksDQoJCQl2aWV3SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCArICggaXNGaXhlZCA/IDAgOiAkKCBkb2N1bWVudCApLnNjcm9sbFRvcCgpICk7DQoNCgkJb2Zmc2V0LmxlZnQgLT0gKCB0aGlzLl9nZXQoIGluc3QsICJpc1JUTCIgKSA/ICggZHBXaWR0aCAtIGlucHV0V2lkdGggKSA6IDAgKTsNCgkJb2Zmc2V0LmxlZnQgLT0gKCBpc0ZpeGVkICYmIG9mZnNldC5sZWZ0ID09PSBpbnN0LmlucHV0Lm9mZnNldCgpLmxlZnQgKSA/ICQoIGRvY3VtZW50ICkuc2Nyb2xsTGVmdCgpIDogMDsNCgkJb2Zmc2V0LnRvcCAtPSAoIGlzRml4ZWQgJiYgb2Zmc2V0LnRvcCA9PT0gKCBpbnN0LmlucHV0Lm9mZnNldCgpLnRvcCArIGlucHV0SGVpZ2h0ICkgKSA/ICQoIGRvY3VtZW50ICkuc2Nyb2xsVG9wKCkgOiAwOw0KDQoJCS8vIE5vdyBjaGVjayBpZiBkYXRlcGlja2VyIGlzIHNob3dpbmcgb3V0c2lkZSB3aW5kb3cgdmlld3BvcnQgLSBtb3ZlIHRvIGEgYmV0dGVyIHBsYWNlIGlmIHNvLg0KCQlvZmZzZXQubGVmdCAtPSBNYXRoLm1pbiggb2Zmc2V0LmxlZnQsICggb2Zmc2V0LmxlZnQgKyBkcFdpZHRoID4gdmlld1dpZHRoICYmIHZpZXdXaWR0aCA+IGRwV2lkdGggKSA/DQoJCQlNYXRoLmFicyggb2Zmc2V0LmxlZnQgKyBkcFdpZHRoIC0gdmlld1dpZHRoICkgOiAwICk7DQoJCW9mZnNldC50b3AgLT0gTWF0aC5taW4oIG9mZnNldC50b3AsICggb2Zmc2V0LnRvcCArIGRwSGVpZ2h0ID4gdmlld0hlaWdodCAmJiB2aWV3SGVpZ2h0ID4gZHBIZWlnaHQgKSA/DQoJCQlNYXRoLmFicyggZHBIZWlnaHQgKyBpbnB1dEhlaWdodCApIDogMCApOw0KDQoJCXJldHVybiBvZmZzZXQ7DQoJfSwNCg0KCS8qIEZpbmQgYW4gb2JqZWN0J3MgcG9zaXRpb24gb24gdGhlIHNjcmVlbi4gKi8NCglfZmluZFBvczogZnVuY3Rpb24oIG9iaiApIHsNCgkJdmFyIHBvc2l0aW9uLA0KCQkJaW5zdCA9IHRoaXMuX2dldEluc3QoIG9iaiApLA0KCQkJaXNSVEwgPSB0aGlzLl9nZXQoIGluc3QsICJpc1JUTCIgKTsNCg0KCQl3aGlsZSAoIG9iaiAmJiAoIG9iai50eXBlID09PSAiaGlkZGVuIiB8fCBvYmoubm9kZVR5cGUgIT09IDEgfHwgJC5leHByLmZpbHRlcnMuaGlkZGVuKCBvYmogKSApICkgew0KCQkJb2JqID0gb2JqWyBpc1JUTCA/ICJwcmV2aW91c1NpYmxpbmciIDogIm5leHRTaWJsaW5nIiBdOw0KCQl9DQoNCgkJcG9zaXRpb24gPSAkKCBvYmogKS5vZmZzZXQoKTsNCgkJcmV0dXJuIFsgcG9zaXRpb24ubGVmdCwgcG9zaXRpb24udG9wIF07DQoJfSwNCg0KCS8qIEhpZGUgdGhlIGRhdGUgcGlja2VyIGZyb20gdmlldy4NCgkgKiBAcGFyYW0gIGlucHV0ICBlbGVtZW50IC0gdGhlIGlucHV0IGZpZWxkIGF0dGFjaGVkIHRvIHRoZSBkYXRlIHBpY2tlcg0KCSAqLw0KCV9oaWRlRGF0ZXBpY2tlcjogZnVuY3Rpb24oIGlucHV0ICkgew0KCQl2YXIgc2hvd0FuaW0sIGR1cmF0aW9uLCBwb3N0UHJvY2Vzcywgb25DbG9zZSwNCgkJCWluc3QgPSB0aGlzLl9jdXJJbnN0Ow0KDQoJCWlmICggIWluc3QgfHwgKCBpbnB1dCAmJiBpbnN0ICE9PSAkLmRhdGEoIGlucHV0LCAiZGF0ZXBpY2tlciIgKSApICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJaWYgKCB0aGlzLl9kYXRlcGlja2VyU2hvd2luZyApIHsNCgkJCXNob3dBbmltID0gdGhpcy5fZ2V0KCBpbnN0LCAic2hvd0FuaW0iICk7DQoJCQlkdXJhdGlvbiA9IHRoaXMuX2dldCggaW5zdCwgImR1cmF0aW9uIiApOw0KCQkJcG9zdFByb2Nlc3MgPSBmdW5jdGlvbigpIHsNCgkJCQkkLmRhdGVwaWNrZXIuX3RpZHlEaWFsb2coIGluc3QgKTsNCgkJCX07DQoNCgkJCS8vIERFUFJFQ0FURUQ6IGFmdGVyIEJDIGZvciAxLjgueCAkLmVmZmVjdHNbIHNob3dBbmltIF0gaXMgbm90IG5lZWRlZA0KCQkJaWYgKCAkLmVmZmVjdHMgJiYgKCAkLmVmZmVjdHMuZWZmZWN0WyBzaG93QW5pbSBdIHx8ICQuZWZmZWN0c1sgc2hvd0FuaW0gXSApICkgew0KCQkJCWluc3QuZHBEaXYuaGlkZSggc2hvd0FuaW0sICQuZGF0ZXBpY2tlci5fZ2V0KCBpbnN0LCAic2hvd09wdGlvbnMiICksIGR1cmF0aW9uLCBwb3N0UHJvY2VzcyApOw0KCQkJfSBlbHNlIHsNCgkJCQlpbnN0LmRwRGl2WyAoIHNob3dBbmltID09PSAic2xpZGVEb3duIiA/ICJzbGlkZVVwIiA6DQoJCQkJCSggc2hvd0FuaW0gPT09ICJmYWRlSW4iID8gImZhZGVPdXQiIDogImhpZGUiICkgKSBdKCAoIHNob3dBbmltID8gZHVyYXRpb24gOiBudWxsICksIHBvc3RQcm9jZXNzICk7DQoJCQl9DQoNCgkJCWlmICggIXNob3dBbmltICkgew0KCQkJCXBvc3RQcm9jZXNzKCk7DQoJCQl9DQoJCQl0aGlzLl9kYXRlcGlja2VyU2hvd2luZyA9IGZhbHNlOw0KDQoJCQlvbkNsb3NlID0gdGhpcy5fZ2V0KCBpbnN0LCAib25DbG9zZSIgKTsNCgkJCWlmICggb25DbG9zZSApIHsNCgkJCQlvbkNsb3NlLmFwcGx5KCAoIGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WyAwIF0gOiBudWxsICksIFsgKCBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC52YWwoKSA6ICIiICksIGluc3QgXSApOw0KCQkJfQ0KDQoJCQl0aGlzLl9sYXN0SW5wdXQgPSBudWxsOw0KCQkJaWYgKCB0aGlzLl9pbkRpYWxvZyApIHsNCgkJCQl0aGlzLl9kaWFsb2dJbnB1dC5jc3MoIHsgcG9zaXRpb246ICJhYnNvbHV0ZSIsIGxlZnQ6ICIwIiwgdG9wOiAiLTEwMHB4IiB9ICk7DQoJCQkJaWYgKCAkLmJsb2NrVUkgKSB7DQoJCQkJCSQudW5ibG9ja1VJKCk7DQoJCQkJCSQoICJib2R5IiApLmFwcGVuZCggdGhpcy5kcERpdiApOw0KCQkJCX0NCgkJCX0NCgkJCXRoaXMuX2luRGlhbG9nID0gZmFsc2U7DQoJCX0NCgl9LA0KDQoJLyogVGlkeSB1cCBhZnRlciBhIGRpYWxvZyBkaXNwbGF5LiAqLw0KCV90aWR5RGlhbG9nOiBmdW5jdGlvbiggaW5zdCApIHsNCgkJaW5zdC5kcERpdi5yZW1vdmVDbGFzcyggdGhpcy5fZGlhbG9nQ2xhc3MgKS5vZmYoICIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIgKTsNCgl9LA0KDQoJLyogQ2xvc2UgZGF0ZSBwaWNrZXIgaWYgY2xpY2tlZCBlbHNld2hlcmUuICovDQoJX2NoZWNrRXh0ZXJuYWxDbGljazogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQlpZiAoICEkLmRhdGVwaWNrZXIuX2N1ckluc3QgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl2YXIgJHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLA0KCQkJaW5zdCA9ICQuZGF0ZXBpY2tlci5fZ2V0SW5zdCggJHRhcmdldFsgMCBdICk7DQoNCgkJaWYgKCAoICggJHRhcmdldFsgMCBdLmlkICE9PSAkLmRhdGVwaWNrZXIuX21haW5EaXZJZCAmJg0KCQkJCSR0YXJnZXQucGFyZW50cyggIiMiICsgJC5kYXRlcGlja2VyLl9tYWluRGl2SWQgKS5sZW5ndGggPT09IDAgJiYNCgkJCQkhJHRhcmdldC5oYXNDbGFzcyggJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSApICYmDQoJCQkJISR0YXJnZXQuY2xvc2VzdCggIi4iICsgJC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MgKS5sZW5ndGggJiYNCgkJCQkkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmICEoICQuZGF0ZXBpY2tlci5faW5EaWFsb2cgJiYgJC5ibG9ja1VJICkgKSApIHx8DQoJCQkoICR0YXJnZXQuaGFzQ2xhc3MoICQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUgKSAmJiAkLmRhdGVwaWNrZXIuX2N1ckluc3QgIT09IGluc3QgKSApIHsNCgkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7DQoJCX0NCgl9LA0KDQoJLyogQWRqdXN0IG9uZSBvZiB0aGUgZGF0ZSBzdWItZmllbGRzLiAqLw0KCV9hZGp1c3REYXRlOiBmdW5jdGlvbiggaWQsIG9mZnNldCwgcGVyaW9kICkgew0KCQl2YXIgdGFyZ2V0ID0gJCggaWQgKSwNCgkJCWluc3QgPSB0aGlzLl9nZXRJbnN0KCB0YXJnZXRbIDAgXSApOw0KDQoJCWlmICggdGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIoIHRhcmdldFsgMCBdICkgKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJdGhpcy5fYWRqdXN0SW5zdERhdGUoIGluc3QsIG9mZnNldCArDQoJCQkoIHBlcmlvZCA9PT0gIk0iID8gdGhpcy5fZ2V0KCBpbnN0LCAic2hvd0N1cnJlbnRBdFBvcyIgKSA6IDAgKSwgLy8gdW5kbyBwb3NpdGlvbmluZw0KCQkJcGVyaW9kICk7DQoJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoIGluc3QgKTsNCgl9LA0KDQoJLyogQWN0aW9uIGZvciBjdXJyZW50IGxpbmsuICovDQoJX2dvdG9Ub2RheTogZnVuY3Rpb24oIGlkICkgew0KCQl2YXIgZGF0ZSwNCgkJCXRhcmdldCA9ICQoIGlkICksDQoJCQlpbnN0ID0gdGhpcy5fZ2V0SW5zdCggdGFyZ2V0WyAwIF0gKTsNCg0KCQlpZiAoIHRoaXMuX2dldCggaW5zdCwgImdvdG9DdXJyZW50IiApICYmIGluc3QuY3VycmVudERheSApIHsNCgkJCWluc3Quc2VsZWN0ZWREYXkgPSBpbnN0LmN1cnJlbnREYXk7DQoJCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGluc3QuY3VycmVudE1vbnRoOw0KCQkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gaW5zdC5jdXJyZW50WWVhcjsNCgkJfSBlbHNlIHsNCgkJCWRhdGUgPSBuZXcgRGF0ZSgpOw0KCQkJaW5zdC5zZWxlY3RlZERheSA9IGRhdGUuZ2V0RGF0ZSgpOw0KCQkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7DQoJCQlpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7DQoJCX0NCgkJdGhpcy5fbm90aWZ5Q2hhbmdlKCBpbnN0ICk7DQoJCXRoaXMuX2FkanVzdERhdGUoIHRhcmdldCApOw0KCX0sDQoNCgkvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIG5ldyBtb250aC95ZWFyLiAqLw0KCV9zZWxlY3RNb250aFllYXI6IGZ1bmN0aW9uKCBpZCwgc2VsZWN0LCBwZXJpb2QgKSB7DQoJCXZhciB0YXJnZXQgPSAkKCBpZCApLA0KCQkJaW5zdCA9IHRoaXMuX2dldEluc3QoIHRhcmdldFsgMCBdICk7DQoNCgkJaW5zdFsgInNlbGVjdGVkIiArICggcGVyaW9kID09PSAiTSIgPyAiTW9udGgiIDogIlllYXIiICkgXSA9DQoJCWluc3RbICJkcmF3IiArICggcGVyaW9kID09PSAiTSIgPyAiTW9udGgiIDogIlllYXIiICkgXSA9DQoJCQlwYXJzZUludCggc2VsZWN0Lm9wdGlvbnNbIHNlbGVjdC5zZWxlY3RlZEluZGV4IF0udmFsdWUsIDEwICk7DQoNCgkJdGhpcy5fbm90aWZ5Q2hhbmdlKCBpbnN0ICk7DQoJCXRoaXMuX2FkanVzdERhdGUoIHRhcmdldCApOw0KCX0sDQoNCgkvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIGRheS4gKi8NCglfc2VsZWN0RGF5OiBmdW5jdGlvbiggaWQsIG1vbnRoLCB5ZWFyLCB0ZCApIHsNCgkJdmFyIGluc3QsDQoJCQl0YXJnZXQgPSAkKCBpZCApOw0KDQoJCWlmICggJCggdGQgKS5oYXNDbGFzcyggdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MgKSB8fCB0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlciggdGFyZ2V0WyAwIF0gKSApIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWluc3QgPSB0aGlzLl9nZXRJbnN0KCB0YXJnZXRbIDAgXSApOw0KCQlpbnN0LnNlbGVjdGVkRGF5ID0gaW5zdC5jdXJyZW50RGF5ID0gJCggImEiLCB0ZCApLmh0bWwoKTsNCgkJaW5zdC5zZWxlY3RlZE1vbnRoID0gaW5zdC5jdXJyZW50TW9udGggPSBtb250aDsNCgkJaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0geWVhcjsNCgkJdGhpcy5fc2VsZWN0RGF0ZSggaWQsIHRoaXMuX2Zvcm1hdERhdGUoIGluc3QsDQoJCQlpbnN0LmN1cnJlbnREYXksIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnRZZWFyICkgKTsNCgl9LA0KDQoJLyogRXJhc2UgdGhlIGlucHV0IGZpZWxkIGFuZCBoaWRlIHRoZSBkYXRlIHBpY2tlci4gKi8NCglfY2xlYXJEYXRlOiBmdW5jdGlvbiggaWQgKSB7DQoJCXZhciB0YXJnZXQgPSAkKCBpZCApOw0KCQl0aGlzLl9zZWxlY3REYXRlKCB0YXJnZXQsICIiICk7DQoJfSwNCg0KCS8qIFVwZGF0ZSB0aGUgaW5wdXQgZmllbGQgd2l0aCB0aGUgc2VsZWN0ZWQgZGF0ZS4gKi8NCglfc2VsZWN0RGF0ZTogZnVuY3Rpb24oIGlkLCBkYXRlU3RyICkgew0KCQl2YXIgb25TZWxlY3QsDQoJCQl0YXJnZXQgPSAkKCBpZCApLA0KCQkJaW5zdCA9IHRoaXMuX2dldEluc3QoIHRhcmdldFsgMCBdICk7DQoNCgkJZGF0ZVN0ciA9ICggZGF0ZVN0ciAhPSBudWxsID8gZGF0ZVN0ciA6IHRoaXMuX2Zvcm1hdERhdGUoIGluc3QgKSApOw0KCQlpZiAoIGluc3QuaW5wdXQgKSB7DQoJCQlpbnN0LmlucHV0LnZhbCggZGF0ZVN0ciApOw0KCQl9DQoJCXRoaXMuX3VwZGF0ZUFsdGVybmF0ZSggaW5zdCApOw0KDQoJCW9uU2VsZWN0ID0gdGhpcy5fZ2V0KCBpbnN0LCAib25TZWxlY3QiICk7DQoJCWlmICggb25TZWxlY3QgKSB7DQoJCQlvblNlbGVjdC5hcHBseSggKCBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFsgMCBdIDogbnVsbCApLCBbIGRhdGVTdHIsIGluc3QgXSApOyAgLy8gdHJpZ2dlciBjdXN0b20gY2FsbGJhY2sNCgkJfSBlbHNlIGlmICggaW5zdC5pbnB1dCApIHsNCgkJCWluc3QuaW5wdXQudHJpZ2dlciggImNoYW5nZSIgKTsgLy8gZmlyZSB0aGUgY2hhbmdlIGV2ZW50DQoJCX0NCg0KCQlpZiAoIGluc3QuaW5saW5lICkgew0KCQkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlciggaW5zdCApOw0KCQl9IGVsc2Ugew0KCQkJdGhpcy5faGlkZURhdGVwaWNrZXIoKTsNCgkJCXRoaXMuX2xhc3RJbnB1dCA9IGluc3QuaW5wdXRbIDAgXTsNCgkJCWlmICggdHlwZW9mKCBpbnN0LmlucHV0WyAwIF0gKSAhPT0gIm9iamVjdCIgKSB7DQoJCQkJaW5zdC5pbnB1dC50cmlnZ2VyKCAiZm9jdXMiICk7IC8vIHJlc3RvcmUgZm9jdXMNCgkJCX0NCgkJCXRoaXMuX2xhc3RJbnB1dCA9IG51bGw7DQoJCX0NCgl9LA0KDQoJLyogVXBkYXRlIGFueSBhbHRlcm5hdGUgZmllbGQgdG8gc3luY2hyb25pc2Ugd2l0aCB0aGUgbWFpbiBmaWVsZC4gKi8NCglfdXBkYXRlQWx0ZXJuYXRlOiBmdW5jdGlvbiggaW5zdCApIHsNCgkJdmFyIGFsdEZvcm1hdCwgZGF0ZSwgZGF0ZVN0ciwNCgkJCWFsdEZpZWxkID0gdGhpcy5fZ2V0KCBpbnN0LCAiYWx0RmllbGQiICk7DQoNCgkJaWYgKCBhbHRGaWVsZCApIHsgLy8gdXBkYXRlIGFsdGVybmF0ZSBmaWVsZCB0b28NCgkJCWFsdEZvcm1hdCA9IHRoaXMuX2dldCggaW5zdCwgImFsdEZvcm1hdCIgKSB8fCB0aGlzLl9nZXQoIGluc3QsICJkYXRlRm9ybWF0IiApOw0KCQkJZGF0ZSA9IHRoaXMuX2dldERhdGUoIGluc3QgKTsNCgkJCWRhdGVTdHIgPSB0aGlzLmZvcm1hdERhdGUoIGFsdEZvcm1hdCwgZGF0ZSwgdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKCBpbnN0ICkgKTsNCgkJCSQoIGFsdEZpZWxkICkudmFsKCBkYXRlU3RyICk7DQoJCX0NCgl9LA0KDQoJLyogU2V0IGFzIGJlZm9yZVNob3dEYXkgZnVuY3Rpb24gdG8gcHJldmVudCBzZWxlY3Rpb24gb2Ygd2Vla2VuZHMuDQoJICogQHBhcmFtICBkYXRlICBEYXRlIC0gdGhlIGRhdGUgdG8gY3VzdG9taXNlDQoJICogQHJldHVybiBbYm9vbGVhbiwgc3RyaW5nXSAtIGlzIHRoaXMgZGF0ZSBzZWxlY3RhYmxlPywgd2hhdCBpcyBpdHMgQ1NTIGNsYXNzPw0KCSAqLw0KCW5vV2Vla2VuZHM6IGZ1bmN0aW9uKCBkYXRlICkgew0KCQl2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTsNCgkJcmV0dXJuIFsgKCBkYXkgPiAwICYmIGRheSA8IDYgKSwgIiIgXTsNCgl9LA0KDQoJLyogU2V0IGFzIGNhbGN1bGF0ZVdlZWsgdG8gZGV0ZXJtaW5lIHRoZSB3ZWVrIG9mIHRoZSB5ZWFyIGJhc2VkIG9uIHRoZSBJU08gODYwMSBkZWZpbml0aW9uLg0KCSAqIEBwYXJhbSAgZGF0ZSAgRGF0ZSAtIHRoZSBkYXRlIHRvIGdldCB0aGUgd2VlayBmb3INCgkgKiBAcmV0dXJuICBudW1iZXIgLSB0aGUgbnVtYmVyIG9mIHRoZSB3ZWVrIHdpdGhpbiB0aGUgeWVhciB0aGF0IGNvbnRhaW5zIHRoaXMgZGF0ZQ0KCSAqLw0KCWlzbzg2MDFXZWVrOiBmdW5jdGlvbiggZGF0ZSApIHsNCgkJdmFyIHRpbWUsDQoJCQljaGVja0RhdGUgPSBuZXcgRGF0ZSggZGF0ZS5nZXRUaW1lKCkgKTsNCg0KCQkvLyBGaW5kIFRodXJzZGF5IG9mIHRoaXMgd2VlayBzdGFydGluZyBvbiBNb25kYXkNCgkJY2hlY2tEYXRlLnNldERhdGUoIGNoZWNrRGF0ZS5nZXREYXRlKCkgKyA0IC0gKCBjaGVja0RhdGUuZ2V0RGF5KCkgfHwgNyApICk7DQoNCgkJdGltZSA9IGNoZWNrRGF0ZS5nZXRUaW1lKCk7DQoJCWNoZWNrRGF0ZS5zZXRNb250aCggMCApOyAvLyBDb21wYXJlIHdpdGggSmFuIDENCgkJY2hlY2tEYXRlLnNldERhdGUoIDEgKTsNCgkJcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucm91bmQoICggdGltZSAtIGNoZWNrRGF0ZSApIC8gODY0MDAwMDAgKSAvIDcgKSArIDE7DQoJfSwNCg0KCS8qIFBhcnNlIGEgc3RyaW5nIHZhbHVlIGludG8gYSBkYXRlIG9iamVjdC4NCgkgKiBTZWUgZm9ybWF0RGF0ZSBiZWxvdyBmb3IgdGhlIHBvc3NpYmxlIGZvcm1hdHMuDQoJICoNCgkgKiBAcGFyYW0gIGZvcm1hdCBzdHJpbmcgLSB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSBkYXRlDQoJICogQHBhcmFtICB2YWx1ZSBzdHJpbmcgLSB0aGUgZGF0ZSBpbiB0aGUgYWJvdmUgZm9ybWF0DQoJICogQHBhcmFtICBzZXR0aW5ncyBPYmplY3QgLSBhdHRyaWJ1dGVzIGluY2x1ZGU6DQoJICoJCQkJCXNob3J0WWVhckN1dG9mZiAgbnVtYmVyIC0gdGhlIGN1dG9mZiB5ZWFyIGZvciBkZXRlcm1pbmluZyB0aGUgY2VudHVyeSAob3B0aW9uYWwpDQoJICoJCQkJCWRheU5hbWVzU2hvcnQJc3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQ0KCSAqCQkJCQlkYXlOYW1lcwkJc3RyaW5nWzddIC0gbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQ0KCSAqCQkJCQltb250aE5hbWVzU2hvcnQgc3RyaW5nWzEyXSAtIGFiYnJldmlhdGVkIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKQ0KCSAqCQkJCQltb250aE5hbWVzCQlzdHJpbmdbMTJdIC0gbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpDQoJICogQHJldHVybiAgRGF0ZSAtIHRoZSBleHRyYWN0ZWQgZGF0ZSB2YWx1ZSBvciBudWxsIGlmIHZhbHVlIGlzIGJsYW5rDQoJICovDQoJcGFyc2VEYXRlOiBmdW5jdGlvbiggZm9ybWF0LCB2YWx1ZSwgc2V0dGluZ3MgKSB7DQoJCWlmICggZm9ybWF0ID09IG51bGwgfHwgdmFsdWUgPT0gbnVsbCApIHsNCgkJCXRocm93ICJJbnZhbGlkIGFyZ3VtZW50cyI7DQoJCX0NCg0KCQl2YWx1ZSA9ICggdHlwZW9mIHZhbHVlID09PSAib2JqZWN0IiA/IHZhbHVlLnRvU3RyaW5nKCkgOiB2YWx1ZSArICIiICk7DQoJCWlmICggdmFsdWUgPT09ICIiICkgew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQl2YXIgaUZvcm1hdCwgZGltLCBleHRyYSwNCgkJCWlWYWx1ZSA9IDAsDQoJCQlzaG9ydFllYXJDdXRvZmZUZW1wID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLnNob3J0WWVhckN1dG9mZiA6IG51bGwgKSB8fCB0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsDQoJCQlzaG9ydFllYXJDdXRvZmYgPSAoIHR5cGVvZiBzaG9ydFllYXJDdXRvZmZUZW1wICE9PSAic3RyaW5nIiA/IHNob3J0WWVhckN1dG9mZlRlbXAgOg0KCQkJCW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAlIDEwMCArIHBhcnNlSW50KCBzaG9ydFllYXJDdXRvZmZUZW1wLCAxMCApICksDQoJCQlkYXlOYW1lc1Nob3J0ID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzU2hvcnQgOiBudWxsICkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCwNCgkJCWRheU5hbWVzID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzIDogbnVsbCApIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLA0KCQkJbW9udGhOYW1lc1Nob3J0ID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwgKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsDQoJCQltb250aE5hbWVzID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXMgOiBudWxsICkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcywNCgkJCXllYXIgPSAtMSwNCgkJCW1vbnRoID0gLTEsDQoJCQlkYXkgPSAtMSwNCgkJCWRveSA9IC0xLA0KCQkJbGl0ZXJhbCA9IGZhbHNlLA0KCQkJZGF0ZSwNCg0KCQkJLy8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZA0KCQkJbG9va0FoZWFkID0gZnVuY3Rpb24oIG1hdGNoICkgew0KCQkJCXZhciBtYXRjaGVzID0gKCBpRm9ybWF0ICsgMSA8IGZvcm1hdC5sZW5ndGggJiYgZm9ybWF0LmNoYXJBdCggaUZvcm1hdCArIDEgKSA9PT0gbWF0Y2ggKTsNCgkJCQlpZiAoIG1hdGNoZXMgKSB7DQoJCQkJCWlGb3JtYXQrKzsNCgkJCQl9DQoJCQkJcmV0dXJuIG1hdGNoZXM7DQoJCQl9LA0KDQoJCQkvLyBFeHRyYWN0IGEgbnVtYmVyIGZyb20gdGhlIHN0cmluZyB2YWx1ZQ0KCQkJZ2V0TnVtYmVyID0gZnVuY3Rpb24oIG1hdGNoICkgew0KCQkJCXZhciBpc0RvdWJsZWQgPSBsb29rQWhlYWQoIG1hdGNoICksDQoJCQkJCXNpemUgPSAoIG1hdGNoID09PSAiQCIgPyAxNCA6ICggbWF0Y2ggPT09ICIhIiA/IDIwIDoNCgkJCQkJKCBtYXRjaCA9PT0gInkiICYmIGlzRG91YmxlZCA/IDQgOiAoIG1hdGNoID09PSAibyIgPyAzIDogMiApICkgKSApLA0KCQkJCQltaW5TaXplID0gKCBtYXRjaCA9PT0gInkiID8gc2l6ZSA6IDEgKSwNCgkJCQkJZGlnaXRzID0gbmV3IFJlZ0V4cCggIl5cXGR7IiArIG1pblNpemUgKyAiLCIgKyBzaXplICsgIn0iICksDQoJCQkJCW51bSA9IHZhbHVlLnN1YnN0cmluZyggaVZhbHVlICkubWF0Y2goIGRpZ2l0cyApOw0KCQkJCWlmICggIW51bSApIHsNCgkJCQkJdGhyb3cgIk1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICIgKyBpVmFsdWU7DQoJCQkJfQ0KCQkJCWlWYWx1ZSArPSBudW1bIDAgXS5sZW5ndGg7DQoJCQkJcmV0dXJuIHBhcnNlSW50KCBudW1bIDAgXSwgMTAgKTsNCgkJCX0sDQoNCgkJCS8vIEV4dHJhY3QgYSBuYW1lIGZyb20gdGhlIHN0cmluZyB2YWx1ZSBhbmQgY29udmVydCB0byBhbiBpbmRleA0KCQkJZ2V0TmFtZSA9IGZ1bmN0aW9uKCBtYXRjaCwgc2hvcnROYW1lcywgbG9uZ05hbWVzICkgew0KCQkJCXZhciBpbmRleCA9IC0xLA0KCQkJCQluYW1lcyA9ICQubWFwKCBsb29rQWhlYWQoIG1hdGNoICkgPyBsb25nTmFtZXMgOiBzaG9ydE5hbWVzLCBmdW5jdGlvbiggdiwgayApIHsNCgkJCQkJCXJldHVybiBbIFsgaywgdiBdIF07DQoJCQkJCX0gKS5zb3J0KCBmdW5jdGlvbiggYSwgYiApIHsNCgkJCQkJCXJldHVybiAtKCBhWyAxIF0ubGVuZ3RoIC0gYlsgMSBdLmxlbmd0aCApOw0KCQkJCQl9ICk7DQoNCgkJCQkkLmVhY2goIG5hbWVzLCBmdW5jdGlvbiggaSwgcGFpciApIHsNCgkJCQkJdmFyIG5hbWUgPSBwYWlyWyAxIF07DQoJCQkJCWlmICggdmFsdWUuc3Vic3RyKCBpVmFsdWUsIG5hbWUubGVuZ3RoICkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpICkgew0KCQkJCQkJaW5kZXggPSBwYWlyWyAwIF07DQoJCQkJCQlpVmFsdWUgKz0gbmFtZS5sZW5ndGg7DQoJCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJCX0NCgkJCQl9ICk7DQoJCQkJaWYgKCBpbmRleCAhPT0gLTEgKSB7DQoJCQkJCXJldHVybiBpbmRleCArIDE7DQoJCQkJfSBlbHNlIHsNCgkJCQkJdGhyb3cgIlVua25vd24gbmFtZSBhdCBwb3NpdGlvbiAiICsgaVZhbHVlOw0KCQkJCX0NCgkJCX0sDQoNCgkJCS8vIENvbmZpcm0gdGhhdCBhIGxpdGVyYWwgY2hhcmFjdGVyIG1hdGNoZXMgdGhlIHN0cmluZyB2YWx1ZQ0KCQkJY2hlY2tMaXRlcmFsID0gZnVuY3Rpb24oKSB7DQoJCQkJaWYgKCB2YWx1ZS5jaGFyQXQoIGlWYWx1ZSApICE9PSBmb3JtYXQuY2hhckF0KCBpRm9ybWF0ICkgKSB7DQoJCQkJCXRocm93ICJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gIiArIGlWYWx1ZTsNCgkJCQl9DQoJCQkJaVZhbHVlKys7DQoJCQl9Ow0KDQoJCWZvciAoIGlGb3JtYXQgPSAwOyBpRm9ybWF0IDwgZm9ybWF0Lmxlbmd0aDsgaUZvcm1hdCsrICkgew0KCQkJaWYgKCBsaXRlcmFsICkgew0KCQkJCWlmICggZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApID09PSAiJyIgJiYgIWxvb2tBaGVhZCggIiciICkgKSB7DQoJCQkJCWxpdGVyYWwgPSBmYWxzZTsNCgkJCQl9IGVsc2Ugew0KCQkJCQljaGVja0xpdGVyYWwoKTsNCgkJCQl9DQoJCQl9IGVsc2Ugew0KCQkJCXN3aXRjaCAoIGZvcm1hdC5jaGFyQXQoIGlGb3JtYXQgKSApIHsNCgkJCQkJY2FzZSAiZCI6DQoJCQkJCQlkYXkgPSBnZXROdW1iZXIoICJkIiApOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgIkQiOg0KCQkJCQkJZ2V0TmFtZSggIkQiLCBkYXlOYW1lc1Nob3J0LCBkYXlOYW1lcyApOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgIm8iOg0KCQkJCQkJZG95ID0gZ2V0TnVtYmVyKCAibyIgKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJtIjoNCgkJCQkJCW1vbnRoID0gZ2V0TnVtYmVyKCAibSIgKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJNIjoNCgkJCQkJCW1vbnRoID0gZ2V0TmFtZSggIk0iLCBtb250aE5hbWVzU2hvcnQsIG1vbnRoTmFtZXMgKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJ5IjoNCgkJCQkJCXllYXIgPSBnZXROdW1iZXIoICJ5IiApOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgIkAiOg0KCQkJCQkJZGF0ZSA9IG5ldyBEYXRlKCBnZXROdW1iZXIoICJAIiApICk7DQoJCQkJCQl5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOw0KCQkJCQkJbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOw0KCQkJCQkJZGF5ID0gZGF0ZS5nZXREYXRlKCk7DQoJCQkJCQlicmVhazsNCgkJCQkJY2FzZSAiISI6DQoJCQkJCQlkYXRlID0gbmV3IERhdGUoICggZ2V0TnVtYmVyKCAiISIgKSAtIHRoaXMuX3RpY2tzVG8xOTcwICkgLyAxMDAwMCApOw0KCQkJCQkJeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsNCgkJCQkJCW1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsNCgkJCQkJCWRheSA9IGRhdGUuZ2V0RGF0ZSgpOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgIiciOg0KCQkJCQkJaWYgKCBsb29rQWhlYWQoICInIiApICkgew0KCQkJCQkJCWNoZWNrTGl0ZXJhbCgpOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQlsaXRlcmFsID0gdHJ1ZTsNCgkJCQkJCX0NCgkJCQkJCWJyZWFrOw0KCQkJCQlkZWZhdWx0Og0KCQkJCQkJY2hlY2tMaXRlcmFsKCk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoNCgkJaWYgKCBpVmFsdWUgPCB2YWx1ZS5sZW5ndGggKSB7DQoJCQlleHRyYSA9IHZhbHVlLnN1YnN0ciggaVZhbHVlICk7DQoJCQlpZiAoICEvXlxzKy8udGVzdCggZXh0cmEgKSApIHsNCgkJCQl0aHJvdyAiRXh0cmEvdW5wYXJzZWQgY2hhcmFjdGVycyBmb3VuZCBpbiBkYXRlOiAiICsgZXh0cmE7DQoJCQl9DQoJCX0NCg0KCQlpZiAoIHllYXIgPT09IC0xICkgew0KCQkJeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCgkJfSBlbHNlIGlmICggeWVhciA8IDEwMCApIHsNCgkJCXllYXIgKz0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICUgMTAwICsNCgkJCQkoIHllYXIgPD0gc2hvcnRZZWFyQ3V0b2ZmID8gMCA6IC0xMDAgKTsNCgkJfQ0KDQoJCWlmICggZG95ID4gLTEgKSB7DQoJCQltb250aCA9IDE7DQoJCQlkYXkgPSBkb3k7DQoJCQlkbyB7DQoJCQkJZGltID0gdGhpcy5fZ2V0RGF5c0luTW9udGgoIHllYXIsIG1vbnRoIC0gMSApOw0KCQkJCWlmICggZGF5IDw9IGRpbSApIHsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJCW1vbnRoKys7DQoJCQkJZGF5IC09IGRpbTsNCgkJCX0gd2hpbGUgKCB0cnVlICk7DQoJCX0NCg0KCQlkYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIG5ldyBEYXRlKCB5ZWFyLCBtb250aCAtIDEsIGRheSApICk7DQoJCWlmICggZGF0ZS5nZXRGdWxsWWVhcigpICE9PSB5ZWFyIHx8IGRhdGUuZ2V0TW9udGgoKSArIDEgIT09IG1vbnRoIHx8IGRhdGUuZ2V0RGF0ZSgpICE9PSBkYXkgKSB7DQoJCQl0aHJvdyAiSW52YWxpZCBkYXRlIjsgLy8gRS5nLiAzMS8wMi8wMA0KCQl9DQoJCXJldHVybiBkYXRlOw0KCX0sDQoNCgkvKiBTdGFuZGFyZCBkYXRlIGZvcm1hdHMuICovDQoJQVRPTTogInl5LW1tLWRkIiwgLy8gUkZDIDMzMzkgKElTTyA4NjAxKQ0KCUNPT0tJRTogIkQsIGRkIE0geXkiLA0KCUlTT184NjAxOiAieXktbW0tZGQiLA0KCVJGQ184MjI6ICJELCBkIE0geSIsDQoJUkZDXzg1MDogIkRELCBkZC1NLXkiLA0KCVJGQ18xMDM2OiAiRCwgZCBNIHkiLA0KCVJGQ18xMTIzOiAiRCwgZCBNIHl5IiwNCglSRkNfMjgyMjogIkQsIGQgTSB5eSIsDQoJUlNTOiAiRCwgZCBNIHkiLCAvLyBSRkMgODIyDQoJVElDS1M6ICIhIiwNCglUSU1FU1RBTVA6ICJAIiwNCglXM0M6ICJ5eS1tbS1kZCIsIC8vIElTTyA4NjAxDQoNCglfdGlja3NUbzE5NzA6ICggKCAoIDE5NzAgLSAxICkgKiAzNjUgKyBNYXRoLmZsb29yKCAxOTcwIC8gNCApIC0gTWF0aC5mbG9vciggMTk3MCAvIDEwMCApICsNCgkJTWF0aC5mbG9vciggMTk3MCAvIDQwMCApICkgKiAyNCAqIDYwICogNjAgKiAxMDAwMDAwMCApLA0KDQoJLyogRm9ybWF0IGEgZGF0ZSBvYmplY3QgaW50byBhIHN0cmluZyB2YWx1ZS4NCgkgKiBUaGUgZm9ybWF0IGNhbiBiZSBjb21iaW5hdGlvbnMgb2YgdGhlIGZvbGxvd2luZzoNCgkgKiBkICAtIGRheSBvZiBtb250aCAobm8gbGVhZGluZyB6ZXJvKQ0KCSAqIGRkIC0gZGF5IG9mIG1vbnRoICh0d28gZGlnaXQpDQoJICogbyAgLSBkYXkgb2YgeWVhciAobm8gbGVhZGluZyB6ZXJvcykNCgkgKiBvbyAtIGRheSBvZiB5ZWFyICh0aHJlZSBkaWdpdCkNCgkgKiBEICAtIGRheSBuYW1lIHNob3J0DQoJICogREQgLSBkYXkgbmFtZSBsb25nDQoJICogbSAgLSBtb250aCBvZiB5ZWFyIChubyBsZWFkaW5nIHplcm8pDQoJICogbW0gLSBtb250aCBvZiB5ZWFyICh0d28gZGlnaXQpDQoJICogTSAgLSBtb250aCBuYW1lIHNob3J0DQoJICogTU0gLSBtb250aCBuYW1lIGxvbmcNCgkgKiB5ICAtIHllYXIgKHR3byBkaWdpdCkNCgkgKiB5eSAtIHllYXIgKGZvdXIgZGlnaXQpDQoJICogQCAtIFVuaXggdGltZXN0YW1wIChtcyBzaW5jZSAwMS8wMS8xOTcwKQ0KCSAqICEgLSBXaW5kb3dzIHRpY2tzICgxMDBucyBzaW5jZSAwMS8wMS8wMDAxKQ0KCSAqICIuLi4iIC0gbGl0ZXJhbCB0ZXh0DQoJICogJycgLSBzaW5nbGUgcXVvdGUNCgkgKg0KCSAqIEBwYXJhbSAgZm9ybWF0IHN0cmluZyAtIHRoZSBkZXNpcmVkIGZvcm1hdCBvZiB0aGUgZGF0ZQ0KCSAqIEBwYXJhbSAgZGF0ZSBEYXRlIC0gdGhlIGRhdGUgdmFsdWUgdG8gZm9ybWF0DQoJICogQHBhcmFtICBzZXR0aW5ncyBPYmplY3QgLSBhdHRyaWJ1dGVzIGluY2x1ZGU6DQoJICoJCQkJCWRheU5hbWVzU2hvcnQJc3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQ0KCSAqCQkJCQlkYXlOYW1lcwkJc3RyaW5nWzddIC0gbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQ0KCSAqCQkJCQltb250aE5hbWVzU2hvcnQgc3RyaW5nWzEyXSAtIGFiYnJldmlhdGVkIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKQ0KCSAqCQkJCQltb250aE5hbWVzCQlzdHJpbmdbMTJdIC0gbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpDQoJICogQHJldHVybiAgc3RyaW5nIC0gdGhlIGRhdGUgaW4gdGhlIGFib3ZlIGZvcm1hdA0KCSAqLw0KCWZvcm1hdERhdGU6IGZ1bmN0aW9uKCBmb3JtYXQsIGRhdGUsIHNldHRpbmdzICkgew0KCQlpZiAoICFkYXRlICkgew0KCQkJcmV0dXJuICIiOw0KCQl9DQoNCgkJdmFyIGlGb3JtYXQsDQoJCQlkYXlOYW1lc1Nob3J0ID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzU2hvcnQgOiBudWxsICkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCwNCgkJCWRheU5hbWVzID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzIDogbnVsbCApIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLA0KCQkJbW9udGhOYW1lc1Nob3J0ID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwgKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsDQoJCQltb250aE5hbWVzID0gKCBzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXMgOiBudWxsICkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcywNCg0KCQkJLy8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZA0KCQkJbG9va0FoZWFkID0gZnVuY3Rpb24oIG1hdGNoICkgew0KCQkJCXZhciBtYXRjaGVzID0gKCBpRm9ybWF0ICsgMSA8IGZvcm1hdC5sZW5ndGggJiYgZm9ybWF0LmNoYXJBdCggaUZvcm1hdCArIDEgKSA9PT0gbWF0Y2ggKTsNCgkJCQlpZiAoIG1hdGNoZXMgKSB7DQoJCQkJCWlGb3JtYXQrKzsNCgkJCQl9DQoJCQkJcmV0dXJuIG1hdGNoZXM7DQoJCQl9LA0KDQoJCQkvLyBGb3JtYXQgYSBudW1iZXIsIHdpdGggbGVhZGluZyB6ZXJvIGlmIG5lY2Vzc2FyeQ0KCQkJZm9ybWF0TnVtYmVyID0gZnVuY3Rpb24oIG1hdGNoLCB2YWx1ZSwgbGVuICkgew0KCQkJCXZhciBudW0gPSAiIiArIHZhbHVlOw0KCQkJCWlmICggbG9va0FoZWFkKCBtYXRjaCApICkgew0KCQkJCQl3aGlsZSAoIG51bS5sZW5ndGggPCBsZW4gKSB7DQoJCQkJCQludW0gPSAiMCIgKyBudW07DQoJCQkJCX0NCgkJCQl9DQoJCQkJcmV0dXJuIG51bTsNCgkJCX0sDQoNCgkJCS8vIEZvcm1hdCBhIG5hbWUsIHNob3J0IG9yIGxvbmcgYXMgcmVxdWVzdGVkDQoJCQlmb3JtYXROYW1lID0gZnVuY3Rpb24oIG1hdGNoLCB2YWx1ZSwgc2hvcnROYW1lcywgbG9uZ05hbWVzICkgew0KCQkJCXJldHVybiAoIGxvb2tBaGVhZCggbWF0Y2ggKSA/IGxvbmdOYW1lc1sgdmFsdWUgXSA6IHNob3J0TmFtZXNbIHZhbHVlIF0gKTsNCgkJCX0sDQoJCQlvdXRwdXQgPSAiIiwNCgkJCWxpdGVyYWwgPSBmYWxzZTsNCg0KCQlpZiAoIGRhdGUgKSB7DQoJCQlmb3IgKCBpRm9ybWF0ID0gMDsgaUZvcm1hdCA8IGZvcm1hdC5sZW5ndGg7IGlGb3JtYXQrKyApIHsNCgkJCQlpZiAoIGxpdGVyYWwgKSB7DQoJCQkJCWlmICggZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApID09PSAiJyIgJiYgIWxvb2tBaGVhZCggIiciICkgKSB7DQoJCQkJCQlsaXRlcmFsID0gZmFsc2U7DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQlvdXRwdXQgKz0gZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApOw0KCQkJCQl9DQoJCQkJfSBlbHNlIHsNCgkJCQkJc3dpdGNoICggZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApICkgew0KCQkJCQkJY2FzZSAiZCI6DQoJCQkJCQkJb3V0cHV0ICs9IGZvcm1hdE51bWJlciggImQiLCBkYXRlLmdldERhdGUoKSwgMiApOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAiRCI6DQoJCQkJCQkJb3V0cHV0ICs9IGZvcm1hdE5hbWUoICJEIiwgZGF0ZS5nZXREYXkoKSwgZGF5TmFtZXNTaG9ydCwgZGF5TmFtZXMgKTsNCgkJCQkJCQlicmVhazsNCgkJCQkJCWNhc2UgIm8iOg0KCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoICJvIiwNCgkJCQkJCQkJTWF0aC5yb3VuZCggKCBuZXcgRGF0ZSggZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpICkuZ2V0VGltZSgpIC0gbmV3IERhdGUoIGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMCApLmdldFRpbWUoKSApIC8gODY0MDAwMDAgKSwgMyApOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAibSI6DQoJCQkJCQkJb3V0cHV0ICs9IGZvcm1hdE51bWJlciggIm0iLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAyICk7DQoJCQkJCQkJYnJlYWs7DQoJCQkJCQljYXNlICJNIjoNCgkJCQkJCQlvdXRwdXQgKz0gZm9ybWF0TmFtZSggIk0iLCBkYXRlLmdldE1vbnRoKCksIG1vbnRoTmFtZXNTaG9ydCwgbW9udGhOYW1lcyApOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAieSI6DQoJCQkJCQkJb3V0cHV0ICs9ICggbG9va0FoZWFkKCAieSIgKSA/IGRhdGUuZ2V0RnVsbFllYXIoKSA6DQoJCQkJCQkJCSggZGF0ZS5nZXRGdWxsWWVhcigpICUgMTAwIDwgMTAgPyAiMCIgOiAiIiApICsgZGF0ZS5nZXRGdWxsWWVhcigpICUgMTAwICk7DQoJCQkJCQkJYnJlYWs7DQoJCQkJCQljYXNlICJAIjoNCgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCk7DQoJCQkJCQkJYnJlYWs7DQoJCQkJCQljYXNlICIhIjoNCgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCkgKiAxMDAwMCArIHRoaXMuX3RpY2tzVG8xOTcwOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAiJyI6DQoJCQkJCQkJaWYgKCBsb29rQWhlYWQoICInIiApICkgew0KCQkJCQkJCQlvdXRwdXQgKz0gIiciOw0KCQkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJCWxpdGVyYWwgPSB0cnVlOw0KCQkJCQkJCX0NCgkJCQkJCQlicmVhazsNCgkJCQkJCWRlZmF1bHQ6DQoJCQkJCQkJb3V0cHV0ICs9IGZvcm1hdC5jaGFyQXQoIGlGb3JtYXQgKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlyZXR1cm4gb3V0cHV0Ow0KCX0sDQoNCgkvKiBFeHRyYWN0IGFsbCBwb3NzaWJsZSBjaGFyYWN0ZXJzIGZyb20gdGhlIGRhdGUgZm9ybWF0LiAqLw0KCV9wb3NzaWJsZUNoYXJzOiBmdW5jdGlvbiggZm9ybWF0ICkgew0KCQl2YXIgaUZvcm1hdCwNCgkJCWNoYXJzID0gIiIsDQoJCQlsaXRlcmFsID0gZmFsc2UsDQoNCgkJCS8vIENoZWNrIHdoZXRoZXIgYSBmb3JtYXQgY2hhcmFjdGVyIGlzIGRvdWJsZWQNCgkJCWxvb2tBaGVhZCA9IGZ1bmN0aW9uKCBtYXRjaCApIHsNCgkJCQl2YXIgbWF0Y2hlcyA9ICggaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoIGlGb3JtYXQgKyAxICkgPT09IG1hdGNoICk7DQoJCQkJaWYgKCBtYXRjaGVzICkgew0KCQkJCQlpRm9ybWF0Kys7DQoJCQkJfQ0KCQkJCXJldHVybiBtYXRjaGVzOw0KCQkJfTsNCg0KCQlmb3IgKCBpRm9ybWF0ID0gMDsgaUZvcm1hdCA8IGZvcm1hdC5sZW5ndGg7IGlGb3JtYXQrKyApIHsNCgkJCWlmICggbGl0ZXJhbCApIHsNCgkJCQlpZiAoIGZvcm1hdC5jaGFyQXQoIGlGb3JtYXQgKSA9PT0gIiciICYmICFsb29rQWhlYWQoICInIiApICkgew0KCQkJCQlsaXRlcmFsID0gZmFsc2U7DQoJCQkJfSBlbHNlIHsNCgkJCQkJY2hhcnMgKz0gZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApOw0KCQkJCX0NCgkJCX0gZWxzZSB7DQoJCQkJc3dpdGNoICggZm9ybWF0LmNoYXJBdCggaUZvcm1hdCApICkgew0KCQkJCQljYXNlICJkIjogY2FzZSAibSI6IGNhc2UgInkiOiBjYXNlICJAIjoNCgkJCQkJCWNoYXJzICs9ICIwMTIzNDU2Nzg5IjsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJEIjogY2FzZSAiTSI6DQoJCQkJCQlyZXR1cm4gbnVsbDsgLy8gQWNjZXB0IGFueXRoaW5nDQoJCQkJCWNhc2UgIiciOg0KCQkJCQkJaWYgKCBsb29rQWhlYWQoICInIiApICkgew0KCQkJCQkJCWNoYXJzICs9ICInIjsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJbGl0ZXJhbCA9IHRydWU7DQoJCQkJCQl9DQoJCQkJCQlicmVhazsNCgkJCQkJZGVmYXVsdDoNCgkJCQkJCWNoYXJzICs9IGZvcm1hdC5jaGFyQXQoIGlGb3JtYXQgKTsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJcmV0dXJuIGNoYXJzOw0KCX0sDQoNCgkvKiBHZXQgYSBzZXR0aW5nIHZhbHVlLCBkZWZhdWx0aW5nIGlmIG5lY2Vzc2FyeS4gKi8NCglfZ2V0OiBmdW5jdGlvbiggaW5zdCwgbmFtZSApIHsNCgkJcmV0dXJuIGluc3Quc2V0dGluZ3NbIG5hbWUgXSAhPT0gdW5kZWZpbmVkID8NCgkJCWluc3Quc2V0dGluZ3NbIG5hbWUgXSA6IHRoaXMuX2RlZmF1bHRzWyBuYW1lIF07DQoJfSwNCg0KCS8qIFBhcnNlIGV4aXN0aW5nIGRhdGUgYW5kIGluaXRpYWxpc2UgZGF0ZSBwaWNrZXIuICovDQoJX3NldERhdGVGcm9tRmllbGQ6IGZ1bmN0aW9uKCBpbnN0LCBub0RlZmF1bHQgKSB7DQoJCWlmICggaW5zdC5pbnB1dC52YWwoKSA9PT0gaW5zdC5sYXN0VmFsICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIGRhdGVGb3JtYXQgPSB0aGlzLl9nZXQoIGluc3QsICJkYXRlRm9ybWF0IiApLA0KCQkJZGF0ZXMgPSBpbnN0Lmxhc3RWYWwgPSBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC52YWwoKSA6IG51bGwsDQoJCQlkZWZhdWx0RGF0ZSA9IHRoaXMuX2dldERlZmF1bHREYXRlKCBpbnN0ICksDQoJCQlkYXRlID0gZGVmYXVsdERhdGUsDQoJCQlzZXR0aW5ncyA9IHRoaXMuX2dldEZvcm1hdENvbmZpZyggaW5zdCApOw0KDQoJCXRyeSB7DQoJCQlkYXRlID0gdGhpcy5wYXJzZURhdGUoIGRhdGVGb3JtYXQsIGRhdGVzLCBzZXR0aW5ncyApIHx8IGRlZmF1bHREYXRlOw0KCQl9IGNhdGNoICggZXZlbnQgKSB7DQoJCQlkYXRlcyA9ICggbm9EZWZhdWx0ID8gIiIgOiBkYXRlcyApOw0KCQl9DQoJCWluc3Quc2VsZWN0ZWREYXkgPSBkYXRlLmdldERhdGUoKTsNCgkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7DQoJCWluc3QuZHJhd1llYXIgPSBpbnN0LnNlbGVjdGVkWWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsNCgkJaW5zdC5jdXJyZW50RGF5ID0gKCBkYXRlcyA/IGRhdGUuZ2V0RGF0ZSgpIDogMCApOw0KCQlpbnN0LmN1cnJlbnRNb250aCA9ICggZGF0ZXMgPyBkYXRlLmdldE1vbnRoKCkgOiAwICk7DQoJCWluc3QuY3VycmVudFllYXIgPSAoIGRhdGVzID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogMCApOw0KCQl0aGlzLl9hZGp1c3RJbnN0RGF0ZSggaW5zdCApOw0KCX0sDQoNCgkvKiBSZXRyaWV2ZSB0aGUgZGVmYXVsdCBkYXRlIHNob3duIG9uIG9wZW5pbmcuICovDQoJX2dldERlZmF1bHREYXRlOiBmdW5jdGlvbiggaW5zdCApIHsNCgkJcmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KCBpbnN0LA0KCQkJdGhpcy5fZGV0ZXJtaW5lRGF0ZSggaW5zdCwgdGhpcy5fZ2V0KCBpbnN0LCAiZGVmYXVsdERhdGUiICksIG5ldyBEYXRlKCkgKSApOw0KCX0sDQoNCgkvKiBBIGRhdGUgbWF5IGJlIHNwZWNpZmllZCBhcyBhbiBleGFjdCB2YWx1ZSBvciBhIHJlbGF0aXZlIG9uZS4gKi8NCglfZGV0ZXJtaW5lRGF0ZTogZnVuY3Rpb24oIGluc3QsIGRhdGUsIGRlZmF1bHREYXRlICkgew0KCQl2YXIgb2Zmc2V0TnVtZXJpYyA9IGZ1bmN0aW9uKCBvZmZzZXQgKSB7DQoJCQkJdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOw0KCQkJCWRhdGUuc2V0RGF0ZSggZGF0ZS5nZXREYXRlKCkgKyBvZmZzZXQgKTsNCgkJCQlyZXR1cm4gZGF0ZTsNCgkJCX0sDQoJCQlvZmZzZXRTdHJpbmcgPSBmdW5jdGlvbiggb2Zmc2V0ICkgew0KCQkJCXRyeSB7DQoJCQkJCXJldHVybiAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCAkLmRhdGVwaWNrZXIuX2dldCggaW5zdCwgImRhdGVGb3JtYXQiICksDQoJCQkJCQlvZmZzZXQsICQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKCBpbnN0ICkgKTsNCgkJCQl9DQoJCQkJY2F0Y2ggKCBlICkgew0KDQoJCQkJCS8vIElnbm9yZQ0KCQkJCX0NCg0KCQkJCXZhciBkYXRlID0gKCBvZmZzZXQudG9Mb3dlckNhc2UoKS5tYXRjaCggL15jLyApID8NCgkJCQkJJC5kYXRlcGlja2VyLl9nZXREYXRlKCBpbnN0ICkgOiBudWxsICkgfHwgbmV3IERhdGUoKSwNCgkJCQkJeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwNCgkJCQkJbW9udGggPSBkYXRlLmdldE1vbnRoKCksDQoJCQkJCWRheSA9IGRhdGUuZ2V0RGF0ZSgpLA0KCQkJCQlwYXR0ZXJuID0gLyhbK1wtXT9bMC05XSspXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csDQoJCQkJCW1hdGNoZXMgPSBwYXR0ZXJuLmV4ZWMoIG9mZnNldCApOw0KDQoJCQkJd2hpbGUgKCBtYXRjaGVzICkgew0KCQkJCQlzd2l0Y2ggKCBtYXRjaGVzWyAyIF0gfHwgImQiICkgew0KCQkJCQkJY2FzZSAiZCIgOiBjYXNlICJEIiA6DQoJCQkJCQkJZGF5ICs9IHBhcnNlSW50KCBtYXRjaGVzWyAxIF0sIDEwICk7IGJyZWFrOw0KCQkJCQkJY2FzZSAidyIgOiBjYXNlICJXIiA6DQoJCQkJCQkJZGF5ICs9IHBhcnNlSW50KCBtYXRjaGVzWyAxIF0sIDEwICkgKiA3OyBicmVhazsNCgkJCQkJCWNhc2UgIm0iIDogY2FzZSAiTSIgOg0KCQkJCQkJCW1vbnRoICs9IHBhcnNlSW50KCBtYXRjaGVzWyAxIF0sIDEwICk7DQoJCQkJCQkJZGF5ID0gTWF0aC5taW4oIGRheSwgJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCggeWVhciwgbW9udGggKSApOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJY2FzZSAieSI6IGNhc2UgIlkiIDoNCgkJCQkJCQl5ZWFyICs9IHBhcnNlSW50KCBtYXRjaGVzWyAxIF0sIDEwICk7DQoJCQkJCQkJZGF5ID0gTWF0aC5taW4oIGRheSwgJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCggeWVhciwgbW9udGggKSApOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQl9DQoJCQkJCW1hdGNoZXMgPSBwYXR0ZXJuLmV4ZWMoIG9mZnNldCApOw0KCQkJCX0NCgkJCQlyZXR1cm4gbmV3IERhdGUoIHllYXIsIG1vbnRoLCBkYXkgKTsNCgkJCX0sDQoJCQluZXdEYXRlID0gKCBkYXRlID09IG51bGwgfHwgZGF0ZSA9PT0gIiIgPyBkZWZhdWx0RGF0ZSA6ICggdHlwZW9mIGRhdGUgPT09ICJzdHJpbmciID8gb2Zmc2V0U3RyaW5nKCBkYXRlICkgOg0KCQkJCSggdHlwZW9mIGRhdGUgPT09ICJudW1iZXIiID8gKCBpc05hTiggZGF0ZSApID8gZGVmYXVsdERhdGUgOiBvZmZzZXROdW1lcmljKCBkYXRlICkgKSA6IG5ldyBEYXRlKCBkYXRlLmdldFRpbWUoKSApICkgKSApOw0KDQoJCW5ld0RhdGUgPSAoIG5ld0RhdGUgJiYgbmV3RGF0ZS50b1N0cmluZygpID09PSAiSW52YWxpZCBEYXRlIiA/IGRlZmF1bHREYXRlIDogbmV3RGF0ZSApOw0KCQlpZiAoIG5ld0RhdGUgKSB7DQoJCQluZXdEYXRlLnNldEhvdXJzKCAwICk7DQoJCQluZXdEYXRlLnNldE1pbnV0ZXMoIDAgKTsNCgkJCW5ld0RhdGUuc2V0U2Vjb25kcyggMCApOw0KCQkJbmV3RGF0ZS5zZXRNaWxsaXNlY29uZHMoIDAgKTsNCgkJfQ0KCQlyZXR1cm4gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIG5ld0RhdGUgKTsNCgl9LA0KDQoJLyogSGFuZGxlIHN3aXRjaCB0by9mcm9tIGRheWxpZ2h0IHNhdmluZy4NCgkgKiBIb3VycyBtYXkgYmUgbm9uLXplcm8gb24gZGF5bGlnaHQgc2F2aW5nIGN1dC1vdmVyOg0KCSAqID4gMTIgd2hlbiBtaWRuaWdodCBjaGFuZ2VvdmVyLCBidXQgdGhlbiBjYW5ub3QgZ2VuZXJhdGUNCgkgKiBtaWRuaWdodCBkYXRldGltZSwgc28ganVtcCB0byAxQU0sIG90aGVyd2lzZSByZXNldC4NCgkgKiBAcGFyYW0gIGRhdGUgIChEYXRlKSB0aGUgZGF0ZSB0byBjaGVjaw0KCSAqIEByZXR1cm4gIChEYXRlKSB0aGUgY29ycmVjdGVkIGRhdGUNCgkgKi8NCglfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6IGZ1bmN0aW9uKCBkYXRlICkgew0KCQlpZiAoICFkYXRlICkgew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCgkJZGF0ZS5zZXRIb3VycyggZGF0ZS5nZXRIb3VycygpID4gMTIgPyBkYXRlLmdldEhvdXJzKCkgKyAyIDogMCApOw0KCQlyZXR1cm4gZGF0ZTsNCgl9LA0KDQoJLyogU2V0IHRoZSBkYXRlKHMpIGRpcmVjdGx5LiAqLw0KCV9zZXREYXRlOiBmdW5jdGlvbiggaW5zdCwgZGF0ZSwgbm9DaGFuZ2UgKSB7DQoJCXZhciBjbGVhciA9ICFkYXRlLA0KCQkJb3JpZ01vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoLA0KCQkJb3JpZ1llYXIgPSBpbnN0LnNlbGVjdGVkWWVhciwNCgkJCW5ld0RhdGUgPSB0aGlzLl9yZXN0cmljdE1pbk1heCggaW5zdCwgdGhpcy5fZGV0ZXJtaW5lRGF0ZSggaW5zdCwgZGF0ZSwgbmV3IERhdGUoKSApICk7DQoNCgkJaW5zdC5zZWxlY3RlZERheSA9IGluc3QuY3VycmVudERheSA9IG5ld0RhdGUuZ2V0RGF0ZSgpOw0KCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGluc3QuY3VycmVudE1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpOw0KCQlpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpOw0KCQlpZiAoICggb3JpZ01vbnRoICE9PSBpbnN0LnNlbGVjdGVkTW9udGggfHwgb3JpZ1llYXIgIT09IGluc3Quc2VsZWN0ZWRZZWFyICkgJiYgIW5vQ2hhbmdlICkgew0KCQkJdGhpcy5fbm90aWZ5Q2hhbmdlKCBpbnN0ICk7DQoJCX0NCgkJdGhpcy5fYWRqdXN0SW5zdERhdGUoIGluc3QgKTsNCgkJaWYgKCBpbnN0LmlucHV0ICkgew0KCQkJaW5zdC5pbnB1dC52YWwoIGNsZWFyID8gIiIgOiB0aGlzLl9mb3JtYXREYXRlKCBpbnN0ICkgKTsNCgkJfQ0KCX0sDQoNCgkvKiBSZXRyaWV2ZSB0aGUgZGF0ZShzKSBkaXJlY3RseS4gKi8NCglfZ2V0RGF0ZTogZnVuY3Rpb24oIGluc3QgKSB7DQoJCXZhciBzdGFydERhdGUgPSAoICFpbnN0LmN1cnJlbnRZZWFyIHx8ICggaW5zdC5pbnB1dCAmJiBpbnN0LmlucHV0LnZhbCgpID09PSAiIiApID8gbnVsbCA6DQoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggbmV3IERhdGUoDQoJCQlpbnN0LmN1cnJlbnRZZWFyLCBpbnN0LmN1cnJlbnRNb250aCwgaW5zdC5jdXJyZW50RGF5ICkgKSApOw0KCQkJcmV0dXJuIHN0YXJ0RGF0ZTsNCgl9LA0KDQoJLyogQXR0YWNoIHRoZSBvbnh4eCBoYW5kbGVycy4gIFRoZXNlIGFyZSBkZWNsYXJlZCBzdGF0aWNhbGx5IHNvDQoJICogdGhleSB3b3JrIHdpdGggc3RhdGljIGNvZGUgdHJhbnNmb3JtZXJzIGxpa2UgQ2FqYS4NCgkgKi8NCglfYXR0YWNoSGFuZGxlcnM6IGZ1bmN0aW9uKCBpbnN0ICkgew0KCQl2YXIgc3RlcE1vbnRocyA9IHRoaXMuX2dldCggaW5zdCwgInN0ZXBNb250aHMiICksDQoJCQlpZCA9ICIjIiArIGluc3QuaWQucmVwbGFjZSggL1xcXFwvZywgIlxcIiApOw0KCQlpbnN0LmRwRGl2LmZpbmQoICJbZGF0YS1oYW5kbGVyXSIgKS5tYXAoIGZ1bmN0aW9uKCkgew0KCQkJdmFyIGhhbmRsZXIgPSB7DQoJCQkJcHJldjogZnVuY3Rpb24oKSB7DQoJCQkJCSQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSggaWQsIC1zdGVwTW9udGhzLCAiTSIgKTsNCgkJCQl9LA0KCQkJCW5leHQ6IGZ1bmN0aW9uKCkgew0KCQkJCQkkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoIGlkLCArc3RlcE1vbnRocywgIk0iICk7DQoJCQkJfSwNCgkJCQloaWRlOiBmdW5jdGlvbigpIHsNCgkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOw0KCQkJCX0sDQoJCQkJdG9kYXk6IGZ1bmN0aW9uKCkgew0KCQkJCQkkLmRhdGVwaWNrZXIuX2dvdG9Ub2RheSggaWQgKTsNCgkJCQl9LA0KCQkJCXNlbGVjdERheTogZnVuY3Rpb24oKSB7DQoJCQkJCSQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KCBpZCwgK3RoaXMuZ2V0QXR0cmlidXRlKCAiZGF0YS1tb250aCIgKSwgK3RoaXMuZ2V0QXR0cmlidXRlKCAiZGF0YS15ZWFyIiApLCB0aGlzICk7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9LA0KCQkJCXNlbGVjdE1vbnRoOiBmdW5jdGlvbigpIHsNCgkJCQkJJC5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoIGlkLCB0aGlzLCAiTSIgKTsNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCX0sDQoJCQkJc2VsZWN0WWVhcjogZnVuY3Rpb24oKSB7DQoJCQkJCSQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKCBpZCwgdGhpcywgIlkiICk7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9DQoJCQl9Ow0KCQkJJCggdGhpcyApLm9uKCB0aGlzLmdldEF0dHJpYnV0ZSggImRhdGEtZXZlbnQiICksIGhhbmRsZXJbIHRoaXMuZ2V0QXR0cmlidXRlKCAiZGF0YS1oYW5kbGVyIiApIF0gKTsNCgkJfSApOw0KCX0sDQoNCgkvKiBHZW5lcmF0ZSB0aGUgSFRNTCBmb3IgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRhdGUgcGlja2VyLiAqLw0KCV9nZW5lcmF0ZUhUTUw6IGZ1bmN0aW9uKCBpbnN0ICkgew0KCQl2YXIgbWF4RHJhdywgcHJldlRleHQsIHByZXYsIG5leHRUZXh0LCBuZXh0LCBjdXJyZW50VGV4dCwgZ290b0RhdGUsDQoJCQljb250cm9scywgYnV0dG9uUGFuZWwsIGZpcnN0RGF5LCBzaG93V2VlaywgZGF5TmFtZXMsIGRheU5hbWVzTWluLA0KCQkJbW9udGhOYW1lcywgbW9udGhOYW1lc1Nob3J0LCBiZWZvcmVTaG93RGF5LCBzaG93T3RoZXJNb250aHMsDQoJCQlzZWxlY3RPdGhlck1vbnRocywgZGVmYXVsdERhdGUsIGh0bWwsIGRvdywgcm93LCBncm91cCwgY29sLCBzZWxlY3RlZERhdGUsDQoJCQljb3JuZXJDbGFzcywgY2FsZW5kZXIsIHRoZWFkLCBkYXksIGRheXNJbk1vbnRoLCBsZWFkRGF5cywgY3VyUm93cywgbnVtUm93cywNCgkJCXByaW50RGF0ZSwgZFJvdywgdGJvZHksIGRheVNldHRpbmdzLCBvdGhlck1vbnRoLCB1bnNlbGVjdGFibGUsDQoJCQl0ZW1wRGF0ZSA9IG5ldyBEYXRlKCksDQoJCQl0b2RheSA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KA0KCQkJCW5ldyBEYXRlKCB0ZW1wRGF0ZS5nZXRGdWxsWWVhcigpLCB0ZW1wRGF0ZS5nZXRNb250aCgpLCB0ZW1wRGF0ZS5nZXREYXRlKCkgKSApLCAvLyBjbGVhciB0aW1lDQoJCQlpc1JUTCA9IHRoaXMuX2dldCggaW5zdCwgImlzUlRMIiApLA0KCQkJc2hvd0J1dHRvblBhbmVsID0gdGhpcy5fZ2V0KCBpbnN0LCAic2hvd0J1dHRvblBhbmVsIiApLA0KCQkJaGlkZUlmTm9QcmV2TmV4dCA9IHRoaXMuX2dldCggaW5zdCwgImhpZGVJZk5vUHJldk5leHQiICksDQoJCQluYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID0gdGhpcy5fZ2V0KCBpbnN0LCAibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCIgKSwNCgkJCW51bU1vbnRocyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKCBpbnN0ICksDQoJCQlzaG93Q3VycmVudEF0UG9zID0gdGhpcy5fZ2V0KCBpbnN0LCAic2hvd0N1cnJlbnRBdFBvcyIgKSwNCgkJCXN0ZXBNb250aHMgPSB0aGlzLl9nZXQoIGluc3QsICJzdGVwTW9udGhzIiApLA0KCQkJaXNNdWx0aU1vbnRoID0gKCBudW1Nb250aHNbIDAgXSAhPT0gMSB8fCBudW1Nb250aHNbIDEgXSAhPT0gMSApLA0KCQkJY3VycmVudERhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggKCAhaW5zdC5jdXJyZW50RGF5ID8gbmV3IERhdGUoIDk5OTksIDksIDkgKSA6DQoJCQkJbmV3IERhdGUoIGluc3QuY3VycmVudFllYXIsIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnREYXkgKSApICksDQoJCQltaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZSggaW5zdCwgIm1pbiIgKSwNCgkJCW1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKCBpbnN0LCAibWF4IiApLA0KCQkJZHJhd01vbnRoID0gaW5zdC5kcmF3TW9udGggLSBzaG93Q3VycmVudEF0UG9zLA0KCQkJZHJhd1llYXIgPSBpbnN0LmRyYXdZZWFyOw0KDQoJCWlmICggZHJhd01vbnRoIDwgMCApIHsNCgkJCWRyYXdNb250aCArPSAxMjsNCgkJCWRyYXdZZWFyLS07DQoJCX0NCgkJaWYgKCBtYXhEYXRlICkgew0KCQkJbWF4RHJhdyA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCBuZXcgRGF0ZSggbWF4RGF0ZS5nZXRGdWxsWWVhcigpLA0KCQkJCW1heERhdGUuZ2V0TW9udGgoKSAtICggbnVtTW9udGhzWyAwIF0gKiBudW1Nb250aHNbIDEgXSApICsgMSwgbWF4RGF0ZS5nZXREYXRlKCkgKSApOw0KCQkJbWF4RHJhdyA9ICggbWluRGF0ZSAmJiBtYXhEcmF3IDwgbWluRGF0ZSA/IG1pbkRhdGUgOiBtYXhEcmF3ICk7DQoJCQl3aGlsZSAoIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCBuZXcgRGF0ZSggZHJhd1llYXIsIGRyYXdNb250aCwgMSApICkgPiBtYXhEcmF3ICkgew0KCQkJCWRyYXdNb250aC0tOw0KCQkJCWlmICggZHJhd01vbnRoIDwgMCApIHsNCgkJCQkJZHJhd01vbnRoID0gMTE7DQoJCQkJCWRyYXdZZWFyLS07DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCWluc3QuZHJhd01vbnRoID0gZHJhd01vbnRoOw0KCQlpbnN0LmRyYXdZZWFyID0gZHJhd1llYXI7DQoNCgkJcHJldlRleHQgPSB0aGlzLl9nZXQoIGluc3QsICJwcmV2VGV4dCIgKTsNCgkJcHJldlRleHQgPSAoICFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID8gcHJldlRleHQgOiB0aGlzLmZvcm1hdERhdGUoIHByZXZUZXh0LA0KCQkJdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIG5ldyBEYXRlKCBkcmF3WWVhciwgZHJhd01vbnRoIC0gc3RlcE1vbnRocywgMSApICksDQoJCQl0aGlzLl9nZXRGb3JtYXRDb25maWcoIGluc3QgKSApICk7DQoNCgkJcHJldiA9ICggdGhpcy5fY2FuQWRqdXN0TW9udGgoIGluc3QsIC0xLCBkcmF3WWVhciwgZHJhd01vbnRoICkgPw0KCQkJIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdwcmV2JyBkYXRhLWV2ZW50PSdjbGljayciICsNCgkJCSIgdGl0bGU9JyIgKyBwcmV2VGV4dCArICInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIgKyAoIGlzUlRMID8gImUiIDogInciICkgKyAiJz4iICsgcHJldlRleHQgKyAiPC9zcGFuPjwvYT4iIDoNCgkJCSggaGlkZUlmTm9QcmV2TmV4dCA/ICIiIDogIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIgKyBwcmV2VGV4dCArICInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIgKyAoIGlzUlRMID8gImUiIDogInciICkgKyAiJz4iICsgcHJldlRleHQgKyAiPC9zcGFuPjwvYT4iICkgKTsNCg0KCQluZXh0VGV4dCA9IHRoaXMuX2dldCggaW5zdCwgIm5leHRUZXh0IiApOw0KCQluZXh0VGV4dCA9ICggIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQgPyBuZXh0VGV4dCA6IHRoaXMuZm9ybWF0RGF0ZSggbmV4dFRleHQsDQoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggbmV3IERhdGUoIGRyYXdZZWFyLCBkcmF3TW9udGggKyBzdGVwTW9udGhzLCAxICkgKSwNCgkJCXRoaXMuX2dldEZvcm1hdENvbmZpZyggaW5zdCApICkgKTsNCg0KCQluZXh0ID0gKCB0aGlzLl9jYW5BZGp1c3RNb250aCggaW5zdCwgKzEsIGRyYXdZZWFyLCBkcmF3TW9udGggKSA/DQoJCQkiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J25leHQnIGRhdGEtZXZlbnQ9J2NsaWNrJyIgKw0KCQkJIiB0aXRsZT0nIiArIG5leHRUZXh0ICsgIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIiArICggaXNSVEwgPyAidyIgOiAiZSIgKSArICInPiIgKyBuZXh0VGV4dCArICI8L3NwYW4+PC9hPiIgOg0KCQkJKCBoaWRlSWZOb1ByZXZOZXh0ID8gIiIgOiAiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIiArIG5leHRUZXh0ICsgIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIiArICggaXNSVEwgPyAidyIgOiAiZSIgKSArICInPiIgKyBuZXh0VGV4dCArICI8L3NwYW4+PC9hPiIgKSApOw0KDQoJCWN1cnJlbnRUZXh0ID0gdGhpcy5fZ2V0KCBpbnN0LCAiY3VycmVudFRleHQiICk7DQoJCWdvdG9EYXRlID0gKCB0aGlzLl9nZXQoIGluc3QsICJnb3RvQ3VycmVudCIgKSAmJiBpbnN0LmN1cnJlbnREYXkgPyBjdXJyZW50RGF0ZSA6IHRvZGF5ICk7DQoJCWN1cnJlbnRUZXh0ID0gKCAhbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCA/IGN1cnJlbnRUZXh0IDoNCgkJCXRoaXMuZm9ybWF0RGF0ZSggY3VycmVudFRleHQsIGdvdG9EYXRlLCB0aGlzLl9nZXRGb3JtYXRDb25maWcoIGluc3QgKSApICk7DQoNCgkJY29udHJvbHMgPSAoICFpbnN0LmlubGluZSA/ICI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPiIgKw0KCQkJdGhpcy5fZ2V0KCBpbnN0LCAiY2xvc2VUZXh0IiApICsgIjwvYnV0dG9uPiIgOiAiIiApOw0KDQoJCWJ1dHRvblBhbmVsID0gKCBzaG93QnV0dG9uUGFuZWwgKSA/ICI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQnPiIgKyAoIGlzUlRMID8gY29udHJvbHMgOiAiIiApICsNCgkJCSggdGhpcy5faXNJblJhbmdlKCBpbnN0LCBnb3RvRGF0ZSApID8gIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyIgKw0KCQkJIj4iICsgY3VycmVudFRleHQgKyAiPC9idXR0b24+IiA6ICIiICkgKyAoIGlzUlRMID8gIiIgOiBjb250cm9scyApICsgIjwvZGl2PiIgOiAiIjsNCg0KCQlmaXJzdERheSA9IHBhcnNlSW50KCB0aGlzLl9nZXQoIGluc3QsICJmaXJzdERheSIgKSwgMTAgKTsNCgkJZmlyc3REYXkgPSAoIGlzTmFOKCBmaXJzdERheSApID8gMCA6IGZpcnN0RGF5ICk7DQoNCgkJc2hvd1dlZWsgPSB0aGlzLl9nZXQoIGluc3QsICJzaG93V2VlayIgKTsNCgkJZGF5TmFtZXMgPSB0aGlzLl9nZXQoIGluc3QsICJkYXlOYW1lcyIgKTsNCgkJZGF5TmFtZXNNaW4gPSB0aGlzLl9nZXQoIGluc3QsICJkYXlOYW1lc01pbiIgKTsNCgkJbW9udGhOYW1lcyA9IHRoaXMuX2dldCggaW5zdCwgIm1vbnRoTmFtZXMiICk7DQoJCW1vbnRoTmFtZXNTaG9ydCA9IHRoaXMuX2dldCggaW5zdCwgIm1vbnRoTmFtZXNTaG9ydCIgKTsNCgkJYmVmb3JlU2hvd0RheSA9IHRoaXMuX2dldCggaW5zdCwgImJlZm9yZVNob3dEYXkiICk7DQoJCXNob3dPdGhlck1vbnRocyA9IHRoaXMuX2dldCggaW5zdCwgInNob3dPdGhlck1vbnRocyIgKTsNCgkJc2VsZWN0T3RoZXJNb250aHMgPSB0aGlzLl9nZXQoIGluc3QsICJzZWxlY3RPdGhlck1vbnRocyIgKTsNCgkJZGVmYXVsdERhdGUgPSB0aGlzLl9nZXREZWZhdWx0RGF0ZSggaW5zdCApOw0KCQlodG1sID0gIiI7DQoNCgkJZm9yICggcm93ID0gMDsgcm93IDwgbnVtTW9udGhzWyAwIF07IHJvdysrICkgew0KCQkJZ3JvdXAgPSAiIjsNCgkJCXRoaXMubWF4Um93cyA9IDQ7DQoJCQlmb3IgKCBjb2wgPSAwOyBjb2wgPCBudW1Nb250aHNbIDEgXTsgY29sKysgKSB7DQoJCQkJc2VsZWN0ZWREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIG5ldyBEYXRlKCBkcmF3WWVhciwgZHJhd01vbnRoLCBpbnN0LnNlbGVjdGVkRGF5ICkgKTsNCgkJCQljb3JuZXJDbGFzcyA9ICIgdWktY29ybmVyLWFsbCI7DQoJCQkJY2FsZW5kZXIgPSAiIjsNCgkJCQlpZiAoIGlzTXVsdGlNb250aCApIHsNCgkJCQkJY2FsZW5kZXIgKz0gIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXAiOw0KCQkJCQlpZiAoIG51bU1vbnRoc1sgMSBdID4gMSApIHsNCgkJCQkJCXN3aXRjaCAoIGNvbCApIHsNCgkJCQkJCQljYXNlIDA6IGNhbGVuZGVyICs9ICIgdWktZGF0ZXBpY2tlci1ncm91cC1maXJzdCI7DQoJCQkJCQkJCWNvcm5lckNsYXNzID0gIiB1aS1jb3JuZXItIiArICggaXNSVEwgPyAicmlnaHQiIDogImxlZnQiICk7IGJyZWFrOw0KCQkJCQkJCWNhc2UgbnVtTW9udGhzWyAxIF0gLSAxOiBjYWxlbmRlciArPSAiIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCI7DQoJCQkJCQkJCWNvcm5lckNsYXNzID0gIiB1aS1jb3JuZXItIiArICggaXNSVEwgPyAibGVmdCIgOiAicmlnaHQiICk7IGJyZWFrOw0KCQkJCQkJCWRlZmF1bHQ6IGNhbGVuZGVyICs9ICIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUiOyBjb3JuZXJDbGFzcyA9ICIiOyBicmVhazsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQljYWxlbmRlciArPSAiJz4iOw0KCQkJCX0NCgkJCQljYWxlbmRlciArPSAiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgiICsgY29ybmVyQ2xhc3MgKyAiJz4iICsNCgkJCQkJKCAvYWxsfGxlZnQvLnRlc3QoIGNvcm5lckNsYXNzICkgJiYgcm93ID09PSAwID8gKCBpc1JUTCA/IG5leHQgOiBwcmV2ICkgOiAiIiApICsNCgkJCQkJKCAvYWxsfHJpZ2h0Ly50ZXN0KCBjb3JuZXJDbGFzcyApICYmIHJvdyA9PT0gMCA/ICggaXNSVEwgPyBwcmV2IDogbmV4dCApIDogIiIgKSArDQoJCQkJCXRoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKCBpbnN0LCBkcmF3TW9udGgsIGRyYXdZZWFyLCBtaW5EYXRlLCBtYXhEYXRlLA0KCQkJCQlyb3cgPiAwIHx8IGNvbCA+IDAsIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCApICsgLy8gZHJhdyBtb250aCBoZWFkZXJzDQoJCQkJCSI8L2Rpdj48dGFibGUgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2FsZW5kYXInPjx0aGVhZD4iICsNCgkJCQkJIjx0cj4iOw0KCQkJCXRoZWFkID0gKCBzaG93V2VlayA/ICI8dGggY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPiIgKyB0aGlzLl9nZXQoIGluc3QsICJ3ZWVrSGVhZGVyIiApICsgIjwvdGg+IiA6ICIiICk7DQoJCQkJZm9yICggZG93ID0gMDsgZG93IDwgNzsgZG93KysgKSB7IC8vIGRheXMgb2YgdGhlIHdlZWsNCgkJCQkJZGF5ID0gKCBkb3cgKyBmaXJzdERheSApICUgNzsNCgkJCQkJdGhlYWQgKz0gIjx0aCBzY29wZT0nY29sJyIgKyAoICggZG93ICsgZmlyc3REYXkgKyA2ICkgJSA3ID49IDUgPyAiIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstZW5kJyIgOiAiIiApICsgIj4iICsNCgkJCQkJCSI8c3BhbiB0aXRsZT0nIiArIGRheU5hbWVzWyBkYXkgXSArICInPiIgKyBkYXlOYW1lc01pblsgZGF5IF0gKyAiPC9zcGFuPjwvdGg+IjsNCgkJCQl9DQoJCQkJY2FsZW5kZXIgKz0gdGhlYWQgKyAiPC90cj48L3RoZWFkPjx0Ym9keT4iOw0KCQkJCWRheXNJbk1vbnRoID0gdGhpcy5fZ2V0RGF5c0luTW9udGgoIGRyYXdZZWFyLCBkcmF3TW9udGggKTsNCgkJCQlpZiAoIGRyYXdZZWFyID09PSBpbnN0LnNlbGVjdGVkWWVhciAmJiBkcmF3TW9udGggPT09IGluc3Quc2VsZWN0ZWRNb250aCApIHsNCgkJCQkJaW5zdC5zZWxlY3RlZERheSA9IE1hdGgubWluKCBpbnN0LnNlbGVjdGVkRGF5LCBkYXlzSW5Nb250aCApOw0KCQkJCX0NCgkJCQlsZWFkRGF5cyA9ICggdGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKCBkcmF3WWVhciwgZHJhd01vbnRoICkgLSBmaXJzdERheSArIDcgKSAlIDc7DQoJCQkJY3VyUm93cyA9IE1hdGguY2VpbCggKCBsZWFkRGF5cyArIGRheXNJbk1vbnRoICkgLyA3ICk7IC8vIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHJvd3MgdG8gZ2VuZXJhdGUNCgkJCQludW1Sb3dzID0gKCBpc011bHRpTW9udGggPyB0aGlzLm1heFJvd3MgPiBjdXJSb3dzID8gdGhpcy5tYXhSb3dzIDogY3VyUm93cyA6IGN1clJvd3MgKTsgLy9JZiBtdWx0aXBsZSBtb250aHMsIHVzZSB0aGUgaGlnaGVyIG51bWJlciBvZiByb3dzIChzZWUgIzcwNDMpDQoJCQkJdGhpcy5tYXhSb3dzID0gbnVtUm93czsNCgkJCQlwcmludERhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggbmV3IERhdGUoIGRyYXdZZWFyLCBkcmF3TW9udGgsIDEgLSBsZWFkRGF5cyApICk7DQoJCQkJZm9yICggZFJvdyA9IDA7IGRSb3cgPCBudW1Sb3dzOyBkUm93KysgKSB7IC8vIGNyZWF0ZSBkYXRlIHBpY2tlciByb3dzDQoJCQkJCWNhbGVuZGVyICs9ICI8dHI+IjsNCgkJCQkJdGJvZHkgPSAoICFzaG93V2VlayA/ICIiIDogIjx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+IiArDQoJCQkJCQl0aGlzLl9nZXQoIGluc3QsICJjYWxjdWxhdGVXZWVrIiApKCBwcmludERhdGUgKSArICI8L3RkPiIgKTsNCgkJCQkJZm9yICggZG93ID0gMDsgZG93IDwgNzsgZG93KysgKSB7IC8vIGNyZWF0ZSBkYXRlIHBpY2tlciBkYXlzDQoJCQkJCQlkYXlTZXR0aW5ncyA9ICggYmVmb3JlU2hvd0RheSA/DQoJCQkJCQkJYmVmb3JlU2hvd0RheS5hcHBseSggKCBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFsgMCBdIDogbnVsbCApLCBbIHByaW50RGF0ZSBdICkgOiBbIHRydWUsICIiIF0gKTsNCgkJCQkJCW90aGVyTW9udGggPSAoIHByaW50RGF0ZS5nZXRNb250aCgpICE9PSBkcmF3TW9udGggKTsNCgkJCQkJCXVuc2VsZWN0YWJsZSA9ICggb3RoZXJNb250aCAmJiAhc2VsZWN0T3RoZXJNb250aHMgKSB8fCAhZGF5U2V0dGluZ3NbIDAgXSB8fA0KCQkJCQkJCSggbWluRGF0ZSAmJiBwcmludERhdGUgPCBtaW5EYXRlICkgfHwgKCBtYXhEYXRlICYmIHByaW50RGF0ZSA+IG1heERhdGUgKTsNCgkJCQkJCXRib2R5ICs9ICI8dGQgY2xhc3M9JyIgKw0KCQkJCQkJCSggKCBkb3cgKyBmaXJzdERheSArIDYgKSAlIDcgPj0gNSA/ICIgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCIgOiAiIiApICsgLy8gaGlnaGxpZ2h0IHdlZWtlbmRzDQoJCQkJCQkJKCBvdGhlck1vbnRoID8gIiB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoIiA6ICIiICkgKyAvLyBoaWdobGlnaHQgZGF5cyBmcm9tIG90aGVyIG1vbnRocw0KCQkJCQkJCSggKCBwcmludERhdGUuZ2V0VGltZSgpID09PSBzZWxlY3RlZERhdGUuZ2V0VGltZSgpICYmIGRyYXdNb250aCA9PT0gaW5zdC5zZWxlY3RlZE1vbnRoICYmIGluc3QuX2tleUV2ZW50ICkgfHwgLy8gdXNlciBwcmVzc2VkIGtleQ0KCQkJCQkJCSggZGVmYXVsdERhdGUuZ2V0VGltZSgpID09PSBwcmludERhdGUuZ2V0VGltZSgpICYmIGRlZmF1bHREYXRlLmdldFRpbWUoKSA9PT0gc2VsZWN0ZWREYXRlLmdldFRpbWUoKSApID8NCg0KCQkJCQkJCS8vIG9yIGRlZmF1bHREYXRlIGlzIGN1cnJlbnQgcHJpbnRlZERhdGUgYW5kIGRlZmF1bHREYXRlIGlzIHNlbGVjdGVkRGF0ZQ0KCQkJCQkJCSIgIiArIHRoaXMuX2RheU92ZXJDbGFzcyA6ICIiICkgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5DQoJCQkJCQkJKCB1bnNlbGVjdGFibGUgPyAiICIgKyB0aGlzLl91bnNlbGVjdGFibGVDbGFzcyArICIgdWktc3RhdGUtZGlzYWJsZWQiIDogIiIgKSArICAvLyBoaWdobGlnaHQgdW5zZWxlY3RhYmxlIGRheXMNCgkJCQkJCQkoIG90aGVyTW9udGggJiYgIXNob3dPdGhlck1vbnRocyA/ICIiIDogIiAiICsgZGF5U2V0dGluZ3NbIDEgXSArIC8vIGhpZ2hsaWdodCBjdXN0b20gZGF0ZXMNCgkJCQkJCQkoIHByaW50RGF0ZS5nZXRUaW1lKCkgPT09IGN1cnJlbnREYXRlLmdldFRpbWUoKSA/ICIgIiArIHRoaXMuX2N1cnJlbnRDbGFzcyA6ICIiICkgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5DQoJCQkJCQkJKCBwcmludERhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkgPyAiIHVpLWRhdGVwaWNrZXItdG9kYXkiIDogIiIgKSApICsgIiciICsgLy8gaGlnaGxpZ2h0IHRvZGF5IChpZiBkaWZmZXJlbnQpDQoJCQkJCQkJKCAoICFvdGhlck1vbnRoIHx8IHNob3dPdGhlck1vbnRocyApICYmIGRheVNldHRpbmdzWyAyIF0gPyAiIHRpdGxlPSciICsgZGF5U2V0dGluZ3NbIDIgXS5yZXBsYWNlKCAvJy9nLCAiJiMzOTsiICkgKyAiJyIgOiAiIiApICsgLy8gY2VsbCB0aXRsZQ0KCQkJCQkJCSggdW5zZWxlY3RhYmxlID8gIiIgOiAiIGRhdGEtaGFuZGxlcj0nc2VsZWN0RGF5JyBkYXRhLWV2ZW50PSdjbGljaycgZGF0YS1tb250aD0nIiArIHByaW50RGF0ZS5nZXRNb250aCgpICsgIicgZGF0YS15ZWFyPSciICsgcHJpbnREYXRlLmdldEZ1bGxZZWFyKCkgKyAiJyIgKSArICI+IiArIC8vIGFjdGlvbnMNCgkJCQkJCQkoIG90aGVyTW9udGggJiYgIXNob3dPdGhlck1vbnRocyA/ICImI3hhMDsiIDogLy8gZGlzcGxheSBmb3Igb3RoZXIgbW9udGhzDQoJCQkJCQkJKCB1bnNlbGVjdGFibGUgPyAiPHNwYW4gY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQnPiIgKyBwcmludERhdGUuZ2V0RGF0ZSgpICsgIjwvc3Bhbj4iIDogIjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IiArDQoJCQkJCQkJKCBwcmludERhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkgPyAiIHVpLXN0YXRlLWhpZ2hsaWdodCIgOiAiIiApICsNCgkJCQkJCQkoIHByaW50RGF0ZS5nZXRUaW1lKCkgPT09IGN1cnJlbnREYXRlLmdldFRpbWUoKSA/ICIgdWktc3RhdGUtYWN0aXZlIiA6ICIiICkgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5DQoJCQkJCQkJKCBvdGhlck1vbnRoID8gIiB1aS1wcmlvcml0eS1zZWNvbmRhcnkiIDogIiIgKSArIC8vIGRpc3Rpbmd1aXNoIGRhdGVzIGZyb20gb3RoZXIgbW9udGhzDQoJCQkJCQkJIicgaHJlZj0nIyc+IiArIHByaW50RGF0ZS5nZXREYXRlKCkgKyAiPC9hPiIgKSApICsgIjwvdGQ+IjsgLy8gZGlzcGxheSBzZWxlY3RhYmxlIGRhdGUNCgkJCQkJCXByaW50RGF0ZS5zZXREYXRlKCBwcmludERhdGUuZ2V0RGF0ZSgpICsgMSApOw0KCQkJCQkJcHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIHByaW50RGF0ZSApOw0KCQkJCQl9DQoJCQkJCWNhbGVuZGVyICs9IHRib2R5ICsgIjwvdHI+IjsNCgkJCQl9DQoJCQkJZHJhd01vbnRoKys7DQoJCQkJaWYgKCBkcmF3TW9udGggPiAxMSApIHsNCgkJCQkJZHJhd01vbnRoID0gMDsNCgkJCQkJZHJhd1llYXIrKzsNCgkJCQl9DQoJCQkJY2FsZW5kZXIgKz0gIjwvdGJvZHk+PC90YWJsZT4iICsgKCBpc011bHRpTW9udGggPyAiPC9kaXY+IiArDQoJCQkJCQkJKCAoIG51bU1vbnRoc1sgMCBdID4gMCAmJiBjb2wgPT09IG51bU1vbnRoc1sgMSBdIC0gMSApID8gIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj4iIDogIiIgKSA6ICIiICk7DQoJCQkJZ3JvdXAgKz0gY2FsZW5kZXI7DQoJCQl9DQoJCQlodG1sICs9IGdyb3VwOw0KCQl9DQoJCWh0bWwgKz0gYnV0dG9uUGFuZWw7DQoJCWluc3QuX2tleUV2ZW50ID0gZmFsc2U7DQoJCXJldHVybiBodG1sOw0KCX0sDQoNCgkvKiBHZW5lcmF0ZSB0aGUgbW9udGggYW5kIHllYXIgaGVhZGVyLiAqLw0KCV9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjogZnVuY3Rpb24oIGluc3QsIGRyYXdNb250aCwgZHJhd1llYXIsIG1pbkRhdGUsIG1heERhdGUsDQoJCQlzZWNvbmRhcnksIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCApIHsNCg0KCQl2YXIgaW5NaW5ZZWFyLCBpbk1heFllYXIsIG1vbnRoLCB5ZWFycywgdGhpc1llYXIsIGRldGVybWluZVllYXIsIHllYXIsIGVuZFllYXIsDQoJCQljaGFuZ2VNb250aCA9IHRoaXMuX2dldCggaW5zdCwgImNoYW5nZU1vbnRoIiApLA0KCQkJY2hhbmdlWWVhciA9IHRoaXMuX2dldCggaW5zdCwgImNoYW5nZVllYXIiICksDQoJCQlzaG93TW9udGhBZnRlclllYXIgPSB0aGlzLl9nZXQoIGluc3QsICJzaG93TW9udGhBZnRlclllYXIiICksDQoJCQlodG1sID0gIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItdGl0bGUnPiIsDQoJCQltb250aEh0bWwgPSAiIjsNCg0KCQkvLyBNb250aCBzZWxlY3Rpb24NCgkJaWYgKCBzZWNvbmRhcnkgfHwgIWNoYW5nZU1vbnRoICkgew0KCQkJbW9udGhIdG1sICs9ICI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+IiArIG1vbnRoTmFtZXNbIGRyYXdNb250aCBdICsgIjwvc3Bhbj4iOw0KCQl9IGVsc2Ugew0KCQkJaW5NaW5ZZWFyID0gKCBtaW5EYXRlICYmIG1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gZHJhd1llYXIgKTsNCgkJCWluTWF4WWVhciA9ICggbWF4RGF0ZSAmJiBtYXhEYXRlLmdldEZ1bGxZZWFyKCkgPT09IGRyYXdZZWFyICk7DQoJCQltb250aEh0bWwgKz0gIjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+IjsNCgkJCWZvciAoIG1vbnRoID0gMDsgbW9udGggPCAxMjsgbW9udGgrKyApIHsNCgkJCQlpZiAoICggIWluTWluWWVhciB8fCBtb250aCA+PSBtaW5EYXRlLmdldE1vbnRoKCkgKSAmJiAoICFpbk1heFllYXIgfHwgbW9udGggPD0gbWF4RGF0ZS5nZXRNb250aCgpICkgKSB7DQoJCQkJCW1vbnRoSHRtbCArPSAiPG9wdGlvbiB2YWx1ZT0nIiArIG1vbnRoICsgIiciICsNCgkJCQkJCSggbW9udGggPT09IGRyYXdNb250aCA/ICIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyIgOiAiIiApICsNCgkJCQkJCSI+IiArIG1vbnRoTmFtZXNTaG9ydFsgbW9udGggXSArICI8L29wdGlvbj4iOw0KCQkJCX0NCgkJCX0NCgkJCW1vbnRoSHRtbCArPSAiPC9zZWxlY3Q+IjsNCgkJfQ0KDQoJCWlmICggIXNob3dNb250aEFmdGVyWWVhciApIHsNCgkJCWh0bWwgKz0gbW9udGhIdG1sICsgKCBzZWNvbmRhcnkgfHwgISggY2hhbmdlTW9udGggJiYgY2hhbmdlWWVhciApID8gIiYjeGEwOyIgOiAiIiApOw0KCQl9DQoNCgkJLy8gWWVhciBzZWxlY3Rpb24NCgkJaWYgKCAhaW5zdC55ZWFyc2h0bWwgKSB7DQoJCQlpbnN0LnllYXJzaHRtbCA9ICIiOw0KCQkJaWYgKCBzZWNvbmRhcnkgfHwgIWNoYW5nZVllYXIgKSB7DQoJCQkJaHRtbCArPSAiPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcic+IiArIGRyYXdZZWFyICsgIjwvc3Bhbj4iOw0KCQkJfSBlbHNlIHsNCg0KCQkJCS8vIGRldGVybWluZSByYW5nZSBvZiB5ZWFycyB0byBkaXNwbGF5DQoJCQkJeWVhcnMgPSB0aGlzLl9nZXQoIGluc3QsICJ5ZWFyUmFuZ2UiICkuc3BsaXQoICI6IiApOw0KCQkJCXRoaXNZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOw0KCQkJCWRldGVybWluZVllYXIgPSBmdW5jdGlvbiggdmFsdWUgKSB7DQoJCQkJCXZhciB5ZWFyID0gKCB2YWx1ZS5tYXRjaCggL2NbK1wtXS4qLyApID8gZHJhd1llYXIgKyBwYXJzZUludCggdmFsdWUuc3Vic3RyaW5nKCAxICksIDEwICkgOg0KCQkJCQkJKCB2YWx1ZS5tYXRjaCggL1srXC1dLiovICkgPyB0aGlzWWVhciArIHBhcnNlSW50KCB2YWx1ZSwgMTAgKSA6DQoJCQkJCQlwYXJzZUludCggdmFsdWUsIDEwICkgKSApOw0KCQkJCQlyZXR1cm4gKCBpc05hTiggeWVhciApID8gdGhpc1llYXIgOiB5ZWFyICk7DQoJCQkJfTsNCgkJCQl5ZWFyID0gZGV0ZXJtaW5lWWVhciggeWVhcnNbIDAgXSApOw0KCQkJCWVuZFllYXIgPSBNYXRoLm1heCggeWVhciwgZGV0ZXJtaW5lWWVhciggeWVhcnNbIDEgXSB8fCAiIiApICk7DQoJCQkJeWVhciA9ICggbWluRGF0ZSA/IE1hdGgubWF4KCB5ZWFyLCBtaW5EYXRlLmdldEZ1bGxZZWFyKCkgKSA6IHllYXIgKTsNCgkJCQllbmRZZWFyID0gKCBtYXhEYXRlID8gTWF0aC5taW4oIGVuZFllYXIsIG1heERhdGUuZ2V0RnVsbFllYXIoKSApIDogZW5kWWVhciApOw0KCQkJCWluc3QueWVhcnNodG1sICs9ICI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz4iOw0KCQkJCWZvciAoIDsgeWVhciA8PSBlbmRZZWFyOyB5ZWFyKysgKSB7DQoJCQkJCWluc3QueWVhcnNodG1sICs9ICI8b3B0aW9uIHZhbHVlPSciICsgeWVhciArICInIiArDQoJCQkJCQkoIHllYXIgPT09IGRyYXdZZWFyID8gIiBzZWxlY3RlZD0nc2VsZWN0ZWQnIiA6ICIiICkgKw0KCQkJCQkJIj4iICsgeWVhciArICI8L29wdGlvbj4iOw0KCQkJCX0NCgkJCQlpbnN0LnllYXJzaHRtbCArPSAiPC9zZWxlY3Q+IjsNCg0KCQkJCWh0bWwgKz0gaW5zdC55ZWFyc2h0bWw7DQoJCQkJaW5zdC55ZWFyc2h0bWwgPSBudWxsOw0KCQkJfQ0KCQl9DQoNCgkJaHRtbCArPSB0aGlzLl9nZXQoIGluc3QsICJ5ZWFyU3VmZml4IiApOw0KCQlpZiAoIHNob3dNb250aEFmdGVyWWVhciApIHsNCgkJCWh0bWwgKz0gKCBzZWNvbmRhcnkgfHwgISggY2hhbmdlTW9udGggJiYgY2hhbmdlWWVhciApID8gIiYjeGEwOyIgOiAiIiApICsgbW9udGhIdG1sOw0KCQl9DQoJCWh0bWwgKz0gIjwvZGl2PiI7IC8vIENsb3NlIGRhdGVwaWNrZXJfaGVhZGVyDQoJCXJldHVybiBodG1sOw0KCX0sDQoNCgkvKiBBZGp1c3Qgb25lIG9mIHRoZSBkYXRlIHN1Yi1maWVsZHMuICovDQoJX2FkanVzdEluc3REYXRlOiBmdW5jdGlvbiggaW5zdCwgb2Zmc2V0LCBwZXJpb2QgKSB7DQoJCXZhciB5ZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgKyAoIHBlcmlvZCA9PT0gIlkiID8gb2Zmc2V0IDogMCApLA0KCQkJbW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggKyAoIHBlcmlvZCA9PT0gIk0iID8gb2Zmc2V0IDogMCApLA0KCQkJZGF5ID0gTWF0aC5taW4oIGluc3Quc2VsZWN0ZWREYXksIHRoaXMuX2dldERheXNJbk1vbnRoKCB5ZWFyLCBtb250aCApICkgKyAoIHBlcmlvZCA9PT0gIkQiID8gb2Zmc2V0IDogMCApLA0KCQkJZGF0ZSA9IHRoaXMuX3Jlc3RyaWN0TWluTWF4KCBpbnN0LCB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggbmV3IERhdGUoIHllYXIsIG1vbnRoLCBkYXkgKSApICk7DQoNCgkJaW5zdC5zZWxlY3RlZERheSA9IGRhdGUuZ2V0RGF0ZSgpOw0KCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGRhdGUuZ2V0TW9udGgoKTsNCgkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOw0KCQlpZiAoIHBlcmlvZCA9PT0gIk0iIHx8IHBlcmlvZCA9PT0gIlkiICkgew0KCQkJdGhpcy5fbm90aWZ5Q2hhbmdlKCBpbnN0ICk7DQoJCX0NCgl9LA0KDQoJLyogRW5zdXJlIGEgZGF0ZSBpcyB3aXRoaW4gYW55IG1pbi9tYXggYm91bmRzLiAqLw0KCV9yZXN0cmljdE1pbk1heDogZnVuY3Rpb24oIGluc3QsIGRhdGUgKSB7DQoJCXZhciBtaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZSggaW5zdCwgIm1pbiIgKSwNCgkJCW1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKCBpbnN0LCAibWF4IiApLA0KCQkJbmV3RGF0ZSA9ICggbWluRGF0ZSAmJiBkYXRlIDwgbWluRGF0ZSA/IG1pbkRhdGUgOiBkYXRlICk7DQoJCXJldHVybiAoIG1heERhdGUgJiYgbmV3RGF0ZSA+IG1heERhdGUgPyBtYXhEYXRlIDogbmV3RGF0ZSApOw0KCX0sDQoNCgkvKiBOb3RpZnkgY2hhbmdlIG9mIG1vbnRoL3llYXIuICovDQoJX25vdGlmeUNoYW5nZTogZnVuY3Rpb24oIGluc3QgKSB7DQoJCXZhciBvbkNoYW5nZSA9IHRoaXMuX2dldCggaW5zdCwgIm9uQ2hhbmdlTW9udGhZZWFyIiApOw0KCQlpZiAoIG9uQ2hhbmdlICkgew0KCQkJb25DaGFuZ2UuYXBwbHkoICggaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbIDAgXSA6IG51bGwgKSwNCgkJCQlbIGluc3Quc2VsZWN0ZWRZZWFyLCBpbnN0LnNlbGVjdGVkTW9udGggKyAxLCBpbnN0IF0gKTsNCgkJfQ0KCX0sDQoNCgkvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBtb250aHMgdG8gc2hvdy4gKi8NCglfZ2V0TnVtYmVyT2ZNb250aHM6IGZ1bmN0aW9uKCBpbnN0ICkgew0KCQl2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0KCBpbnN0LCAibnVtYmVyT2ZNb250aHMiICk7DQoJCXJldHVybiAoIG51bU1vbnRocyA9PSBudWxsID8gWyAxLCAxIF0gOiAoIHR5cGVvZiBudW1Nb250aHMgPT09ICJudW1iZXIiID8gWyAxLCBudW1Nb250aHMgXSA6IG51bU1vbnRocyApICk7DQoJfSwNCg0KCS8qIERldGVybWluZSB0aGUgY3VycmVudCBtYXhpbXVtIGRhdGUgLSBlbnN1cmUgbm8gdGltZSBjb21wb25lbnRzIGFyZSBzZXQuICovDQoJX2dldE1pbk1heERhdGU6IGZ1bmN0aW9uKCBpbnN0LCBtaW5NYXggKSB7DQoJCXJldHVybiB0aGlzLl9kZXRlcm1pbmVEYXRlKCBpbnN0LCB0aGlzLl9nZXQoIGluc3QsIG1pbk1heCArICJEYXRlIiApLCBudWxsICk7DQoJfSwNCg0KCS8qIEZpbmQgdGhlIG51bWJlciBvZiBkYXlzIGluIGEgZ2l2ZW4gbW9udGguICovDQoJX2dldERheXNJbk1vbnRoOiBmdW5jdGlvbiggeWVhciwgbW9udGggKSB7DQoJCXJldHVybiAzMiAtIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCBuZXcgRGF0ZSggeWVhciwgbW9udGgsIDMyICkgKS5nZXREYXRlKCk7DQoJfSwNCg0KCS8qIEZpbmQgdGhlIGRheSBvZiB0aGUgd2VlayBvZiB0aGUgZmlyc3Qgb2YgYSBtb250aC4gKi8NCglfZ2V0Rmlyc3REYXlPZk1vbnRoOiBmdW5jdGlvbiggeWVhciwgbW9udGggKSB7DQoJCXJldHVybiBuZXcgRGF0ZSggeWVhciwgbW9udGgsIDEgKS5nZXREYXkoKTsNCgl9LA0KDQoJLyogRGV0ZXJtaW5lcyBpZiB3ZSBzaG91bGQgYWxsb3cgYSAibmV4dC9wcmV2IiBtb250aCBkaXNwbGF5IGNoYW5nZS4gKi8NCglfY2FuQWRqdXN0TW9udGg6IGZ1bmN0aW9uKCBpbnN0LCBvZmZzZXQsIGN1clllYXIsIGN1ck1vbnRoICkgew0KCQl2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoIGluc3QgKSwNCgkJCWRhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCggbmV3IERhdGUoIGN1clllYXIsDQoJCQljdXJNb250aCArICggb2Zmc2V0IDwgMCA/IG9mZnNldCA6IG51bU1vbnRoc1sgMCBdICogbnVtTW9udGhzWyAxIF0gKSwgMSApICk7DQoNCgkJaWYgKCBvZmZzZXQgPCAwICkgew0KCQkJZGF0ZS5zZXREYXRlKCB0aGlzLl9nZXREYXlzSW5Nb250aCggZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKSApOw0KCQl9DQoJCXJldHVybiB0aGlzLl9pc0luUmFuZ2UoIGluc3QsIGRhdGUgKTsNCgl9LA0KDQoJLyogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIGFjY2VwdGVkIHJhbmdlPyAqLw0KCV9pc0luUmFuZ2U6IGZ1bmN0aW9uKCBpbnN0LCBkYXRlICkgew0KCQl2YXIgeWVhclNwbGl0LCBjdXJyZW50WWVhciwNCgkJCW1pbkRhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKCBpbnN0LCAibWluIiApLA0KCQkJbWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoIGluc3QsICJtYXgiICksDQoJCQltaW5ZZWFyID0gbnVsbCwNCgkJCW1heFllYXIgPSBudWxsLA0KCQkJeWVhcnMgPSB0aGlzLl9nZXQoIGluc3QsICJ5ZWFyUmFuZ2UiICk7DQoJCQlpZiAoIHllYXJzICkgew0KCQkJCXllYXJTcGxpdCA9IHllYXJzLnNwbGl0KCAiOiIgKTsNCgkJCQljdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCgkJCQltaW5ZZWFyID0gcGFyc2VJbnQoIHllYXJTcGxpdFsgMCBdLCAxMCApOw0KCQkJCW1heFllYXIgPSBwYXJzZUludCggeWVhclNwbGl0WyAxIF0sIDEwICk7DQoJCQkJaWYgKCB5ZWFyU3BsaXRbIDAgXS5tYXRjaCggL1srXC1dLiovICkgKSB7DQoJCQkJCW1pblllYXIgKz0gY3VycmVudFllYXI7DQoJCQkJfQ0KCQkJCWlmICggeWVhclNwbGl0WyAxIF0ubWF0Y2goIC9bK1wtXS4qLyApICkgew0KCQkJCQltYXhZZWFyICs9IGN1cnJlbnRZZWFyOw0KCQkJCX0NCgkJCX0NCg0KCQlyZXR1cm4gKCAoICFtaW5EYXRlIHx8IGRhdGUuZ2V0VGltZSgpID49IG1pbkRhdGUuZ2V0VGltZSgpICkgJiYNCgkJCSggIW1heERhdGUgfHwgZGF0ZS5nZXRUaW1lKCkgPD0gbWF4RGF0ZS5nZXRUaW1lKCkgKSAmJg0KCQkJKCAhbWluWWVhciB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgPj0gbWluWWVhciApICYmDQoJCQkoICFtYXhZZWFyIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSA8PSBtYXhZZWFyICkgKTsNCgl9LA0KDQoJLyogUHJvdmlkZSB0aGUgY29uZmlndXJhdGlvbiBzZXR0aW5ncyBmb3IgZm9ybWF0dGluZy9wYXJzaW5nLiAqLw0KCV9nZXRGb3JtYXRDb25maWc6IGZ1bmN0aW9uKCBpbnN0ICkgew0KCQl2YXIgc2hvcnRZZWFyQ3V0b2ZmID0gdGhpcy5fZ2V0KCBpbnN0LCAic2hvcnRZZWFyQ3V0b2ZmIiApOw0KCQlzaG9ydFllYXJDdXRvZmYgPSAoIHR5cGVvZiBzaG9ydFllYXJDdXRvZmYgIT09ICJzdHJpbmciID8gc2hvcnRZZWFyQ3V0b2ZmIDoNCgkJCW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAlIDEwMCArIHBhcnNlSW50KCBzaG9ydFllYXJDdXRvZmYsIDEwICkgKTsNCgkJcmV0dXJuIHsgc2hvcnRZZWFyQ3V0b2ZmOiBzaG9ydFllYXJDdXRvZmYsDQoJCQlkYXlOYW1lc1Nob3J0OiB0aGlzLl9nZXQoIGluc3QsICJkYXlOYW1lc1Nob3J0IiApLCBkYXlOYW1lczogdGhpcy5fZ2V0KCBpbnN0LCAiZGF5TmFtZXMiICksDQoJCQltb250aE5hbWVzU2hvcnQ6IHRoaXMuX2dldCggaW5zdCwgIm1vbnRoTmFtZXNTaG9ydCIgKSwgbW9udGhOYW1lczogdGhpcy5fZ2V0KCBpbnN0LCAibW9udGhOYW1lcyIgKSB9Ow0KCX0sDQoNCgkvKiBGb3JtYXQgdGhlIGdpdmVuIGRhdGUgZm9yIGRpc3BsYXkuICovDQoJX2Zvcm1hdERhdGU6IGZ1bmN0aW9uKCBpbnN0LCBkYXksIG1vbnRoLCB5ZWFyICkgew0KCQlpZiAoICFkYXkgKSB7DQoJCQlpbnN0LmN1cnJlbnREYXkgPSBpbnN0LnNlbGVjdGVkRGF5Ow0KCQkJaW5zdC5jdXJyZW50TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGg7DQoJCQlpbnN0LmN1cnJlbnRZZWFyID0gaW5zdC5zZWxlY3RlZFllYXI7DQoJCX0NCgkJdmFyIGRhdGUgPSAoIGRheSA/ICggdHlwZW9mIGRheSA9PT0gIm9iamVjdCIgPyBkYXkgOg0KCQkJdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoIG5ldyBEYXRlKCB5ZWFyLCBtb250aCwgZGF5ICkgKSApIDoNCgkJCXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCBuZXcgRGF0ZSggaW5zdC5jdXJyZW50WWVhciwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudERheSApICkgKTsNCgkJcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSggdGhpcy5fZ2V0KCBpbnN0LCAiZGF0ZUZvcm1hdCIgKSwgZGF0ZSwgdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKCBpbnN0ICkgKTsNCgl9DQp9ICk7DQoNCi8qDQogKiBCaW5kIGhvdmVyIGV2ZW50cyBmb3IgZGF0ZXBpY2tlciBlbGVtZW50cy4NCiAqIERvbmUgdmlhIGRlbGVnYXRlIHNvIHRoZSBiaW5kaW5nIG9ubHkgb2NjdXJzIG9uY2UgaW4gdGhlIGxpZmV0aW1lIG9mIHRoZSBwYXJlbnQgZGl2Lg0KICogR2xvYmFsIGRhdGVwaWNrZXJfaW5zdEFjdGl2ZSwgc2V0IGJ5IF91cGRhdGVEYXRlcGlja2VyIGFsbG93cyB0aGUgaGFuZGxlcnMgdG8gZmluZCB0aGVpciB3YXkgYmFjayB0byB0aGUgYWN0aXZlIHBpY2tlci4NCiAqLw0KZnVuY3Rpb24gZGF0ZXBpY2tlcl9iaW5kSG92ZXIoIGRwRGl2ICkgew0KCXZhciBzZWxlY3RvciA9ICJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEiOw0KCXJldHVybiBkcERpdi5vbiggIm1vdXNlb3V0Iiwgc2VsZWN0b3IsIGZ1bmN0aW9uKCkgew0KCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtaG92ZXIiICk7DQoJCQlpZiAoIHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoICJ1aS1kYXRlcGlja2VyLXByZXYiICkgIT09IC0xICkgew0KCQkJCSQoIHRoaXMgKS5yZW1vdmVDbGFzcyggInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIgKTsNCgkJCX0NCgkJCWlmICggdGhpcy5jbGFzc05hbWUuaW5kZXhPZiggInVpLWRhdGVwaWNrZXItbmV4dCIgKSAhPT0gLTEgKSB7DQoJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCAidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIiApOw0KCQkJfQ0KCQl9ICkNCgkJLm9uKCAibW91c2VvdmVyIiwgc2VsZWN0b3IsIGRhdGVwaWNrZXJfaGFuZGxlTW91c2VvdmVyICk7DQp9DQoNCmZ1bmN0aW9uIGRhdGVwaWNrZXJfaGFuZGxlTW91c2VvdmVyKCkgew0KCWlmICggISQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoIGRhdGVwaWNrZXJfaW5zdEFjdGl2ZS5pbmxpbmUgPyBkYXRlcGlja2VyX2luc3RBY3RpdmUuZHBEaXYucGFyZW50KClbIDAgXSA6IGRhdGVwaWNrZXJfaW5zdEFjdGl2ZS5pbnB1dFsgMCBdICkgKSB7DQoJCSQoIHRoaXMgKS5wYXJlbnRzKCAiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiICkuZmluZCggImEiICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsNCgkJJCggdGhpcyApLmFkZENsYXNzKCAidWktc3RhdGUtaG92ZXIiICk7DQoJCWlmICggdGhpcy5jbGFzc05hbWUuaW5kZXhPZiggInVpLWRhdGVwaWNrZXItcHJldiIgKSAhPT0gLTEgKSB7DQoJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiICk7DQoJCX0NCgkJaWYgKCB0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCAidWktZGF0ZXBpY2tlci1uZXh0IiApICE9PSAtMSApIHsNCgkJCSQoIHRoaXMgKS5hZGRDbGFzcyggInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIgKTsNCgkJfQ0KCX0NCn0NCg0KLyogalF1ZXJ5IGV4dGVuZCBub3cgaWdub3JlcyBudWxscyEgKi8NCmZ1bmN0aW9uIGRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKCB0YXJnZXQsIHByb3BzICkgew0KCSQuZXh0ZW5kKCB0YXJnZXQsIHByb3BzICk7DQoJZm9yICggdmFyIG5hbWUgaW4gcHJvcHMgKSB7DQoJCWlmICggcHJvcHNbIG5hbWUgXSA9PSBudWxsICkgew0KCQkJdGFyZ2V0WyBuYW1lIF0gPSBwcm9wc1sgbmFtZSBdOw0KCQl9DQoJfQ0KCXJldHVybiB0YXJnZXQ7DQp9DQoNCi8qIEludm9rZSB0aGUgZGF0ZXBpY2tlciBmdW5jdGlvbmFsaXR5Lg0KICAgQHBhcmFtICBvcHRpb25zICBzdHJpbmcgLSBhIGNvbW1hbmQsIG9wdGlvbmFsbHkgZm9sbG93ZWQgYnkgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIG9yDQoJCQkJCU9iamVjdCAtIHNldHRpbmdzIGZvciBhdHRhY2hpbmcgbmV3IGRhdGVwaWNrZXIgZnVuY3Rpb25hbGl0eQ0KICAgQHJldHVybiAgalF1ZXJ5IG9iamVjdCAqLw0KJC5mbi5kYXRlcGlja2VyID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7DQoNCgkvKiBWZXJpZnkgYW4gZW1wdHkgY29sbGVjdGlvbiB3YXNuJ3QgcGFzc2VkIC0gRml4ZXMgIzY5NzYgKi8NCglpZiAoICF0aGlzLmxlbmd0aCApIHsNCgkJcmV0dXJuIHRoaXM7DQoJfQ0KDQoJLyogSW5pdGlhbGlzZSB0aGUgZGF0ZSBwaWNrZXIuICovDQoJaWYgKCAhJC5kYXRlcGlja2VyLmluaXRpYWxpemVkICkgew0KCQkkKCBkb2N1bWVudCApLm9uKCAibW91c2Vkb3duIiwgJC5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2sgKTsNCgkJJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gdHJ1ZTsNCgl9DQoNCgkvKiBBcHBlbmQgZGF0ZXBpY2tlciBtYWluIGNvbnRhaW5lciB0byBib2R5IGlmIG5vdCBleGlzdC4gKi8NCglpZiAoICQoICIjIiArICQuZGF0ZXBpY2tlci5fbWFpbkRpdklkICkubGVuZ3RoID09PSAwICkgew0KCQkkKCAiYm9keSIgKS5hcHBlbmQoICQuZGF0ZXBpY2tlci5kcERpdiApOw0KCX0NCg0KCXZhciBvdGhlckFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICk7DQoJaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgJiYgKCBvcHRpb25zID09PSAiaXNEaXNhYmxlZCIgfHwgb3B0aW9ucyA9PT0gImdldERhdGUiIHx8IG9wdGlvbnMgPT09ICJ3aWRnZXQiICkgKSB7DQoJCXJldHVybiAkLmRhdGVwaWNrZXJbICJfIiArIG9wdGlvbnMgKyAiRGF0ZXBpY2tlciIgXS4NCgkJCWFwcGx5KCAkLmRhdGVwaWNrZXIsIFsgdGhpc1sgMCBdIF0uY29uY2F0KCBvdGhlckFyZ3MgKSApOw0KCX0NCglpZiAoIG9wdGlvbnMgPT09ICJvcHRpb24iICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGFyZ3VtZW50c1sgMSBdID09PSAic3RyaW5nIiApIHsNCgkJcmV0dXJuICQuZGF0ZXBpY2tlclsgIl8iICsgb3B0aW9ucyArICJEYXRlcGlja2VyIiBdLg0KCQkJYXBwbHkoICQuZGF0ZXBpY2tlciwgWyB0aGlzWyAwIF0gXS5jb25jYXQoIG90aGVyQXJncyApICk7DQoJfQ0KCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgew0KCQl0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgPw0KCQkJJC5kYXRlcGlja2VyWyAiXyIgKyBvcHRpb25zICsgIkRhdGVwaWNrZXIiIF0uDQoJCQkJYXBwbHkoICQuZGF0ZXBpY2tlciwgWyB0aGlzIF0uY29uY2F0KCBvdGhlckFyZ3MgKSApIDoNCgkJCSQuZGF0ZXBpY2tlci5fYXR0YWNoRGF0ZXBpY2tlciggdGhpcywgb3B0aW9ucyApOw0KCX0gKTsNCn07DQoNCiQuZGF0ZXBpY2tlciA9IG5ldyBEYXRlcGlja2VyKCk7IC8vIHNpbmdsZXRvbiBpbnN0YW5jZQ0KJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gZmFsc2U7DQokLmRhdGVwaWNrZXIudXVpZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KJC5kYXRlcGlja2VyLnZlcnNpb24gPSAiMS4xMi4xIjsNCg0KdmFyIHdpZGdldHNEYXRlcGlja2VyID0gJC5kYXRlcGlja2VyOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIERpYWxvZyAxLjEyLjENCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICovDQoNCi8vPj5sYWJlbDogRGlhbG9nDQovLz4+Z3JvdXA6IFdpZGdldHMNCi8vPj5kZXNjcmlwdGlvbjogRGlzcGxheXMgY3VzdG9taXphYmxlIGRpYWxvZyB3aW5kb3dzLg0KLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RpYWxvZy8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS9kaWFsb2cvDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY29yZS5jc3MNCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9kaWFsb2cuY3NzDQovLz4+Y3NzLnRoZW1lOiAuLi8uLi90aGVtZXMvYmFzZS90aGVtZS5jc3MNCg0KDQoNCiQud2lkZ2V0KCAidWkuZGlhbG9nIiwgew0KCXZlcnNpb246ICIxLjEyLjEiLA0KCW9wdGlvbnM6IHsNCgkJYXBwZW5kVG86ICJib2R5IiwNCgkJYXV0b09wZW46IHRydWUsDQoJCWJ1dHRvbnM6IFtdLA0KCQljbGFzc2VzOiB7DQoJCQkidWktZGlhbG9nIjogInVpLWNvcm5lci1hbGwiLA0KCQkJInVpLWRpYWxvZy10aXRsZWJhciI6ICJ1aS1jb3JuZXItYWxsIg0KCQl9LA0KCQljbG9zZU9uRXNjYXBlOiB0cnVlLA0KCQljbG9zZVRleHQ6ICJDbG9zZSIsDQoJCWRyYWdnYWJsZTogdHJ1ZSwNCgkJaGlkZTogbnVsbCwNCgkJaGVpZ2h0OiAiYXV0byIsDQoJCW1heEhlaWdodDogbnVsbCwNCgkJbWF4V2lkdGg6IG51bGwsDQoJCW1pbkhlaWdodDogMTUwLA0KCQltaW5XaWR0aDogMTUwLA0KCQltb2RhbDogZmFsc2UsDQoJCXBvc2l0aW9uOiB7DQoJCQlteTogImNlbnRlciIsDQoJCQlhdDogImNlbnRlciIsDQoJCQlvZjogd2luZG93LA0KCQkJY29sbGlzaW9uOiAiZml0IiwNCg0KCQkJLy8gRW5zdXJlIHRoZSB0aXRsZWJhciBpcyBhbHdheXMgdmlzaWJsZQ0KCQkJdXNpbmc6IGZ1bmN0aW9uKCBwb3MgKSB7DQoJCQkJdmFyIHRvcE9mZnNldCA9ICQoIHRoaXMgKS5jc3MoIHBvcyApLm9mZnNldCgpLnRvcDsNCgkJCQlpZiAoIHRvcE9mZnNldCA8IDAgKSB7DQoJCQkJCSQoIHRoaXMgKS5jc3MoICJ0b3AiLCBwb3MudG9wIC0gdG9wT2Zmc2V0ICk7DQoJCQkJfQ0KCQkJfQ0KCQl9LA0KCQlyZXNpemFibGU6IHRydWUsDQoJCXNob3c6IG51bGwsDQoJCXRpdGxlOiBudWxsLA0KCQl3aWR0aDogMzAwLA0KDQoJCS8vIENhbGxiYWNrcw0KCQliZWZvcmVDbG9zZTogbnVsbCwNCgkJY2xvc2U6IG51bGwsDQoJCWRyYWc6IG51bGwsDQoJCWRyYWdTdGFydDogbnVsbCwNCgkJZHJhZ1N0b3A6IG51bGwsDQoJCWZvY3VzOiBudWxsLA0KCQlvcGVuOiBudWxsLA0KCQlyZXNpemU6IG51bGwsDQoJCXJlc2l6ZVN0YXJ0OiBudWxsLA0KCQlyZXNpemVTdG9wOiBudWxsDQoJfSwNCg0KCXNpemVSZWxhdGVkT3B0aW9uczogew0KCQlidXR0b25zOiB0cnVlLA0KCQloZWlnaHQ6IHRydWUsDQoJCW1heEhlaWdodDogdHJ1ZSwNCgkJbWF4V2lkdGg6IHRydWUsDQoJCW1pbkhlaWdodDogdHJ1ZSwNCgkJbWluV2lkdGg6IHRydWUsDQoJCXdpZHRoOiB0cnVlDQoJfSwNCg0KCXJlc2l6YWJsZVJlbGF0ZWRPcHRpb25zOiB7DQoJCW1heEhlaWdodDogdHJ1ZSwNCgkJbWF4V2lkdGg6IHRydWUsDQoJCW1pbkhlaWdodDogdHJ1ZSwNCgkJbWluV2lkdGg6IHRydWUNCgl9LA0KDQoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7DQoJCXRoaXMub3JpZ2luYWxDc3MgPSB7DQoJCQlkaXNwbGF5OiB0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS5kaXNwbGF5LA0KCQkJd2lkdGg6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLndpZHRoLA0KCQkJbWluSGVpZ2h0OiB0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS5taW5IZWlnaHQsDQoJCQltYXhIZWlnaHQ6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLm1heEhlaWdodCwNCgkJCWhlaWdodDogdGhpcy5lbGVtZW50WyAwIF0uc3R5bGUuaGVpZ2h0DQoJCX07DQoJCXRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHsNCgkJCXBhcmVudDogdGhpcy5lbGVtZW50LnBhcmVudCgpLA0KCQkJaW5kZXg6IHRoaXMuZWxlbWVudC5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KCB0aGlzLmVsZW1lbnQgKQ0KCQl9Ow0KCQl0aGlzLm9yaWdpbmFsVGl0bGUgPSB0aGlzLmVsZW1lbnQuYXR0ciggInRpdGxlIiApOw0KCQlpZiAoIHRoaXMub3B0aW9ucy50aXRsZSA9PSBudWxsICYmIHRoaXMub3JpZ2luYWxUaXRsZSAhPSBudWxsICkgew0KCQkJdGhpcy5vcHRpb25zLnRpdGxlID0gdGhpcy5vcmlnaW5hbFRpdGxlOw0KCQl9DQoNCgkJLy8gRGlhbG9ncyBjYW4ndCBiZSBkaXNhYmxlZA0KCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsNCgkJCXRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IGZhbHNlOw0KCQl9DQoNCgkJdGhpcy5fY3JlYXRlV3JhcHBlcigpOw0KDQoJCXRoaXMuZWxlbWVudA0KCQkJLnNob3coKQ0KCQkJLnJlbW92ZUF0dHIoICJ0aXRsZSIgKQ0KCQkJLmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7DQoNCgkJdGhpcy5fYWRkQ2xhc3MoICJ1aS1kaWFsb2ctY29udGVudCIsICJ1aS13aWRnZXQtY29udGVudCIgKTsNCg0KCQl0aGlzLl9jcmVhdGVUaXRsZWJhcigpOw0KCQl0aGlzLl9jcmVhdGVCdXR0b25QYW5lKCk7DQoNCgkJaWYgKCB0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlICYmICQuZm4uZHJhZ2dhYmxlICkgew0KCQkJdGhpcy5fbWFrZURyYWdnYWJsZSgpOw0KCQl9DQoJCWlmICggdGhpcy5vcHRpb25zLnJlc2l6YWJsZSAmJiAkLmZuLnJlc2l6YWJsZSApIHsNCgkJCXRoaXMuX21ha2VSZXNpemFibGUoKTsNCgkJfQ0KDQoJCXRoaXMuX2lzT3BlbiA9IGZhbHNlOw0KDQoJCXRoaXMuX3RyYWNrRm9jdXMoKTsNCgl9LA0KDQoJX2luaXQ6IGZ1bmN0aW9uKCkgew0KCQlpZiAoIHRoaXMub3B0aW9ucy5hdXRvT3BlbiApIHsNCgkJCXRoaXMub3BlbigpOw0KCQl9DQoJfSwNCg0KCV9hcHBlbmRUbzogZnVuY3Rpb24oKSB7DQoJCXZhciBlbGVtZW50ID0gdGhpcy5vcHRpb25zLmFwcGVuZFRvOw0KCQlpZiAoIGVsZW1lbnQgJiYgKCBlbGVtZW50LmpxdWVyeSB8fCBlbGVtZW50Lm5vZGVUeXBlICkgKSB7DQoJCQlyZXR1cm4gJCggZWxlbWVudCApOw0KCQl9DQoJCXJldHVybiB0aGlzLmRvY3VtZW50LmZpbmQoIGVsZW1lbnQgfHwgImJvZHkiICkuZXEoIDAgKTsNCgl9LA0KDQoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KCQl2YXIgbmV4dCwNCgkJCW9yaWdpbmFsUG9zaXRpb24gPSB0aGlzLm9yaWdpbmFsUG9zaXRpb247DQoNCgkJdGhpcy5fdW50cmFja0luc3RhbmNlKCk7DQoJCXRoaXMuX2Rlc3Ryb3lPdmVybGF5KCk7DQoNCgkJdGhpcy5lbGVtZW50DQoJCQkucmVtb3ZlVW5pcXVlSWQoKQ0KCQkJLmNzcyggdGhpcy5vcmlnaW5hbENzcyApDQoNCgkJCS8vIFdpdGhvdXQgZGV0YWNoaW5nIGZpcnN0LCB0aGUgZm9sbG93aW5nIGJlY29tZXMgcmVhbGx5IHNsb3cNCgkJCS5kZXRhY2goKTsNCg0KCQl0aGlzLnVpRGlhbG9nLnJlbW92ZSgpOw0KDQoJCWlmICggdGhpcy5vcmlnaW5hbFRpdGxlICkgew0KCQkJdGhpcy5lbGVtZW50LmF0dHIoICJ0aXRsZSIsIHRoaXMub3JpZ2luYWxUaXRsZSApOw0KCQl9DQoNCgkJbmV4dCA9IG9yaWdpbmFsUG9zaXRpb24ucGFyZW50LmNoaWxkcmVuKCkuZXEoIG9yaWdpbmFsUG9zaXRpb24uaW5kZXggKTsNCg0KCQkvLyBEb24ndCB0cnkgdG8gcGxhY2UgdGhlIGRpYWxvZyBuZXh0IHRvIGl0c2VsZiAoIzg2MTMpDQoJCWlmICggbmV4dC5sZW5ndGggJiYgbmV4dFsgMCBdICE9PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsNCgkJCW5leHQuYmVmb3JlKCB0aGlzLmVsZW1lbnQgKTsNCgkJfSBlbHNlIHsNCgkJCW9yaWdpbmFsUG9zaXRpb24ucGFyZW50LmFwcGVuZCggdGhpcy5lbGVtZW50ICk7DQoJCX0NCgl9LA0KDQoJd2lkZ2V0OiBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMudWlEaWFsb2c7DQoJfSwNCg0KCWRpc2FibGU6ICQubm9vcCwNCgllbmFibGU6ICQubm9vcCwNCg0KCWNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQlpZiAoICF0aGlzLl9pc09wZW4gfHwgdGhpcy5fdHJpZ2dlciggImJlZm9yZUNsb3NlIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLl9pc09wZW4gPSBmYWxzZTsNCgkJdGhpcy5fZm9jdXNlZEVsZW1lbnQgPSBudWxsOw0KCQl0aGlzLl9kZXN0cm95T3ZlcmxheSgpOw0KCQl0aGlzLl91bnRyYWNrSW5zdGFuY2UoKTsNCg0KCQlpZiAoICF0aGlzLm9wZW5lci5maWx0ZXIoICI6Zm9jdXNhYmxlIiApLnRyaWdnZXIoICJmb2N1cyIgKS5sZW5ndGggKSB7DQoNCgkJCS8vIEhpZGluZyBhIGZvY3VzZWQgZWxlbWVudCBkb2Vzbid0IHRyaWdnZXIgYmx1ciBpbiBXZWJLaXQNCgkJCS8vIHNvIGluIGNhc2Ugd2UgaGF2ZSBub3RoaW5nIHRvIGZvY3VzIG9uLCBleHBsaWNpdGx5IGJsdXIgdGhlIGFjdGl2ZSBlbGVtZW50DQoJCQkvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDcxODINCgkJCSQudWkuc2FmZUJsdXIoICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQoIHRoaXMuZG9jdW1lbnRbIDAgXSApICk7DQoJCX0NCg0KCQl0aGlzLl9oaWRlKCB0aGlzLnVpRGlhbG9nLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7DQoJCQl0aGF0Ll90cmlnZ2VyKCAiY2xvc2UiLCBldmVudCApOw0KCQl9ICk7DQoJfSwNCg0KCWlzT3BlbjogZnVuY3Rpb24oKSB7DQoJCXJldHVybiB0aGlzLl9pc09wZW47DQoJfSwNCg0KCW1vdmVUb1RvcDogZnVuY3Rpb24oKSB7DQoJCXRoaXMuX21vdmVUb1RvcCgpOw0KCX0sDQoNCglfbW92ZVRvVG9wOiBmdW5jdGlvbiggZXZlbnQsIHNpbGVudCApIHsNCgkJdmFyIG1vdmVkID0gZmFsc2UsDQoJCQl6SW5kaWNlcyA9IHRoaXMudWlEaWFsb2cuc2libGluZ3MoICIudWktZnJvbnQ6dmlzaWJsZSIgKS5tYXAoIGZ1bmN0aW9uKCkgew0KCQkJCXJldHVybiArJCggdGhpcyApLmNzcyggInotaW5kZXgiICk7DQoJCQl9ICkuZ2V0KCksDQoJCQl6SW5kZXhNYXggPSBNYXRoLm1heC5hcHBseSggbnVsbCwgekluZGljZXMgKTsNCg0KCQlpZiAoIHpJbmRleE1heCA+PSArdGhpcy51aURpYWxvZy5jc3MoICJ6LWluZGV4IiApICkgew0KCQkJdGhpcy51aURpYWxvZy5jc3MoICJ6LWluZGV4IiwgekluZGV4TWF4ICsgMSApOw0KCQkJbW92ZWQgPSB0cnVlOw0KCQl9DQoNCgkJaWYgKCBtb3ZlZCAmJiAhc2lsZW50ICkgew0KCQkJdGhpcy5fdHJpZ2dlciggImZvY3VzIiwgZXZlbnQgKTsNCgkJfQ0KCQlyZXR1cm4gbW92ZWQ7DQoJfSwNCg0KCW9wZW46IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9IHRoaXM7DQoJCWlmICggdGhpcy5faXNPcGVuICkgew0KCQkJaWYgKCB0aGlzLl9tb3ZlVG9Ub3AoKSApIHsNCgkJCQl0aGlzLl9mb2N1c1RhYmJhYmxlKCk7DQoJCQl9DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLl9pc09wZW4gPSB0cnVlOw0KCQl0aGlzLm9wZW5lciA9ICQoICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQoIHRoaXMuZG9jdW1lbnRbIDAgXSApICk7DQoNCgkJdGhpcy5fc2l6ZSgpOw0KCQl0aGlzLl9wb3NpdGlvbigpOw0KCQl0aGlzLl9jcmVhdGVPdmVybGF5KCk7DQoJCXRoaXMuX21vdmVUb1RvcCggbnVsbCwgdHJ1ZSApOw0KDQoJCS8vIEVuc3VyZSB0aGUgb3ZlcmxheSBpcyBtb3ZlZCB0byB0aGUgdG9wIHdpdGggdGhlIGRpYWxvZywgYnV0IG9ubHkgd2hlbg0KCQkvLyBvcGVuaW5nLiBUaGUgb3ZlcmxheSBzaG91bGRuJ3QgbW92ZSBhZnRlciB0aGUgZGlhbG9nIGlzIG9wZW4gc28gdGhhdA0KCQkvLyBtb2RlbGVzcyBkaWFsb2dzIG9wZW5lZCBhZnRlciB0aGUgbW9kYWwgZGlhbG9nIHN0YWNrIHByb3Blcmx5Lg0KCQlpZiAoIHRoaXMub3ZlcmxheSApIHsNCgkJCXRoaXMub3ZlcmxheS5jc3MoICJ6LWluZGV4IiwgdGhpcy51aURpYWxvZy5jc3MoICJ6LWluZGV4IiApIC0gMSApOw0KCQl9DQoNCgkJdGhpcy5fc2hvdyggdGhpcy51aURpYWxvZywgdGhpcy5vcHRpb25zLnNob3csIGZ1bmN0aW9uKCkgew0KCQkJdGhhdC5fZm9jdXNUYWJiYWJsZSgpOw0KCQkJdGhhdC5fdHJpZ2dlciggImZvY3VzIiApOw0KCQl9ICk7DQoNCgkJLy8gVHJhY2sgdGhlIGRpYWxvZyBpbW1lZGlhdGVseSB1cG9uIG9wZW5lbmluZyBpbiBjYXNlIGEgZm9jdXMgZXZlbnQNCgkJLy8gc29tZWhvdyBvY2N1cnMgb3V0c2lkZSBvZiB0aGUgZGlhbG9nIGJlZm9yZSBhbiBlbGVtZW50IGluc2lkZSB0aGUNCgkJLy8gZGlhbG9nIGlzIGZvY3VzZWQgKCMxMDE1MikNCgkJdGhpcy5fbWFrZUZvY3VzVGFyZ2V0KCk7DQoNCgkJdGhpcy5fdHJpZ2dlciggIm9wZW4iICk7DQoJfSwNCg0KCV9mb2N1c1RhYmJhYmxlOiBmdW5jdGlvbigpIHsNCg0KCQkvLyBTZXQgZm9jdXMgdG8gdGhlIGZpcnN0IG1hdGNoOg0KCQkvLyAxLiBBbiBlbGVtZW50IHRoYXQgd2FzIGZvY3VzZWQgcHJldmlvdXNseQ0KCQkvLyAyLiBGaXJzdCBlbGVtZW50IGluc2lkZSB0aGUgZGlhbG9nIG1hdGNoaW5nIFthdXRvZm9jdXNdDQoJCS8vIDMuIFRhYmJhYmxlIGVsZW1lbnQgaW5zaWRlIHRoZSBjb250ZW50IGVsZW1lbnQNCgkJLy8gNC4gVGFiYmFibGUgZWxlbWVudCBpbnNpZGUgdGhlIGJ1dHRvbnBhbmUNCgkJLy8gNS4gVGhlIGNsb3NlIGJ1dHRvbg0KCQkvLyA2LiBUaGUgZGlhbG9nIGl0c2VsZg0KCQl2YXIgaGFzRm9jdXMgPSB0aGlzLl9mb2N1c2VkRWxlbWVudDsNCgkJaWYgKCAhaGFzRm9jdXMgKSB7DQoJCQloYXNGb2N1cyA9IHRoaXMuZWxlbWVudC5maW5kKCAiW2F1dG9mb2N1c10iICk7DQoJCX0NCgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgew0KCQkJaGFzRm9jdXMgPSB0aGlzLmVsZW1lbnQuZmluZCggIjp0YWJiYWJsZSIgKTsNCgkJfQ0KCQlpZiAoICFoYXNGb2N1cy5sZW5ndGggKSB7DQoJCQloYXNGb2N1cyA9IHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmZpbmQoICI6dGFiYmFibGUiICk7DQoJCX0NCgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgew0KCQkJaGFzRm9jdXMgPSB0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5maWx0ZXIoICI6dGFiYmFibGUiICk7DQoJCX0NCgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgew0KCQkJaGFzRm9jdXMgPSB0aGlzLnVpRGlhbG9nOw0KCQl9DQoJCWhhc0ZvY3VzLmVxKCAwICkudHJpZ2dlciggImZvY3VzIiApOw0KCX0sDQoNCglfa2VlcEZvY3VzOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCWZ1bmN0aW9uIGNoZWNrRm9jdXMoKSB7DQoJCQl2YXIgYWN0aXZlRWxlbWVudCA9ICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQoIHRoaXMuZG9jdW1lbnRbIDAgXSApLA0KCQkJCWlzQWN0aXZlID0gdGhpcy51aURpYWxvZ1sgMCBdID09PSBhY3RpdmVFbGVtZW50IHx8DQoJCQkJCSQuY29udGFpbnMoIHRoaXMudWlEaWFsb2dbIDAgXSwgYWN0aXZlRWxlbWVudCApOw0KCQkJaWYgKCAhaXNBY3RpdmUgKSB7DQoJCQkJdGhpcy5fZm9jdXNUYWJiYWJsZSgpOw0KCQkJfQ0KCQl9DQoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQoJCWNoZWNrRm9jdXMuY2FsbCggdGhpcyApOw0KDQoJCS8vIHN1cHBvcnQ6IElFDQoJCS8vIElFIDw9IDggZG9lc24ndCBwcmV2ZW50IG1vdmluZyBmb2N1cyBldmVuIHdpdGggZXZlbnQucHJldmVudERlZmF1bHQoKQ0KCQkvLyBzbyB3ZSBjaGVjayBhZ2FpbiBsYXRlcg0KCQl0aGlzLl9kZWxheSggY2hlY2tGb2N1cyApOw0KCX0sDQoNCglfY3JlYXRlV3JhcHBlcjogZnVuY3Rpb24oKSB7DQoJCXRoaXMudWlEaWFsb2cgPSAkKCAiPGRpdj4iICkNCgkJCS5oaWRlKCkNCgkJCS5hdHRyKCB7DQoNCgkJCQkvLyBTZXR0aW5nIHRhYkluZGV4IG1ha2VzIHRoZSBkaXYgZm9jdXNhYmxlDQoJCQkJdGFiSW5kZXg6IC0xLA0KCQkJCXJvbGU6ICJkaWFsb2ciDQoJCQl9ICkNCgkJCS5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApOw0KDQoJCXRoaXMuX2FkZENsYXNzKCB0aGlzLnVpRGlhbG9nLCAidWktZGlhbG9nIiwgInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1mcm9udCIgKTsNCgkJdGhpcy5fb24oIHRoaXMudWlEaWFsb2csIHsNCgkJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQlpZiAoIHRoaXMub3B0aW9ucy5jbG9zZU9uRXNjYXBlICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSAmJiBldmVudC5rZXlDb2RlICYmDQoJCQkJCQlldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuRVNDQVBFICkgew0KCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCQl0aGlzLmNsb3NlKCBldmVudCApOw0KCQkJCQlyZXR1cm47DQoJCQkJfQ0KDQoJCQkJLy8gUHJldmVudCB0YWJiaW5nIG91dCBvZiBkaWFsb2dzDQoJCQkJaWYgKCBldmVudC5rZXlDb2RlICE9PSAkLnVpLmtleUNvZGUuVEFCIHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgew0KCQkJCQlyZXR1cm47DQoJCQkJfQ0KCQkJCXZhciB0YWJiYWJsZXMgPSB0aGlzLnVpRGlhbG9nLmZpbmQoICI6dGFiYmFibGUiICksDQoJCQkJCWZpcnN0ID0gdGFiYmFibGVzLmZpbHRlciggIjpmaXJzdCIgKSwNCgkJCQkJbGFzdCA9IHRhYmJhYmxlcy5maWx0ZXIoICI6bGFzdCIgKTsNCg0KCQkJCWlmICggKCBldmVudC50YXJnZXQgPT09IGxhc3RbIDAgXSB8fCBldmVudC50YXJnZXQgPT09IHRoaXMudWlEaWFsb2dbIDAgXSApICYmDQoJCQkJCQkhZXZlbnQuc2hpZnRLZXkgKSB7DQoJCQkJCXRoaXMuX2RlbGF5KCBmdW5jdGlvbigpIHsNCgkJCQkJCWZpcnN0LnRyaWdnZXIoICJmb2N1cyIgKTsNCgkJCQkJfSApOw0KCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCX0gZWxzZSBpZiAoICggZXZlbnQudGFyZ2V0ID09PSBmaXJzdFsgMCBdIHx8DQoJCQkJCQlldmVudC50YXJnZXQgPT09IHRoaXMudWlEaWFsb2dbIDAgXSApICYmIGV2ZW50LnNoaWZ0S2V5ICkgew0KCQkJCQl0aGlzLl9kZWxheSggZnVuY3Rpb24oKSB7DQoJCQkJCQlsYXN0LnRyaWdnZXIoICJmb2N1cyIgKTsNCgkJCQkJfSApOw0KCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCX0NCgkJCX0sDQoJCQltb3VzZWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQlpZiAoIHRoaXMuX21vdmVUb1RvcCggZXZlbnQgKSApIHsNCgkJCQkJdGhpcy5fZm9jdXNUYWJiYWJsZSgpOw0KCQkJCX0NCgkJCX0NCgkJfSApOw0KDQoJCS8vIFdlIGFzc3VtZSB0aGF0IGFueSBleGlzdGluZyBhcmlhLWRlc2NyaWJlZGJ5IGF0dHJpYnV0ZSBtZWFucw0KCQkvLyB0aGF0IHRoZSBkaWFsb2cgY29udGVudCBpcyBtYXJrZWQgdXAgcHJvcGVybHkNCgkJLy8gb3RoZXJ3aXNlIHdlIGJydXRlIGZvcmNlIHRoZSBjb250ZW50IGFzIHRoZSBkZXNjcmlwdGlvbg0KCQlpZiAoICF0aGlzLmVsZW1lbnQuZmluZCggIlthcmlhLWRlc2NyaWJlZGJ5XSIgKS5sZW5ndGggKSB7DQoJCQl0aGlzLnVpRGlhbG9nLmF0dHIoIHsNCgkJCQkiYXJpYS1kZXNjcmliZWRieSI6IHRoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoICJpZCIgKQ0KCQkJfSApOw0KCQl9DQoJfSwNCg0KCV9jcmVhdGVUaXRsZWJhcjogZnVuY3Rpb24oKSB7DQoJCXZhciB1aURpYWxvZ1RpdGxlOw0KDQoJCXRoaXMudWlEaWFsb2dUaXRsZWJhciA9ICQoICI8ZGl2PiIgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMudWlEaWFsb2dUaXRsZWJhciwNCgkJCSJ1aS1kaWFsb2ctdGl0bGViYXIiLCAidWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgiICk7DQoJCXRoaXMuX29uKCB0aGlzLnVpRGlhbG9nVGl0bGViYXIsIHsNCgkJCW1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgew0KDQoJCQkJLy8gRG9uJ3QgcHJldmVudCBjbGljayBvbiBjbG9zZSBidXR0b24gKCM4ODM4KQ0KCQkJCS8vIEZvY3VzaW5nIGEgZGlhbG9nIHRoYXQgaXMgcGFydGlhbGx5IHNjcm9sbGVkIG91dCBvZiB2aWV3DQoJCQkJLy8gY2F1c2VzIHRoZSBicm93c2VyIHRvIHNjcm9sbCBpdCBpbnRvIHZpZXcsIHByZXZlbnRpbmcgdGhlIGNsaWNrIGV2ZW50DQoJCQkJaWYgKCAhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggIi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UiICkgKSB7DQoNCgkJCQkJLy8gRGlhbG9nIGlzbid0IGdldHRpbmcgZm9jdXMgd2hlbiBkcmFnZ2luZyAoIzgwNjMpDQoJCQkJCXRoaXMudWlEaWFsb2cudHJpZ2dlciggImZvY3VzIiApOw0KCQkJCX0NCgkJCX0NCgkJfSApOw0KDQoJCS8vIFN1cHBvcnQ6IElFDQoJCS8vIFVzZSB0eXBlPSJidXR0b24iIHRvIHByZXZlbnQgZW50ZXIga2V5cHJlc3NlcyBpbiB0ZXh0Ym94ZXMgZnJvbSBjbG9zaW5nIHRoZQ0KCQkvLyBkaWFsb2cgaW4gSUUgKCM5MzEyKQ0KCQl0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZSA9ICQoICI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IiApDQoJCQkuYnV0dG9uKCB7DQoJCQkJbGFiZWw6ICQoICI8YT4iICkudGV4dCggdGhpcy5vcHRpb25zLmNsb3NlVGV4dCApLmh0bWwoKSwNCgkJCQlpY29uOiAidWktaWNvbi1jbG9zZXRoaWNrIiwNCgkJCQlzaG93TGFiZWw6IGZhbHNlDQoJCQl9ICkNCgkJCS5hcHBlbmRUbyggdGhpcy51aURpYWxvZ1RpdGxlYmFyICk7DQoNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLCAidWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIiApOw0KCQl0aGlzLl9vbiggdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UsIHsNCgkJCWNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkJCQl0aGlzLmNsb3NlKCBldmVudCApOw0KCQkJfQ0KCQl9ICk7DQoNCgkJdWlEaWFsb2dUaXRsZSA9ICQoICI8c3Bhbj4iICkudW5pcXVlSWQoKS5wcmVwZW5kVG8oIHRoaXMudWlEaWFsb2dUaXRsZWJhciApOw0KCQl0aGlzLl9hZGRDbGFzcyggdWlEaWFsb2dUaXRsZSwgInVpLWRpYWxvZy10aXRsZSIgKTsNCgkJdGhpcy5fdGl0bGUoIHVpRGlhbG9nVGl0bGUgKTsNCg0KCQl0aGlzLnVpRGlhbG9nVGl0bGViYXIucHJlcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7DQoNCgkJdGhpcy51aURpYWxvZy5hdHRyKCB7DQoJCQkiYXJpYS1sYWJlbGxlZGJ5IjogdWlEaWFsb2dUaXRsZS5hdHRyKCAiaWQiICkNCgkJfSApOw0KCX0sDQoNCglfdGl0bGU6IGZ1bmN0aW9uKCB0aXRsZSApIHsNCgkJaWYgKCB0aGlzLm9wdGlvbnMudGl0bGUgKSB7DQoJCQl0aXRsZS50ZXh0KCB0aGlzLm9wdGlvbnMudGl0bGUgKTsNCgkJfSBlbHNlIHsNCgkJCXRpdGxlLmh0bWwoICImIzE2MDsiICk7DQoJCX0NCgl9LA0KDQoJX2NyZWF0ZUJ1dHRvblBhbmU6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSA9ICQoICI8ZGl2PiIgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLCAidWktZGlhbG9nLWJ1dHRvbnBhbmUiLA0KCQkJInVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCIgKTsNCg0KCQl0aGlzLnVpQnV0dG9uU2V0ID0gJCggIjxkaXY+IiApDQoJCQkuYXBwZW5kVG8oIHRoaXMudWlEaWFsb2dCdXR0b25QYW5lICk7DQoJCXRoaXMuX2FkZENsYXNzKCB0aGlzLnVpQnV0dG9uU2V0LCAidWktZGlhbG9nLWJ1dHRvbnNldCIgKTsNCg0KCQl0aGlzLl9jcmVhdGVCdXR0b25zKCk7DQoJfSwNCg0KCV9jcmVhdGVCdXR0b25zOiBmdW5jdGlvbigpIHsNCgkJdmFyIHRoYXQgPSB0aGlzLA0KCQkJYnV0dG9ucyA9IHRoaXMub3B0aW9ucy5idXR0b25zOw0KDQoJCS8vIElmIHdlIGFscmVhZHkgaGF2ZSBhIGJ1dHRvbiBwYW5lLCByZW1vdmUgaXQNCgkJdGhpcy51aURpYWxvZ0J1dHRvblBhbmUucmVtb3ZlKCk7DQoJCXRoaXMudWlCdXR0b25TZXQuZW1wdHkoKTsNCg0KCQlpZiAoICQuaXNFbXB0eU9iamVjdCggYnV0dG9ucyApIHx8ICggJC5pc0FycmF5KCBidXR0b25zICkgJiYgIWJ1dHRvbnMubGVuZ3RoICkgKSB7DQoJCQl0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy51aURpYWxvZywgInVpLWRpYWxvZy1idXR0b25zIiApOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJJC5lYWNoKCBidXR0b25zLCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7DQoJCQl2YXIgY2xpY2ssIGJ1dHRvbk9wdGlvbnM7DQoJCQlwcm9wcyA9ICQuaXNGdW5jdGlvbiggcHJvcHMgKSA/DQoJCQkJeyBjbGljazogcHJvcHMsIHRleHQ6IG5hbWUgfSA6DQoJCQkJcHJvcHM7DQoNCgkJCS8vIERlZmF1bHQgdG8gYSBub24tc3VibWl0dGluZyBidXR0b24NCgkJCXByb3BzID0gJC5leHRlbmQoIHsgdHlwZTogImJ1dHRvbiIgfSwgcHJvcHMgKTsNCg0KCQkJLy8gQ2hhbmdlIHRoZSBjb250ZXh0IGZvciB0aGUgY2xpY2sgY2FsbGJhY2sgdG8gYmUgdGhlIG1haW4gZWxlbWVudA0KCQkJY2xpY2sgPSBwcm9wcy5jbGljazsNCgkJCWJ1dHRvbk9wdGlvbnMgPSB7DQoJCQkJaWNvbjogcHJvcHMuaWNvbiwNCgkJCQlpY29uUG9zaXRpb246IHByb3BzLmljb25Qb3NpdGlvbiwNCgkJCQlzaG93TGFiZWw6IHByb3BzLnNob3dMYWJlbCwNCg0KCQkJCS8vIERlcHJlY2F0ZWQgb3B0aW9ucw0KCQkJCWljb25zOiBwcm9wcy5pY29ucywNCgkJCQl0ZXh0OiBwcm9wcy50ZXh0DQoJCQl9Ow0KDQoJCQlkZWxldGUgcHJvcHMuY2xpY2s7DQoJCQlkZWxldGUgcHJvcHMuaWNvbjsNCgkJCWRlbGV0ZSBwcm9wcy5pY29uUG9zaXRpb247DQoJCQlkZWxldGUgcHJvcHMuc2hvd0xhYmVsOw0KDQoJCQkvLyBEZXByZWNhdGVkIG9wdGlvbnMNCgkJCWRlbGV0ZSBwcm9wcy5pY29uczsNCgkJCWlmICggdHlwZW9mIHByb3BzLnRleHQgPT09ICJib29sZWFuIiApIHsNCgkJCQlkZWxldGUgcHJvcHMudGV4dDsNCgkJCX0NCg0KCQkJJCggIjxidXR0b24+PC9idXR0b24+IiwgcHJvcHMgKQ0KCQkJCS5idXR0b24oIGJ1dHRvbk9wdGlvbnMgKQ0KCQkJCS5hcHBlbmRUbyggdGhhdC51aUJ1dHRvblNldCApDQoJCQkJLm9uKCAiY2xpY2siLCBmdW5jdGlvbigpIHsNCgkJCQkJY2xpY2suYXBwbHkoIHRoYXQuZWxlbWVudFsgMCBdLCBhcmd1bWVudHMgKTsNCgkJCQl9ICk7DQoJCX0gKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMudWlEaWFsb2csICJ1aS1kaWFsb2ctYnV0dG9ucyIgKTsNCgkJdGhpcy51aURpYWxvZ0J1dHRvblBhbmUuYXBwZW5kVG8oIHRoaXMudWlEaWFsb2cgKTsNCgl9LA0KDQoJX21ha2VEcmFnZ2FibGU6IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9IHRoaXMsDQoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOw0KDQoJCWZ1bmN0aW9uIGZpbHRlcmVkVWkoIHVpICkgew0KCQkJcmV0dXJuIHsNCgkJCQlwb3NpdGlvbjogdWkucG9zaXRpb24sDQoJCQkJb2Zmc2V0OiB1aS5vZmZzZXQNCgkJCX07DQoJCX0NCg0KCQl0aGlzLnVpRGlhbG9nLmRyYWdnYWJsZSggew0KCQkJY2FuY2VsOiAiLnVpLWRpYWxvZy1jb250ZW50LCAudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIiwNCgkJCWhhbmRsZTogIi51aS1kaWFsb2ctdGl0bGViYXIiLA0KCQkJY29udGFpbm1lbnQ6ICJkb2N1bWVudCIsDQoJCQlzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsNCgkJCQl0aGF0Ll9hZGRDbGFzcyggJCggdGhpcyApLCAidWktZGlhbG9nLWRyYWdnaW5nIiApOw0KCQkJCXRoYXQuX2Jsb2NrRnJhbWVzKCk7DQoJCQkJdGhhdC5fdHJpZ2dlciggImRyYWdTdGFydCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7DQoJCQl9LA0KCQkJZHJhZzogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsNCgkJCQl0aGF0Ll90cmlnZ2VyKCAiZHJhZyIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7DQoJCQl9LA0KCQkJc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsNCgkJCQl2YXIgbGVmdCA9IHVpLm9mZnNldC5sZWZ0IC0gdGhhdC5kb2N1bWVudC5zY3JvbGxMZWZ0KCksDQoJCQkJCXRvcCA9IHVpLm9mZnNldC50b3AgLSB0aGF0LmRvY3VtZW50LnNjcm9sbFRvcCgpOw0KDQoJCQkJb3B0aW9ucy5wb3NpdGlvbiA9IHsNCgkJCQkJbXk6ICJsZWZ0IHRvcCIsDQoJCQkJCWF0OiAibGVmdCIgKyAoIGxlZnQgPj0gMCA/ICIrIiA6ICIiICkgKyBsZWZ0ICsgIiAiICsNCgkJCQkJCSJ0b3AiICsgKCB0b3AgPj0gMCA/ICIrIiA6ICIiICkgKyB0b3AsDQoJCQkJCW9mOiB0aGF0LndpbmRvdw0KCQkJCX07DQoJCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoICQoIHRoaXMgKSwgInVpLWRpYWxvZy1kcmFnZ2luZyIgKTsNCgkJCQl0aGF0Ll91bmJsb2NrRnJhbWVzKCk7DQoJCQkJdGhhdC5fdHJpZ2dlciggImRyYWdTdG9wIiwgZXZlbnQsIGZpbHRlcmVkVWkoIHVpICkgKTsNCgkJCX0NCgkJfSApOw0KCX0sDQoNCglfbWFrZVJlc2l6YWJsZTogZnVuY3Rpb24oKSB7DQoJCXZhciB0aGF0ID0gdGhpcywNCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsDQoJCQloYW5kbGVzID0gb3B0aW9ucy5yZXNpemFibGUsDQoNCgkJCS8vIC51aS1yZXNpemFibGUgaGFzIHBvc2l0aW9uOiByZWxhdGl2ZSBkZWZpbmVkIGluIHRoZSBzdHlsZXNoZWV0DQoJCQkvLyBidXQgZGlhbG9ncyBoYXZlIHRvIHVzZSBhYnNvbHV0ZSBvciBmaXhlZCBwb3NpdGlvbmluZw0KCQkJcG9zaXRpb24gPSB0aGlzLnVpRGlhbG9nLmNzcyggInBvc2l0aW9uIiApLA0KCQkJcmVzaXplSGFuZGxlcyA9IHR5cGVvZiBoYW5kbGVzID09PSAic3RyaW5nIiA/DQoJCQkJaGFuZGxlcyA6DQoJCQkJIm4sZSxzLHcsc2Usc3csbmUsbnciOw0KDQoJCWZ1bmN0aW9uIGZpbHRlcmVkVWkoIHVpICkgew0KCQkJcmV0dXJuIHsNCgkJCQlvcmlnaW5hbFBvc2l0aW9uOiB1aS5vcmlnaW5hbFBvc2l0aW9uLA0KCQkJCW9yaWdpbmFsU2l6ZTogdWkub3JpZ2luYWxTaXplLA0KCQkJCXBvc2l0aW9uOiB1aS5wb3NpdGlvbiwNCgkJCQlzaXplOiB1aS5zaXplDQoJCQl9Ow0KCQl9DQoNCgkJdGhpcy51aURpYWxvZy5yZXNpemFibGUoIHsNCgkJCWNhbmNlbDogIi51aS1kaWFsb2ctY29udGVudCIsDQoJCQljb250YWlubWVudDogImRvY3VtZW50IiwNCgkJCWFsc29SZXNpemU6IHRoaXMuZWxlbWVudCwNCgkJCW1heFdpZHRoOiBvcHRpb25zLm1heFdpZHRoLA0KCQkJbWF4SGVpZ2h0OiBvcHRpb25zLm1heEhlaWdodCwNCgkJCW1pbldpZHRoOiBvcHRpb25zLm1pbldpZHRoLA0KCQkJbWluSGVpZ2h0OiB0aGlzLl9taW5IZWlnaHQoKSwNCgkJCWhhbmRsZXM6IHJlc2l6ZUhhbmRsZXMsDQoJCQlzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsNCgkJCQl0aGF0Ll9hZGRDbGFzcyggJCggdGhpcyApLCAidWktZGlhbG9nLXJlc2l6aW5nIiApOw0KCQkJCXRoYXQuX2Jsb2NrRnJhbWVzKCk7DQoJCQkJdGhhdC5fdHJpZ2dlciggInJlc2l6ZVN0YXJ0IiwgZXZlbnQsIGZpbHRlcmVkVWkoIHVpICkgKTsNCgkJCX0sDQoJCQlyZXNpemU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7DQoJCQkJdGhhdC5fdHJpZ2dlciggInJlc2l6ZSIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7DQoJCQl9LA0KCQkJc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsNCgkJCQl2YXIgb2Zmc2V0ID0gdGhhdC51aURpYWxvZy5vZmZzZXQoKSwNCgkJCQkJbGVmdCA9IG9mZnNldC5sZWZ0IC0gdGhhdC5kb2N1bWVudC5zY3JvbGxMZWZ0KCksDQoJCQkJCXRvcCA9IG9mZnNldC50b3AgLSB0aGF0LmRvY3VtZW50LnNjcm9sbFRvcCgpOw0KDQoJCQkJb3B0aW9ucy5oZWlnaHQgPSB0aGF0LnVpRGlhbG9nLmhlaWdodCgpOw0KCQkJCW9wdGlvbnMud2lkdGggPSB0aGF0LnVpRGlhbG9nLndpZHRoKCk7DQoJCQkJb3B0aW9ucy5wb3NpdGlvbiA9IHsNCgkJCQkJbXk6ICJsZWZ0IHRvcCIsDQoJCQkJCWF0OiAibGVmdCIgKyAoIGxlZnQgPj0gMCA/ICIrIiA6ICIiICkgKyBsZWZ0ICsgIiAiICsNCgkJCQkJCSJ0b3AiICsgKCB0b3AgPj0gMCA/ICIrIiA6ICIiICkgKyB0b3AsDQoJCQkJCW9mOiB0aGF0LndpbmRvdw0KCQkJCX07DQoJCQkJdGhhdC5fcmVtb3ZlQ2xhc3MoICQoIHRoaXMgKSwgInVpLWRpYWxvZy1yZXNpemluZyIgKTsNCgkJCQl0aGF0Ll91bmJsb2NrRnJhbWVzKCk7DQoJCQkJdGhhdC5fdHJpZ2dlciggInJlc2l6ZVN0b3AiLCBldmVudCwgZmlsdGVyZWRVaSggdWkgKSApOw0KCQkJfQ0KCQl9ICkNCgkJCS5jc3MoICJwb3NpdGlvbiIsIHBvc2l0aW9uICk7DQoJfSwNCg0KCV90cmFja0ZvY3VzOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fb24oIHRoaXMud2lkZ2V0KCksIHsNCgkJCWZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQl0aGlzLl9tYWtlRm9jdXNUYXJnZXQoKTsNCgkJCQl0aGlzLl9mb2N1c2VkRWxlbWVudCA9ICQoIGV2ZW50LnRhcmdldCApOw0KCQkJfQ0KCQl9ICk7DQoJfSwNCg0KCV9tYWtlRm9jdXNUYXJnZXQ6IGZ1bmN0aW9uKCkgew0KCQl0aGlzLl91bnRyYWNrSW5zdGFuY2UoKTsNCgkJdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKS51bnNoaWZ0KCB0aGlzICk7DQoJfSwNCg0KCV91bnRyYWNrSW5zdGFuY2U6IGZ1bmN0aW9uKCkgew0KCQl2YXIgaW5zdGFuY2VzID0gdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKSwNCgkJCWV4aXN0cyA9ICQuaW5BcnJheSggdGhpcywgaW5zdGFuY2VzICk7DQoJCWlmICggZXhpc3RzICE9PSAtMSApIHsNCgkJCWluc3RhbmNlcy5zcGxpY2UoIGV4aXN0cywgMSApOw0KCQl9DQoJfSwNCg0KCV90cmFja2luZ0luc3RhbmNlczogZnVuY3Rpb24oKSB7DQoJCXZhciBpbnN0YW5jZXMgPSB0aGlzLmRvY3VtZW50LmRhdGEoICJ1aS1kaWFsb2ctaW5zdGFuY2VzIiApOw0KCQlpZiAoICFpbnN0YW5jZXMgKSB7DQoJCQlpbnN0YW5jZXMgPSBbXTsNCgkJCXRoaXMuZG9jdW1lbnQuZGF0YSggInVpLWRpYWxvZy1pbnN0YW5jZXMiLCBpbnN0YW5jZXMgKTsNCgkJfQ0KCQlyZXR1cm4gaW5zdGFuY2VzOw0KCX0sDQoNCglfbWluSGVpZ2h0OiBmdW5jdGlvbigpIHsNCgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7DQoNCgkJcmV0dXJuIG9wdGlvbnMuaGVpZ2h0ID09PSAiYXV0byIgPw0KCQkJb3B0aW9ucy5taW5IZWlnaHQgOg0KCQkJTWF0aC5taW4oIG9wdGlvbnMubWluSGVpZ2h0LCBvcHRpb25zLmhlaWdodCApOw0KCX0sDQoNCglfcG9zaXRpb246IGZ1bmN0aW9uKCkgew0KDQoJCS8vIE5lZWQgdG8gc2hvdyB0aGUgZGlhbG9nIHRvIGdldCB0aGUgYWN0dWFsIG9mZnNldCBpbiB0aGUgcG9zaXRpb24gcGx1Z2luDQoJCXZhciBpc1Zpc2libGUgPSB0aGlzLnVpRGlhbG9nLmlzKCAiOnZpc2libGUiICk7DQoJCWlmICggIWlzVmlzaWJsZSApIHsNCgkJCXRoaXMudWlEaWFsb2cuc2hvdygpOw0KCQl9DQoJCXRoaXMudWlEaWFsb2cucG9zaXRpb24oIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApOw0KCQlpZiAoICFpc1Zpc2libGUgKSB7DQoJCQl0aGlzLnVpRGlhbG9nLmhpZGUoKTsNCgkJfQ0KCX0sDQoNCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7DQoJCXZhciB0aGF0ID0gdGhpcywNCgkJCXJlc2l6ZSA9IGZhbHNlLA0KCQkJcmVzaXphYmxlT3B0aW9ucyA9IHt9Ow0KDQoJCSQuZWFjaCggb3B0aW9ucywgZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCQl0aGF0Ll9zZXRPcHRpb24oIGtleSwgdmFsdWUgKTsNCg0KCQkJaWYgKCBrZXkgaW4gdGhhdC5zaXplUmVsYXRlZE9wdGlvbnMgKSB7DQoJCQkJcmVzaXplID0gdHJ1ZTsNCgkJCX0NCgkJCWlmICgga2V5IGluIHRoYXQucmVzaXphYmxlUmVsYXRlZE9wdGlvbnMgKSB7DQoJCQkJcmVzaXphYmxlT3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsNCgkJCX0NCgkJfSApOw0KDQoJCWlmICggcmVzaXplICkgew0KCQkJdGhpcy5fc2l6ZSgpOw0KCQkJdGhpcy5fcG9zaXRpb24oKTsNCgkJfQ0KCQlpZiAoIHRoaXMudWlEaWFsb2cuaXMoICI6ZGF0YSh1aS1yZXNpemFibGUpIiApICkgew0KCQkJdGhpcy51aURpYWxvZy5yZXNpemFibGUoICJvcHRpb24iLCByZXNpemFibGVPcHRpb25zICk7DQoJCX0NCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCXZhciBpc0RyYWdnYWJsZSwgaXNSZXNpemFibGUsDQoJCQl1aURpYWxvZyA9IHRoaXMudWlEaWFsb2c7DQoNCgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOw0KDQoJCWlmICgga2V5ID09PSAiYXBwZW5kVG8iICkgew0KCQkJdGhpcy51aURpYWxvZy5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApOw0KCQl9DQoNCgkJaWYgKCBrZXkgPT09ICJidXR0b25zIiApIHsNCgkJCXRoaXMuX2NyZWF0ZUJ1dHRvbnMoKTsNCgkJfQ0KDQoJCWlmICgga2V5ID09PSAiY2xvc2VUZXh0IiApIHsNCgkJCXRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmJ1dHRvbiggew0KDQoJCQkJLy8gRW5zdXJlIHRoYXQgd2UgYWx3YXlzIHBhc3MgYSBzdHJpbmcNCgkJCQlsYWJlbDogJCggIjxhPiIgKS50ZXh0KCAiIiArIHRoaXMub3B0aW9ucy5jbG9zZVRleHQgKS5odG1sKCkNCgkJCX0gKTsNCgkJfQ0KDQoJCWlmICgga2V5ID09PSAiZHJhZ2dhYmxlIiApIHsNCgkJCWlzRHJhZ2dhYmxlID0gdWlEaWFsb2cuaXMoICI6ZGF0YSh1aS1kcmFnZ2FibGUpIiApOw0KCQkJaWYgKCBpc0RyYWdnYWJsZSAmJiAhdmFsdWUgKSB7DQoJCQkJdWlEaWFsb2cuZHJhZ2dhYmxlKCAiZGVzdHJveSIgKTsNCgkJCX0NCg0KCQkJaWYgKCAhaXNEcmFnZ2FibGUgJiYgdmFsdWUgKSB7DQoJCQkJdGhpcy5fbWFrZURyYWdnYWJsZSgpOw0KCQkJfQ0KCQl9DQoNCgkJaWYgKCBrZXkgPT09ICJwb3NpdGlvbiIgKSB7DQoJCQl0aGlzLl9wb3NpdGlvbigpOw0KCQl9DQoNCgkJaWYgKCBrZXkgPT09ICJyZXNpemFibGUiICkgew0KDQoJCQkvLyBjdXJyZW50bHkgcmVzaXphYmxlLCBiZWNvbWluZyBub24tcmVzaXphYmxlDQoJCQlpc1Jlc2l6YWJsZSA9IHVpRGlhbG9nLmlzKCAiOmRhdGEodWktcmVzaXphYmxlKSIgKTsNCgkJCWlmICggaXNSZXNpemFibGUgJiYgIXZhbHVlICkgew0KCQkJCXVpRGlhbG9nLnJlc2l6YWJsZSggImRlc3Ryb3kiICk7DQoJCQl9DQoNCgkJCS8vIEN1cnJlbnRseSByZXNpemFibGUsIGNoYW5naW5nIGhhbmRsZXMNCgkJCWlmICggaXNSZXNpemFibGUgJiYgdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiApIHsNCgkJCQl1aURpYWxvZy5yZXNpemFibGUoICJvcHRpb24iLCAiaGFuZGxlcyIsIHZhbHVlICk7DQoJCQl9DQoNCgkJCS8vIEN1cnJlbnRseSBub24tcmVzaXphYmxlLCBiZWNvbWluZyByZXNpemFibGUNCgkJCWlmICggIWlzUmVzaXphYmxlICYmIHZhbHVlICE9PSBmYWxzZSApIHsNCgkJCQl0aGlzLl9tYWtlUmVzaXphYmxlKCk7DQoJCQl9DQoJCX0NCg0KCQlpZiAoIGtleSA9PT0gInRpdGxlIiApIHsNCgkJCXRoaXMuX3RpdGxlKCB0aGlzLnVpRGlhbG9nVGl0bGViYXIuZmluZCggIi51aS1kaWFsb2ctdGl0bGUiICkgKTsNCgkJfQ0KCX0sDQoNCglfc2l6ZTogZnVuY3Rpb24oKSB7DQoNCgkJLy8gSWYgdGhlIHVzZXIgaGFzIHJlc2l6ZWQgdGhlIGRpYWxvZywgdGhlIC51aS1kaWFsb2cgYW5kIC51aS1kaWFsb2ctY29udGVudA0KCQkvLyBkaXZzIHdpbGwgYm90aCBoYXZlIHdpZHRoIGFuZCBoZWlnaHQgc2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZW0NCgkJdmFyIG5vbkNvbnRlbnRIZWlnaHQsIG1pbkNvbnRlbnRIZWlnaHQsIG1heENvbnRlbnRIZWlnaHQsDQoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOw0KDQoJCS8vIFJlc2V0IGNvbnRlbnQgc2l6aW5nDQoJCXRoaXMuZWxlbWVudC5zaG93KCkuY3NzKCB7DQoJCQl3aWR0aDogImF1dG8iLA0KCQkJbWluSGVpZ2h0OiAwLA0KCQkJbWF4SGVpZ2h0OiAibm9uZSIsDQoJCQloZWlnaHQ6IDANCgkJfSApOw0KDQoJCWlmICggb3B0aW9ucy5taW5XaWR0aCA+IG9wdGlvbnMud2lkdGggKSB7DQoJCQlvcHRpb25zLndpZHRoID0gb3B0aW9ucy5taW5XaWR0aDsNCgkJfQ0KDQoJCS8vIFJlc2V0IHdyYXBwZXIgc2l6aW5nDQoJCS8vIGRldGVybWluZSB0aGUgaGVpZ2h0IG9mIGFsbCB0aGUgbm9uLWNvbnRlbnQgZWxlbWVudHMNCgkJbm9uQ29udGVudEhlaWdodCA9IHRoaXMudWlEaWFsb2cuY3NzKCB7DQoJCQloZWlnaHQ6ICJhdXRvIiwNCgkJCXdpZHRoOiBvcHRpb25zLndpZHRoDQoJCX0gKQ0KCQkJLm91dGVySGVpZ2h0KCk7DQoJCW1pbkNvbnRlbnRIZWlnaHQgPSBNYXRoLm1heCggMCwgb3B0aW9ucy5taW5IZWlnaHQgLSBub25Db250ZW50SGVpZ2h0ICk7DQoJCW1heENvbnRlbnRIZWlnaHQgPSB0eXBlb2Ygb3B0aW9ucy5tYXhIZWlnaHQgPT09ICJudW1iZXIiID8NCgkJCU1hdGgubWF4KCAwLCBvcHRpb25zLm1heEhlaWdodCAtIG5vbkNvbnRlbnRIZWlnaHQgKSA6DQoJCQkibm9uZSI7DQoNCgkJaWYgKCBvcHRpb25zLmhlaWdodCA9PT0gImF1dG8iICkgew0KCQkJdGhpcy5lbGVtZW50LmNzcyggew0KCQkJCW1pbkhlaWdodDogbWluQ29udGVudEhlaWdodCwNCgkJCQltYXhIZWlnaHQ6IG1heENvbnRlbnRIZWlnaHQsDQoJCQkJaGVpZ2h0OiAiYXV0byINCgkJCX0gKTsNCgkJfSBlbHNlIHsNCgkJCXRoaXMuZWxlbWVudC5oZWlnaHQoIE1hdGgubWF4KCAwLCBvcHRpb25zLmhlaWdodCAtIG5vbkNvbnRlbnRIZWlnaHQgKSApOw0KCQl9DQoNCgkJaWYgKCB0aGlzLnVpRGlhbG9nLmlzKCAiOmRhdGEodWktcmVzaXphYmxlKSIgKSApIHsNCgkJCXRoaXMudWlEaWFsb2cucmVzaXphYmxlKCAib3B0aW9uIiwgIm1pbkhlaWdodCIsIHRoaXMuX21pbkhlaWdodCgpICk7DQoJCX0NCgl9LA0KDQoJX2Jsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5pZnJhbWVCbG9ja3MgPSB0aGlzLmRvY3VtZW50LmZpbmQoICJpZnJhbWUiICkubWFwKCBmdW5jdGlvbigpIHsNCgkJCXZhciBpZnJhbWUgPSAkKCB0aGlzICk7DQoNCgkJCXJldHVybiAkKCAiPGRpdj4iICkNCgkJCQkuY3NzKCB7DQoJCQkJCXBvc2l0aW9uOiAiYWJzb2x1dGUiLA0KCQkJCQl3aWR0aDogaWZyYW1lLm91dGVyV2lkdGgoKSwNCgkJCQkJaGVpZ2h0OiBpZnJhbWUub3V0ZXJIZWlnaHQoKQ0KCQkJCX0gKQ0KCQkJCS5hcHBlbmRUbyggaWZyYW1lLnBhcmVudCgpICkNCgkJCQkub2Zmc2V0KCBpZnJhbWUub2Zmc2V0KCkgKVsgMCBdOw0KCQl9ICk7DQoJfSwNCg0KCV91bmJsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHsNCgkJaWYgKCB0aGlzLmlmcmFtZUJsb2NrcyApIHsNCgkJCXRoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpOw0KCQkJZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzOw0KCQl9DQoJfSwNCg0KCV9hbGxvd0ludGVyYWN0aW9uOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCWlmICggJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggIi51aS1kaWFsb2ciICkubGVuZ3RoICkgew0KCQkJcmV0dXJuIHRydWU7DQoJCX0NCg0KCQkvLyBUT0RPOiBSZW1vdmUgaGFjayB3aGVuIGRhdGVwaWNrZXIgaW1wbGVtZW50cw0KCQkvLyB0aGUgLnVpLWZyb250IGxvZ2ljICgjODk4OSkNCgkJcmV0dXJuICEhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggIi51aS1kYXRlcGlja2VyIiApLmxlbmd0aDsNCgl9LA0KDQoJX2NyZWF0ZU92ZXJsYXk6IGZ1bmN0aW9uKCkgew0KCQlpZiAoICF0aGlzLm9wdGlvbnMubW9kYWwgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQkvLyBXZSB1c2UgYSBkZWxheSBpbiBjYXNlIHRoZSBvdmVybGF5IGlzIGNyZWF0ZWQgZnJvbSBhbg0KCQkvLyBldmVudCB0aGF0IHdlJ3JlIGdvaW5nIHRvIGJlIGNhbmNlbGxpbmcgKCMyODA0KQ0KCQl2YXIgaXNPcGVuaW5nID0gdHJ1ZTsNCgkJdGhpcy5fZGVsYXkoIGZ1bmN0aW9uKCkgew0KCQkJaXNPcGVuaW5nID0gZmFsc2U7DQoJCX0gKTsNCg0KCQlpZiAoICF0aGlzLmRvY3VtZW50LmRhdGEoICJ1aS1kaWFsb2ctb3ZlcmxheXMiICkgKSB7DQoNCgkJCS8vIFByZXZlbnQgdXNlIG9mIGFuY2hvcnMgYW5kIGlucHV0cw0KCQkJLy8gVXNpbmcgX29uKCkgZm9yIGFuIGV2ZW50IGhhbmRsZXIgc2hhcmVkIGFjcm9zcyBtYW55IGluc3RhbmNlcyBpcw0KCQkJLy8gc2FmZSBiZWNhdXNlIHRoZSBkaWFsb2dzIHN0YWNrIGFuZCBtdXN0IGJlIGNsb3NlZCBpbiByZXZlcnNlIG9yZGVyDQoJCQl0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwgew0KCQkJCWZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQkJaWYgKCBpc09wZW5pbmcgKSB7DQoJCQkJCQlyZXR1cm47DQoJCQkJCX0NCg0KCQkJCQlpZiAoICF0aGlzLl9hbGxvd0ludGVyYWN0aW9uKCBldmVudCApICkgew0KCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkJCQkJCXRoaXMuX3RyYWNraW5nSW5zdGFuY2VzKClbIDAgXS5fZm9jdXNUYWJiYWJsZSgpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfSApOw0KCQl9DQoNCgkJdGhpcy5vdmVybGF5ID0gJCggIjxkaXY+IiApDQoJCQkuYXBwZW5kVG8oIHRoaXMuX2FwcGVuZFRvKCkgKTsNCg0KCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5vdmVybGF5LCBudWxsLCAidWktd2lkZ2V0LW92ZXJsYXkgdWktZnJvbnQiICk7DQoJCXRoaXMuX29uKCB0aGlzLm92ZXJsYXksIHsNCgkJCW1vdXNlZG93bjogIl9rZWVwRm9jdXMiDQoJCX0gKTsNCgkJdGhpcy5kb2N1bWVudC5kYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiwNCgkJCSggdGhpcy5kb2N1bWVudC5kYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiApIHx8IDAgKSArIDEgKTsNCgl9LA0KDQoJX2Rlc3Ryb3lPdmVybGF5OiBmdW5jdGlvbigpIHsNCgkJaWYgKCAhdGhpcy5vcHRpb25zLm1vZGFsICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJaWYgKCB0aGlzLm92ZXJsYXkgKSB7DQoJCQl2YXIgb3ZlcmxheXMgPSB0aGlzLmRvY3VtZW50LmRhdGEoICJ1aS1kaWFsb2ctb3ZlcmxheXMiICkgLSAxOw0KDQoJCQlpZiAoICFvdmVybGF5cyApIHsNCgkJCQl0aGlzLl9vZmYoIHRoaXMuZG9jdW1lbnQsICJmb2N1c2luIiApOw0KCQkJCXRoaXMuZG9jdW1lbnQucmVtb3ZlRGF0YSggInVpLWRpYWxvZy1vdmVybGF5cyIgKTsNCgkJCX0gZWxzZSB7DQoJCQkJdGhpcy5kb2N1bWVudC5kYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiwgb3ZlcmxheXMgKTsNCgkJCX0NCg0KCQkJdGhpcy5vdmVybGF5LnJlbW92ZSgpOw0KCQkJdGhpcy5vdmVybGF5ID0gbnVsbDsNCgkJfQ0KCX0NCn0gKTsNCg0KLy8gREVQUkVDQVRFRA0KLy8gVE9ETzogc3dpdGNoIHJldHVybiBiYWNrIHRvIHdpZGdldCBkZWNsYXJhdGlvbiBhdCB0b3Agb2YgZmlsZSB3aGVuIHRoaXMgaXMgcmVtb3ZlZA0KaWYgKCAkLnVpQmFja0NvbXBhdCAhPT0gZmFsc2UgKSB7DQoNCgkvLyBCYWNrY29tcGF0IGZvciBkaWFsb2dDbGFzcyBvcHRpb24NCgkkLndpZGdldCggInVpLmRpYWxvZyIsICQudWkuZGlhbG9nLCB7DQoJCW9wdGlvbnM6IHsNCgkJCWRpYWxvZ0NsYXNzOiAiIg0KCQl9LA0KCQlfY3JlYXRlV3JhcHBlcjogZnVuY3Rpb24oKSB7DQoJCQl0aGlzLl9zdXBlcigpOw0KCQkJdGhpcy51aURpYWxvZy5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzICk7DQoJCX0sDQoJCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgew0KCQkJaWYgKCBrZXkgPT09ICJkaWFsb2dDbGFzcyIgKSB7DQoJCQkJdGhpcy51aURpYWxvZw0KCQkJCQkucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApDQoJCQkJCS5hZGRDbGFzcyggdmFsdWUgKTsNCgkJCX0NCgkJCXRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApOw0KCQl9DQoJfSApOw0KfQ0KDQp2YXIgd2lkZ2V0c0RpYWxvZyA9ICQudWkuZGlhbG9nOw0KDQoNCi8qIQ0KICogalF1ZXJ5IFVJIFByb2dyZXNzYmFyIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBQcm9ncmVzc2Jhcg0KLy8+Pmdyb3VwOiBXaWRnZXRzDQovLyBqc2NzOmRpc2FibGUgbWF4aW11bUxpbmVMZW5ndGgNCi8vPj5kZXNjcmlwdGlvbjogRGlzcGxheXMgYSBzdGF0dXMgaW5kaWNhdG9yIGZvciBsb2FkaW5nIHN0YXRlLCBzdGFuZGFyZCBwZXJjZW50YWdlLCBhbmQgb3RoZXIgcHJvZ3Jlc3MgaW5kaWNhdG9ycy4NCi8vIGpzY3M6ZW5hYmxlIG1heGltdW1MaW5lTGVuZ3RoDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcHJvZ3Jlc3NiYXIvDQovLz4+ZGVtb3M6IGh0dHA6Ly9qcXVlcnl1aS5jb20vcHJvZ3Jlc3NiYXIvDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvY29yZS5jc3MNCi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9wcm9ncmVzc2Jhci5jc3MNCi8vPj5jc3MudGhlbWU6IC4uLy4uL3RoZW1lcy9iYXNlL3RoZW1lLmNzcw0KDQoNCg0KdmFyIHdpZGdldHNQcm9ncmVzc2JhciA9ICQud2lkZ2V0KCAidWkucHJvZ3Jlc3NiYXIiLCB7DQoJdmVyc2lvbjogIjEuMTIuMSIsDQoJb3B0aW9uczogew0KCQljbGFzc2VzOiB7DQoJCQkidWktcHJvZ3Jlc3NiYXIiOiAidWktY29ybmVyLWFsbCIsDQoJCQkidWktcHJvZ3Jlc3NiYXItdmFsdWUiOiAidWktY29ybmVyLWxlZnQiLA0KCQkJInVpLXByb2dyZXNzYmFyLWNvbXBsZXRlIjogInVpLWNvcm5lci1yaWdodCINCgkJfSwNCgkJbWF4OiAxMDAsDQoJCXZhbHVlOiAwLA0KDQoJCWNoYW5nZTogbnVsbCwNCgkJY29tcGxldGU6IG51bGwNCgl9LA0KDQoJbWluOiAwLA0KDQoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7DQoNCgkJLy8gQ29uc3RyYWluIGluaXRpYWwgdmFsdWUNCgkJdGhpcy5vbGRWYWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoKTsNCg0KCQl0aGlzLmVsZW1lbnQuYXR0ciggew0KDQoJCQkvLyBPbmx5IHNldCBzdGF0aWMgdmFsdWVzOyBhcmlhLXZhbHVlbm93IGFuZCBhcmlhLXZhbHVlbWF4IGFyZQ0KCQkJLy8gc2V0IGluc2lkZSBfcmVmcmVzaFZhbHVlKCkNCgkJCXJvbGU6ICJwcm9ncmVzc2JhciIsDQoJCQkiYXJpYS12YWx1ZW1pbiI6IHRoaXMubWluDQoJCX0gKTsNCgkJdGhpcy5fYWRkQ2xhc3MoICJ1aS1wcm9ncmVzc2JhciIsICJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQiICk7DQoNCgkJdGhpcy52YWx1ZURpdiA9ICQoICI8ZGl2PiIgKS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7DQoJCXRoaXMuX2FkZENsYXNzKCB0aGlzLnZhbHVlRGl2LCAidWktcHJvZ3Jlc3NiYXItdmFsdWUiLCAidWktd2lkZ2V0LWhlYWRlciIgKTsNCgkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7DQoJfSwNCg0KCV9kZXN0cm95OiBmdW5jdGlvbigpIHsNCgkJdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoICJyb2xlIGFyaWEtdmFsdWVtaW4gYXJpYS12YWx1ZW1heCBhcmlhLXZhbHVlbm93IiApOw0KDQoJCXRoaXMudmFsdWVEaXYucmVtb3ZlKCk7DQoJfSwNCg0KCXZhbHVlOiBmdW5jdGlvbiggbmV3VmFsdWUgKSB7DQoJCWlmICggbmV3VmFsdWUgPT09IHVuZGVmaW5lZCApIHsNCgkJCXJldHVybiB0aGlzLm9wdGlvbnMudmFsdWU7DQoJCX0NCg0KCQl0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKCBuZXdWYWx1ZSApOw0KCQl0aGlzLl9yZWZyZXNoVmFsdWUoKTsNCgl9LA0KDQoJX2NvbnN0cmFpbmVkVmFsdWU6IGZ1bmN0aW9uKCBuZXdWYWx1ZSApIHsNCgkJaWYgKCBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkICkgew0KCQkJbmV3VmFsdWUgPSB0aGlzLm9wdGlvbnMudmFsdWU7DQoJCX0NCg0KCQl0aGlzLmluZGV0ZXJtaW5hdGUgPSBuZXdWYWx1ZSA9PT0gZmFsc2U7DQoNCgkJLy8gU2FuaXRpemUgdmFsdWUNCgkJaWYgKCB0eXBlb2YgbmV3VmFsdWUgIT09ICJudW1iZXIiICkgew0KCQkJbmV3VmFsdWUgPSAwOw0KCQl9DQoNCgkJcmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZSA/IGZhbHNlIDoNCgkJCU1hdGgubWluKCB0aGlzLm9wdGlvbnMubWF4LCBNYXRoLm1heCggdGhpcy5taW4sIG5ld1ZhbHVlICkgKTsNCgl9LA0KDQoJX3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkgew0KDQoJCS8vIEVuc3VyZSAidmFsdWUiIG9wdGlvbiBpcyBzZXQgYWZ0ZXIgb3RoZXIgdmFsdWVzIChsaWtlIG1heCkNCgkJdmFyIHZhbHVlID0gb3B0aW9ucy52YWx1ZTsNCgkJZGVsZXRlIG9wdGlvbnMudmFsdWU7DQoNCgkJdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTsNCg0KCQl0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKCB2YWx1ZSApOw0KCQl0aGlzLl9yZWZyZXNoVmFsdWUoKTsNCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCWlmICgga2V5ID09PSAibWF4IiApIHsNCg0KCQkJLy8gRG9uJ3QgYWxsb3cgYSBtYXggbGVzcyB0aGFuIG1pbg0KCQkJdmFsdWUgPSBNYXRoLm1heCggdGhpcy5taW4sIHZhbHVlICk7DQoJCX0NCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsNCgl9LA0KDQoJX3NldE9wdGlvbkRpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7DQoJCXRoaXMuX3N1cGVyKCB2YWx1ZSApOw0KDQoJCXRoaXMuZWxlbWVudC5hdHRyKCAiYXJpYS1kaXNhYmxlZCIsIHZhbHVlICk7DQoJCXRoaXMuX3RvZ2dsZUNsYXNzKCBudWxsLCAidWktc3RhdGUtZGlzYWJsZWQiLCAhIXZhbHVlICk7DQoJfSwNCg0KCV9wZXJjZW50YWdlOiBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZSA/DQoJCQkxMDAgOg0KCQkJMTAwICogKCB0aGlzLm9wdGlvbnMudmFsdWUgLSB0aGlzLm1pbiApIC8gKCB0aGlzLm9wdGlvbnMubWF4IC0gdGhpcy5taW4gKTsNCgl9LA0KDQoJX3JlZnJlc2hWYWx1ZTogZnVuY3Rpb24oKSB7DQoJCXZhciB2YWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZSwNCgkJCXBlcmNlbnRhZ2UgPSB0aGlzLl9wZXJjZW50YWdlKCk7DQoNCgkJdGhpcy52YWx1ZURpdg0KCQkJLnRvZ2dsZSggdGhpcy5pbmRldGVybWluYXRlIHx8IHZhbHVlID4gdGhpcy5taW4gKQ0KCQkJLndpZHRoKCBwZXJjZW50YWdlLnRvRml4ZWQoIDAgKSArICIlIiApOw0KDQoJCXRoaXMNCgkJCS5fdG9nZ2xlQ2xhc3MoIHRoaXMudmFsdWVEaXYsICJ1aS1wcm9ncmVzc2Jhci1jb21wbGV0ZSIsIG51bGwsDQoJCQkJdmFsdWUgPT09IHRoaXMub3B0aW9ucy5tYXggKQ0KCQkJLl90b2dnbGVDbGFzcyggInVpLXByb2dyZXNzYmFyLWluZGV0ZXJtaW5hdGUiLCBudWxsLCB0aGlzLmluZGV0ZXJtaW5hdGUgKTsNCg0KCQlpZiAoIHRoaXMuaW5kZXRlcm1pbmF0ZSApIHsNCgkJCXRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCAiYXJpYS12YWx1ZW5vdyIgKTsNCgkJCWlmICggIXRoaXMub3ZlcmxheURpdiApIHsNCgkJCQl0aGlzLm92ZXJsYXlEaXYgPSAkKCAiPGRpdj4iICkuYXBwZW5kVG8oIHRoaXMudmFsdWVEaXYgKTsNCgkJCQl0aGlzLl9hZGRDbGFzcyggdGhpcy5vdmVybGF5RGl2LCAidWktcHJvZ3Jlc3NiYXItb3ZlcmxheSIgKTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCXRoaXMuZWxlbWVudC5hdHRyKCB7DQoJCQkJImFyaWEtdmFsdWVtYXgiOiB0aGlzLm9wdGlvbnMubWF4LA0KCQkJCSJhcmlhLXZhbHVlbm93IjogdmFsdWUNCgkJCX0gKTsNCgkJCWlmICggdGhpcy5vdmVybGF5RGl2ICkgew0KCQkJCXRoaXMub3ZlcmxheURpdi5yZW1vdmUoKTsNCgkJCQl0aGlzLm92ZXJsYXlEaXYgPSBudWxsOw0KCQkJfQ0KCQl9DQoNCgkJaWYgKCB0aGlzLm9sZFZhbHVlICE9PSB2YWx1ZSApIHsNCgkJCXRoaXMub2xkVmFsdWUgPSB2YWx1ZTsNCgkJCXRoaXMuX3RyaWdnZXIoICJjaGFuZ2UiICk7DQoJCX0NCgkJaWYgKCB2YWx1ZSA9PT0gdGhpcy5vcHRpb25zLm1heCApIHsNCgkJCXRoaXMuX3RyaWdnZXIoICJjb21wbGV0ZSIgKTsNCgkJfQ0KCX0NCn0gKTsNCg0KDQovKiENCiAqIGpRdWVyeSBVSSBUb29sdGlwIDEuMTIuMQ0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKi8NCg0KLy8+PmxhYmVsOiBUb29sdGlwDQovLz4+Z3JvdXA6IFdpZGdldHMNCi8vPj5kZXNjcmlwdGlvbjogU2hvd3MgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgYW55IGVsZW1lbnQgb24gaG92ZXIgb3IgZm9jdXMuDQovLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdG9vbHRpcC8NCi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS90b29sdGlwLw0KLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL2NvcmUuY3NzDQovLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvdG9vbHRpcC5jc3MNCi8vPj5jc3MudGhlbWU6IC4uLy4uL3RoZW1lcy9iYXNlL3RoZW1lLmNzcw0KDQoNCg0KJC53aWRnZXQoICJ1aS50b29sdGlwIiwgew0KCXZlcnNpb246ICIxLjEyLjEiLA0KCW9wdGlvbnM6IHsNCgkJY2xhc3Nlczogew0KCQkJInVpLXRvb2x0aXAiOiAidWktY29ybmVyLWFsbCB1aS13aWRnZXQtc2hhZG93Ig0KCQl9LA0KCQljb250ZW50OiBmdW5jdGlvbigpIHsNCg0KCQkJLy8gc3VwcG9ydDogSUU8OSwgT3BlcmEgaW4galF1ZXJ5IDwxLjcNCgkJCS8vIC50ZXh0KCkgY2FuJ3QgYWNjZXB0IHVuZGVmaW5lZCwgc28gY29lcmNlIHRvIGEgc3RyaW5nDQoJCQl2YXIgdGl0bGUgPSAkKCB0aGlzICkuYXR0ciggInRpdGxlIiApIHx8ICIiOw0KDQoJCQkvLyBFc2NhcGUgdGl0bGUsIHNpbmNlIHdlJ3JlIGdvaW5nIGZyb20gYW4gYXR0cmlidXRlIHRvIHJhdyBIVE1MDQoJCQlyZXR1cm4gJCggIjxhPiIgKS50ZXh0KCB0aXRsZSApLmh0bWwoKTsNCgkJfSwNCgkJaGlkZTogdHJ1ZSwNCg0KCQkvLyBEaXNhYmxlZCBlbGVtZW50cyBoYXZlIGluY29uc2lzdGVudCBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMgKCM4NjYxKQ0KCQlpdGVtczogIlt0aXRsZV06bm90KFtkaXNhYmxlZF0pIiwNCgkJcG9zaXRpb246IHsNCgkJCW15OiAibGVmdCB0b3ArMTUiLA0KCQkJYXQ6ICJsZWZ0IGJvdHRvbSIsDQoJCQljb2xsaXNpb246ICJmbGlwZml0IGZsaXAiDQoJCX0sDQoJCXNob3c6IHRydWUsDQoJCXRyYWNrOiBmYWxzZSwNCg0KCQkvLyBDYWxsYmFja3MNCgkJY2xvc2U6IG51bGwsDQoJCW9wZW46IG51bGwNCgl9LA0KDQoJX2FkZERlc2NyaWJlZEJ5OiBmdW5jdGlvbiggZWxlbSwgaWQgKSB7DQoJCXZhciBkZXNjcmliZWRieSA9ICggZWxlbS5hdHRyKCAiYXJpYS1kZXNjcmliZWRieSIgKSB8fCAiIiApLnNwbGl0KCAvXHMrLyApOw0KCQlkZXNjcmliZWRieS5wdXNoKCBpZCApOw0KCQllbGVtDQoJCQkuZGF0YSggInVpLXRvb2x0aXAtaWQiLCBpZCApDQoJCQkuYXR0ciggImFyaWEtZGVzY3JpYmVkYnkiLCAkLnRyaW0oIGRlc2NyaWJlZGJ5LmpvaW4oICIgIiApICkgKTsNCgl9LA0KDQoJX3JlbW92ZURlc2NyaWJlZEJ5OiBmdW5jdGlvbiggZWxlbSApIHsNCgkJdmFyIGlkID0gZWxlbS5kYXRhKCAidWktdG9vbHRpcC1pZCIgKSwNCgkJCWRlc2NyaWJlZGJ5ID0gKCBlbGVtLmF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiApIHx8ICIiICkuc3BsaXQoIC9ccysvICksDQoJCQlpbmRleCA9ICQuaW5BcnJheSggaWQsIGRlc2NyaWJlZGJ5ICk7DQoNCgkJaWYgKCBpbmRleCAhPT0gLTEgKSB7DQoJCQlkZXNjcmliZWRieS5zcGxpY2UoIGluZGV4LCAxICk7DQoJCX0NCg0KCQllbGVtLnJlbW92ZURhdGEoICJ1aS10b29sdGlwLWlkIiApOw0KCQlkZXNjcmliZWRieSA9ICQudHJpbSggZGVzY3JpYmVkYnkuam9pbiggIiAiICkgKTsNCgkJaWYgKCBkZXNjcmliZWRieSApIHsNCgkJCWVsZW0uYXR0ciggImFyaWEtZGVzY3JpYmVkYnkiLCBkZXNjcmliZWRieSApOw0KCQl9IGVsc2Ugew0KCQkJZWxlbS5yZW1vdmVBdHRyKCAiYXJpYS1kZXNjcmliZWRieSIgKTsNCgkJfQ0KCX0sDQoNCglfY3JlYXRlOiBmdW5jdGlvbigpIHsNCgkJdGhpcy5fb24oIHsNCgkJCW1vdXNlb3ZlcjogIm9wZW4iLA0KCQkJZm9jdXNpbjogIm9wZW4iDQoJCX0gKTsNCg0KCQkvLyBJRHMgb2YgZ2VuZXJhdGVkIHRvb2x0aXBzLCBuZWVkZWQgZm9yIGRlc3Ryb3kNCgkJdGhpcy50b29sdGlwcyA9IHt9Ow0KDQoJCS8vIElEcyBvZiBwYXJlbnQgdG9vbHRpcHMgd2hlcmUgd2UgcmVtb3ZlZCB0aGUgdGl0bGUgYXR0cmlidXRlDQoJCXRoaXMucGFyZW50cyA9IHt9Ow0KDQoJCS8vIEFwcGVuZCB0aGUgYXJpYS1saXZlIHJlZ2lvbiBzbyB0b29sdGlwcyBhbm5vdW5jZSBjb3JyZWN0bHkNCgkJdGhpcy5saXZlUmVnaW9uID0gJCggIjxkaXY+IiApDQoJCQkuYXR0ciggew0KCQkJCXJvbGU6ICJsb2ciLA0KCQkJCSJhcmlhLWxpdmUiOiAiYXNzZXJ0aXZlIiwNCgkJCQkiYXJpYS1yZWxldmFudCI6ICJhZGRpdGlvbnMiDQoJCQl9ICkNCgkJCS5hcHBlbmRUbyggdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRoaXMubGl2ZVJlZ2lvbiwgbnVsbCwgInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIgKTsNCg0KCQl0aGlzLmRpc2FibGVkVGl0bGVzID0gJCggW10gKTsNCgl9LA0KDQoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOw0KDQoJCWlmICgga2V5ID09PSAiY29udGVudCIgKSB7DQoJCQkkLmVhY2goIHRoaXMudG9vbHRpcHMsIGZ1bmN0aW9uKCBpZCwgdG9vbHRpcERhdGEgKSB7DQoJCQkJdGhhdC5fdXBkYXRlQ29udGVudCggdG9vbHRpcERhdGEuZWxlbWVudCApOw0KCQkJfSApOw0KCQl9DQoJfSwNCg0KCV9zZXRPcHRpb25EaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkgew0KCQl0aGlzWyB2YWx1ZSA/ICJfZGlzYWJsZSIgOiAiX2VuYWJsZSIgXSgpOw0KCX0sDQoNCglfZGlzYWJsZTogZnVuY3Rpb24oKSB7DQoJCXZhciB0aGF0ID0gdGhpczsNCg0KCQkvLyBDbG9zZSBvcGVuIHRvb2x0aXBzDQoJCSQuZWFjaCggdGhpcy50b29sdGlwcywgZnVuY3Rpb24oIGlkLCB0b29sdGlwRGF0YSApIHsNCgkJCXZhciBldmVudCA9ICQuRXZlbnQoICJibHVyIiApOw0KCQkJZXZlbnQudGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCA9IHRvb2x0aXBEYXRhLmVsZW1lbnRbIDAgXTsNCgkJCXRoYXQuY2xvc2UoIGV2ZW50LCB0cnVlICk7DQoJCX0gKTsNCg0KCQkvLyBSZW1vdmUgdGl0bGUgYXR0cmlidXRlcyB0byBwcmV2ZW50IG5hdGl2ZSB0b29sdGlwcw0KCQl0aGlzLmRpc2FibGVkVGl0bGVzID0gdGhpcy5kaXNhYmxlZFRpdGxlcy5hZGQoDQoJCQl0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkuYWRkQmFjaygpDQoJCQkJLmZpbHRlciggZnVuY3Rpb24oKSB7DQoJCQkJCXZhciBlbGVtZW50ID0gJCggdGhpcyApOw0KCQkJCQlpZiAoIGVsZW1lbnQuaXMoICJbdGl0bGVdIiApICkgew0KCQkJCQkJcmV0dXJuIGVsZW1lbnQNCgkJCQkJCQkuZGF0YSggInVpLXRvb2x0aXAtdGl0bGUiLCBlbGVtZW50LmF0dHIoICJ0aXRsZSIgKSApDQoJCQkJCQkJLnJlbW92ZUF0dHIoICJ0aXRsZSIgKTsNCgkJCQkJfQ0KCQkJCX0gKQ0KCQkpOw0KCX0sDQoNCglfZW5hYmxlOiBmdW5jdGlvbigpIHsNCg0KCQkvLyByZXN0b3JlIHRpdGxlIGF0dHJpYnV0ZXMNCgkJdGhpcy5kaXNhYmxlZFRpdGxlcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCXZhciBlbGVtZW50ID0gJCggdGhpcyApOw0KCQkJaWYgKCBlbGVtZW50LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICkgew0KCQkJCWVsZW1lbnQuYXR0ciggInRpdGxlIiwgZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApOw0KCQkJfQ0KCQl9ICk7DQoJCXRoaXMuZGlzYWJsZWRUaXRsZXMgPSAkKCBbXSApOw0KCX0sDQoNCglvcGVuOiBmdW5jdGlvbiggZXZlbnQgKSB7DQoJCXZhciB0aGF0ID0gdGhpcywNCgkJCXRhcmdldCA9ICQoIGV2ZW50ID8gZXZlbnQudGFyZ2V0IDogdGhpcy5lbGVtZW50ICkNCg0KCQkJCS8vIHdlIG5lZWQgY2xvc2VzdCBoZXJlIGR1ZSB0byBtb3VzZW92ZXIgYnViYmxpbmcsDQoJCQkJLy8gYnV0IGFsd2F5cyBwb2ludGluZyBhdCB0aGUgc2FtZSBldmVudCB0YXJnZXQNCgkJCQkuY2xvc2VzdCggdGhpcy5vcHRpb25zLml0ZW1zICk7DQoNCgkJLy8gTm8gZWxlbWVudCB0byBzaG93IGEgdG9vbHRpcCBmb3Igb3IgdGhlIHRvb2x0aXAgaXMgYWxyZWFkeSBvcGVuDQoJCWlmICggIXRhcmdldC5sZW5ndGggfHwgdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLWlkIiApICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJaWYgKCB0YXJnZXQuYXR0ciggInRpdGxlIiApICkgew0KCQkJdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiwgdGFyZ2V0LmF0dHIoICJ0aXRsZSIgKSApOw0KCQl9DQoNCgkJdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLW9wZW4iLCB0cnVlICk7DQoNCgkJLy8gS2lsbCBwYXJlbnQgdG9vbHRpcHMsIGN1c3RvbSBvciBuYXRpdmUsIGZvciBob3Zlcg0KCQlpZiAoIGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICJtb3VzZW92ZXIiICkgew0KCQkJdGFyZ2V0LnBhcmVudHMoKS5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCQl2YXIgcGFyZW50ID0gJCggdGhpcyApLA0KCQkJCQlibHVyRXZlbnQ7DQoJCQkJaWYgKCBwYXJlbnQuZGF0YSggInVpLXRvb2x0aXAtb3BlbiIgKSApIHsNCgkJCQkJYmx1ckV2ZW50ID0gJC5FdmVudCggImJsdXIiICk7DQoJCQkJCWJsdXJFdmVudC50YXJnZXQgPSBibHVyRXZlbnQuY3VycmVudFRhcmdldCA9IHRoaXM7DQoJCQkJCXRoYXQuY2xvc2UoIGJsdXJFdmVudCwgdHJ1ZSApOw0KCQkJCX0NCgkJCQlpZiAoIHBhcmVudC5hdHRyKCAidGl0bGUiICkgKSB7DQoJCQkJCXBhcmVudC51bmlxdWVJZCgpOw0KCQkJCQl0aGF0LnBhcmVudHNbIHRoaXMuaWQgXSA9IHsNCgkJCQkJCWVsZW1lbnQ6IHRoaXMsDQoJCQkJCQl0aXRsZTogcGFyZW50LmF0dHIoICJ0aXRsZSIgKQ0KCQkJCQl9Ow0KCQkJCQlwYXJlbnQuYXR0ciggInRpdGxlIiwgIiIgKTsNCgkJCQl9DQoJCQl9ICk7DQoJCX0NCg0KCQl0aGlzLl9yZWdpc3RlckNsb3NlSGFuZGxlcnMoIGV2ZW50LCB0YXJnZXQgKTsNCgkJdGhpcy5fdXBkYXRlQ29udGVudCggdGFyZ2V0LCBldmVudCApOw0KCX0sDQoNCglfdXBkYXRlQ29udGVudDogZnVuY3Rpb24oIHRhcmdldCwgZXZlbnQgKSB7DQoJCXZhciBjb250ZW50LA0KCQkJY29udGVudE9wdGlvbiA9IHRoaXMub3B0aW9ucy5jb250ZW50LA0KCQkJdGhhdCA9IHRoaXMsDQoJCQlldmVudFR5cGUgPSBldmVudCA/IGV2ZW50LnR5cGUgOiBudWxsOw0KDQoJCWlmICggdHlwZW9mIGNvbnRlbnRPcHRpb24gPT09ICJzdHJpbmciIHx8IGNvbnRlbnRPcHRpb24ubm9kZVR5cGUgfHwNCgkJCQljb250ZW50T3B0aW9uLmpxdWVyeSApIHsNCgkJCXJldHVybiB0aGlzLl9vcGVuKCBldmVudCwgdGFyZ2V0LCBjb250ZW50T3B0aW9uICk7DQoJCX0NCg0KCQljb250ZW50ID0gY29udGVudE9wdGlvbi5jYWxsKCB0YXJnZXRbIDAgXSwgZnVuY3Rpb24oIHJlc3BvbnNlICkgew0KDQoJCQkvLyBJRSBtYXkgaW5zdGFudGx5IHNlcnZlIGEgY2FjaGVkIHJlc3BvbnNlIGZvciBhamF4IHJlcXVlc3RzDQoJCQkvLyBkZWxheSB0aGlzIGNhbGwgdG8gX29wZW4gc28gdGhlIG90aGVyIGNhbGwgdG8gX29wZW4gcnVucyBmaXJzdA0KCQkJdGhhdC5fZGVsYXkoIGZ1bmN0aW9uKCkgew0KDQoJCQkJLy8gSWdub3JlIGFzeW5jIHJlc3BvbnNlIGlmIHRvb2x0aXAgd2FzIGNsb3NlZCBhbHJlYWR5DQoJCQkJaWYgKCAhdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLW9wZW4iICkgKSB7DQoJCQkJCXJldHVybjsNCgkJCQl9DQoNCgkJCQkvLyBKUXVlcnkgY3JlYXRlcyBhIHNwZWNpYWwgZXZlbnQgZm9yIGZvY3VzaW4gd2hlbiBpdCBkb2Vzbid0DQoJCQkJLy8gZXhpc3QgbmF0aXZlbHkuIFRvIGltcHJvdmUgcGVyZm9ybWFuY2UsIHRoZSBuYXRpdmUgZXZlbnQNCgkJCQkvLyBvYmplY3QgaXMgcmV1c2VkIGFuZCB0aGUgdHlwZSBpcyBjaGFuZ2VkLiBUaGVyZWZvcmUsIHdlIGNhbid0DQoJCQkJLy8gcmVseSBvbiB0aGUgdHlwZSBiZWluZyBjb3JyZWN0IGFmdGVyIHRoZSBldmVudCBmaW5pc2hlZA0KCQkJCS8vIGJ1YmJsaW5nLCBzbyB3ZSBzZXQgaXQgYmFjayB0byB0aGUgcHJldmlvdXMgdmFsdWUuICgjODc0MCkNCgkJCQlpZiAoIGV2ZW50ICkgew0KCQkJCQlldmVudC50eXBlID0gZXZlbnRUeXBlOw0KCQkJCX0NCgkJCQl0aGlzLl9vcGVuKCBldmVudCwgdGFyZ2V0LCByZXNwb25zZSApOw0KCQkJfSApOw0KCQl9ICk7DQoJCWlmICggY29udGVudCApIHsNCgkJCXRoaXMuX29wZW4oIGV2ZW50LCB0YXJnZXQsIGNvbnRlbnQgKTsNCgkJfQ0KCX0sDQoNCglfb3BlbjogZnVuY3Rpb24oIGV2ZW50LCB0YXJnZXQsIGNvbnRlbnQgKSB7DQoJCXZhciB0b29sdGlwRGF0YSwgdG9vbHRpcCwgZGVsYXllZFNob3csIGExMXlDb250ZW50LA0KCQkJcG9zaXRpb25PcHRpb24gPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApOw0KDQoJCWlmICggIWNvbnRlbnQgKSB7DQoJCQlyZXR1cm47DQoJCX0NCg0KCQkvLyBDb250ZW50IGNhbiBiZSB1cGRhdGVkIG11bHRpcGxlIHRpbWVzLiBJZiB0aGUgdG9vbHRpcCBhbHJlYWR5DQoJCS8vIGV4aXN0cywgdGhlbiBqdXN0IHVwZGF0ZSB0aGUgY29udGVudCBhbmQgYmFpbC4NCgkJdG9vbHRpcERhdGEgPSB0aGlzLl9maW5kKCB0YXJnZXQgKTsNCgkJaWYgKCB0b29sdGlwRGF0YSApIHsNCgkJCXRvb2x0aXBEYXRhLnRvb2x0aXAuZmluZCggIi51aS10b29sdGlwLWNvbnRlbnQiICkuaHRtbCggY29udGVudCApOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJLy8gSWYgd2UgaGF2ZSBhIHRpdGxlLCBjbGVhciBpdCB0byBwcmV2ZW50IHRoZSBuYXRpdmUgdG9vbHRpcA0KCQkvLyB3ZSBoYXZlIHRvIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGRlZmluaW5nIGEgdGl0bGUgaWYgbm9uZSBleGlzdHMNCgkJLy8gKHdlIGRvbid0IHdhbnQgdG8gY2F1c2UgYW4gZWxlbWVudCB0byBzdGFydCBtYXRjaGluZyBbdGl0bGVdKQ0KCQkvLw0KCQkvLyBXZSB1c2UgcmVtb3ZlQXR0ciBvbmx5IGZvciBrZXkgZXZlbnRzLCB0byBhbGxvdyBJRSB0byBleHBvcnQgdGhlIGNvcnJlY3QNCgkJLy8gYWNjZXNzaWJsZSBhdHRyaWJ1dGVzLiBGb3IgbW91c2UgZXZlbnRzLCBzZXQgdG8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkDQoJCS8vIG5hdGl2ZSB0b29sdGlwIHNob3dpbmcgdXAgKGhhcHBlbnMgb25seSB3aGVuIHJlbW92aW5nIGluc2lkZSBtb3VzZW92ZXIpLg0KCQlpZiAoIHRhcmdldC5pcyggIlt0aXRsZV0iICkgKSB7DQoJCQlpZiAoIGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICJtb3VzZW92ZXIiICkgew0KCQkJCXRhcmdldC5hdHRyKCAidGl0bGUiLCAiIiApOw0KCQkJfSBlbHNlIHsNCgkJCQl0YXJnZXQucmVtb3ZlQXR0ciggInRpdGxlIiApOw0KCQkJfQ0KCQl9DQoNCgkJdG9vbHRpcERhdGEgPSB0aGlzLl90b29sdGlwKCB0YXJnZXQgKTsNCgkJdG9vbHRpcCA9IHRvb2x0aXBEYXRhLnRvb2x0aXA7DQoJCXRoaXMuX2FkZERlc2NyaWJlZEJ5KCB0YXJnZXQsIHRvb2x0aXAuYXR0ciggImlkIiApICk7DQoJCXRvb2x0aXAuZmluZCggIi51aS10b29sdGlwLWNvbnRlbnQiICkuaHRtbCggY29udGVudCApOw0KDQoJCS8vIFN1cHBvcnQ6IFZvaWNlb3ZlciBvbiBPUyBYLCBKQVdTIG9uIElFIDw9IDkNCgkJLy8gSkFXUyBhbm5vdW5jZXMgZGVsZXRpb25zIGV2ZW4gd2hlbiBhcmlhLXJlbGV2YW50PSJhZGRpdGlvbnMiDQoJCS8vIFZvaWNlb3ZlciB3aWxsIHNvbWV0aW1lcyByZS1yZWFkIHRoZSBlbnRpcmUgbG9nIHJlZ2lvbidzIGNvbnRlbnRzIGZyb20gdGhlIGJlZ2lubmluZw0KCQl0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCk7DQoJCWExMXlDb250ZW50ID0gJCggIjxkaXY+IiApLmh0bWwoIHRvb2x0aXAuZmluZCggIi51aS10b29sdGlwLWNvbnRlbnQiICkuaHRtbCgpICk7DQoJCWExMXlDb250ZW50LnJlbW92ZUF0dHIoICJuYW1lIiApLmZpbmQoICJbbmFtZV0iICkucmVtb3ZlQXR0ciggIm5hbWUiICk7DQoJCWExMXlDb250ZW50LnJlbW92ZUF0dHIoICJpZCIgKS5maW5kKCAiW2lkXSIgKS5yZW1vdmVBdHRyKCAiaWQiICk7DQoJCWExMXlDb250ZW50LmFwcGVuZFRvKCB0aGlzLmxpdmVSZWdpb24gKTsNCg0KCQlmdW5jdGlvbiBwb3NpdGlvbiggZXZlbnQgKSB7DQoJCQlwb3NpdGlvbk9wdGlvbi5vZiA9IGV2ZW50Ow0KCQkJaWYgKCB0b29sdGlwLmlzKCAiOmhpZGRlbiIgKSApIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCQl0b29sdGlwLnBvc2l0aW9uKCBwb3NpdGlvbk9wdGlvbiApOw0KCQl9DQoJCWlmICggdGhpcy5vcHRpb25zLnRyYWNrICYmIGV2ZW50ICYmIC9ebW91c2UvLnRlc3QoIGV2ZW50LnR5cGUgKSApIHsNCgkJCXRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7DQoJCQkJbW91c2Vtb3ZlOiBwb3NpdGlvbg0KCQkJfSApOw0KDQoJCQkvLyB0cmlnZ2VyIG9uY2UgdG8gb3ZlcnJpZGUgZWxlbWVudC1yZWxhdGl2ZSBwb3NpdGlvbmluZw0KCQkJcG9zaXRpb24oIGV2ZW50ICk7DQoJCX0gZWxzZSB7DQoJCQl0b29sdGlwLnBvc2l0aW9uKCAkLmV4dGVuZCggew0KCQkJCW9mOiB0YXJnZXQNCgkJCX0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApICk7DQoJCX0NCg0KCQl0b29sdGlwLmhpZGUoKTsNCg0KCQl0aGlzLl9zaG93KCB0b29sdGlwLCB0aGlzLm9wdGlvbnMuc2hvdyApOw0KDQoJCS8vIEhhbmRsZSB0cmFja2luZyB0b29sdGlwcyB0aGF0IGFyZSBzaG93biB3aXRoIGEgZGVsYXkgKCM4NjQ0KS4gQXMgc29vbg0KCQkvLyBhcyB0aGUgdG9vbHRpcCBpcyB2aXNpYmxlLCBwb3NpdGlvbiB0aGUgdG9vbHRpcCB1c2luZyB0aGUgbW9zdCByZWNlbnQNCgkJLy8gZXZlbnQuDQoJCS8vIEFkZHMgdGhlIGNoZWNrIHRvIGFkZCB0aGUgdGltZXJzIG9ubHkgd2hlbiBib3RoIGRlbGF5IGFuZCB0cmFjayBvcHRpb25zIGFyZSBzZXQgKCMxNDY4MikNCgkJaWYgKCB0aGlzLm9wdGlvbnMudHJhY2sgJiYgdGhpcy5vcHRpb25zLnNob3cgJiYgdGhpcy5vcHRpb25zLnNob3cuZGVsYXkgKSB7DQoJCQlkZWxheWVkU2hvdyA9IHRoaXMuZGVsYXllZFNob3cgPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7DQoJCQkJaWYgKCB0b29sdGlwLmlzKCAiOnZpc2libGUiICkgKSB7DQoJCQkJCXBvc2l0aW9uKCBwb3NpdGlvbk9wdGlvbi5vZiApOw0KCQkJCQljbGVhckludGVydmFsKCBkZWxheWVkU2hvdyApOw0KCQkJCX0NCgkJCX0sICQuZnguaW50ZXJ2YWwgKTsNCgkJfQ0KDQoJCXRoaXMuX3RyaWdnZXIoICJvcGVuIiwgZXZlbnQsIHsgdG9vbHRpcDogdG9vbHRpcCB9ICk7DQoJfSwNCg0KCV9yZWdpc3RlckNsb3NlSGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgdGFyZ2V0ICkgew0KCQl2YXIgZXZlbnRzID0gew0KCQkJa2V5dXA6IGZ1bmN0aW9uKCBldmVudCApIHsNCgkJCQlpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FU0NBUEUgKSB7DQoJCQkJCXZhciBmYWtlRXZlbnQgPSAkLkV2ZW50KCBldmVudCApOw0KCQkJCQlmYWtlRXZlbnQuY3VycmVudFRhcmdldCA9IHRhcmdldFsgMCBdOw0KCQkJCQl0aGlzLmNsb3NlKCBmYWtlRXZlbnQsIHRydWUgKTsNCgkJCQl9DQoJCQl9DQoJCX07DQoNCgkJLy8gT25seSBiaW5kIHJlbW92ZSBoYW5kbGVyIGZvciBkZWxlZ2F0ZWQgdGFyZ2V0cy4gTm9uLWRlbGVnYXRlZA0KCQkvLyB0b29sdGlwcyB3aWxsIGhhbmRsZSB0aGlzIGluIGRlc3Ryb3kuDQoJCWlmICggdGFyZ2V0WyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICkgew0KCQkJZXZlbnRzLnJlbW92ZSA9IGZ1bmN0aW9uKCkgew0KCQkJCXRoaXMuX3JlbW92ZVRvb2x0aXAoIHRoaXMuX2ZpbmQoIHRhcmdldCApLnRvb2x0aXAgKTsNCgkJCX07DQoJCX0NCg0KCQlpZiAoICFldmVudCB8fCBldmVudC50eXBlID09PSAibW91c2VvdmVyIiApIHsNCgkJCWV2ZW50cy5tb3VzZWxlYXZlID0gImNsb3NlIjsNCgkJfQ0KCQlpZiAoICFldmVudCB8fCBldmVudC50eXBlID09PSAiZm9jdXNpbiIgKSB7DQoJCQlldmVudHMuZm9jdXNvdXQgPSAiY2xvc2UiOw0KCQl9DQoJCXRoaXMuX29uKCB0cnVlLCB0YXJnZXQsIGV2ZW50cyApOw0KCX0sDQoNCgljbG9zZTogZnVuY3Rpb24oIGV2ZW50ICkgew0KCQl2YXIgdG9vbHRpcCwNCgkJCXRoYXQgPSB0aGlzLA0KCQkJdGFyZ2V0ID0gJCggZXZlbnQgPyBldmVudC5jdXJyZW50VGFyZ2V0IDogdGhpcy5lbGVtZW50ICksDQoJCQl0b29sdGlwRGF0YSA9IHRoaXMuX2ZpbmQoIHRhcmdldCApOw0KDQoJCS8vIFRoZSB0b29sdGlwIG1heSBhbHJlYWR5IGJlIGNsb3NlZA0KCQlpZiAoICF0b29sdGlwRGF0YSApIHsNCg0KCQkJLy8gV2Ugc2V0IHVpLXRvb2x0aXAtb3BlbiBpbW1lZGlhdGVseSB1cG9uIG9wZW4gKGluIG9wZW4oKSksIGJ1dCBvbmx5IHNldCB0aGUNCgkJCS8vIGFkZGl0aW9uYWwgZGF0YSBvbmNlIHRoZXJlJ3MgYWN0dWFsbHkgY29udGVudCB0byBzaG93IChpbiBfb3BlbigpKS4gU28gZXZlbiBpZiB0aGUNCgkJCS8vIHRvb2x0aXAgZG9lc24ndCBoYXZlIGZ1bGwgZGF0YSwgd2UgYWx3YXlzIHJlbW92ZSB1aS10b29sdGlwLW9wZW4gaW4gY2FzZSB3ZSdyZSBpbg0KCQkJLy8gdGhlIHBlcmlvZCBiZXR3ZWVuIG9wZW4oKSBhbmQgX29wZW4oKS4NCgkJCXRhcmdldC5yZW1vdmVEYXRhKCAidWktdG9vbHRpcC1vcGVuIiApOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdG9vbHRpcCA9IHRvb2x0aXBEYXRhLnRvb2x0aXA7DQoNCgkJLy8gRGlzYWJsaW5nIGNsb3NlcyB0aGUgdG9vbHRpcCwgc28gd2UgbmVlZCB0byB0cmFjayB3aGVuIHdlJ3JlIGNsb3NpbmcNCgkJLy8gdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcCBpbiBjYXNlIHRoZSB0b29sdGlwIGJlY29tZXMgZGlzYWJsZWQgb24gY2xvc2UNCgkJaWYgKCB0b29sdGlwRGF0YS5jbG9zaW5nICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJLy8gQ2xlYXIgdGhlIGludGVydmFsIGZvciBkZWxheWVkIHRyYWNraW5nIHRvb2x0aXBzDQoJCWNsZWFySW50ZXJ2YWwoIHRoaXMuZGVsYXllZFNob3cgKTsNCg0KCQkvLyBPbmx5IHNldCB0aXRsZSBpZiB3ZSBoYWQgb25lIGJlZm9yZSAoc2VlIGNvbW1lbnQgaW4gX29wZW4oKSkNCgkJLy8gSWYgdGhlIHRpdGxlIGF0dHJpYnV0ZSBoYXMgY2hhbmdlZCBzaW5jZSBvcGVuKCksIGRvbid0IHJlc3RvcmUNCgkJaWYgKCB0YXJnZXQuZGF0YSggInVpLXRvb2x0aXAtdGl0bGUiICkgJiYgIXRhcmdldC5hdHRyKCAidGl0bGUiICkgKSB7DQoJCQl0YXJnZXQuYXR0ciggInRpdGxlIiwgdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICk7DQoJCX0NCg0KCQl0aGlzLl9yZW1vdmVEZXNjcmliZWRCeSggdGFyZ2V0ICk7DQoNCgkJdG9vbHRpcERhdGEuaGlkaW5nID0gdHJ1ZTsNCgkJdG9vbHRpcC5zdG9wKCB0cnVlICk7DQoJCXRoaXMuX2hpZGUoIHRvb2x0aXAsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHsNCgkJCXRoYXQuX3JlbW92ZVRvb2x0aXAoICQoIHRoaXMgKSApOw0KCQl9ICk7DQoNCgkJdGFyZ2V0LnJlbW92ZURhdGEoICJ1aS10b29sdGlwLW9wZW4iICk7DQoJCXRoaXMuX29mZiggdGFyZ2V0LCAibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cCIgKTsNCg0KCQkvLyBSZW1vdmUgJ3JlbW92ZScgYmluZGluZyBvbmx5IG9uIGRlbGVnYXRlZCB0YXJnZXRzDQoJCWlmICggdGFyZ2V0WyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICkgew0KCQkJdGhpcy5fb2ZmKCB0YXJnZXQsICJyZW1vdmUiICk7DQoJCX0NCgkJdGhpcy5fb2ZmKCB0aGlzLmRvY3VtZW50LCAibW91c2Vtb3ZlIiApOw0KDQoJCWlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gIm1vdXNlbGVhdmUiICkgew0KCQkJJC5lYWNoKCB0aGlzLnBhcmVudHMsIGZ1bmN0aW9uKCBpZCwgcGFyZW50ICkgew0KCQkJCSQoIHBhcmVudC5lbGVtZW50ICkuYXR0ciggInRpdGxlIiwgcGFyZW50LnRpdGxlICk7DQoJCQkJZGVsZXRlIHRoYXQucGFyZW50c1sgaWQgXTsNCgkJCX0gKTsNCgkJfQ0KDQoJCXRvb2x0aXBEYXRhLmNsb3NpbmcgPSB0cnVlOw0KCQl0aGlzLl90cmlnZ2VyKCAiY2xvc2UiLCBldmVudCwgeyB0b29sdGlwOiB0b29sdGlwIH0gKTsNCgkJaWYgKCAhdG9vbHRpcERhdGEuaGlkaW5nICkgew0KCQkJdG9vbHRpcERhdGEuY2xvc2luZyA9IGZhbHNlOw0KCQl9DQoJfSwNCg0KCV90b29sdGlwOiBmdW5jdGlvbiggZWxlbWVudCApIHsNCgkJdmFyIHRvb2x0aXAgPSAkKCAiPGRpdj4iICkuYXR0ciggInJvbGUiLCAidG9vbHRpcCIgKSwNCgkJCWNvbnRlbnQgPSAkKCAiPGRpdj4iICkuYXBwZW5kVG8oIHRvb2x0aXAgKSwNCgkJCWlkID0gdG9vbHRpcC51bmlxdWVJZCgpLmF0dHIoICJpZCIgKTsNCg0KCQl0aGlzLl9hZGRDbGFzcyggY29udGVudCwgInVpLXRvb2x0aXAtY29udGVudCIgKTsNCgkJdGhpcy5fYWRkQ2xhc3MoIHRvb2x0aXAsICJ1aS10b29sdGlwIiwgInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIgKTsNCg0KCQl0b29sdGlwLmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbyggZWxlbWVudCApICk7DQoNCgkJcmV0dXJuIHRoaXMudG9vbHRpcHNbIGlkIF0gPSB7DQoJCQllbGVtZW50OiBlbGVtZW50LA0KCQkJdG9vbHRpcDogdG9vbHRpcA0KCQl9Ow0KCX0sDQoNCglfZmluZDogZnVuY3Rpb24oIHRhcmdldCApIHsNCgkJdmFyIGlkID0gdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLWlkIiApOw0KCQlyZXR1cm4gaWQgPyB0aGlzLnRvb2x0aXBzWyBpZCBdIDogbnVsbDsNCgl9LA0KDQoJX3JlbW92ZVRvb2x0aXA6IGZ1bmN0aW9uKCB0b29sdGlwICkgew0KCQl0b29sdGlwLnJlbW92ZSgpOw0KCQlkZWxldGUgdGhpcy50b29sdGlwc1sgdG9vbHRpcC5hdHRyKCAiaWQiICkgXTsNCgl9LA0KDQoJX2FwcGVuZFRvOiBmdW5jdGlvbiggdGFyZ2V0ICkgew0KCQl2YXIgZWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCAiLnVpLWZyb250LCBkaWFsb2ciICk7DQoNCgkJaWYgKCAhZWxlbWVudC5sZW5ndGggKSB7DQoJCQllbGVtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHk7DQoJCX0NCg0KCQlyZXR1cm4gZWxlbWVudDsNCgl9LA0KDQoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgew0KCQl2YXIgdGhhdCA9IHRoaXM7DQoNCgkJLy8gQ2xvc2Ugb3BlbiB0b29sdGlwcw0KCQkkLmVhY2goIHRoaXMudG9vbHRpcHMsIGZ1bmN0aW9uKCBpZCwgdG9vbHRpcERhdGEgKSB7DQoNCgkJCS8vIERlbGVnYXRlIHRvIGNsb3NlIG1ldGhvZCB0byBoYW5kbGUgY29tbW9uIGNsZWFudXANCgkJCXZhciBldmVudCA9ICQuRXZlbnQoICJibHVyIiApLA0KCQkJCWVsZW1lbnQgPSB0b29sdGlwRGF0YS5lbGVtZW50Ow0KCQkJZXZlbnQudGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCA9IGVsZW1lbnRbIDAgXTsNCgkJCXRoYXQuY2xvc2UoIGV2ZW50LCB0cnVlICk7DQoNCgkJCS8vIFJlbW92ZSBpbW1lZGlhdGVseTsgZGVzdHJveWluZyBhbiBvcGVuIHRvb2x0aXAgZG9lc24ndCB1c2UgdGhlDQoJCQkvLyBoaWRlIGFuaW1hdGlvbg0KCQkJJCggIiMiICsgaWQgKS5yZW1vdmUoKTsNCg0KCQkJLy8gUmVzdG9yZSB0aGUgdGl0bGUNCgkJCWlmICggZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApIHsNCg0KCQkJCS8vIElmIHRoZSB0aXRsZSBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQgc2luY2Ugb3BlbigpLCBkb24ndCByZXN0b3JlDQoJCQkJaWYgKCAhZWxlbWVudC5hdHRyKCAidGl0bGUiICkgKSB7DQoJCQkJCWVsZW1lbnQuYXR0ciggInRpdGxlIiwgZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApOw0KCQkJCX0NCgkJCQllbGVtZW50LnJlbW92ZURhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApOw0KCQkJfQ0KCQl9ICk7DQoJCXRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKTsNCgl9DQp9ICk7DQoNCi8vIERFUFJFQ0FURUQNCi8vIFRPRE86IFN3aXRjaCByZXR1cm4gYmFjayB0byB3aWRnZXQgZGVjbGFyYXRpb24gYXQgdG9wIG9mIGZpbGUgd2hlbiB0aGlzIGlzIHJlbW92ZWQNCmlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICkgew0KDQoJLy8gQmFja2NvbXBhdCBmb3IgdG9vbHRpcENsYXNzIG9wdGlvbg0KCSQud2lkZ2V0KCAidWkudG9vbHRpcCIsICQudWkudG9vbHRpcCwgew0KCQlvcHRpb25zOiB7DQoJCQl0b29sdGlwQ2xhc3M6IG51bGwNCgkJfSwNCgkJX3Rvb2x0aXA6IGZ1bmN0aW9uKCkgew0KCQkJdmFyIHRvb2x0aXBEYXRhID0gdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7DQoJCQlpZiAoIHRoaXMub3B0aW9ucy50b29sdGlwQ2xhc3MgKSB7DQoJCQkJdG9vbHRpcERhdGEudG9vbHRpcC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLnRvb2x0aXBDbGFzcyApOw0KCQkJfQ0KCQkJcmV0dXJuIHRvb2x0aXBEYXRhOw0KCQl9DQoJfSApOw0KfQ0KDQp2YXIgd2lkZ2V0c1Rvb2x0aXAgPSAkLnVpLnRvb2x0aXA7DQoNCg0KDQoNCn0pKTs=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="24" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/modalDiv.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/modalDiv.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="10" startDateTime="2024-11-07T09:35:45.929+00:00" startTime="2238" endTime="2249" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="9" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="2303">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9tb2RhbERpdi5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXMNClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYjsgY3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>2042</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjA0Mg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMjA0Mg0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ICANCglmdW5jdGlvbiByZXBvcnRpbmdFcnJvciggZSkNCgl7DQoJCS8vIGdldCBlcnJvciBtZXNzYWdlIGlmIHRoZXJlIGFyZSBzb21lDQoJCXZhciAkaiA9IGpRdWVyeS5ub0NvbmZsaWN0KCk7DQoJCXZhciBkYXRhU3RyaW5nPScnOw0KCQl2YXIgbWVzc2FnZXMgPSAnJzsNCgkJdHJ5ew0KCQkJaWYoJGooJyNNZXNzYWdlQXJlYScpLmxlbmd0aCkNCgkJCXsNCgkJCQl2YXIgZXJyb3JzID0gJGooJyNNZXNzYWdlQXJlYScpLmZpbmQoJ2xpJyk7DQoJCQ0KCQkJCXZhciBjb3VudCA9IGVycm9ycy5sZW5ndGg7DQoNCgkJCQlpZihjb3VudCAhPT0wICkNCgkJCQl7DQoJCQkJCXZhciB0ZXh0Q29udGVudFByb3AgPSAiaW5uZXJUZXh0IiBpbiBkb2N1bWVudC5ib2R5ID8gImlubmVyVGV4dCIgOiAidGV4dENvbnRlbnQiOw0KDQoJCQkJCWZvcih2YXIgaSA9MDsgaTxjb3VudDsgaSsrKQ0KCQkJCQl7DQoJCQkJCQltZXNzYWdlcyA9IG1lc3NhZ2VzICsgZXJyb3JzW2ldW3RleHRDb250ZW50UHJvcF0gKycuXG4nOw0KCQkJCQl9DQoJCQkJCWRhdGFTdHJpbmcgPSAnZXJyb3JzPScrIG1lc3NhZ2VzKycmJzsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJY2F0Y2ggKGUpDQoJCXsNCgkJCQ0KCQl9DQoJCWRhdGFTdHJpbmc9J3dteF90cmFuc2FjdGlvbl9pZD0nKyRqKCcjd214X3RyYW5zYWN0aW9uX2lkJykudmFsKCk7DQoJCWRhdGFTdHJpbmc9IGRhdGFTdHJpbmcrJyZ3bXhfdHJhbnNhY3Rpb25fZGF0ZT0nKyRqKCcjd214X3RyYW5zYWN0aW9uX2RhdGUnKS52YWwoKTsNCgkJZGF0YVN0cmluZyA9IGRhdGFTdHJpbmcrJyZyZXF1ZXN0VVJMPScrbG9jYXRpb24ucGF0aG5hbWU7DQoJCWRhdGFTdHJpbmcgPSBkYXRhU3RyaW5nKycmJyskaignI3JlcG9ydEZvcm0nKS5zZXJpYWxpemUoKTsNCgkJDQoJCSRqLmFqYXgoe3R5cGU6J1BPU1QnLCB1cmw6ICdub25qc2YvcmVwb3J0ZXJyb3InLCBkYXRhOmRhdGFTdHJpbmcsIHN1Y2Nlc3M6IA0KCQkJCWZ1bmN0aW9uKHJlc3BvbnNlKSB7IA0KCQkJCQkkaignI3Jlc3BvbnNlJykuaHRtbChyZXNwb25zZSk7IA0KCQkJCX0NCgkJCQl9DQoJCQkpOw0KCQllLmRpc2FibGVkPXRydWU7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCglmdW5jdGlvbiBjbG9zZU1vZGFsV2luZG93KG1vZGFsV3JhcElkKQ0KCXsNCgkJdmFyIG1lc2FzZ2VXcmFwQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxXcmFwSWQpOw0KCQltZXNhc2dlV3JhcEJveC5zdHlsZS5kaXNwbGF5PSdub25lJw0KCX0NCgkNCglmdW5jdGlvbiBvcGVuTW9kYWxXaW5kb3cobW9kYWxXcmFwSWQsIG1vZGFsQm94SWQsIHVybCkNCgl7DQoJCXZhciBtZXNhc2dlV3JhcEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsV3JhcElkKTsNCgkgCXZhciBtZXNzYWdlQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxCb3hJZCk7DQoJIAkNCgkJdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oZSkgew0KCQkJaWYoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDIwMCkgew0KCQkJCW1lc3NhZ2VCb3guaW5uZXJIVE1MID0geGhyLnJlc3BvbnNlVGV4dDsNCgkJCQltZXNhc2dlV3JhcEJveC5zdHlsZS5kaXNwbGF5PSdpbmxpbmUnOw0KCQkJfQ0KCQl9DQoJCXhoci5vcGVuKCJHRVQiLHVybCwgdHJ1ZSk7DQoJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAndGV4dC9odG1sJyk7DQoJCXhoci5zZW5kKCk7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJDQoJZnVuY3Rpb24gb3BlbkNsaWVudE1vZGFsV2luZG93KG1vZGFsV3JhcElkLCBtb2RhbEJveElkKQ0KCXsNCgkJdmFyIG1lc2FzZ2VXcmFwQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxXcmFwSWQpOw0KCSAJdmFyIG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbEJveElkKTsNCgkJbWVzYXNnZVdyYXBCb3guc3R5bGUuZGlzcGxheT0naW5saW5lJzsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCgk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="25" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jquery.treegrid.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jquery.treegrid.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="11" startDateTime="2024-11-07T09:35:45.941+00:00" startTime="2250" endTime="2261" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="8" waitTime="0" receiveTime="2" sslNegotiateTime="-1" responseBodySize="24647">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qcXVlcnkudHJlZWdyaWQuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>24385</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjQzODU=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMjQzODUNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyoNCiAqIGpRdWVyeSB0cmVlZ3JpZCBQbHVnaW4gMC4yLjANCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXhhemFuL2pxdWVyeS10cmVlZ3JpZA0KICoNCiAqIENvcHlyaWdodCAyMDEzLCBQb21hemFuIE1heA0KICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlcy4NCiAqLw0KKGZ1bmN0aW9uKCQpIHsNCg0KICAgIHZhciBtZXRob2RzID0gew0KICAgICAgICAvKioNCiAgICAgICAgICogSW5pdGlhbGl6ZSB0cmVlDQogICAgICAgICAqDQogICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAgICAgICAqIEByZXR1cm5zIHtPYmplY3RbXX0NCiAgICAgICAgICovDQogICAgICAgIGluaXRUcmVlOiBmdW5jdGlvbihvcHRpb25zKSB7DQogICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy50cmVlZ3JpZC5kZWZhdWx0cywgb3B0aW9ucyk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ3NldFRyZWVDb250YWluZXInLCAkKHRoaXMpKTsNCiAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnc2V0U2V0dGluZ3MnLCBzZXR0aW5ncyk7DQogICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2V0Um9vdE5vZGVzLmFwcGx5KHRoaXMsIFskKHRoaXMpXSkudHJlZWdyaWQoJ2luaXROb2RlJywgc2V0dGluZ3MpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBJbml0aWFsaXplIG5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzDQogICAgICAgICAqIEByZXR1cm5zIHtPYmplY3RbXX0NCiAgICAgICAgICovDQogICAgICAgIGluaXROb2RlOiBmdW5jdGlvbihzZXR0aW5ncykgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBjaGlsZE5vZGVzOw0KICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdzZXRUcmVlQ29udGFpbmVyJywgc2V0dGluZ3MuZ2V0VHJlZUdyaWRDb250YWluZXIuYXBwbHkodGhpcykpOw0KCQkJCSR0aGlzLnRyZWVncmlkKCdzZXRTZXR0aW5ncycsIHNldHRpbmdzKTsNCiAgICAgICAgICAgICAgICBjaGlsZE5vZGVzID0gJHRoaXMudHJlZWdyaWQoJ2dldENoaWxkTm9kZXMnKTsNCiAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZXMudHJlZWdyaWQoJ2luaXROb2RlJywgc2V0dGluZ3MpOw0KICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnaW5pdEV4cGFuZGVyJykudHJlZWdyaWQoJ2luaXRFdmVudHMnKS50cmVlZ3JpZCgnaW5pdFN0YXRlJykudHJlZWdyaWQoImluaXRTZXR0aW5nc0V2ZW50cyIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vICAgICR0aGlzLnRyZWVncmlkKCdpbml0RXhwYW5kZXInKS50cmVlZ3JpZCgnaW5pdEluZGVudCcpLnRyZWVncmlkKCdpbml0RXZlbnRzJykudHJlZWdyaWQoJ2luaXRTdGF0ZScpLnRyZWVncmlkKCJpbml0U2V0dGluZ3NFdmVudHMiKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogSW5pdGlhbGl6ZSBub2RlIGV2ZW50cw0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Tm9kZX0NCiAgICAgICAgICovDQogICAgICAgIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgIC8vU2F2ZSBzdGF0ZSBvbiBjaGFuZ2UNCiAgICAgICAgICAgICR0aGlzLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdyZW5kZXInKTsNCiAgICAgICAgICAgICAgICBpZiAoJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnc2F2ZVN0YXRlJykpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ3NhdmVTdGF0ZScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy9EZWZhdWx0IGJlaGF2aW9yIG9uIGNvbGxhcHNlDQogICAgICAgICAgICAkdGhpcy5vbigiY29sbGFwc2UiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBjaGlsZEhlYWRlck5vZGVzOw0KICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCd0cmVlZ3JpZC1leHBhbmRlZCcpOw0KICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCd0cmVlZ3JpZC1jb2xsYXBzZWQnKTsNCiAgICAgICAgICAgICAgICAkdGhpcy5uZXh0KCJ0ciIpLmhpZGUoKTsNCiAgICAgICAgICAgICAgICBjaGlsZEhlYWRlck5vZGVzID0gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0U2V0dGluZycsICdnZXRDaGlsZEhlYWRlck5vZGVzJykuYXBwbHkodGhpcywgWyQodGhpcykudHJlZWdyaWQoJ2dldE5vZGVJZCcpLCAkKHRoaXMpLmNsb3Nlc3QoJ3Rib2R5JyldKTsNCgkJCQljaGlsZEhlYWRlck5vZGVzLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLmhpZGUoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy9EZWZhdWx0IGJlaGF2aW9yIG9uIGV4cGFuZA0KICAgICAgICAgICAgJHRoaXMub24oImV4cGFuZCIsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksIGNoaWxkSGVhZGVyTm9kZXM7DQogICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3RyZWVncmlkLWNvbGxhcHNlZCcpOw0KICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCd0cmVlZ3JpZC1leHBhbmRlZCcpOw0KICAgICAgICAgICAgICAgICR0aGlzLm5leHQoInRyIikuc2hvdygpOw0KICAgICAgICAgICAgICAgIGNoaWxkSGVhZGVyTm9kZXMgPSAkKHRoaXMpLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldENoaWxkSGVhZGVyTm9kZXMnKS5hcHBseSh0aGlzLCBbJCh0aGlzKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJyksICQodGhpcykuY2xvc2VzdCgndGJvZHknKV0pOw0KCQkJCWNoaWxkSGVhZGVyTm9kZXMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluaXRpYWxpemUgZXZlbnRzIGZyb20gc2V0dGluZ3MNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge05vZGV9DQogICAgICAgICAqLw0KICAgICAgICBpbml0U2V0dGluZ3NFdmVudHM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgIC8vU2F2ZSBzdGF0ZSBvbiBjaGFuZ2UNCiAgICAgICAgICAgICR0aGlzLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ29uQ2hhbmdlJykpID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ29uQ2hhbmdlJykuYXBwbHkoJHRoaXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy9EZWZhdWx0IGJlaGF2aW9yIG9uIGNvbGxhcHNlDQogICAgICAgICAgICAkdGhpcy5vbigiY29sbGFwc2UiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ29uQ29sbGFwc2UnKSkgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnb25Db2xsYXBzZScpLmFwcGx5KCR0aGlzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIC8vRGVmYXVsdCBiZWhhdmlvciBvbiBleHBhbmQNCiAgICAgICAgICAgICR0aGlzLm9uKCJleHBhbmQiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ29uRXhwYW5kJykpID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ29uRXhwYW5kJykuYXBwbHkoJHRoaXMpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluaXRpYWxpemUgZXhwYW5kZXIgZm9yIG5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge05vZGV9DQogICAgICAgICAqLw0KICAgICAgICBpbml0RXhwYW5kZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSwgZXhwYW5kZXI7DQoJCQl2YXIgY2VsbCA9ICR0aGlzLmZpbmQoJ3RkJykuZ2V0KCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ3RyZWVDb2x1bW4nKSk7DQoJCQl2YXIgdHBsID0gJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZXhwYW5kZXJUZW1wbGF0ZScpOw0KCQkJJCh0cGwpLmFwcGVuZFRvKGNlbGwpOw0KCQkJJChjZWxsKS5jbGljayhmdW5jdGlvbigpIHsNCgkJCQkkKCQodGhpcykuY2xvc2VzdCgndHInKSkudHJlZWdyaWQoJ3RvZ2dsZScpOw0KCQkJfSk7DQogICAgICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBJbml0aWFsaXplIGluZGVudCBmb3Igbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Tm9kZX0NCiAgICAgICAgICovDQovKiAgICAgICAgIGluaXRJbmRlbnQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgICR0aGlzLmZpbmQoJy50cmVlZ3JpZC1pbmRlbnQnKS5yZW1vdmUoKTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJCh0aGlzKS50cmVlZ3JpZCgnZ2V0RGVwdGgnKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgJCgkdGhpcy50cmVlZ3JpZCgnZ2V0U2V0dGluZycsICdpbmRlbnRUZW1wbGF0ZScpKS5pbnNlcnRCZWZvcmUoJHRoaXMuZmluZCgnLnRyZWVncmlkLWV4cGFuZGVyJykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9LCAqLw0KICAgICAgICAvKioNCiAgICAgICAgICogSW5pdGlhbGlzZSBzdGF0ZSBvZiBub2RlDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCiAgICAgICAgaW5pdFN0YXRlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICAgICBpZiAoJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnc2F2ZVN0YXRlJykgJiYgISR0aGlzLnRyZWVncmlkKCdpc0ZpcnN0SW5pdCcpKSB7DQogICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ3Jlc3RvcmVTdGF0ZScpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnaW5pdGlhbFN0YXRlJykgPT09ICJleHBhbmRlZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2V4cGFuZCcpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdjb2xsYXBzZScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIFJldHVybiB0cnVlIGlmIHRoaXMgdHJlZSB3YXMgbmV2ZXIgYmVlbiBpbml0aWFsaXNlZA0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0NCiAgICAgICAgICovDQogICAgICAgIGlzRmlyc3RJbml0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciB0cmVlID0gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0VHJlZUNvbnRhaW5lcicpOw0KICAgICAgICAgICAgaWYgKHRyZWUuZGF0YSgnZmlyc3RfaW5pdCcpID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICB0cmVlLmRhdGEoJ2ZpcnN0X2luaXQnLCAkLmNvb2tpZSh0cmVlLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ3NhdmVTdGF0ZU5hbWUnKSkgPT09IHVuZGVmaW5lZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJlZS5kYXRhKCdmaXJzdF9pbml0Jyk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBTYXZlIHN0YXRlIG9mIGN1cnJlbnQgbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Tm9kZX0NCiAgICAgICAgICovDQogICAgICAgIHNhdmVTdGF0ZTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgaWYgKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ3NhdmVTdGF0ZU1ldGhvZCcpID09PSAnY29va2llJykgew0KDQogICAgICAgICAgICAgICAgdmFyIHN0YXRlQXJyYXlTdHJpbmcgPSAkLmNvb2tpZSgkdGhpcy50cmVlZ3JpZCgnZ2V0U2V0dGluZycsICdzYXZlU3RhdGVOYW1lJykpIHx8ICcnOw0KICAgICAgICAgICAgICAgIHZhciBzdGF0ZUFycmF5ID0gKHN0YXRlQXJyYXlTdHJpbmcgPT09ICcnID8gW10gOiBzdGF0ZUFycmF5U3RyaW5nLnNwbGl0KCcsJykpOw0KICAgICAgICAgICAgICAgIHZhciBub2RlSWQgPSAkdGhpcy50cmVlZ3JpZCgnZ2V0Tm9kZUlkJyk7DQoNCiAgICAgICAgICAgICAgICBpZiAoJHRoaXMudHJlZWdyaWQoJ2lzRXhwYW5kZWQnKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KG5vZGVJZCwgc3RhdGVBcnJheSkgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUFycmF5LnB1c2gobm9kZUlkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHRoaXMudHJlZWdyaWQoJ2lzQ29sbGFwc2VkJykpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheShub2RlSWQsIHN0YXRlQXJyYXkpICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVBcnJheS5zcGxpY2UoJC5pbkFycmF5KG5vZGVJZCwgc3RhdGVBcnJheSksIDEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICQuY29va2llKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ3NhdmVTdGF0ZU5hbWUnKSwgc3RhdGVBcnJheS5qb2luKCcsJykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogUmVzdG9yZSBzdGF0ZSBvZiBjdXJyZW50IG5vZGUuDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCiAgICAgICAgcmVzdG9yZVN0YXRlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICAgICBpZiAoJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnc2F2ZVN0YXRlTWV0aG9kJykgPT09ICdjb29raWUnKSB7DQogICAgICAgICAgICAgICAgdmFyIHN0YXRlQXJyYXkgPSAkLmNvb2tpZSgkdGhpcy50cmVlZ3JpZCgnZ2V0U2V0dGluZycsICdzYXZlU3RhdGVOYW1lJykpLnNwbGl0KCcsJyk7DQogICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheSgkdGhpcy50cmVlZ3JpZCgnZ2V0Tm9kZUlkJyksIHN0YXRlQXJyYXkpICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnZXhwYW5kJyk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2NvbGxhcHNlJyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBNZXRob2QgcmV0dXJuIHNldHRpbmcgYnkgbmFtZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0ge3R5cGV9IG5hbWUNCiAgICAgICAgICogQHJldHVybnMge3VucmVzb2x2ZWR9DQogICAgICAgICAqLw0KICAgICAgICBnZXRTZXR0aW5nOiBmdW5jdGlvbihuYW1lKSB7DQogICAgICAgICAgICBpZiAoISQodGhpcykudHJlZWdyaWQoJ2dldFRyZWVDb250YWluZXInKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykudHJlZWdyaWQoJ2dldFRyZWVDb250YWluZXInKS5kYXRhKCdzZXR0aW5ncycpW25hbWVdOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogQWRkIG5ldyBzZXR0aW5ncw0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MNCiAgICAgICAgICovDQogICAgICAgIHNldFNldHRpbmdzOiBmdW5jdGlvbihzZXR0aW5ncykgew0KICAgICAgICAgICAgJCh0aGlzKS50cmVlZ3JpZCgnZ2V0VHJlZUNvbnRhaW5lcicpLmRhdGEoJ3NldHRpbmdzJywgc2V0dGluZ3MpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogUmV0dXJuIHRyZWUgY29udGFpbmVyDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtIdG1sRWxlbWVudH0NCiAgICAgICAgICovDQogICAgICAgIGdldFRyZWVDb250YWluZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgndHJlZWdyaWQnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNldCB0cmVlIGNvbnRhaW5lcg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0ge0h0bWxFO2VtZW50fSBjb250YWluZXINCiAgICAgICAgICovDQogICAgICAgIHNldFRyZWVDb250YWluZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgndHJlZWdyaWQnLCBjb250YWluZXIpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiBhbGwgcm9vdCBub2RlcyBvZiB0cmVlLg0KICAgICAgICAgKg0KICAgICAgICAgKiBTdGFydCBpbml0IGFsbCBjaGlsZCBub2RlcyBmcm9tIGl0Lg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9DQogICAgICAgICAqLw0KICAgICAgICBnZXRSb290Tm9kZXM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZ2V0Um9vdE5vZGVzJykuYXBwbHkodGhpcywgWyQodGhpcykudHJlZWdyaWQoJ2dldFRyZWVDb250YWluZXInKV0pOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiBhbGwgbm9kZXMgb2YgdHJlZS4NCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge0FycmF5fQ0KICAgICAgICAgKi8NCi8qICAgICAgICAgZ2V0QWxsTm9kZXM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZ2V0QWxsTm9kZXMnKS5hcHBseSh0aGlzLCBbJCh0aGlzKS50cmVlZ3JpZCgnZ2V0VHJlZUNvbnRhaW5lcicpXSk7DQogICAgICAgIH0sICovDQogICAgICAgIC8qKg0KICAgICAgICAgKiBNdGhvZCByZXR1cm4gdHJ1ZSBpZiBlbGVtZW50IGlzIE5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30NCiAgICAgICAgICovDQogICAgICAgIGlzTm9kZTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJykgIT09IG51bGw7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBNdGhvZCByZXR1cm4gaWQgb2Ygbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfQ0KICAgICAgICAgKi8NCiAgICAgICAgZ2V0Tm9kZUlkOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGlmICgkKHRoaXMpLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldE5vZGVJZCcpID09PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldE5vZGVJZCcpLmFwcGx5KHRoaXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiBwYXJlbnQgaWQgb2Ygbm9kZSBvciBudWxsIGlmIHJvb3Qgbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfQ0KICAgICAgICAgKi8NCiAgICAgICAgZ2V0UGFyZW50Tm9kZUlkOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlSWQgPSAkKHRoaXMpLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldFBhcmVudE5vZGVJZCcpLmFwcGx5KHRoaXMpOw0KICAgICAgICAgICAgcmV0dXJuIHBhcmVudE5vZGVJZDsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIE1ldGhvZCByZXR1cm4gcGFyZW50IG5vZGUgb3IgbnVsbCBpZiByb290IG5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge09iamVjdFtdfQ0KICAgICAgICAgKi8NCiAgICAgICAgZ2V0UGFyZW50Tm9kZTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSwgcGFyZW50Tm9kZUlkID0gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0UGFyZW50Tm9kZUlkJyk7DQogICAgICAgICAgICBpZiAocGFyZW50Tm9kZUlkID09PSBudWxsKSB7DQogICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0U2V0dGluZycsICdnZXROb2RlQnlJZCcpLmFwcGx5KHRoaXMsIFtwYXJlbnROb2RlSWQsICQodGhpcykudHJlZWdyaWQoJ2dldFRyZWVDb250YWluZXInKV0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnROb2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiB0YWJsZSBoZWFkZXIgbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0W119DQogICAgICAgICAqLw0KLyogICAgICAgICBnZXRUYWJsZUhlYWRlck5vZGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIHRhYmxlSGVhZGVyTm9kZSwgbm9kZUlkID0gJCh0aGlzKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJyk7DQogICAgICAgICAgICBpZiAobm9kZUlkID09PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRhYmxlSGVhZGVyTm9kZSA9ICQodGhpcykudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZ2V0VGFibGVIZWFkZXJOb2RlQnlJZCcpLmFwcGx5KHRoaXMsIFtub2RlSWQsICQodGhpcykudHJlZWdyaWQoJ2dldFRyZWVDb250YWluZXInKV0pOw0KICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZUhlYWRlck5vZGU7DQogICAgICAgICAgICB9DQogICAgICAgIH0sICovDQogICAgICAgIC8qKg0KICAgICAgICAgKiBNZXRob2QgcmV0dXJuIGFycmF5IG9mIGNoaWxkIG5vZGVzIG9yIG51bGwgaWYgbm9kZSBpcyBsZWFmDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtPYmplY3RbXX0NCiAgICAgICAgICovDQogICAgICAgIGdldENoaWxkTm9kZXM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZ2V0Q2hpbGROb2RlcycpLmFwcGx5KHRoaXMsIFskKHRoaXMpLnRyZWVncmlkKCdnZXROb2RlSWQnKSwgJCh0aGlzKS50cmVlZ3JpZCgnZ2V0VHJlZUNvbnRhaW5lcicpXSk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBNZXRob2QgcmV0dXJuIGFycmF5IG9mIGNoaWxkIGhlYWRlciBub2RlcyBvciBudWxsIGlmIG5vZGUgaXMgbGVhZg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0W119DQogICAgICAgICAqLw0KICAgICAgICBnZXRDaGlsZEhlYWRlck5vZGVzOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldENoaWxkSGVhZGVyTm9kZXMnKS5hcHBseSh0aGlzLCBbJCh0aGlzKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJyksICQodGhpcykuY2xvc2VzdCgndGJvZHknKV0pOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiBkZXB0aCBvZiB0cmVlLg0KICAgICAgICAgKg0KICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBkZXB0aCBvZiB0aGUgZ2l2ZW4gbm9kZQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfQ0KICAgICAgICAgKi8NCiAgICAgICAgZ2V0RGVwdGg6IGZ1bmN0aW9uKG5vZGUpIHsNCgkJCXZhciBkZXB0aCA9IDAsIHRlbXBsYXRlID0gL2RlcHRoLShbQS1aYS16MC05Xy1dKykvOw0KCQkJDQogICAgICAgICAgICBpZiAodGVtcGxhdGUudGVzdCgkKHRoaXMpLmF0dHIoJ2NsYXNzJykpKSB7DQogICAgICAgICAgICAgICAgZGVwdGggPSB0ZW1wbGF0ZS5leGVjKCQodGhpcykuYXR0cignY2xhc3MnKSlbMV07DQogICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihkZXB0aCk7IH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybnMgdHJ1ZSBpZiBub2RlIGlzIHRoZSByb290IG5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59DQogICAgICAgICAqLw0KICAgICAgICBpc1Jvb3Q6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIGRlcHRoOw0KICAgICAgICAgICAgZGVwdGggPSAkKHRoaXMpLnRyZWVncmlkKCdnZXREZXB0aCcpOw0KICAgICAgICAgICAgcmV0dXJuIGRlcHRoID09PSAwOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiB0cnVlIGlmIG5vZGUgaGFzIG5vIGNoaWxkIG5vZGVzDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufQ0KICAgICAgICAgKi8NCiAgICAgICAgaXNMZWFmOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRyZWVncmlkKCdnZXRDaGlsZE5vZGVzJykubGVuZ3RoID09PSAwOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiB0cnVlIGlmIG5vZGUgbGFzdCBpbiBicmFuY2gNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59DQogICAgICAgICAqLw0KLyogICAgICAgICBpc0xhc3Q6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYgKCQodGhpcykudHJlZWdyaWQoJ2lzTm9kZScpKSB7DQogICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSAkKHRoaXMpLnRyZWVncmlkKCdnZXRQYXJlbnROb2RlJyk7DQogICAgICAgICAgICAgICAgaWYgKHBhcmVudE5vZGUgPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykudHJlZWdyaWQoJ2dldE5vZGVJZCcpID09PSAkKHRoaXMpLnRyZWVncmlkKCdnZXRSb290Tm9kZXMnKS5sYXN0KCkudHJlZWdyaWQoJ2dldE5vZGVJZCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnRyZWVncmlkKCdnZXROb2RlSWQnKSA9PT0gcGFyZW50Tm9kZS50cmVlZ3JpZCgnZ2V0Q2hpbGROb2RlcycpLmxhc3QoKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9LCAqLw0KICAgICAgICAvKioNCiAgICAgICAgICogTWV0aG9kIHJldHVybiB0cnVlIGlmIG5vZGUgZmlyc3QgaW4gYnJhbmNoDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufQ0KICAgICAgICAgKi8NCi8qICAgICAgICAgaXNGaXJzdDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBpZiAoJCh0aGlzKS50cmVlZ3JpZCgnaXNOb2RlJykpIHsNCiAgICAgICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9ICQodGhpcykudHJlZWdyaWQoJ2dldFBhcmVudE5vZGUnKTsNCiAgICAgICAgICAgICAgICBpZiAocGFyZW50Tm9kZSA9PT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS50cmVlZ3JpZCgnZ2V0Tm9kZUlkJykgPT09ICQodGhpcykudHJlZWdyaWQoJ2dldFJvb3ROb2RlcycpLmZpcnN0KCkudHJlZWdyaWQoJ2dldE5vZGVJZCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnRyZWVncmlkKCdnZXROb2RlSWQnKSA9PT0gcGFyZW50Tm9kZS50cmVlZ3JpZCgnZ2V0Q2hpbGROb2RlcycpLmZpcnN0KCkudHJlZWdyaWQoJ2dldE5vZGVJZCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSwgKi8NCiAgICAgICAgLyoqDQogICAgICAgICAqIFJldHVybiB0cnVlIGlmIG5vZGUgZXhwYW5kZWQNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59DQogICAgICAgICAqLw0KICAgICAgICBpc0V4cGFuZGVkOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmhhc0NsYXNzKCd0cmVlZ3JpZC1leHBhbmRlZCcpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogUmV0dXJuIHRydWUgaWYgbm9kZSBjb2xsYXBzZWQNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59DQogICAgICAgICAqLw0KICAgICAgICBpc0NvbGxhcHNlZDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5oYXNDbGFzcygndHJlZWdyaWQtY29sbGFwc2VkJyk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBhdCBsZWFzdCBvbmUgb2YgcGFyZW50IG5vZGUgaXMgY29sbGFwc2VkDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufQ0KICAgICAgICAgKi8NCiAgICAgICAgaXNPbmVPZlBhcmVudHNDb2xsYXBzZWQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgIGlmICgkdGhpcy50cmVlZ3JpZCgnaXNSb290JykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy50cmVlZ3JpZCgnZ2V0UGFyZW50Tm9kZScpLnRyZWVncmlkKCdpc0NvbGxhcHNlZCcpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy50cmVlZ3JpZCgnZ2V0UGFyZW50Tm9kZScpLnRyZWVncmlkKCdpc09uZU9mUGFyZW50c0NvbGxhcHNlZCcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIEV4cGFuZCBub2RlDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCiAgICAgICAgZXhwYW5kOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLnRyZWVncmlkKCJpc0V4cGFuZGVkIikpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcigiZXhwYW5kIik7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoImNoYW5nZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogRXhwYW5kIGFsbCBub2Rlcw0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Tm9kZX0NCiAgICAgICAgICovDQovKiAgICAgICAgIGV4cGFuZEFsbDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2dldFJvb3ROb2RlcycpLnRyZWVncmlkKCdleHBhbmRSZWN1cnNpdmUnKTsNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwgKi8NCiAgICAgICAgLyoqDQogICAgICAgICAqIEV4cGFuZCBjdXJyZW50IG5vZGUgYW5kIGFsbCBjaGlsZCBub2RlcyBiZWdpbiBmcm9tIGN1cnJlbnQNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge05vZGV9DQogICAgICAgICAqLw0KLyogICAgICAgICBleHBhbmRSZWN1cnNpdmU6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdleHBhbmQnKTsNCiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLnRyZWVncmlkKCdpc0xlYWYnKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnZ2V0Q2hpbGROb2RlcycpLnRyZWVncmlkKCdleHBhbmRSZWN1cnNpdmUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwgKi8NCiAgICAgICAgLyoqDQogICAgICAgICAqIENvbGxhcHNlIG5vZGUNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge05vZGV9DQogICAgICAgICAqLw0KICAgICAgICBjb2xsYXBzZTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7DQogICAgICAgICAgICAgICAgaWYgKCEkdGhpcy50cmVlZ3JpZCgnaXNMZWFmJykgJiYgISR0aGlzLnRyZWVncmlkKCJpc0NvbGxhcHNlZCIpKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoImNvbGxhcHNlIik7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoImNoYW5nZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICogQ29sbGFwc2UgYWxsIG5vZGVzDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCi8qICAgICAgICAgY29sbGFwc2VBbGw6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdnZXRSb290Tm9kZXMnKS50cmVlZ3JpZCgnY29sbGFwc2VSZWN1cnNpdmUnKTsNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwgKi8NCiAgICAgICAgLyoqDQogICAgICAgICAqIENvbGxhcHNlIGN1cnJlbnQgbm9kZSBhbmQgYWxsIGNoaWxkIG5vZGVzIGJlZ2luIGZyb20gY3VycmVudA0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7Tm9kZX0NCiAgICAgICAgICovDQovKiAgICAgICAgIGNvbGxhcHNlUmVjdXJzaXZlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnY29sbGFwc2UnKTsNCiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLnRyZWVncmlkKCdpc0xlYWYnKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgnZ2V0Q2hpbGROb2RlcycpLnRyZWVncmlkKCdjb2xsYXBzZVJlY3Vyc2l2ZScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LCAqLw0KICAgICAgICAvKioNCiAgICAgICAgICogRXhwYW5kIGlmIGNvbGxhcHNlZCwgQ29sbGFwc2UgaWYgZXhwYW5kZWQNCiAgICAgICAgICoNCiAgICAgICAgICogQHJldHVybnMge05vZGV9DQogICAgICAgICAqLw0KICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCiAgICAgICAgICAgIGlmICgkdGhpcy50cmVlZ3JpZCgnaXNFeHBhbmRlZCcpKSB7DQogICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2NvbGxhcHNlJyk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR0aGlzLnRyZWVncmlkKCdleHBhbmQnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIFJlbmRlcmluZyBub2RlDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsNCg0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy50cmVlZ3JpZCgnaXNPbmVPZlBhcmVudHNDb2xsYXBzZWQnKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy5oaWRlKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLnRyZWVncmlkKCdpc0xlYWYnKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmVlZ3JpZCgncmVuZGVyRXhwYW5kZXInKTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJlZWdyaWQoJ2dldENoaWxkTm9kZXMnKS50cmVlZ3JpZCgncmVuZGVyJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiBSZW5kZXJpbmcgZXhwYW5kZXIgZGVwZW5kcyBvbiBub2RlIHN0YXRlDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtOb2RlfQ0KICAgICAgICAgKi8NCiAgICAgICAgcmVuZGVyRXhwYW5kZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOw0KICAgICAgICAgICAgICAgIHZhciBleHBhbmRlciA9ICR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2dldEV4cGFuZGVyJykuYXBwbHkodGhpcyk7DQogICAgICAgICAgICAgICAgaWYgKGV4cGFuZGVyKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy50cmVlZ3JpZCgnaXNDb2xsYXBzZWQnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZXIucmVtb3ZlQ2xhc3MoJHRoaXMudHJlZWdyaWQoJ2dldFNldHRpbmcnLCAnZXhwYW5kZXJDb2xsYXBzZWRDbGFzcycpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVyLmFkZENsYXNzKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2V4cGFuZGVyRXhwYW5kZWRDbGFzcycpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVyLnJlbW92ZUNsYXNzKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2V4cGFuZGVyRXhwYW5kZWRDbGFzcycpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVyLmFkZENsYXNzKCR0aGlzLnRyZWVncmlkKCdnZXRTZXR0aW5nJywgJ2V4cGFuZGVyQ29sbGFwc2VkQ2xhc3MnKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgalF1ZXJ5LmZuLnRyZWVncmlkID0gZnVuY3Rpb24obWV0aG9kKSB7DQogICAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHsNCiAgICAgICAgICAgIHJldHVybiBtZXRob2RzWyBtZXRob2QgXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kKSB7DQogICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0VHJlZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kIHdpdGggbmFtZSAnICsgbWV0aG9kICsgJyBkb2VzIG5vdCBleGlzdHMgZm9yIGpRdWVyeS50cmVlZ3JpZCcpOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvKioNCiAgICAgKiAgUGx1Z2luJ3MgZGVmYXVsdCBvcHRpb25zDQogICAgICovDQogICAgalF1ZXJ5LmZuLnRyZWVncmlkLmRlZmF1bHRzID0gew0KICAgICAgICBpbml0aWFsU3RhdGU6ICdjb2xsYXBzZWQnLA0KICAgICAgICBzYXZlU3RhdGU6IGZhbHNlLA0KICAgICAgICBzYXZlU3RhdGVNZXRob2Q6ICdjb29raWUnLA0KICAgICAgICBzYXZlU3RhdGVOYW1lOiAndHJlZS1ncmlkLXN0YXRlJywNCiAgICAgICAgZXhwYW5kZXJUZW1wbGF0ZTogJzxzcGFuIGNsYXNzPSJ0cmVlZ3JpZC1leHBhbmRlciI+PC9zcGFuPicsDQogICAgICAgIC8vaW5kZW50VGVtcGxhdGU6ICc8c3BhbiBjbGFzcz0idHJlZWdyaWQtaW5kZW50Ij48L3NwYW4+JywNCiAgICAgICAgZXhwYW5kZXJFeHBhbmRlZENsYXNzOiAndHJlZWdyaWQtZXhwYW5kZXItZXhwYW5kZWQnLA0KICAgICAgICBleHBhbmRlckNvbGxhcHNlZENsYXNzOiAndHJlZWdyaWQtZXhwYW5kZXItY29sbGFwc2VkJywNCiAgICAgICAgdHJlZUNvbHVtbjogMCwNCiAgICAgICAgZ2V0RXhwYW5kZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZmluZCgnLnRyZWVncmlkLWV4cGFuZGVyJyk7DQogICAgICAgIH0sDQogICAgICAgIGdldE5vZGVJZDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAvdHJlZWdyaWQtKFtBLVphLXowLTlfLV0rKS87DQogICAgICAgICAgICBpZiAodGVtcGxhdGUudGVzdCgkKHRoaXMpLmF0dHIoJ2NsYXNzJykpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlLmV4ZWMoJCh0aGlzKS5hdHRyKCdjbGFzcycpKVsxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9LA0KICAgICAgICBnZXRQYXJlbnROb2RlSWQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUsIHRlbXBsYXRlID0gL3RyZWVncmlkLXBhcmVudC0oW0EtWmEtejAtOV8tXSspLzsNCiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZS50ZXN0KCQodGhpcykuYXR0cignY2xhc3MnKSkpIHsNCiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gdGVtcGxhdGUuZXhlYygkKHRoaXMpLmF0dHIoJ2NsYXNzJykpWzFdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnROb2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0sDQogICAgICAgIGdldE5vZGVCeUlkOiBmdW5jdGlvbihpZCwgdHJlZWdyaWRDb250YWluZXIpIHsNCiAgICAgICAgICAgIHZhciBub2RlLCB0ZW1wbGF0ZUNsYXNzID0gInRyZWVncmlkLSIgKyBpZDsNCiAgICAgICAgICAgIG5vZGUgPSB0cmVlZ3JpZENvbnRhaW5lci5maW5kKCd0ci4nICsgdGVtcGxhdGVDbGFzcyk7DQogICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0VGFibGVIZWFkZXJOb2RlQnlJZDogZnVuY3Rpb24oaWQsIHRyZWVncmlkQ29udGFpbmVyKSB7DQogICAgICAgICAgICB2YXIgbm9kZSwgdGVtcGxhdGVDbGFzcyA9ICJ0cmVlZ3JpZEhlYWRlci0tIiArIGlkOw0KICAgICAgICAgICAgbm9kZSA9IHRyZWVncmlkQ29udGFpbmVyLmZpbmQoJ3RoZWFkLicgKyB0ZW1wbGF0ZUNsYXNzKTsNCiAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICB9LA0KICAgICAgICBnZXRDaGlsZE5vZGVzOiBmdW5jdGlvbihpZCwgdHJlZWdyaWRDb250YWluZXIpIHsNCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUNsYXNzID0gInRyZWVncmlkLXBhcmVudC0iICsgaWQ7DQogICAgICAgICAgICByZXR1cm4gdHJlZWdyaWRDb250YWluZXIuZmluZCgndHIuJyArIHRlbXBsYXRlQ2xhc3MpOw0KICAgICAgICB9LA0KICAgICAgICBnZXRDaGlsZEhlYWRlck5vZGVzOiBmdW5jdGlvbihpZCwgdHJlZWdyaWRDb250YWluZXIpIHsNCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUNsYXNzID0gInRyZWVncmlkSGVhZGVyLXBhcmVudC0iICsgaWQ7DQogICAgICAgICAgICByZXR1cm4gdHJlZWdyaWRDb250YWluZXIuZmluZCgndGhlYWQuJyArIHRlbXBsYXRlQ2xhc3MpOw0KICAgICAgICB9LA0KICAgICAgICBnZXRUcmVlR3JpZENvbnRhaW5lcjogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gJCgnLnRyZWVDb250YWluZXInKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0Um9vdE5vZGVzOiBmdW5jdGlvbih0cmVlZ3JpZENvbnRhaW5lcikgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICQuZ3JlcCh0cmVlZ3JpZENvbnRhaW5lci5maW5kKCd0cicpLCBmdW5jdGlvbihlbGVtZW50KSB7DQogICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZXMgPSAkKGVsZW1lbnQpLmF0dHIoJ2NsYXNzJyk7DQogICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlQ2xhc3MgPSAvdHJlZWdyaWQtKFtBLVphLXowLTlfLV0rKS87DQogICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlUGFyZW50Q2xhc3MgPSAvdHJlZWdyaWQtcGFyZW50LShbQS1aYS16MC05Xy1dKykvOw0KICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZUNsYXNzLnRlc3QoY2xhc3NOYW1lcykgJiYgIXRlbXBsYXRlUGFyZW50Q2xhc3MudGVzdChjbGFzc05hbWVzKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuICQocmVzdWx0KTsNCiAgICAgICAgfSwNCi8qICAgICAgICAgZ2V0QWxsTm9kZXM6IGZ1bmN0aW9uKHRyZWVncmlkQ29udGFpbmVyKSB7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gJC5ncmVwKHRyZWVncmlkQ29udGFpbmVyLmZpbmQoJ3RyJyksIGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lcyA9ICQoZWxlbWVudCkuYXR0cignY2xhc3MnKTsNCiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVDbGFzcyA9IC90cmVlZ3JpZC0oW0EtWmEtejAtOV8tXSspLzsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVDbGFzcy50ZXN0KGNsYXNzTmFtZXMpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gJChyZXN1bHQpOw0KICAgICAgICB9LCAqLw0KICAgICAgICAvL0V2ZW50cw0KICAgICAgICBvbkNvbGxhcHNlOiBudWxsLA0KICAgICAgICBvbkV4cGFuZDogbnVsbCwNCiAgICAgICAgb25DaGFuZ2U6IG51bGwNCg0KICAgIH07DQp9KShqUXVlcnkpOw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="26" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/are-you-sure.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/are-you-sure.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="12" startDateTime="2024-11-07T09:35:45.952+00:00" startTime="2261" endTime="2270" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="8" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="12846">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9hcmUteW91LXN1cmUuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tL3dteC93ZWxjb21lLmZhY2VzDQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA3LjA7IFdpbmRvd3MgTlQgNS4xOyBUcmlkZW50LzQuMDsgLk5FVCBDTFIgMS4xLjQzMjI7IC5ORVQgQ0xSIDIuMC41MDcyNzsgSW5mb1BhdGguMTsgLk5FVCBDTFIgMy4wLjQ1MDYuMjE1MjsgLk5FVCBDTFIgMy41LjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi11cw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IHFhLndteGJvbHQud2VzY29kaXN0LmNvbQ0KQ29va2llOiBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI7IGN1cnJlbnRMb2dpblBhZ2U9V2ViOyBKU0VTU0lPTklEPTAwMDBvclI2c0d3eHdaUFlydjlacmxwV1hzeToxaGE3bzU3Y287IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYg0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>12584</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTI1ODQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMTI1ODQNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClgtUG93ZXJlZC1CeTogU2VydmxldC8zLjANClgtVUEtQ29tcGF0aWJsZTogSUU9OA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQNCkNvbnRlbnQtTGFuZ3VhZ2U6IGVuLVVTDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LyohDQogKiBqUXVlcnkgUGx1Z2luOiBBcmUtWW91LVN1cmUgKERpcnR5IEZvcm0gRGV0ZWN0aW9uKQ0KICogaHR0cHM6Ly9naXRodWIuY29tL2NvZGVkYW5jZS9qcXVlcnkuQXJlWW91U3VyZS8NCiAqDQogKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxNCwgQ2hyaXMgRGFuY2UgYW5kIFBhcGVyQ3V0IFNvZnR3YXJlIGh0dHA6Ly93d3cucGFwZXJjdXQuY29tLw0KICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKg0KICogQXV0aG9yOiAgY2hyaXMuZGFuY2VAcGFwZXJjdXQuY29tDQogKiBWZXJzaW9uOiAxLjkuMA0KICogRGF0ZTogICAgMTN0aCBBdWd1c3QgMjAxNA0KICoNCiAqICBXTVggVVNBR0UgRVhBTVBMRSAodGhpcyBleGFtcGxlIGRpZmZlcnMgc2xpZ2h0bHkgZnJvbSB0aGUgdXNhZ2UgaW4gdGhlIGFyZS15b3Utc3VyZSBwbHVnaW4gZG9jdW1lbnRhdGlvbi4gU2VlIHRoZSBkb2N1bWVudGF0aW9uDQogKiAgICAgICAgICAgICAgICAgICAgIG5lYXIgdGhlIGVuZCBvZiB0aGUgcHJvZ3JhbSBmb3IgYW4gZXhwbGFuYXRpb24pOg0KICogIA0KICogCWpRdWVyeSggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHsNCiAqICAgICAgalF1ZXJ5KCJbaWQ9J2JvZHlfdGlsZTptZXRhRWRpdFBhcmVudCddIikuYXJlWW91U3VyZSggeydzdWJGb3JtU2VsZWN0b3InOid0YWJsZS5ydVN1cmVDaGVjayBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSd9ICk7DQogKiAgfSk7DQogKiAgDQogKiAgQURWQU5DRUQgVVNBR0UNCiAqICANCiAqICBNYWtlIEFyZS1Zb3UtU3VyZSAic2lsZW50IiBieSBkaXNhYmxpbmcgdGhlIHdhcm5pbmcgbWVzc2FnZSANCiAqICAodHJhY2tpbmcvbW9uaXRvcmluZyBvbmx5IG1vZGUpLiBUaGlzIG9wdGlvbiBpcyB1c2VmdWwgd2hlbiB5b3Ugd2lzaCB0byANCiAqICB1c2UgdGhlIGRpcnR5L3NhdmUgZXZlbnRzIGFuZC9vciB1c2UgdGhlIGRpcnR5bmVzcyB0cmFja2luZyBpbiB5b3VyIG93biANCiAqICBiZWZvcmV1bmxvYWQgaGFuZGxlci4NCiAqDQogKiAgJCgnZm9ybScpLmFyZVlvdVN1cmUoIHsnc2lsZW50Jzp0cnVlfSApOw0KICogIA0KICogIERpcnR5bmVzcyBDaGFuZ2UgRXZlbnRzDQogKiAgDQogKiAgQXJlLVlvdS1TdXJlIGZpcmVzIG9mZiAiZGlydHkiIGFuZCAiY2xlYW4iIGV2ZW50cyB3aGVuIHRoZSBmb3JtJ3Mgc3RhdGUNCiAqICBjaGFuZ2VzLiBZb3UgY2FuIGJpbmQoKSBvciBvbigpLCB0aGVzZSBldmVudHMgdG8gaW1wbGVtZW50IHlvdXIgb3duIGZvcm0NCiAqICBzdGF0ZSBsb2dpYy4gIEEgZ29vZCBleGFtcGxlIGlzIGVuYWJsaW5nL2Rpc2FibGluZyBhIFNhdmUgYnV0dG9uLg0KICoNCiAqICAidGhpcyIgcmVmZXJzIHRvIHRoZSBmb3JtIHRoYXQgZmlyZWQgdGhlIGV2ZW50Lg0KICoNCiAqICAgJCgnZm9ybScpLm9uKCdkaXJ0eS5hcmVZb3VTdXJlJywgZnVuY3Rpb24oKSB7DQogKiAgICAgLy8gRW5hYmxlIHNhdmUgYnV0dG9uIG9ubHkgYXMgdGhlIGZvcm0gaXMgZGlydHkuDQogKiAgICAgJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPSJzdWJtaXQiXScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7DQogKiAgIH0pOw0KICogICAkKCdmb3JtJykub24oJ2NsZWFuLmFyZVlvdVN1cmUnLCBmdW5jdGlvbigpIHsNCiAqICAgICAvLyBGb3JtIGlzIGNsZWFuIHNvIG5vdGhpbmcgdG8gc2F2ZSAtIGRpc2FibGUgdGhlIHNhdmUgYnV0dG9uLg0KICogICAgICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT0ic3VibWl0Il0nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpOw0KICogICB9KTsNCiAqICAgDQogKiAgSXQncyBlYXN5IHRvIHRlc3QgaWYgYSBmb3JtIGlzIGRpcnR5IGluIHlvdXIgb3duIGNvZGUgLSBqdXN0IGNoZWNrDQogKiAgdG8gc2VlIGlmIGl0IGhhcyBhICJkaXJ0eSIgQ1NTIGNsYXNzLg0KICoNCiAqICAgaWYgKCQoJyNteS1mb3JtJykuaGFzQ2xhc3MoJ2RpcnR5JykpIHsNCiAqICAgICAgIC8vIERvIHNvbWV0aGluZw0KICogICB9DQogKg0KICogIElmIHlvdSdyZSBkeW5hbWljYWxseSBhZGRpbmcgbmV3IGZpZWxkcy9pbnB1dHMsIGFuZCB3b3VsZCBsaWtlIHRvIHRyYWNrIA0KICogIHRoZWlyIHN0YXRlLCB0cmlnZ2VyIEFyZS1Zb3UtU3VyZSB0byByZXNjYW4gdGhlIGZvcm0gbGlrZSB0aGlzOg0KICoNCiAqICAgJCgnI215LWZvcm0nKS50cmlnZ2VyKCdyZXNjYW4uYXJlWW91U3VyZScpOw0KICoNCiAqICBJZiB5b3UnZCBsaWtlIHRvIHJlc2V0L3JlaW5pdGlhbGl6ZSB0aGUgZm9ybSdzIHN0YXRlIGFzIGNsZWFuIGFuZCANCiAqICBzdGFydCB0cmFja2luZyBhZ2FpbiBmcm9tIHRoaXMgbmV3IHBvaW50IG9ud2FyZHMsIHRyaWdnZXIgdGhlDQogKiAgcmVpbml0aWFsaXplIGFzIGZvbGxvd3MuIFRoaXMgaXMgaGFuZHkgaWYgc2F5IHlvdSd2ZSBtYW5hZ2luZyB5b3VyDQogKiAgb3duIGZvcm0gc2F2ZS9zdWJtaXQgdmlhIGFzeWMgQUpBWC4NCiAqDQogKiAgICQoJyNteS1mb3JtJykudHJpZ2dlcigncmVpbml0aWFsaXplLmFyZVlvdVN1cmUnKTsNCiAqDQogKiAgSW4gc29tZSBzaXR1YXRpb25zIGl0IG1heSBiZSBkZXNpcmFibGUgdG8gbG9vayBmb3Igb3RoZXIgZm9ybQ0KICogIGNoYW5nZXMgc3VjaCBhcyBhZGRpbmcvcmVtb3ZpbmcgZmllbGRzLiBUaGlzIGlzIHVzZWZ1bCBmb3IgZm9ybXMgdGhhdA0KICogIGNhbiBjaGFuZ2UgdGhlaXIgZmllbGQgY291bnQsIHN1Y2ggYXMgYWRkcmVzcy9waG9uZSBjb250YWN0IGZvcm1zLg0KICogIEZvcm0gZXhhbXBsZSwgeW91IG1pZ2h0IHJlbW92ZSBhIHBob25lIG51bWJlciBmcm9tIGEgY29udGFjdCBmb3JtDQogKiAgYnV0IHVwZGF0ZSBub3RoaW5nIGVsc2UuIFRoaXMgc2hvdWxkIG1hcmsgdGhlIGZvcm0gYXMgZGlydHkuDQogKg0KICogICAkKCdmb3JtJykuYXJlWW91U3VyZSggeydhZGRSZW1vdmVGaWVsZHNNYXJrc0RpcnR5Jzp0cnVlfSApOw0KICoNCiAqICBTb21ldGltZXMgeW91IG1heSBoYXZlIGFkdmFuY2VkIGZvcm1zIHRoYXQgY2hhbmdlIHRoZWlyIHN0YXRlIHZpYQ0KICogIGN1c3RvbSBKYXZhU2NyaXB0IG9yIDNyZC1wYXJ0eSBjb21wb25lbnQgSmF2YVNjcmlwdC4gQXJlLVlvdS1TdXJlIG1heSANCiAqICBub3QgYXV0b21hdGljYWxseSBkZXRlY3QgdGhlc2Ugc3RhdGUgY2hhbmdlcy4gRXhhbXBsZXMgaW5jbHVkZToNCiAqICAgICAtIFVwZGF0aW5nIGEgaGlkZGVuIGlucHV0IGZpZWxkIHZpYSBiYWNrZ3JvdW5kIEpTLg0KICogICAgIC0gVXNpbmcgYSBbcmljaCBXWVNJV1lHIGVkaXQgY29udHJvbF0oaHR0cHM6Ly9naXRodWIuY29tL2NvZGVkYW5jZS9qcXVlcnkuQXJlWW91U3VyZS9pc3N1ZXMvMTcpLg0KICogIE9uZSBzb2x1dGlvbiBpcyB0byBtYW51YWxseSB0cmlnZ2VyIGEgZm9ybSBjaGVjayBhcyBmb2xsb3dzOg0KICoNCiAqICAgJCgnI215LWZvcm0nKS50cmlnZ2VyKCdjaGVja2Zvcm0uYXJlWW91U3VyZScpOw0KICoNCiAqICBBcyBhbiBhbHRlcm5hdGl2ZSB0byB1c2luZyBldmVudHMsIHlvdSBjYW4gcGFzcyBpbiBhIGN1c3RvbSBjaGFuZ2UgDQogKiAgZnVuY3Rpb24uDQogKg0KICogICQoJyNteS1hZHYtZm9ybScpLmFyZVlvdVN1cmUoew0KICogICAgICAgY2hhbmdlOiBmdW5jdGlvbigpIHsNCiAqICAgICAgICAgICAgIC8vIEVuYWJsZSBzYXZlIGJ1dHRvbiBvbmx5IGlmIHRoZSBmb3JtIGlzIGRpcnR5LiBpLmUuIHNvbWV0aGluZyB0byBzYXZlLg0KICogICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2RpcnR5JykpIHsNCiAqICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPSJzdWJtaXQiXScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7DQogKiAgICAgICAgICAgICB9IGVsc2Ugew0KICogICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9InN1Ym1pdCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTsNCiAqICAgICAgICAgICAgIH0NCiAqICAgICAgICAgICB9DQogKiAgfSk7DQogKg0KICogIE1peGluZyBpbiB5b3VyIG93biBsb2dpYyBpbnRvIHRoZSB3YXJuaW5nLg0KICoNCiAqICAkKCcjbXktZm9ybScpLmFyZVlvdVN1cmUoIHsnc2lsZW50Jzp0cnVlfSApOw0KICogICQod2luZG93KS5vbignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oKSB7DQogKiAgICBpc1N1bmRheSA9ICgwID09IChuZXcgRGF0ZSgpKS5nZXREYXkoKSk7DQogKiAgICBpZiAoJCgnI215LWZvcm0nKS5oYXNDbGFzcygnZGlydHknKSAmJiBpc1N1bmRheSkgew0KICogICAgICAgIHJldHVybiAiQmVjYXVzZSBpdCdzIFN1bmRheSwgSSdsbCBiZSBuaWNlIGFuZCBsZXQgeW91IGtub3cgeW91IGZvcmdvdCB0byBzYXZlISI7DQogKiAgICB9DQogKiAgfQ0KICovDQooZnVuY3Rpb24oJCkgew0KICANCiAgJC5mbi5hcmVZb3VTdXJlID0gZnVuY3Rpb24ob3B0aW9ucykgew0KICAgICAgDQogICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoDQogICAgICB7DQogICAgICAgICdtZXNzYWdlJyA6ICdZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMhJywNCiAgICAgICAgJ2RpcnR5Q2xhc3MnIDogJ2RpcnR5JywNCiAgICAgICAgJ2NoYW5nZScgOiBudWxsLA0KICAgICAgICAnc2lsZW50JyA6IGZhbHNlLA0KICAgICAgICAnYWRkUmVtb3ZlRmllbGRzTWFya3NEaXJ0eScgOiBmYWxzZSwNCiAgICAgICAgJ2ZpZWxkRXZlbnRzJyA6ICdjaGFuZ2Uga2V5dXAgcHJvcGVydHljaGFuZ2UgaW5wdXQnLA0KICAgICAgICAvLyBzdWJGb3JtU2VsZWN0b3IgaGFzIGJlZW4gYWRkZWQgdG8gYWxsb3cgdGhlIHNlbGVjdGlvbiBvZiBvbmx5IGEgc3ViLWFyZWENCiAgICAgICAgLy8gb2YgdGhlIGZvcm0uICBUaGlzIHdhcyBuZWVkZWQgZm9yIHNjcmVlbnMgc3VjaCBhcyB3ZWJfbWV0YWRhdGFfZWRpdF9wYXJlbnQuanNwDQogICAgICAgIC8vIHdoZXJlIHdlIGhhdmUgYSBmb3JtIHRoYXQgY29udGFpbnMgYm90aCBlZGl0YWJsZSBmaWVsZHMgdGhhdCB3ZSBuZWVkIHRvIGNoZWNrDQogICAgICAgIC8vIGlmIHRoZXkgYXJlIGRpcnR5IChlLmcuIGlucHV0IGNoZWNrYm94ZXMsIHNlbGVjdCwgYW5kIHRleHRhcmVhIEhUTUwgZWxlbWVudHMpDQogICAgICAgIC8vIGFuZCBpbnB1dHMgdGhhdCBzdXBwb3J0IHRoZSBhY3Rpb24gbGlua3MgdGhhdCB3ZSBkbyBub3Qgd2FudCB0byBjaGVjayBpZiB0aGV5DQogICAgICAgIC8vIGFyZSBkaXJ0eSAoZS5nLiBpbnB1dCBjaGVja2JveGVzIGZvciBPcmRlciBXb3JrIEluc3RydWN0aW9ucywgT3JkZXIgTGluZXMsIGV0Yy4pLg0KICAgICAgICAvLyBBbHRob3VnaCBhcmUteW91LXN1cmUgYWxsb3dzIGlucHV0cyB0byBiZSBpZ25vcmVkIGlmIHRoZXkgaGF2ZSB0aGUgImF5cy1pZ25vcmUiDQogICAgICAgIC8vIGNsYXNzIG9yIHRoZSBkYXRhLWF5cy1pZ25vcmUtInRydWUiIGF0dHJpYnV0ZSwgd2Ugd291bGQgaGF2ZSB0byBtb2RpZnkgdGhlDQogICAgICAgIC8vIEpTRiBKYXZhIHJlbmRlcmluZyBjb2RlIHRvIGFkZCBhIGNsYXNzIG9yIGRhdGEgYXR0cmlidXRlLCB3aGljaCB3b3VsZCBiZSBhIGJpdA0KICAgICAgICAvLyBvZiBhIHBhaW4sIHNvIEkgYWRkZWQgdGhlIHN1YkZvcm1TZWxlY3Rvci4NCiAgICAgICAgLy8gVVNBR0U6ICBJdCBpcyBoaWdobHkgcmVjb21tZW5kZWQgdGhhdCB5b3UgdXNlIHRoZSBzdWJGb3JtU2VsZWN0b3Igd2l0aCBhIHN0YW5kYXJkDQogICAgICAgIC8vICAgICAgICAgQ1NTIHNlbGVjdG9yIHRvIGdhdGhlciBlbGVtZW50cyBmaXJzdCBzaW5jZSB0aGUgOmlucHV0IGpRdWVyeSBwc2V1ZG8NCiAgICAgICAgLy8gICAgICAgICBzZWxlY3RvciAodXNlZCBpbiB0aGUgZmllbGRTZWxlY3RvciB0byBmaWx0ZXIgb3V0IHN1Ym1pdCBhbmQgYnV0dG9uDQogICAgICAgIC8vICAgICAgICAgZWxlbWVudHMpIGlzIE5PVCBBIE5BVElWRSBCUk9XU0VSIFJPVVRJTkUsIHdoZXJlYXMgc3RhbmRhcmQgQ1NTIHNlbGVjdG9ycw0KICAgICAgICAvLyAgICAgICAgIHVzZSB0aGUgbmF0aXZlIGJyb3dzZXIgcm91dGluZXMgdG8gZmluZCB0aGUgZWxlbWVudHMgaW4gdGhlIGRvY3VtZW50IChzZWUNCiAgICAgICAgLy8gICAgICAgICB0aGUgalF1ZXJ5IGRvY3VtZW50YXRpb24gZm9yIHRoZSA6aW5wdXQgcHNldWRvIHNlbGVjdG9yKS4gIEFsdGhvdWdoIHRoZQ0KICAgICAgICAvLyAgICAgICAgIGZpZWxkU2VsZWN0b3IgdXNlcyB0aGUgOmlucHV0IHNlbGVjdG9yIHRvIGZpbHRlciBvdXQgc3VibWl0IGFuZCBidXR0b24NCiAgICAgICAgLy8gICAgICAgICBlbGVtZW50cywgeW91IGFyZSBvbmx5IHVzaW5nIGl0IG9uIHRoZSBzdWJzZXQgb2YgZWxlbWVudHMgc2VsZWN0ZWQgYnkNCiAgICAgICAgLy8gICAgICAgICB1c2luZyB0aGUgc3ViRm9ybVNlbGVjdG9yIHdpdGggYSBzdGFuZGFyZCAoaS5lLiBmYXN0KSBDU1Mgc2VsZWN0b3IuDQogICAgICAgIC8vICAgICAgICAgU2VlIHRoZSBkb2N1bWVudGF0aW9uIGFib3ZlIGZvciBhIHVzYWdlIGV4YW1wbGUuDQoJCSdzdWJGb3JtU2VsZWN0b3InIDogJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJywNCiAgICAgICAgJ2ZpZWxkU2VsZWN0b3InOiAiOmlucHV0Om5vdChpbnB1dFt0eXBlPXN1Ym1pdF0pOm5vdChpbnB1dFt0eXBlPWJ1dHRvbl0pIg0KICAgICAgfSwgb3B0aW9ucyk7DQoNCiAgICB2YXIgZ2V0VmFsdWUgPSBmdW5jdGlvbigkZmllbGQpIHsNCiAgICAgIGlmICgkZmllbGQuaGFzQ2xhc3MoJ2F5cy1pZ25vcmUnKQ0KICAgICAgICAgIHx8ICRmaWVsZC5oYXNDbGFzcygnYXlzSWdub3JlJykNCiAgICAgICAgICB8fCAkZmllbGQuYXR0cignZGF0YS1heXMtaWdub3JlJykNCiAgICAgICAgICB8fCAkZmllbGQuYXR0cignbmFtZScpID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQoNCiAgICAgIGlmICgkZmllbGQuaXMoJzpkaXNhYmxlZCcpKSB7DQogICAgICAgIHJldHVybiAnYXlzLWRpc2FibGVkJzsNCiAgICAgIH0NCg0KICAgICAgdmFyIHZhbDsNCiAgICAgIHZhciB0eXBlID0gJGZpZWxkLmF0dHIoJ3R5cGUnKTsNCiAgICAgIGlmICgkZmllbGQuaXMoJ3NlbGVjdCcpKSB7DQogICAgICAgIHR5cGUgPSAnc2VsZWN0JzsNCiAgICAgIH0NCg0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgIGNhc2UgJ2NoZWNrYm94JzoNCiAgICAgICAgY2FzZSAncmFkaW8nOg0KICAgICAgICAgIHZhbCA9ICRmaWVsZC5pcygnOmNoZWNrZWQnKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAnc2VsZWN0JzoNCiAgICAgICAgICB2YWwgPSAnJzsNCiAgICAgICAgICAkZmllbGQuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihvKSB7DQogICAgICAgICAgICB2YXIgJG9wdGlvbiA9ICQodGhpcyk7DQogICAgICAgICAgICBpZiAoJG9wdGlvbi5pcygnOnNlbGVjdGVkJykpIHsNCiAgICAgICAgICAgICAgdmFsICs9ICRvcHRpb24udmFsKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgdmFsID0gJGZpZWxkLnZhbCgpOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gdmFsOw0KICAgIH07DQoNCiAgICB2YXIgc3RvcmVPcmlnVmFsdWUgPSBmdW5jdGlvbigkZmllbGQpIHsNCiAgICAgICRmaWVsZC5kYXRhKCdheXMtb3JpZycsIGdldFZhbHVlKCRmaWVsZCkpOw0KICAgIH07DQoNCiAgICB2YXIgY2hlY2tGb3JtID0gZnVuY3Rpb24oZXZ0KSB7DQoNCiAgICAgIHZhciBpc0ZpZWxkRGlydHkgPSBmdW5jdGlvbigkZmllbGQpIHsNCiAgICAgICAgdmFyIG9yaWdWYWx1ZSA9ICRmaWVsZC5kYXRhKCdheXMtb3JpZycpOw0KICAgICAgICBpZiAodW5kZWZpbmVkID09PSBvcmlnVmFsdWUpIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIChnZXRWYWx1ZSgkZmllbGQpICE9IG9yaWdWYWx1ZSk7DQogICAgICB9Ow0KDQogICAgICB2YXIgJGZvcm0gPSAoJCh0aGlzKS5pcygnZm9ybScpKSANCiAgICAgICAgICAgICAgICAgICAgPyAkKHRoaXMpDQogICAgICAgICAgICAgICAgICAgIDogJCh0aGlzKS5wYXJlbnRzKCdmb3JtJyk7DQoNCiAgICAgIC8vIFRlc3Qgb24gdGhlIHRhcmdldCBmaXJzdCBhcyBpdCdzIHRoZSBtb3N0IGxpa2VseSB0byBiZSBkaXJ0eQ0KICAgICAgaWYgKGlzRmllbGREaXJ0eSgkKGV2dC50YXJnZXQpKSkgew0KICAgICAgICBzZXREaXJ0eVN0YXR1cygkZm9ybSwgdHJ1ZSk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHZhciBzdWJmb3JtSlEgPSAkKCRmb3JtKS5maW5kKHNldHRpbmdzLnN1YkZvcm1TZWxlY3Rvcik7DQoJICB2YXIgJGZpZWxkcyA9IHN1YmZvcm1KUS5maWx0ZXIoc2V0dGluZ3MuZmllbGRTZWxlY3Rvcik7DQoNCiAgICAgIGlmIChzZXR0aW5ncy5hZGRSZW1vdmVGaWVsZHNNYXJrc0RpcnR5KSB7ICAgICAgICAgICAgICANCiAgICAgICAgLy8gQ2hlY2sgaWYgZmllbGQgY291bnQgaGFzIGNoYW5nZWQNCiAgICAgICAgdmFyIG9yaWdDb3VudCA9ICRmb3JtLmRhdGEoImF5cy1vcmlnLWZpZWxkLWNvdW50Iik7DQogICAgICAgIGlmIChvcmlnQ291bnQgIT0gJGZpZWxkcy5sZW5ndGgpIHsNCiAgICAgICAgICBzZXREaXJ0eVN0YXR1cygkZm9ybSwgdHJ1ZSk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIEJydXRlIGZvcmNlIC0gY2hlY2sgZWFjaCBmaWVsZA0KICAgICAgdmFyIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICRmaWVsZHMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgJGZpZWxkID0gJCh0aGlzKTsNCiAgICAgICAgaWYgKGlzRmllbGREaXJ0eSgkZmllbGQpKSB7DQogICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBicmVhaw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIA0KICAgICAgc2V0RGlydHlTdGF0dXMoJGZvcm0sIGlzRGlydHkpOw0KICAgIH07DQoNCiAgICB2YXIgaW5pdEZvcm0gPSBmdW5jdGlvbigkZm9ybSkgew0KICAgICAgdmFyIHN1YmZvcm1KUSA9ICQoJGZvcm0pLmZpbmQoc2V0dGluZ3Muc3ViRm9ybVNlbGVjdG9yKTsNCgkgIHZhciBmaWVsZHNKUSA9IHN1YmZvcm1KUS5maWx0ZXIoc2V0dGluZ3MuZmllbGRTZWxlY3Rvcik7DQogICAgICAkKGZpZWxkc0pRKS5lYWNoKGZ1bmN0aW9uKCkgeyBzdG9yZU9yaWdWYWx1ZSgkKHRoaXMpKTsgfSk7DQogICAgICAkKGZpZWxkc0pRKS51bmJpbmQoc2V0dGluZ3MuZmllbGRFdmVudHMsIGNoZWNrRm9ybSk7DQogICAgICAkKGZpZWxkc0pRKS5iaW5kKHNldHRpbmdzLmZpZWxkRXZlbnRzLCBjaGVja0Zvcm0pOw0KICAgICAgJGZvcm0uZGF0YSgiYXlzLW9yaWctZmllbGQtY291bnQiLCAkKGZpZWxkc0pRKS5sZW5ndGgpOw0KICAgICAgc2V0RGlydHlTdGF0dXMoJGZvcm0sIGZhbHNlKTsNCiAgICB9Ow0KDQogICAgdmFyIHNldERpcnR5U3RhdHVzID0gZnVuY3Rpb24oJGZvcm0sIGlzRGlydHkpIHsNCiAgICAgIHZhciBjaGFuZ2VkID0gaXNEaXJ0eSAhPSAkZm9ybS5oYXNDbGFzcyhzZXR0aW5ncy5kaXJ0eUNsYXNzKTsNCiAgICAgICRmb3JtLnRvZ2dsZUNsYXNzKHNldHRpbmdzLmRpcnR5Q2xhc3MsIGlzRGlydHkpOw0KICAgICAgICANCiAgICAgIC8vIEZpcmUgY2hhbmdlIGV2ZW50IGlmIHJlcXVpcmVkDQogICAgICBpZiAoY2hhbmdlZCkgew0KICAgICAgICBpZiAoc2V0dGluZ3MuY2hhbmdlKSBzZXR0aW5ncy5jaGFuZ2UuY2FsbCgkZm9ybSwgJGZvcm0pOw0KDQogICAgICAgIGlmIChpc0RpcnR5KSAkZm9ybS50cmlnZ2VyKCdkaXJ0eS5hcmVZb3VTdXJlJywgWyRmb3JtXSk7DQogICAgICAgIGlmICghaXNEaXJ0eSkgJGZvcm0udHJpZ2dlcignY2xlYW4uYXJlWW91U3VyZScsIFskZm9ybV0pOw0KICAgICAgICAkZm9ybS50cmlnZ2VyKCdjaGFuZ2UuYXJlWW91U3VyZScsIFskZm9ybV0pOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICB2YXIgcmVzY2FuID0gZnVuY3Rpb24oKSB7DQogICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpOw0KICAgICAgdmFyIHN1YmZvcm1KUSA9ICQoJGZvcm0pLmZpbmQoc2V0dGluZ3Muc3ViRm9ybVNlbGVjdG9yKTsNCgkgIHZhciBmaWVsZHNKUSA9IHN1YmZvcm1KUS5maWx0ZXIoc2V0dGluZ3MuZmllbGRTZWxlY3Rvcik7DQogICAgICAkKGZpZWxkc0pRKS5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgJGZpZWxkID0gJCh0aGlzKTsNCiAgICAgICAgaWYgKCEkZmllbGQuZGF0YSgnYXlzLW9yaWcnKSkgew0KICAgICAgICAgIHN0b3JlT3JpZ1ZhbHVlKCRmaWVsZCk7DQogICAgICAgICAgJGZpZWxkLmJpbmQoc2V0dGluZ3MuZmllbGRFdmVudHMsIGNoZWNrRm9ybSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgd2hpbGUgd2UncmUgaGVyZQ0KICAgICAgJGZvcm0udHJpZ2dlcignY2hlY2tmb3JtLmFyZVlvdVN1cmUnKTsNCiAgICB9Ow0KDQogICAgdmFyIHJlaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgaW5pdEZvcm0oJCh0aGlzKSk7DQogICAgfQ0KDQoJCS8qDQoJCSAqIFRoZSBmb2xsb3dpbmcgc2VjdGlvbiBvZiBjb2RlIHdhcyBwcmVzZW50IGluIHRoZSBvcmlnaW5hbCBqUXVlcnkNCgkJICogYXJlLXlvdS1zdXJlIHBsdWdpbiBmaWxlIHNpbmNlIGl0IHdhcyBvcmlnaW5hbGx5IGRlc2lnbmVkIHRvIGJlIHVzZWQNCgkJICogYXMgYSBzaW1wbGUgZHJvcC1pbiBmaWxlIHRoYXQgdXNlZCB0aGUgT25CZWZvcmVVbmxvYWQgZXZlbnQgdG8NCgkJICogdHJpZ2dlciBpdHMgZnVuY3Rpb25hbGl0eS4gVGhpcyB1c2FnZSBpcyBub3Qgc3VpdGFibGUgZm9yIHRoZSBPcmRlcg0KCQkgKiBNZXRhZGF0YSBFZGl0IGZ1bmN0aW9uYWxpdHkgdGhhdCB3ZSBhcmUgY3VycmVudGx5IHVzaW5nIGFyZS15b3Utc3VyZQ0KCQkgKiBmb3Igc2luY2UgaXQgbGVhdmVzIHRoZSBwcm9ncmVzcyBib3ggZGlzcGxheWVkIGNvbnRpbnVhbGx5LiBIb3dldmVyLA0KCQkgKiBJIHRob3VnaHQgaXQgbWlnaHQgYmUgaGVscGZ1bCB0byBsZWF2ZSBpdCBpbiBzbyB0aGF0IGFueW9uZSBsb29raW5nDQoJCSAqIGF0IHRoZSBjb2RlIGNvdWxkIGdldCBhbiBpZGVhIG9mIGl0cyBvcmlnaW5hbCBkZXNpZ24gaW50ZW50aW9uLCB3aGljaA0KCQkgKiB3YXMgdG8gYmUgY2FsbGVkIHJpZ2h0IGJlZm9yZSB0aGUgcGFnZSB1bmxvYWRzLiBJdCBhbHNvIG1heSBiZSB1c2VmdWwNCgkJICogaW4gaXRzIG9yaWdpbmFsIGZ1bmN0aW9uYWxpdHkgc29tZXdoZXJlIGVsc2UgaW4gQW5peHRlcidzIGZyb250IGVuZA0KCQkgKiBjb2RlLg0KCQkgKi8NCiAgICANCiAgIC8vIGlmICghc2V0dGluZ3Muc2lsZW50ICYmICF3aW5kb3cuYXlzVW5sb2FkU2V0KSB7DQogICAvLyAgIHdpbmRvdy5heXNVbmxvYWRTZXQgPSB0cnVlOw0KICAgLy8gICAkKHdpbmRvdykuYmluZCgnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oKSB7DQogICAvLyAgICAgJGRpcnR5Rm9ybXMgPSAkKCJmb3JtIikuZmlsdGVyKCcuJyArIHNldHRpbmdzLmRpcnR5Q2xhc3MpOw0KICAgLy8gICAgIGlmICgkZGlydHlGb3Jtcy5sZW5ndGggPT0gMCkgew0KICAgLy8gICAgICAgcmV0dXJuOw0KICAgLy8gICAgIH0NCiAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBwcm9tcHRzIC0gc2VlbiBvbiBDaHJvbWUgYW5kIElFDQogICAvLyAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL21zaWV8Y2hyb21lLykpIHsNCiAgIC8vICAgICAgIGlmICh3aW5kb3cuYXlzSGFzUHJvbXB0ZWQpIHsNCiAgIC8vICAgICAgICAgcmV0dXJuOw0KICAgLy8gICAgICAgfQ0KICAgLy8gICAgICAgd2luZG93LmF5c0hhc1Byb21wdGVkID0gdHJ1ZTsNCiAgIC8vICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge3dpbmRvdy5heXNIYXNQcm9tcHRlZCA9IGZhbHNlO30sIDkwMCk7DQogICAvLyAgICAgfQ0KICAgLy8gICAgIHJldHVybiBzZXR0aW5ncy5tZXNzYWdlOw0KICAgLy8gICB9KTsNCiAgIC8vIH0NCg0KICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZWxlbSkgew0KICAgICAgaWYgKCEkKHRoaXMpLmlzKCdmb3JtJykpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTsNCiAgICAgICAgDQogICAgICAkZm9ybS5zdWJtaXQoZnVuY3Rpb24oKSB7DQogICAgICAgICRmb3JtLnJlbW92ZUNsYXNzKHNldHRpbmdzLmRpcnR5Q2xhc3MpOw0KICAgICAgfSk7DQogICAgICAkZm9ybS5iaW5kKCdyZXNldCcsIGZ1bmN0aW9uKCkgeyBzZXREaXJ0eVN0YXR1cygkZm9ybSwgZmFsc2UpOyB9KTsNCiAgICAgIC8vIEFkZCBhIGN1c3RvbSBldmVudHMNCiAgICAgICRmb3JtLmJpbmQoJ3Jlc2Nhbi5hcmVZb3VTdXJlJywgcmVzY2FuKTsNCiAgICAgICRmb3JtLmJpbmQoJ3JlaW5pdGlhbGl6ZS5hcmVZb3VTdXJlJywgcmVpbml0aWFsaXplKTsNCiAgICAgICRmb3JtLmJpbmQoJ2NoZWNrZm9ybS5hcmVZb3VTdXJlJywgY2hlY2tGb3JtKTsNCiAgICAgIGluaXRGb3JtKCRmb3JtKTsNCiAgICB9KTsNCiAgfTsNCn0pKGpRdWVyeSk7DQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="27" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/htmlLinkRenderer.js" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/htmlLinkRenderer.js" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="HTML" encodingType="ANSI" ordinal="13" startDateTime="2024-11-07T09:35:45.962+00:00" startTime="2271" endTime="2282" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="9" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="4053">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9odG1sTGlua1JlbmRlcmVyLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwczovL3FhLndteGJvbHQud2VzY29kaXN0LmNvbS93bXgvd2VsY29tZS5mYWNlcw0KVXNlci1BZ2VudDogTW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogZW4tdXMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBxYS53bXhib2x0Lndlc2NvZGlzdC5jb20NCkNvb2tpZTogc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWINCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>3792</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Mzc5Mg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogMzc5Mg0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>DQovLyBfXyAgICAgICAgX19fICAgIF9fX18gIF8gICBfIF9fXyBfICAgXyAgX19fXyANCi8vIFwgXCAgICAgIC8gLyBcICB8ICBfIFx8IFwgfCB8XyBffCBcIHwgfC8gX19ffA0KLy8gIFwgXCAvXCAvIC8gXyBcIHwgfF8pIHwgIFx8IHx8IHx8ICBcfCB8IHwgIF8gDQovLyAgIFwgViAgViAvIF9fXyBcfCAgXyA8fCB8XCAgfHwgfHwgfFwgIHwgfF98IHwNCi8vICAgIFxfL1xfL18vICAgXF9cX3wgXF9cX3wgXF98X19ffF98IFxffFxfX19ffA0KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQovLyBETyBOT1QgRURJVCBUSElTIEZJTEUNCi8vDQovLyBUaGUgc291cmNlZmlsZSBodG1sTGlua1JlbmRlcmVyLmpzIGluIFdNWCBpcyBhY3R1YWxseSBKU0Ygc291cmNlIGNvZGUuICBJdCB3YXMgY29waWVkIGludG8gV01YDQovLyB0byBmaXggYSBwcm9ibGVtIHdoZXJlIEpTRiB3b3VsZCBpbmNsdWRlIHRoZSBqYXZhIHNjcmlwdCBpbiB0aGUgZmlsZSBzdGF0aWNhbGx5IG9uIGV2ZXJ5IA0KLy8gcGFnZS4gIEJ5IGluY2x1ZGluZyB0aGlzIGZpbGUgaW4gV01YLCBKU0Ygd291bGQgc3RvcCBwdXR0aW5nIGl0IG9uIGV2ZXJ5IHBhZ2UsIGFuZA0KLy8gdGhhdCBhbGxvd2UgdGhlIGphdmFzY3JpcHQgdG8gYmUgY2FjaGVkIGluIHRoZSBicm93c2VyLiAgVGhpcyBpcyBhIGdvb2QgdGhpbmcNCi8vIHBhcnRpY3VsYXJseSB3aXRoIHJlc3BlY3QgdG8gdGhlIFJGIGRldmljZXMuDQovLw0KLy8gVW5mb3J0dW5hdGVseSwgb25jZSB0aGlzIGZpbGUgd2FzIHB1dCBpbiBXTVgsIGRldmVsb3BlcnMgc3RhcnRlZCBtYWtpbmcgV01YIHNwZWNpZmljDQovLyBjaGFuZ2VzIHRvIGl0LiAgVGhpcyBpcyBwcm9ibGVtYXRpYyBzaW5jZSB3aGVuZXZlciBKU0YgaXMgdXBncmFkZWQgdGhpcyBmaWxlDQovLyB3b3VsZCBuZWVkIHRvIGJlIHJlZnJlc2hlZCB3aXRoIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGUgZmlsZSwgYW5kIGFueSBXTVggDQovLyBjdXN0b21pemF0aW9ucyB3b3VsZCBuZWVkIHRvIGJlIGJyb3VnaHQgZm9yd2FyZC4gIEl0IGlzIGxpa2VseSB0aGF0IG5vIG9uZQ0KLy8gd2lsbCByZW1lbWJlciB0byBkbyB0aGlzIGluIHRoZSBmdXR1cmUuDQovLw0KLy8gVGhpcyBmaWxlIG5lZWRzIHRvIGJlIHJldmVydGVkIGJhY2sgdG8gaXQncyBvcmlnaW5hbCBzdGF0ZSBmcm9tIHRoZSBKU0YgZGlzdHJpYnV0aW9uLA0KLy8gYW5kIGFueSBXTVggc3BlY2lmaWMgY29kZSBuZWVkcyB0byBiZSBtb3ZlZCBlbHNld2hlcmUgb3IgaGFuZGxlZCBkaWZmZXJlbnRseS4NCi8vDQovLyBKSVJBIFdNWC03MzQ4IHdhcyBjcmVhdGVkIHRvIHRyYWNrIHRoaXMgcmUtZmFjdG9yaW5nLg0KDQogICAgZnVuY3Rpb24gb2FtU2V0SGlkZGVuSW5wdXQoZm9ybW5hbWUsIG5hbWUsIHZhbHVlKQ0KICAgIHsNCiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtbmFtZV07DQogICAgICAgIGlmKHR5cGVvZiBmb3JtLmVsZW1lbnRzW25hbWVdIT0ndW5kZWZpbmVkJyAmJiBmb3JtLmVsZW1lbnRzW25hbWVdLm5vZGVOYW1lPT0nSU5QVVQnKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3JtLmVsZW1lbnRzW25hbWVdLnZhbHVlPXZhbHVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG5ld0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsNCiAgICAgICAgICAgIG5ld0lucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsJ2hpZGRlbicpOw0KICAgICAgICAgICAgbmV3SW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsbmFtZSk7DQogICAgICAgICAgICBuZXdJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLG5hbWUpOw0KICAgICAgICAgICAgbmV3SW5wdXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsdmFsdWUpOw0KICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdJbnB1dCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb2FtQ2xlYXJIaWRkZW5JbnB1dChmb3JtbmFtZSwgbmFtZSwgdmFsdWUpDQogICAgew0KICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zW2Zvcm1uYW1lXTsNCiAgICAgICAgdmFyIGhJbnB1dCA9IGZvcm0uZWxlbWVudHNbbmFtZV07DQogICAgICAgIGlmKHR5cGVvZiBoSW5wdXQgIT0ndW5kZWZpbmVkJykNCiAgICAgICAgew0KICAgICAgICAgICAgaElucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaElucHV0KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvYW1TdWJtaXRGb3JtKGZvcm1OYW1lLCBsaW5rSWQsIHRhcmdldCwgcGFyYW1zKQ0KICAgIHsNCiAJDQogICAgCXZhciBjbGVhckZuID0gJ2NsZWFyRm9ybUhpZGRlblBhcmFtc18nK2Zvcm1OYW1lLnJlcGxhY2UoLy0vZywgJ1wkOicpLnJlcGxhY2UoLzovZywnXycpOw0KICAgICAgICBpZih0eXBlb2Ygd2luZG93W2NsZWFyRm5dID09J2Z1bmN0aW9uJykNCiAgICAgICAgew0KICAgICAgICAgICAgd2luZG93W2NsZWFyRm5dKGZvcm1OYW1lKTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zW2Zvcm1OYW1lXTsNCiAgICAgICAgdmFyIG9sZFRhcmdldCA9IGZvcm0udGFyZ2V0Ow0KICAgICAgICBpZih0YXJnZXQgIT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9ybS50YXJnZXQ9dGFyZ2V0Ow0KICAgICAgICB9DQogICAgICAgIGlmKCh0eXBlb2YgcGFyYW1zIT0ndW5kZWZpbmVkJykgJiYgcGFyYW1zICE9IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvcih2YXIgaT0wLCBwYXJhbTsgKHBhcmFtID0gcGFyYW1zW2ldKTsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG9hbVNldEhpZGRlbklucHV0KGZvcm1OYW1lLHBhcmFtWzBdLCBwYXJhbVsxXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgb2FtU2V0SGlkZGVuSW5wdXQoZm9ybU5hbWUsZm9ybU5hbWUgKyc6JysnX2lkY2wnLGxpbmtJZCk7DQogICAgICAgIGlmKGZvcm0ub25zdWJtaXQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQ9Zm9ybS5vbnN1Ym1pdCgpOw0KICAgICAgICAgICAgaWYoKHR5cGVvZiByZXN1bHQ9PSd1bmRlZmluZWQnKXx8cmVzdWx0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZm9ybS5zdWJtaXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2goZSl7fQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgDQogICAgICAgIHsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaChlKXt9DQogICAgICAgIH0NCiAgICAgICAgZm9ybS50YXJnZXQ9b2xkVGFyZ2V0Ow0KICAgICAgICBpZigodHlwZW9mIHBhcmFtcyE9J3VuZGVmaW5lZCcpICYmIHBhcmFtcyAhPSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IodmFyIGk9MCwgcGFyYW07IChwYXJhbSA9IHBhcmFtc1tpXSk7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBvYW1DbGVhckhpZGRlbklucHV0KGZvcm1OYW1lLHBhcmFtWzBdLCBwYXJhbVsxXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgb2FtQ2xlYXJIaWRkZW5JbnB1dChmb3JtTmFtZSxmb3JtTmFtZSArJzonKydfaWRjbCcsbGlua0lkKTtyZXR1cm4gZmFsc2U7DQogICAgfQ0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
      <HTTPTask id="28" hostname="qa.wmxbolt.wescodist.com" path="/wmx/image/emptyStar.png" url="https://qa.wmxbolt.wescodist.com/wmx/image/emptyStar.png" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8587" connectionId="2284" origin="HTML" encodingType="ANSI" ordinal="14" startDateTime="2024-11-07T09:35:45.970+00:00" startTime="2280" endTime="2287" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="5" waitTime="0" receiveTime="1" sslNegotiateTime="-1" responseBodySize="1290">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="Referer" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tdXM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Cookie" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC93bXgvaW1hZ2UvZW1wdHlTdGFyLnBuZyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXMNClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYjsgY3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
            <HTTPCookies>
              <HTTPHeaderEntity name="security.client.type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="currentLoginPage" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="JSESSIONID" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="security.client.type" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2Vi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
            </HTTPCookies>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>1042</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Date" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aW1hZ2UvcG5n</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Length" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTA0Mg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2VydmxldC8zLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-UA-Compatible" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SUU9OA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Last-Modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBpbWFnZS9wbmcNCkNvbnRlbnQtTGVuZ3RoOiAxMDQyDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpYLVBvd2VyZWQtQnk6IFNlcnZsZXQvMy4wDQpYLVVBLUNvbXBhdGlibGU6IElFPTgNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjQgT2N0IDIwMjQgMjA6MjY6NDQgR01UDQpDb250ZW50LUxhbmd1YWdlOiBlbi1VUw0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADxElEQVR4nO1Z3UtUQRQf+zLCIhKih0AKvXPuVmotUmZpUVAPgtCbUI/1H2RvUUjoS5CQD+FDUFL5kRQZlhUWld4zu+GLWPhgPfVgWpYVfXpi5uqy997ZdT+8tgt7YF72zvzO7zdz58xv7jKWi1zkwrcgATWysWwNEvCEBH/MsjEIoZIEkGqWuZ9lW5DgDyMCBDxg2RQUNndHkbdbyKhi2RKE/L5HgOC9LBuCwrCLEGa9AmQzKlimByHc1ZMHIoQ7LJODMFAee/aVgFmyIMgyNQj5bSdh/pQEf+YS0c0yMQjNbYTw10nWPETCPOxZhSGjlGVakIAOV9UZjDxDeO5amVssk4KGSkzv7PMjkedoHHWtguy7/f+QRSgkC/aQME+QgEZCfpMEjLsIomYcujb1+NzYRoUlMREKF4fkcNl6WbPJgnoScJYEtNsE+FTMCuMUUKsRUJvQWMGn5sS2q9yKg1EhOSUyuxcIYSKxRDEJDBOxPA82sTz1LB1shAnJMbaAcHANIe9PPQF/TyGjLiZ+yKhTfVLH75cc46/CQNFq6VtigPwhAW+lxyeEK2SZDSTgGFklZTQSKFhwiedzjAQK1Bghx5oNCktiKmyVQ7eyvZJboglWeQ4lG+Sjn36G7JP8gybvPRorzk8OrJMtJ4TrmmX8JO2yLyZQ8EnN7HdQOLgyNVApQsBVzWaalmVv0chbENRWOOQ3aKBmRXrgsnogv6wB/0ohfiBt8iGjigR81rw2bURsWbr40SJaNSJmCM3qlHHRrFYYXtxWXSlOX4TgFzXJvpHFDyaNFzb2kYAvS0LekVjwJs1G60seB/o0r02TP6zdyeXmciZuThpD8Gb3hvWHrS45QpcjuQX1SWPYPouiKluXP2x1yRHeOJKH+Y6kMYaMUpeA1/6w1VqN6OOe/451ShKCIZv22VhxvhobbVMStQppH/fOzTfq6WMVb1Z1XBFUrU3+5uknYNS5CoFy/wXYFxntu0uDgQ1zm/O7pjz+VKbt5daNkf4I3c5+xvElEOCpHudsGw5nlE9a2BLPKIwXfC0hP7/kZdRrtXlPSh5fjeE9bsvsvwDk7xIjKZ0lPz3XJhMU9c5f8lbxurhf3uZNnnxFou6w6gKjXjGYjj8WZmUO/wQIvjcOcXuTYmBT3C8asTa5iIio9FEAnNIQ/0XIr5FlbEkYR5VZaCGEHxoBJ/0U0OL6ONVJQ2ZJynivzCL7Phx1MCJcWlzWnj/t1Kw/ImHuXDRcKxBQk6H2l49/CioX6sN92PHX1FK60lzkgmV//AM7f1WAktwY2AAAAABJRU5ErkJggg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
      </HTTPTask>
    </HTTPTask>
  </HTTPTask>
  <HTTPTask id="29" hostname="qa.wmxbolt.wescodist.com" path="/wmx/javascript/jscookmenu/Click/arrow.gif" url="https://qa.wmxbolt.wescodist.com/wmx/javascript/jscookmenu/Click/arrow.gif" ip="10.238.200.5" port="443" client_ip="10.238.85.95" client_port="8586" connectionId="2240" origin="ExtraRes" encodingType="ANSI" ordinal="1" startDateTime="2024-11-07T09:35:45.973+00:00" startTime="2283" endTime="2289" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4" waitTime="1" receiveTime="0" sslNegotiateTime="-1" responseBodySize="311">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgVHJpZGVudC80LjA7IC5ORVQgQ0xSIDEuMS40MzIyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IEluZm9QYXRoLjE7IC5ORVQgQ0xSIDMuMC40NTA2LjIxNTI7IC5ORVQgQ0xSIDMuNS4zMDcyOSk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tdXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cWEud214Ym9sdC53ZXNjb2Rpc3QuY29t</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViOyBjdXJyZW50TG9naW5QYWdlPVdlYjsgSlNFU1NJT05JRD0wMDAwb3JSNnNHd3h3WlBZcnY5WnJscFdYc3k6MWhhN281N2NvOyBzZWN1cml0eS5jbGllbnQudHlwZT1XZWI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC93bXgvamF2YXNjcmlwdC9qc2Nvb2ttZW51L0NsaWNrL2Fycm93LmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9xYS53bXhib2x0Lndlc2NvZGlzdC5jb20vd214L3dlbGNvbWUuZmFjZXMNClVzZXItQWdlbnQ6IE1vemlsbGEvNC4wIChjb21wYXRpYmxlOyBNU0lFIDcuMDsgV2luZG93cyBOVCA1LjE7IFRyaWRlbnQvNC4wOyAuTkVUIENMUiAxLjEuNDMyMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyBJbmZvUGF0aC4xOyAuTkVUIENMUiAzLjAuNDUwNi4yMTUyOyAuTkVUIENMUiAzLjUuMzA3MjkpDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLXVzDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogcWEud214Ym9sdC53ZXNjb2Rpc3QuY29tDQpDb29raWU6IHNlY3VyaXR5LmNsaWVudC50eXBlPVdlYjsgY3VycmVudExvZ2luUGFnZT1XZWI7IEpTRVNTSU9OSUQ9MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbzsgc2VjdXJpdHkuY2xpZW50LnR5cGU9V2ViDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="security.client.type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2Vi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="currentLoginPage" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2Vi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MDAwMG9yUjZzR3d4d1pQWXJ2OVpybHBXWHN5OjFoYTdvNTdjbw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="security.client.type" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2Vi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>65</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwNyBOb3YgMjAyNCAwOTozNTo0NSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2VydmxldC8zLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-UA-Compatible" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SUU9OA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyNCBPY3QgMjAyNCAyMDoyNjo0NCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Language" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDA3IE5vdiAyMDI0IDA5OjM1OjQ1IEdNVA0KQ29udGVudC1UeXBlOiBpbWFnZS9naWYNCkNvbnRlbnQtTGVuZ3RoOiA2NQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1Qb3dlcmVkLUJ5OiBTZXJ2bGV0LzMuMA0KWC1VQS1Db21wYXRpYmxlOiBJRT04DQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI0IE9jdCAyMDI0IDIwOjI2OjQ0IEdNVA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlhEwAQAIAAAAAAAP///yH5BAEAAAEALAAAAAATABAAAAIYjI+py+0Po0RgHlAtznJzuGlfNFrmiSYFADs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>